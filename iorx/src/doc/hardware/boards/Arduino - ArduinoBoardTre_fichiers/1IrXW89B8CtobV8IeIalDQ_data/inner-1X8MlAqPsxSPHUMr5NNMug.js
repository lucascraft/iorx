(function(){var namespace="StripeCheckout.require".split("."),name=namespace[namespace.length-1],base=this,i;for(i=0;i<namespace.length-1;i++){base=base[namespace[i]]=base[namespace[i]]||{}}if(base[name]===undefined){base[name]=function(){var modules={},cache={};var requireRelative=function(name,root){var path=expand(root,name),indexPath=expand(path,"./index"),module,fn;module=cache[path]||cache[indexPath];if(module){return module}else if(fn=modules[path]||modules[path=indexPath]){module={id:path,exports:{}};cache[path]=module.exports;fn(module.exports,function(name){return require(name,dirname(path))},module);return cache[path]=module.exports}else{throw"module "+name+" not found"}};var expand=function(root,name){var results=[],parts,part;if(/^\.\.?(\/|$)/.test(name)){parts=[root,name].join("/").split("/")}else{parts=name.split("/")}for(var i=0,length=parts.length;i<length;i++){part=parts[i];if(part==".."){results.pop()}else if(part!="."&&part!=""){results.push(part)}}return results.join("/")};var dirname=function(path){return path.split("/").slice(0,-1).join("/")};var require=function(name){return requireRelative(name,"")};require.define=function(bundle){for(var key in bundle){modules[key]=bundle[key]}};require.modules=modules;require.cache=cache;return require}.call()}})();StripeCheckout.require.define({"vendor/fastdom":function(exports,require,module){(function(fastdom){"use strict";var raf=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(cb){return window.setTimeout(cb,1e3/60)};var caf=window.cancelAnimationFrame||window.cancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||function(id){window.clearTimeout(id)};function FastDom(){this.frames=[];this.lastId=0;this.raf=raf;this.batch={hash:{},read:[],write:[],mode:null}}FastDom.prototype.read=function(fn,ctx){var job=this.add("read",fn,ctx);var id=job.id;this.batch.read.push(job.id);var doesntNeedFrame=this.batch.mode==="reading"||this.batch.scheduled;if(doesntNeedFrame)return id;this.scheduleBatch();return id};FastDom.prototype.write=function(fn,ctx){var job=this.add("write",fn,ctx);var mode=this.batch.mode;var id=job.id;this.batch.write.push(job.id);var doesntNeedFrame=mode==="writing"||mode==="reading"||this.batch.scheduled;if(doesntNeedFrame)return id;this.scheduleBatch();return id};FastDom.prototype.defer=function(frame,fn,ctx){if(typeof frame==="function"){ctx=fn;fn=frame;frame=1}var self=this;var index=frame-1;return this.schedule(index,function(){self.run({fn:fn,ctx:ctx})})};FastDom.prototype.clear=function(id){if(typeof id==="function"){return this.clearFrame(id)}var job=this.batch.hash[id];if(!job)return;var list=this.batch[job.type];var index=list.indexOf(id);delete this.batch.hash[id];if(~index)list.splice(index,1)};FastDom.prototype.clearFrame=function(frame){var index=this.frames.indexOf(frame);if(~index)this.frames.splice(index,1)};FastDom.prototype.scheduleBatch=function(){var self=this;this.schedule(0,function(){self.batch.scheduled=false;self.runBatch()});this.batch.scheduled=true};FastDom.prototype.uniqueId=function(){return++this.lastId};FastDom.prototype.flush=function(list){var id;while(id=list.shift()){this.run(this.batch.hash[id])}};FastDom.prototype.runBatch=function(){try{this.batch.mode="reading";this.flush(this.batch.read);this.batch.mode="writing";this.flush(this.batch.write);this.batch.mode=null}catch(e){this.runBatch();throw e}};FastDom.prototype.add=function(type,fn,ctx){var id=this.uniqueId();return this.batch.hash[id]={id:id,fn:fn,ctx:ctx,type:type}};FastDom.prototype.run=function(job){var ctx=job.ctx||this;var fn=job.fn;delete this.batch.hash[job.id];if(!this.onError){return fn.call(ctx)}try{fn.call(ctx)}catch(e){this.onError(e)}};FastDom.prototype.loop=function(){var self=this;var raf=this.raf;if(this.looping)return;raf(function frame(){var fn=self.frames.shift();if(!self.frames.length){self.looping=false}else{raf(frame)}if(fn)fn()});this.looping=true};FastDom.prototype.schedule=function(index,fn){if(this.frames[index]){return this.schedule(index+1,fn)}this.loop();return this.frames[index]=fn};fastdom=fastdom||new FastDom;if(typeof module!=="undefined"&&module.exports){module.exports=fastdom}else if(typeof define==="function"&&define.amd){define(function(){return fastdom})}else{window["fastdom"]=fastdom}})(window.fastdom)}});(function(global,factory){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=global.document?factory(global,true):function(w){if(!w.document){throw new Error("jQuery requires a window with a document")}return factory(w)}}else{factory(global)}})(typeof window!=="undefined"?window:this,function(window,noGlobal){var deletedIds=[];var slice=deletedIds.slice;var concat=deletedIds.concat;var push=deletedIds.push;var indexOf=deletedIds.indexOf;var class2type={};var toString=class2type.toString;var hasOwn=class2type.hasOwnProperty;var support={};var version="1.11.1",jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(num){return num!=null?num<0?this[num+this.length]:this[num]:slice.call(this)},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;return ret},each:function(callback,args){return jQuery.each(this,callback,args)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:deletedIds.sort,splice:deletedIds.splice};jQuery.extend=jQuery.fn.extend=function(){var src,copyIsArray,copy,name,options,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++}if(typeof target!=="object"&&!jQuery.isFunction(target)){target={}}if(i===length){target=this;i--}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[]}else{clone=src&&jQuery.isPlainObject(src)?src:{}}target[name]=jQuery.extend(deep,clone,copy)}else if(copy!==undefined){target[name]=copy}}}}return target};jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:true,error:function(msg){throw new Error(msg)},noop:function(){},isFunction:function(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray||function(obj){return jQuery.type(obj)==="array"},isWindow:function(obj){return obj!=null&&obj==obj.window},isNumeric:function(obj){return!jQuery.isArray(obj)&&obj-parseFloat(obj)>=0},isEmptyObject:function(obj){var name;for(name in obj){return false}return true},isPlainObject:function(obj){var key;if(!obj||jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false}try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false}}catch(e){return false}if(support.ownLast){for(key in obj){return hasOwn.call(obj,key)}}for(key in obj){}return key===undefined||hasOwn.call(obj,key)},type:function(obj){if(obj==null){return obj+""}return typeof obj==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(data){if(data&&jQuery.trim(data)){(window.execScript||function(data){window["eval"].call(window,data)})(data)}},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray){for(;i<length;i++){value=callback.apply(obj[i],args);if(value===false){break}}}else{for(i in obj){value=callback.apply(obj[i],args);if(value===false){break}}}}else{if(isArray){for(;i<length;i++){value=callback.call(obj[i],i,obj[i]);if(value===false){break}}}else{for(i in obj){value=callback.call(obj[i],i,obj[i]);if(value===false){break}}}}return obj},trim:function(text){return text==null?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];if(arr!=null){if(isArraylike(Object(arr))){jQuery.merge(ret,typeof arr==="string"?[arr]:arr)}else{push.call(ret,arr)}}return ret},inArray:function(elem,arr,i){var len;if(arr){if(indexOf){return indexOf.call(arr,elem,i)}len=arr.length;i=i?i<0?Math.max(0,len+i):i:0;for(;i<len;i++){if(i in arr&&arr[i]===elem){return i}}}return-1},merge:function(first,second){var len=+second.length,j=0,i=first.length;while(j<len){first[i++]=second[j++]}if(len!==len){while(second[j]!==undefined){first[i++]=second[j++]}}first.length=i;return first},grep:function(elems,callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;for(;i<length;i++){callbackInverse=!callback(elems[i],i);if(callbackInverse!==callbackExpect){matches.push(elems[i])}}return matches},map:function(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray){for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}else{for(i in elems){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}return concat.apply([],ret)},guid:1,proxy:function(fn,context){var args,proxy,tmp;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp}if(!jQuery.isFunction(fn)){return undefined}args=slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy},now:function(){return+new Date},support:support});jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);if(type==="function"||jQuery.isWindow(obj)){return false}if(obj.nodeType===1&&length){return true}return type==="array"||length===0||typeof length==="number"&&length>0&&length-1 in obj}var Sizzle=function(window){var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+-new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){if(a===b){hasDuplicate=true}return 0},strundefined=typeof undefined,MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=arr.indexOf||function(elem){var i=0,len=this.length;for(;i<len;i++){if(this[i]===elem){return i}}return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|"+".*"+")\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,high&1023|56320)};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){var j=target.length,i=0;while(target[j++]=els[i++]){}target.length=j-1}}}function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document){setDocument(context)}context=context||document;results=results||[];if(!selector||typeof selector!=="string"){return results}if((nodeType=context.nodeType)!==1&&nodeType!==9){return[]}if(documentIsHTML&&!seed){if(match=rquickExpr.exec(selector)){if(m=match[1]){if(nodeType===9){elem=context.getElementById(m);if(elem&&elem.parentNode){if(elem.id===m){results.push(elem);return results}}else{return results}}else{if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results}}}else if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results}else if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName){push.apply(results,context.getElementsByClassName(m));return results}}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){nid=old=expando;newContext=context;newSelector=nodeType===9&&selector;if(nodeType===1&&context.nodeName.toLowerCase()!=="object"){groups=tokenize(selector);if(old=context.getAttribute("id")){nid=old.replace(rescape,"\\$&")}else{context.setAttribute("id",nid)}nid="[id='"+nid+"'] ";i=groups.length;while(i--){groups[i]=nid+toSelector(groups[i])}newContext=rsibling.test(selector)&&testContext(context.parentNode)||context;newSelector=groups.join(",")}if(newSelector){try{push.apply(results,newContext.querySelectorAll(newSelector));return results}catch(qsaError){}finally{if(!old){context.removeAttribute("id")}}}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){var keys=[];function cache(key,value){if(keys.push(key+" ")>Expr.cacheLength){delete cache[keys.shift()]}return cache[key+" "]=value}return cache}function markFunction(fn){fn[expando]=true;return fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return false}finally{if(div.parentNode){div.parentNode.removeChild(div)}div=null}}function addHandle(attrs,handler){var arr=attrs.split("|"),i=attrs.length;while(i--){Expr.attrHandle[arr[i]]=handler}}function siblingCheck(a,b){var cur=b&&a,diff=cur&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff){return diff}if(cur){while(cur=cur.nextSibling){if(cur===b){return-1}}}return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[j=matchIndexes[i]]){seed[j]=!(matches[j]=seed[j])}}})})}function testContext(context){return context&&typeof context.getElementsByTagName!==strundefined&&context}support=Sizzle.support={};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};setDocument=Sizzle.setDocument=function(node){var hasCompare,doc=node?node.ownerDocument||node:preferredDoc,parent=doc.defaultView;if(doc===document||doc.nodeType!==9||!doc.documentElement){return document}document=doc;docElem=doc.documentElement;documentIsHTML=!isXML(doc);if(parent&&parent!==parent.top){if(parent.addEventListener){parent.addEventListener("unload",function(){setDocument()},false)}else if(parent.attachEvent){parent.attachEvent("onunload",function(){setDocument()})}}support.attributes=assert(function(div){div.className="i";return!div.getAttribute("className")});support.getElementsByTagName=assert(function(div){div.appendChild(doc.createComment(""));return!div.getElementsByTagName("*").length});support.getElementsByClassName=rnative.test(doc.getElementsByClassName)&&assert(function(div){div.innerHTML="<div class='a'></div><div class='a i'></div>";div.firstChild.className="i";return div.getElementsByClassName("i").length===2});support.getById=assert(function(div){docElem.appendChild(div).id=expando;return!doc.getElementsByName||!doc.getElementsByName(expando).length});if(support.getById){Expr.find["ID"]=function(id,context){if(typeof context.getElementById!==strundefined&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}};Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}}else{delete Expr.find["ID"];Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===attrId}}}Expr.find["TAG"]=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!==strundefined){return context.getElementsByTagName(tag)}}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag==="*"){while(elem=results[i++]){if(elem.nodeType===1){tmp.push(elem)}}return tmp}return results};Expr.find["CLASS"]=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!==strundefined&&documentIsHTML){return context.getElementsByClassName(className)}};rbuggyMatches=[];rbuggyQSA=[];if(support.qsa=rnative.test(doc.querySelectorAll)){assert(function(div){div.innerHTML="<select msallowclip=''><option selected=''></option></select>";if(div.querySelectorAll("[msallowclip^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")")}if(!div.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")")}if(!div.querySelectorAll(":checked").length){rbuggyQSA.push(":checked")}});assert(function(div){var input=doc.createElement("input");input.setAttribute("type","hidden");div.appendChild(input).setAttribute("name","D");if(div.querySelectorAll("[name=d]").length){rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?=")}if(!div.querySelectorAll(":enabled").length){rbuggyQSA.push(":enabled",":disabled")}div.querySelectorAll("*,:x");rbuggyQSA.push(",.*:")})}if(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector)){assert(function(div){support.disconnectedMatch=matches.call(div,"div");matches.call(div,"[s!='']:x");rbuggyMatches.push("!=",pseudos)})}rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));hasCompare=rnative.test(docElem.compareDocumentPosition);contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16))}:function(a,b){if(b){while(b=b.parentNode){if(b===a){return true}}}return false};sortOrder=hasCompare?function(a,b){if(a===b){hasDuplicate=true;return 0}var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;if(compare){return compare}compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(compare&1||!support.sortDetached&&b.compareDocumentPosition(a)===compare){if(a===doc||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)){return-1}if(b===doc||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)){return 1}return sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0}return compare&4?-1:1}:function(a,b){if(a===b){hasDuplicate=true;return 0}var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup){return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0}else if(aup===bup){return siblingCheck(a,b)}cur=a;while(cur=cur.parentNode){ap.unshift(cur)}cur=b;while(cur=cur.parentNode){bp.unshift(cur)}while(ap[i]===bp[i]){i++}return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0};return doc};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document){setDocument(elem)}expr=expr.replace(rattributeQuotes,"='$1']");if(support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret}}catch(e){}}return Sizzle(expr,document,null,[elem]).length>0};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document){setDocument(context)}return contains(context,elem)};Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document){setDocument(elem)}var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val!==undefined?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;hasDuplicate=!support.detectDuplicates;sortInput=!support.sortStable&&results.slice(0);results.sort(sortOrder);if(hasDuplicate){while(elem=results[i++]){if(elem===results[i]){j=duplicates.push(i)}}while(j--){results.splice(duplicates[j],1)}}sortInput=null;return results};getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType){while(node=elem[i++]){ret+=getText(node)}}else if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem)}}}else if(nodeType===3||nodeType===4){return elem.nodeValue}return ret};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~="){match[3]=" "+match[3]+" "}return match.slice(0,4)},CHILD:function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3]){Sizzle.error(match[0])}match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+(match[7]+match[8]||match[3]==="odd")}else if(match[3]){Sizzle.error(match[0])}return match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];if(matchExpr["CHILD"].test(match[0])){return null}if(match[3]){match[2]=match[4]||match[5]||""}else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess)}return match.slice(0,3)}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector==="*"?function(){return true}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null){return operator==="!="}if(!operator){return true}result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.slice(-check.length)===check:operator==="~="?(" "+result+" ").indexOf(check)>-1:operator==="|="?result===check||result.slice(0,check.length+1)===check+"-":false}},CHILD:function(type,what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){while(dir){node=elem;while(node=node[dir]){if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1){return false}}start=dir=type==="only"&&!start&&"nextSibling"}return true}start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){outerCache=parent[expando]||(parent[expando]={});cache=outerCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=cache[0]===dirruns&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop()){if(node.nodeType===1&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns){diff=cache[1]}else{while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop()){if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache){(node[expando]||(node[expando]={}))[type]=[dirruns,diff]}if(node===elem){break}}}}diff-=last;return diff===first||diff%first===0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument)}if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf.call(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i])}}):function(elem){return fn(elem,0,args)}}return fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if(elem=unmatched[i]){seed[i]=!(matches[i]=elem)}}}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);return!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){if(!ridentifier.test(lang||"")){Sizzle.error("unsupported lang: "+lang)}lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang")){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0}}while((elem=elem.parentNode)&&elem.nodeType===1);return false}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return elem.disabled===false},disabled:function(elem){return elem.disabled===true},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return nodeName==="input"&&!!elem.checked||nodeName==="option"&&!!elem.selected},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex}return elem.selected===true},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling){if(elem.nodeType<6){return false}}return true},parent:function(elem){return!Expr.pseudos["empty"](elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button"},text:function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()==="text")},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;){matchIndexes.push(i)}return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;){matchIndexes.push(i)}return matchIndexes})}};Expr.pseudos["nth"]=Expr.pseudos["eq"];for(i in{radio:true,checkbox:true,file:true,password:true,image:true}){Expr.pseudos[i]=createInputPseudo(i)}for(i in{submit:true,reset:true}){Expr.pseudos[i]=createButtonPseudo(i)}function setFilters(){}setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters;tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];
if(cached){return parseOnly?0:cached.slice(0)}soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar}groups.push(tokens=[])}matched=false;if(match=rcombinators.exec(soFar)){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length)}for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length)}}if(!matched){break}}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)};function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++){selector+=tokens[i].value}return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){return matcher(elem,context,xml)}}}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml){while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){if(matcher(elem,context,xml)){return true}}}}else{while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});if((oldCache=outerCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName){return newCache[2]=oldCache[2]}else{outerCache[dir]=newCache;if(newCache[2]=matcher(elem,context,xml)){return true}}}}}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false}}return true}:matchers[0]}function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results)}return results}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if(elem=unmatched[i]){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i)}}}}return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter)}if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector)}return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher){matcher(matcherIn,matcherOut,context,xml)}if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--){if(elem=temp[i]){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem)}}}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--){if(elem=matcherOut[i]){temp.push(matcherIn[i]=elem)}}postFinder(null,matcherOut=[],temp,xml)}i=matcherOut.length;while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem)}}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml)}else{push.apply(results,matcherOut)}}})}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1},implicitRelative,true),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];for(;i<len;i++){if(matcher=Expr.relative[tokens[i].type]){matchers=[addCombinator(elementMatcher(matchers),matcher)]}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break}}return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===" "?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",outermost),dirrunsUnique=dirruns+=contextBackup==null?1:Math.random()||.1,len=elems.length;if(outermost){outermostContext=context!==document&&context}for(;i!==len&&(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;while(matcher=elementMatchers[j++]){if(matcher(elem,context,xml)){results.push(elem);break}}if(outermost){dirruns=dirrunsUnique}}if(bySet){if(elem=!matcher&&elem){matchedCount--}if(seed){unmatched.push(elem)}}}matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while(matcher=setMatchers[j++]){matcher(unmatched,setMatched,context,xml)}if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results)}}}setMatched=condense(setMatched)}push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1){Sizzle.uniqueSort(results)}}if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup}return unmatched};return bySet?markFunction(superMatcher):superMatcher}compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!match){match=tokenize(selector)}i=match.length;while(i--){cached=matcherFromTokens(match[i]);if(cached[expando]){setMatchers.push(cached)}else{elementMatchers.push(cached)}}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));cached.selector=selector}return cached};select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled=typeof selector==="function"&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);results=results||[];if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&support.getById&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=(Expr.find["ID"](token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context){return results}else if(compiled){context=context.parentNode}selector=selector.slice(tokens.shift().value.length)}i=matchExpr["needsContext"].test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[type=token.type]){break}if(find=Expr.find[type]){if(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context)){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,seed);return results}break}}}}(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context);return results};support.sortStable=expando.split("").sort(sortOrder).join("")===expando;support.detectDuplicates=!!hasDuplicate;setDocument();support.sortDetached=assert(function(div1){return div1.compareDocumentPosition(document.createElement("div"))&1});if(!assert(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild.getAttribute("href")==="#"})){addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML){return elem.getAttribute(name,name.toLowerCase()==="type"?1:2)}})}if(!support.attributes||!assert(function(div){div.innerHTML="<input/>";div.firstChild.setAttribute("value","");return div.firstChild.getAttribute("value")===""})){addHandle("value",function(elem,name,isXML){if(!isXML&&elem.nodeName.toLowerCase()==="input"){return elem.defaultValue}})}if(!assert(function(div){return div.getAttribute("disabled")==null})){addHandle(booleans,function(elem,name,isXML){var val;if(!isXML){return elem[name]===true?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null}})}return Sizzle}(window);jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext;var rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/;var risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not})}if(qualifier.nodeType){return jQuery.grep(elements,function(elem){return elem===qualifier!==not})}if(typeof qualifier==="string"){if(risSimple.test(qualifier)){return jQuery.filter(qualifier,elements,not)}qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return jQuery.inArray(elem,qualifier)>=0!==not})}jQuery.filter=function(expr,elems,not){var elem=elems[0];if(not){expr=":not("+expr+")"}return elems.length===1&&elem.nodeType===1?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1}))};jQuery.fn.extend({find:function(selector){var i,ret=[],self=this,len=self.length;if(typeof selector!=="string"){return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++){if(jQuery.contains(self[i],this)){return true}}}))}for(i=0;i<len;i++){jQuery.find(selector,self[i],ret)}ret=this.pushStack(len>1?jQuery.unique(ret):ret);ret.selector=this.selector?this.selector+" "+selector:selector;return ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],false))},not:function(selector){return this.pushStack(winnow(this,selector||[],true))},is:function(selector){return!!winnow(this,typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length}});var rootjQuery,document=window.document,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(selector,context){var match,elem;if(!selector){return this}if(typeof selector==="string"){if(selector.charAt(0)==="<"&&selector.charAt(selector.length-1)===">"&&selector.length>=3){match=[null,selector,null]}else{match=rquickExpr.exec(selector)}if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){for(match in context){if(jQuery.isFunction(this[match])){this[match](context[match])}else{this.attr(match,context[match])}}}return this}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){if(elem.id!==match[2]){return rootjQuery.find(selector)}this.length=1;this[0]=elem}this.context=document;this.selector=selector;return this}}else if(!context||context.jquery){return(context||rootjQuery).find(selector)}else{return this.constructor(context).find(selector)}}else if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this}else if(jQuery.isFunction(selector)){return typeof rootjQuery.ready!=="undefined"?rootjQuery.ready(selector):selector(jQuery)}if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context}return jQuery.makeArray(selector,this)};init.prototype=jQuery.fn;rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.extend({dir:function(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!jQuery(cur).is(until))){if(cur.nodeType===1){matched.push(cur)}cur=cur[dir]}return matched},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){r.push(n)}}return r}});jQuery.fn.extend({has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter(function(){for(i=0;i<len;i++){if(jQuery.contains(this,targets[i])){return true}}})},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(;i<l;i++){for(cur=this[i];cur&&cur!==context;cur=cur.parentNode){if(cur.nodeType<11&&(pos?pos.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}}}return this.pushStack(matched.length>1?jQuery.unique(matched):matched)},index:function(elem){if(!elem){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof elem==="string"){return jQuery.inArray(this[0],jQuery(elem))}return jQuery.inArray(elem.jquery?elem[0]:elem,this)},add:function(selector,context){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}});function sibling(cur,dir){do{cur=cur[dir]}while(cur&&cur.nodeType!==1);return cur}jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);if(name.slice(-5)!=="Until"){selector=until}if(selector&&typeof selector==="string"){ret=jQuery.filter(selector,ret)}if(this.length>1){if(!guaranteedUnique[name]){ret=jQuery.unique(ret)}if(rparentsprev.test(name)){ret=ret.reverse()}}return this.pushStack(ret)}});var rnotwhite=/\S+/g;var optionsCache={};function createOptions(options){var object=optionsCache[options]={};jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=true});return object}jQuery.Callbacks=function(options){options=typeof options==="string"?optionsCache[options]||createOptions(options):jQuery.extend({},options);var firing,memory,fired,firingLength,firingIndex,firingStart,list=[],stack=!options.once&&[],fire=function(data){memory=options.memory&&data;fired=true;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;firing=true;for(;list&&firingIndex<firingLength;firingIndex++){if(list[firingIndex].apply(data[0],data[1])===false&&options.stopOnFalse){memory=false;break}}firing=false;if(list){if(stack){if(stack.length){fire(stack.shift())}}else if(memory){list=[]}else{self.disable()}}},self={add:function(){if(list){var start=list.length;(function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);if(type==="function"){if(!options.unique||!self.has(arg)){list.push(arg)}}else if(arg&&arg.length&&type!=="string"){add(arg)}})})(arguments);if(firing){firingLength=list.length}else if(memory){firingStart=start;fire(memory)}}return this},remove:function(){if(list){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(firing){if(index<=firingLength){firingLength--}if(index<=firingIndex){firingIndex--}}}})}return this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:!!(list&&list.length)},empty:function(){list=[];firingLength=0;return this},disable:function(){list=stack=memory=undefined;return this},disabled:function(){return!list},lock:function(){stack=undefined;if(!memory){self.disable()}return this},locked:function(){return!stack},fireWith:function(context,args){if(list&&(!fired||stack)){args=args||[];args=[context,args.slice?args.slice():args];if(firing){stack.push(args)}else{fire(args)}}return this},fire:function(){self.fireWith(this,arguments);return this},fired:function(){return!!fired}};return self};jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){deferred.done(arguments).fail(arguments);return this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify)}else{newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)}})});fns=null}).promise()},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise}},deferred={};promise.pipe=promise.then;jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString},tuples[i^1][2].disable,tuples[2][2].lock)}deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?promise:this,arguments);return this};deferred[tuple[0]+"With"]=list.fireWith});promise.promise(deferred);if(func){func.call(deferred,deferred)}return deferred},when:function(subordinate){var i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=length!==1||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?slice.call(arguments):value;if(values===progressValues){deferred.notifyWith(contexts,values)}else if(!--remaining){deferred.resolveWith(contexts,values)}}},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++){if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)){resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues))}else{--remaining}}}if(!remaining){deferred.resolveWith(resolveContexts,resolveValues)}return deferred.promise()}});var readyList;jQuery.fn.ready=function(fn){jQuery.ready.promise().done(fn);return this};jQuery.extend({isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++}else{jQuery.ready(true)}},ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return}if(!document.body){return setTimeout(jQuery.ready)}jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return}readyList.resolveWith(document,[jQuery]);if(jQuery.fn.triggerHandler){jQuery(document).triggerHandler("ready");jQuery(document).off("ready")}}});function detach(){if(document.addEventListener){document.removeEventListener("DOMContentLoaded",completed,false);window.removeEventListener("load",completed,false)}else{document.detachEvent("onreadystatechange",completed);window.detachEvent("onload",completed)}}function completed(){if(document.addEventListener||event.type==="load"||document.readyState==="complete"){detach();jQuery.ready()}}jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if(document.readyState==="complete"){setTimeout(jQuery.ready)}else if(document.addEventListener){document.addEventListener("DOMContentLoaded",completed,false);window.addEventListener("load",completed,false)}else{document.attachEvent("onreadystatechange",completed);window.attachEvent("onload",completed);var top=false;try{top=window.frameElement==null&&document.documentElement}catch(e){}if(top&&top.doScroll){(function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left")}catch(e){return setTimeout(doScrollCheck,50)}detach();jQuery.ready()}})()}}}return readyList.promise(obj)};var strundefined=typeof undefined;var i;for(i in jQuery(support)){break}support.ownLast=i!=="0";support.inlineBlockNeedsLayout=false;jQuery(function(){var val,div,body,container;body=document.getElementsByTagName("body")[0];if(!body||!body.style){return}div=document.createElement("div");container=document.createElement("div");container.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";body.appendChild(container).appendChild(div);if(typeof div.style.zoom!==strundefined){div.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1";support.inlineBlockNeedsLayout=val=div.offsetWidth===3;if(val){body.style.zoom=1}}body.removeChild(container)});(function(){var div=document.createElement("div");if(support.deleteExpando==null){support.deleteExpando=true;try{delete div.test}catch(e){support.deleteExpando=false}}div=null})();jQuery.acceptData=function(elem){var noData=jQuery.noData[(elem.nodeName+" ").toLowerCase()],nodeType=+elem.nodeType||1;return nodeType!==1&&nodeType!==9?false:!noData||noData!==true&&elem.getAttribute("classid")===noData};var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;function dataAttr(elem,key,data){if(data===undefined&&elem.nodeType===1){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}jQuery.data(elem,key,data)}else{data=undefined}}return data}function isEmptyDataObject(obj){var name;for(name in obj){if(name==="data"&&jQuery.isEmptyObject(obj[name])){continue}if(name!=="toJSON"){return false}}return true}function internalData(elem,name,data,pvt){if(!jQuery.acceptData(elem)){return}var ret,thisCache,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if((!id||!cache[id]||!pvt&&!cache[id].data)&&data===undefined&&typeof name==="string"){return}if(!id){if(isNode){id=elem[internalKey]=deletedIds.pop()||jQuery.guid++}else{id=internalKey}}if(!cache[id]){cache[id]=isNode?{}:{toJSON:jQuery.noop}}if(typeof name==="object"||typeof name==="function"){if(pvt){cache[id]=jQuery.extend(cache[id],name)}else{cache[id].data=jQuery.extend(cache[id].data,name)}}thisCache=cache[id];if(!pvt){if(!thisCache.data){thisCache.data={}}thisCache=thisCache.data}if(data!==undefined){thisCache[jQuery.camelCase(name)]=data}if(typeof name==="string"){ret=thisCache[name];if(ret==null){ret=thisCache[jQuery.camelCase(name)]}}else{ret=thisCache}return ret}function internalRemoveData(elem,name,pvt){if(!jQuery.acceptData(elem)){return}var thisCache,i,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(!cache[id]){return}if(name){thisCache=pvt?cache[id]:cache[id].data;if(thisCache){if(!jQuery.isArray(name)){if(name in thisCache){name=[name]}else{name=jQuery.camelCase(name);if(name in thisCache){name=[name]}else{name=name.split(" ")}}}else{name=name.concat(jQuery.map(name,jQuery.camelCase))}i=name.length;while(i--){delete thisCache[name[i]]}if(pvt?!isEmptyDataObject(thisCache):!jQuery.isEmptyObject(thisCache)){return}}}if(!pvt){delete cache[id].data;if(!isEmptyDataObject(cache[id])){return}}if(isNode){jQuery.cleanData([elem],true)}else if(support.deleteExpando||cache!=cache.window){delete cache[id]}else{cache[id]=null}}jQuery.extend({cache:{},noData:{"applet ":true,"embed ":true,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(elem){elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando];return!!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data){return internalData(elem,name,data)},removeData:function(elem,name){return internalRemoveData(elem,name)},_data:function(elem,name,data){return internalData(elem,name,data,true)},_removeData:function(elem,name){return internalRemoveData(elem,name,true)}});jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(key===undefined){if(this.length){data=jQuery.data(elem);if(elem.nodeType===1&&!jQuery._data(elem,"parsedAttrs")){i=attrs.length;while(i--){if(attrs[i]){name=attrs[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.slice(5));dataAttr(elem,name,data[name])}}}jQuery._data(elem,"parsedAttrs",true)}}return data}if(typeof key==="object"){return this.each(function(){jQuery.data(this,key)})}return arguments.length>1?this.each(function(){jQuery.data(this,key,value)}):elem?dataAttr(elem,key,jQuery.data(elem,key)):undefined},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}});jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=jQuery._data(elem,type);if(data){if(!queue||jQuery.isArray(data)){queue=jQuery._data(elem,type,jQuery.makeArray(data))}else{queue.push(data)}}return queue||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};if(fn==="inprogress"){fn=queue.shift();startLength--}if(fn){if(type==="fx"){queue.unshift("inprogress")}delete hooks.stop;fn.call(elem,next,hooks)}if(!startLength&&hooks){hooks.empty.fire()}},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){jQuery._removeData(elem,type+"queue");jQuery._removeData(elem,key)})})}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--}if(arguments.length<setter){return jQuery.queue(this[0],type)}return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type)}})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!--count){defer.resolveWith(elements,[elements])}};if(typeof type!=="string"){obj=type;type=undefined}type=type||"fx";while(i--){tmp=jQuery._data(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve)}}resolve();return defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var cssExpand=["Top","Right","Bottom","Left"];var isHidden=function(elem,el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem)};var access=jQuery.access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,length=elems.length,bulk=key==null;if(jQuery.type(key)==="object"){chainable=true;for(i in key){jQuery.access(elems,fn,i,key[i],true,emptyGet,raw)}}else if(value!==undefined){chainable=true;if(!jQuery.isFunction(value)){raw=true}if(bulk){if(raw){fn.call(elems,value);fn=null}else{bulk=fn;fn=function(elem,key,value){return bulk.call(jQuery(elem),value)}}}if(fn){for(;i<length;i++){fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)))}}}return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet};var rcheckableType=/^(?:checkbox|radio)$/i;(function(){var input=document.createElement("input"),div=document.createElement("div"),fragment=document.createDocumentFragment();div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";support.leadingWhitespace=div.firstChild.nodeType===3;support.tbody=!div.getElementsByTagName("tbody").length;support.htmlSerialize=!!div.getElementsByTagName("link").length;support.html5Clone=document.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>";input.type="checkbox";input.checked=true;fragment.appendChild(input);support.appendChecked=input.checked;div.innerHTML="<textarea>x</textarea>";support.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue;fragment.appendChild(div);div.innerHTML="<input type='radio' checked='checked' name='t'/>";support.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;support.noCloneEvent=true;if(div.attachEvent){div.attachEvent("onclick",function(){support.noCloneEvent=false});div.cloneNode(true).click()}if(support.deleteExpando==null){support.deleteExpando=true;try{delete div.test}catch(e){support.deleteExpando=false}}})();(function(){var i,eventName,div=document.createElement("div");for(i in{submit:true,change:true,focusin:true}){eventName="on"+i;if(!(support[i+"Bubbles"]=eventName in window)){div.setAttribute(eventName,"t");support[i+"Bubbles"]=div.attributes[eventName].expando===false}}div=null})();var rformElems=/^(?:input|select|textarea)$/i,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;function returnTrue(){return true}function returnFalse(){return false}function safeActiveElement(){try{return document.activeElement}catch(err){}}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var tmp,events,t,handleObjIn,special,eventHandle,handleObj,handlers,type,namespaces,origType,elemData=jQuery._data(elem);if(!elemData){return}if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector}if(!handler.guid){handler.guid=jQuery.guid++}if(!(events=elemData.events)){events=elemData.events={}}if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery!==strundefined&&(!e||jQuery.event.triggered!==e.type)?jQuery.event.dispatch.apply(eventHandle.elem,arguments):undefined};eventHandle.elem=elem}types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false)}else if(elem.attachEvent){elem.attachEvent("on"+type,eventHandle)}}}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid}}if(selector){handlers.splice(handlers.delegateCount++,0,handleObj)}else{handlers.push(handleObj)
}jQuery.event.global[type]=true}elem=null},remove:function(elem,types,handler,selector,mappedTypes){var j,handleObj,tmp,origCount,t,events,special,handlers,type,namespaces,origType,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(!elemData||!(events=elemData.events)){return}types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true)}continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,1);if(handleObj.selector){handlers.delegateCount--}if(special.remove){special.remove.call(elem,handleObj)}}}if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle)}delete events[type]}}if(jQuery.isEmptyObject(events)){delete elemData.handle;jQuery._removeData(elem,"events")}},trigger:function(event,data,elem,onlyHandlers){var handle,ontype,cur,bubbleType,special,tmp,i,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8){return}if(rfocusMorph.test(type+jQuery.event.triggered)){return}if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,typeof event==="object"&&event);event.isTrigger=onlyHandlers?2:3;event.namespace=namespaces.join(".");event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target){event.target=elem}data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false){return}if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+type)){cur=cur.parentNode}for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur}if(tmp===(elem.ownerDocument||document)){eventPath.push(tmp.defaultView||tmp.parentWindow||window)}}i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){event.type=i>1?bubbleType:special.bindType||type;handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle");if(handle){handle.apply(cur,data)}handle=ontype&&cur[ontype];if(handle&&handle.apply&&jQuery.acceptData(cur)){event.result=handle.apply(cur,data);if(event.result===false){event.preventDefault()}}}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&jQuery.acceptData(elem)){if(ontype&&elem[type]&&!jQuery.isWindow(elem)){tmp=elem[ontype];if(tmp){elem[ontype]=null}jQuery.event.triggered=type;try{elem[type]()}catch(e){}jQuery.event.triggered=undefined;if(tmp){elem[ontype]=tmp}}}}return event.result},dispatch:function(event){event=jQuery.event.fix(event);var i,ret,handleObj,matched,j,handlerQueue=[],args=slice.call(arguments),handlers=(jQuery._data(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return}handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped()){if(!event.namespace_re||event.namespace_re.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){if((event.result=ret)===false){event.preventDefault();event.stopPropagation()}}}}}if(special.postDispatch){special.postDispatch.call(this,event)}return event.result},handlers:function(event,handlers){var sel,handleObj,matches,i,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||event.type!=="click")){for(;cur!=this;cur=cur.parentNode||this){if(cur.nodeType===1&&(cur.disabled!==true||event.type!=="click")){matches=[];for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector+" ";if(matches[sel]===undefined){matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length}if(matches[sel]){matches.push(handleObj)}}if(matches.length){handlerQueue.push({elem:cur,handlers:matches})}}}}if(delegateCount<handlers.length){handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)})}return handlerQueue},fix:function(event){if(event[jQuery.expando]){return event}var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];if(!fixHook){this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}}copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=new jQuery.Event(originalEvent);i=copy.length;while(i--){prop=copy[i];event[prop]=originalEvent[prop]}if(!event.target){event.target=originalEvent.srcElement||document}if(event.target.nodeType===3){event.target=event.target.parentNode}event.metaKey=!!event.metaKey;return fixHook.filter?fixHook.filter(event,originalEvent):event},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null){event.which=original.charCode!=null?original.charCode:original.keyCode}return event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var body,eventDoc,doc,button=original.button,fromElement=original.fromElement;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}if(!event.relatedTarget&&fromElement){event.relatedTarget=fromElement===event.target?original.toElement:fromElement}if(!event.which&&button!==undefined){event.which=button&1?1:button&2?3:button&4?2:0}return event}},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus){try{this.focus();return false}catch(e){}}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(jQuery.nodeName(this,"input")&&this.type==="checkbox"&&this.click){this.click();return false}},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){if(event.result!==undefined&&event.originalEvent){event.originalEvent.returnValue=event.result}}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:true,originalEvent:{}});if(bubble){jQuery.event.trigger(e,null,elem)}else{jQuery.event.dispatch.call(elem,e)}if(e.isDefaultPrevented()){event.preventDefault()}}};jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle,false)}}:function(elem,type,handle){var name="on"+type;if(elem.detachEvent){if(typeof elem[name]===strundefined){elem[name]=null}elem.detachEvent(name,handle)}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props)}if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&src.returnValue===false?returnTrue:returnFalse}else{this.type=src}if(props){jQuery.extend(this,props)}this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true};jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(!e){return}if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(!e){return}if(e.stopPropagation){e.stopPropagation()}e.cancelBubble=true},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue;if(e&&e.stopImmediatePropagation){e.stopImmediatePropagation()}this.stopPropagation()}};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||related!==target&&!jQuery.contains(target,related)){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix}return ret}}});if(!support.submitBubbles){jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,"form")){return false}jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:undefined;if(form&&!jQuery._data(form,"submitBubbles")){jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=true});jQuery._data(form,"submitBubbles",true)}})},postDispatch:function(event){if(event._submit_bubble){delete event._submit_bubble;if(this.parentNode&&!event.isTrigger){jQuery.event.simulate("submit",this.parentNode,event,true)}}},teardown:function(){if(jQuery.nodeName(this,"form")){return false}jQuery.event.remove(this,"._submit")}}}if(!support.changeBubbles){jQuery.event.special.change={setup:function(){if(rformElems.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){jQuery.event.add(this,"propertychange._change",function(event){if(event.originalEvent.propertyName==="checked"){this._just_changed=true}});jQuery.event.add(this,"click._change",function(event){if(this._just_changed&&!event.isTrigger){this._just_changed=false}jQuery.event.simulate("change",this,event,true)})}return false}jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;if(rformElems.test(elem.nodeName)&&!jQuery._data(elem,"changeBubbles")){jQuery.event.add(elem,"change._change",function(event){if(this.parentNode&&!event.isSimulated&&!event.isTrigger){jQuery.event.simulate("change",this.parentNode,event,true)}});jQuery._data(elem,"changeBubbles",true)}})},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||elem.type!=="radio"&&elem.type!=="checkbox"){return event.handleObj.handler.apply(this,arguments)}},teardown:function(){jQuery.event.remove(this,"._change");return!rformElems.test(this.nodeName)}}}if(!support.focusinBubbles){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),true)};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=jQuery._data(doc,fix);if(!attaches){doc.addEventListener(orig,handler,true)}jQuery._data(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=jQuery._data(doc,fix)-1;if(!attaches){doc.removeEventListener(orig,handler,true);jQuery._removeData(doc,fix)}else{jQuery._data(doc,fix,attaches)}}}})}jQuery.fn.extend({on:function(types,selector,data,fn,one){var type,origFn;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined}for(type in types){this.on(type,selector,data,types[type],one)}return this}if(data==null&&fn==null){fn=selector;data=selector=undefined}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined}else{fn=data;data=selector;selector=undefined}}if(fn===false){fn=returnFalse}else if(!fn){return this}if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments)};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)}return this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this}if(typeof types==="object"){for(type in types){this.off(type,selector,types[type])}return this}if(selector===false||typeof selector==="function"){fn=selector;selector=undefined}if(fn===false){fn=returnFalse}return this.each(function(){jQuery.event.remove(this,types,fn,selector)})},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem){return jQuery.event.trigger(type,data,elem,true)}}});function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement){while(list.length){safeFrag.createElement(list.pop())}}return safeFrag}var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|"+"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},safeFragment=createSafeFragment(document),fragmentDiv=safeFragment.appendChild(document.createElement("div"));wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;function getAll(context,tag){var elems,elem,i=0,found=typeof context.getElementsByTagName!==strundefined?context.getElementsByTagName(tag||"*"):typeof context.querySelectorAll!==strundefined?context.querySelectorAll(tag||"*"):undefined;if(!found){for(found=[],elems=context.childNodes||context;(elem=elems[i])!=null;i++){if(!tag||jQuery.nodeName(elem,tag)){found.push(elem)}else{jQuery.merge(found,getAll(elem,tag))}}}return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],found):found}function fixDefaultChecked(elem){if(rcheckableType.test(elem.type)){elem.defaultChecked=elem.checked}}function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(content.nodeType!==11?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){elem.type=(jQuery.find.attr(elem,"type")!==null)+"/"+elem.type;return elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match){elem.type=match[1]}else{elem.removeAttribute("type")}return elem}function setGlobalEval(elems,refElements){var elem,i=0;for(;(elem=elems[i])!=null;i++){jQuery._data(elem,"globalEval",!refElements||jQuery._data(refElements[i],"globalEval"))}}function cloneCopyEvent(src,dest){if(dest.nodeType!==1||!jQuery.hasData(src)){return}var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle;curData.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i])}}}if(curData.data){curData.data=jQuery.extend({},curData.data)}}function fixCloneNodeIssues(src,dest){var nodeName,e,data;if(dest.nodeType!==1){return}nodeName=dest.nodeName.toLowerCase();if(!support.noCloneEvent&&dest[jQuery.expando]){data=jQuery._data(dest);for(e in data.events){jQuery.removeEvent(dest,e,data.handle)}dest.removeAttribute(jQuery.expando)}if(nodeName==="script"&&dest.text!==src.text){disableScript(dest).text=src.text;restoreScript(dest)}else if(nodeName==="object"){if(dest.parentNode){dest.outerHTML=src.outerHTML}if(support.html5Clone&&(src.innerHTML&&!jQuery.trim(dest.innerHTML))){dest.innerHTML=src.innerHTML}}else if(nodeName==="input"&&rcheckableType.test(src.type)){dest.defaultChecked=dest.checked=src.checked;if(dest.value!==src.value){dest.value=src.value}}else if(nodeName==="option"){dest.defaultSelected=dest.selected=src.defaultSelected}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue}}jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var destElements,node,clone,i,srcElements,inPage=jQuery.contains(elem.ownerDocument,elem);if(support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")){clone=elem.cloneNode(true)}else{fragmentDiv.innerHTML=elem.outerHTML;fragmentDiv.removeChild(clone=fragmentDiv.firstChild)}if((!support.noCloneEvent||!support.noCloneChecked)&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0;(node=srcElements[i])!=null;++i){if(destElements[i]){fixCloneNodeIssues(node,destElements[i])}}}if(dataAndEvents){if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0;(node=srcElements[i])!=null;i++){cloneCopyEvent(node,destElements[i])}}else{cloneCopyEvent(elem,clone)}}destElements=getAll(clone,"script");if(destElements.length>0){setGlobalEval(destElements,!inPage&&getAll(elem,"script"))}destElements=srcElements=node=null;return clone},buildFragment:function(elems,context,scripts,selection){var j,elem,contains,tmp,tag,tbody,wrap,l=elems.length,safe=createSafeFragment(context),nodes=[],i=0;for(;i<l;i++){elem=elems[i];if(elem||elem===0){if(jQuery.type(elem)==="object"){jQuery.merge(nodes,elem.nodeType?[elem]:elem)}else if(!rhtml.test(elem)){nodes.push(context.createTextNode(elem))}else{tmp=tmp||safe.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2];j=wrap[0];while(j--){tmp=tmp.lastChild}if(!support.leadingWhitespace&&rleadingWhitespace.test(elem)){nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0]))}if(!support.tbody){elem=tag==="table"&&!rtbody.test(elem)?tmp.firstChild:wrap[1]==="<table>"&&!rtbody.test(elem)?tmp:0;j=elem&&elem.childNodes.length;while(j--){if(jQuery.nodeName(tbody=elem.childNodes[j],"tbody")&&!tbody.childNodes.length){elem.removeChild(tbody)}}}jQuery.merge(nodes,tmp.childNodes);tmp.textContent="";while(tmp.firstChild){tmp.removeChild(tmp.firstChild)}tmp=safe.lastChild}}}if(tmp){safe.removeChild(tmp)}if(!support.appendChecked){jQuery.grep(getAll(nodes,"input"),fixDefaultChecked)}i=0;while(elem=nodes[i++]){if(selection&&jQuery.inArray(elem,selection)!==-1){continue}contains=jQuery.contains(elem.ownerDocument,elem);tmp=getAll(safe.appendChild(elem),"script");if(contains){setGlobalEval(tmp)}if(scripts){j=0;while(elem=tmp[j++]){if(rscriptType.test(elem.type||"")){scripts.push(elem)}}}}tmp=null;return safe},cleanData:function(elems,acceptData){var elem,type,id,data,i=0,internalKey=jQuery.expando,cache=jQuery.cache,deleteExpando=support.deleteExpando,special=jQuery.event.special;for(;(elem=elems[i])!=null;i++){if(acceptData||jQuery.acceptData(elem)){id=elem[internalKey];data=id&&cache[id];if(data){if(data.events){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type)}else{jQuery.removeEvent(elem,type,data.handle)}}}if(cache[id]){delete cache[id];if(deleteExpando){delete elem[internalKey]}else if(typeof elem.removeAttribute!==strundefined){elem.removeAttribute(internalKey)}else{elem[internalKey]=null}deletedIds.push(id)}}}}}});jQuery.fn.extend({text:function(value){return access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},append:function(){return this.domManip(arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function(){return this.domManip(arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return this.domManip(arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this)}})},after:function(){return this.domManip(arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling)}})},remove:function(selector,keepData){var elem,elems=selector?jQuery.filter(selector,this):this,i=0;for(;(elem=elems[i])!=null;i++){if(!keepData&&elem.nodeType===1){jQuery.cleanData(getAll(elem))}if(elem.parentNode){if(keepData&&jQuery.contains(elem.ownerDocument,elem)){setGlobalEval(getAll(elem,"script"))}elem.parentNode.removeChild(elem)}}return this},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false))}while(elem.firstChild){elem.removeChild(elem.firstChild)}if(elem.options&&jQuery.nodeName(elem,"select")){elem.options.length=0}}return this},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined){return elem.nodeType===1?elem.innerHTML.replace(rinlinejQuery,""):undefined}if(typeof value==="string"&&!rnoInnerhtml.test(value)&&(support.htmlSerialize||!rnoshimcache.test(value))&&(support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value}}elem=0}catch(e){}}if(elem){this.empty().append(value)}},null,value,arguments.length)},replaceWith:function(){var arg=arguments[0];this.domManip(arguments,function(elem){arg=this.parentNode;jQuery.cleanData(getAll(this));if(arg){arg.replaceChild(elem,this)}});return arg&&(arg.length||arg.nodeType)?this:this.remove()},detach:function(selector){return this.remove(selector,true)},domManip:function(args,callback){args=concat.apply([],args);var first,node,hasScripts,scripts,doc,fragment,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&typeof value==="string"&&!support.checkClone&&rchecked.test(value)){return this.each(function(index){var self=set.eq(index);if(isFunction){args[0]=value.call(this,index,self.html())}self.domManip(args,callback)})}if(l){fragment=jQuery.buildFragment(args,this[0].ownerDocument,false,this);first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first}if(first){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts){jQuery.merge(scripts,getAll(node,"script"))}}callback.call(this[i],node,i)}if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=scripts[i];if(rscriptType.test(node.type||"")&&!jQuery._data(node,"globalEval")&&jQuery.contains(doc,node)){if(node.src){if(jQuery._evalUrl){jQuery._evalUrl(node.src)}}else{jQuery.globalEval((node.text||node.textContent||node.innerHTML||"").replace(rcleanScript,""))}}}}fragment=first=null}}return this}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,i=0,ret=[],insert=jQuery(selector),last=insert.length-1;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);push.apply(ret,elems.get())}return this.pushStack(ret)}});var iframe,elemdisplay={};function actualDisplay(name,doc){var style,elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=window.getDefaultComputedStyle&&(style=window.getDefaultComputedStyle(elem[0]))?style.display:jQuery.css(elem[0],"display");elem.detach();return display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];if(!display){display=actualDisplay(nodeName,doc);if(display==="none"||!display){iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement);doc=(iframe[0].contentWindow||iframe[0].contentDocument).document;doc.write();doc.close();display=actualDisplay(nodeName,doc);iframe.detach()}elemdisplay[nodeName]=display}return display}(function(){var shrinkWrapBlocksVal;support.shrinkWrapBlocks=function(){if(shrinkWrapBlocksVal!=null){return shrinkWrapBlocksVal}shrinkWrapBlocksVal=false;var div,body,container;body=document.getElementsByTagName("body")[0];if(!body||!body.style){return}div=document.createElement("div");container=document.createElement("div");container.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";body.appendChild(container).appendChild(div);if(typeof div.style.zoom!==strundefined){div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;"+"box-sizing:content-box;display:block;margin:0;border:0;"+"padding:1px;width:1px;zoom:1";div.appendChild(document.createElement("div")).style.width="5px";shrinkWrapBlocksVal=div.offsetWidth!==3}body.removeChild(container);return shrinkWrapBlocksVal}})();var rmargin=/^margin/;var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var getStyles,curCSS,rposition=/^(top|right|bottom|left)$/;if(window.getComputedStyle){getStyles=function(elem){return elem.ownerDocument.defaultView.getComputedStyle(elem,null)};curCSS=function(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;computed=computed||getStyles(elem);ret=computed?computed.getPropertyValue(name)||computed[name]:undefined;if(computed){if(ret===""&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name)}if(rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}}return ret===undefined?ret:ret+""}}else if(document.documentElement.currentStyle){getStyles=function(elem){return elem.currentStyle};curCSS=function(elem,name,computed){var left,rs,rsLeft,ret,style=elem.style;computed=computed||getStyles(elem);ret=computed?computed[name]:undefined;if(ret==null&&style&&style[name]){ret=style[name]}if(rnumnonpx.test(ret)&&!rposition.test(name)){left=style.left;rs=elem.runtimeStyle;rsLeft=rs&&rs.left;if(rsLeft){rs.left=elem.currentStyle.left}style.left=name==="fontSize"?"1em":ret;ret=style.pixelLeft+"px";style.left=left;if(rsLeft){rs.left=rsLeft}}return ret===undefined?ret:ret+""||"auto"}}function addGetHookIf(conditionFn,hookFn){return{get:function(){var condition=conditionFn();if(condition==null){return}if(condition){delete this.get;return}return(this.get=hookFn).apply(this,arguments)}}}(function(){var div,style,a,pixelPositionVal,boxSizingReliableVal,reliableHiddenOffsetsVal,reliableMarginRightVal;div=document.createElement("div");div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";a=div.getElementsByTagName("a")[0];style=a&&a.style;if(!style){return}style.cssText="float:left;opacity:.5";support.opacity=style.opacity==="0.5";support.cssFloat=!!style.cssFloat;div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";support.boxSizing=style.boxSizing===""||style.MozBoxSizing===""||style.WebkitBoxSizing==="";jQuery.extend(support,{reliableHiddenOffsets:function(){if(reliableHiddenOffsetsVal==null){computeStyleTests()}return reliableHiddenOffsetsVal},boxSizingReliable:function(){if(boxSizingReliableVal==null){computeStyleTests()}return boxSizingReliableVal},pixelPosition:function(){if(pixelPositionVal==null){computeStyleTests()}return pixelPositionVal},reliableMarginRight:function(){if(reliableMarginRightVal==null){computeStyleTests()}return reliableMarginRightVal}});function computeStyleTests(){var div,body,container,contents;body=document.getElementsByTagName("body")[0];if(!body||!body.style){return}div=document.createElement("div");container=document.createElement("div");container.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";body.appendChild(container).appendChild(div);div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;"+"box-sizing:border-box;display:block;margin-top:1%;top:1%;"+"border:1px;padding:1px;width:4px;position:absolute";pixelPositionVal=boxSizingReliableVal=false;reliableMarginRightVal=true;if(window.getComputedStyle){pixelPositionVal=(window.getComputedStyle(div,null)||{}).top!=="1%";boxSizingReliableVal=(window.getComputedStyle(div,null)||{width:"4px"}).width==="4px";contents=div.appendChild(document.createElement("div"));contents.style.cssText=div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;"+"box-sizing:content-box;display:block;margin:0;border:0;padding:0";contents.style.marginRight=contents.style.width="0";div.style.width="1px";reliableMarginRightVal=!parseFloat((window.getComputedStyle(contents,null)||{}).marginRight)}div.innerHTML="<table><tr><td></td><td>t</td></tr></table>";contents=div.getElementsByTagName("td");contents[0].style.cssText="margin:0;border:0;padding:0;display:none";reliableHiddenOffsetsVal=contents[0].offsetHeight===0;if(reliableHiddenOffsetsVal){contents[0].style.display="";contents[1].style.display="none";reliableHiddenOffsetsVal=contents[0].offsetHeight===0}body.removeChild(container)}})();jQuery.swap=function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name]}ret=callback.apply(elem,args||[]);for(name in options){elem.style[name]=old[name]}return ret};var ralpha=/alpha\([^)]*\)/i,ropacity=/opacity\s*=\s*([^)]*)/,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"];
function vendorPropName(style,name){if(name in style){return name}var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in style){return name}}return origName}function showHide(elements,show){var display,elem,hidden,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue}values[index]=jQuery._data(elem,"olddisplay");display=elem.style.display;if(show){if(!values[index]&&display==="none"){elem.style.display=""}if(elem.style.display===""&&isHidden(elem)){values[index]=jQuery._data(elem,"olddisplay",defaultDisplay(elem.nodeName))}}else{hidden=isHidden(elem);if(display&&display!=="none"||!hidden){jQuery._data(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))}}}for(index=0;index<length;index++){elem=elements[index];if(!elem.style){continue}if(!show||elem.style.display==="none"||elem.style.display===""){elem.style.display=show?values[index]||"":"none"}}return elements}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin"){val+=jQuery.css(elem,extra+cssExpand[i],true,styles)}if(isBorderBox){if(extra==="content"){val-=jQuery.css(elem,"padding"+cssExpand[i],true,styles)}if(extra!=="margin"){val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}else{val+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="padding"){val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}}return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=true,val=name==="width"?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=support.boxSizing&&jQuery.css(elem,"boxSizing",false,styles)==="border-box";if(val<=0||val==null){val=curCSS(elem,name,styles);if(val<0||val==null){val=elem.style[name]}if(rnumnonpx.test(val)){return val}valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]);val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret}}}},cssNumber:{columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return}var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rrelNum.exec(value))){value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name));type="number"}if(value==null||value!==value){return}if(type==="number"&&!jQuery.cssNumber[origName]){value+="px"}if(!support.clearCloneStyle&&value===""&&name.indexOf("background")===0){style[name]="inherit"}if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined){try{style[name]=value}catch(e){}}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret}return style[name]}},css:function(elem,name,extra,styles){var num,val,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks){val=hooks.get(elem,true,extra)}if(val===undefined){val=curCSS(elem,name,styles)}if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name]}if(extra===""||extra){num=parseFloat(val);return extra===true||jQuery.isNumeric(num)?num||0:val}return val}});jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){return rdisplayswap.test(jQuery.css(elem,"display"))&&elem.offsetWidth===0?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)}},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,support.boxSizing&&jQuery.css(elem,"boxSizing",false,styles)==="border-box",styles):0)}}});if(!support.opacity){jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+value*100+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1;if((value>=1||value==="")&&jQuery.trim(filter.replace(ralpha,""))===""&&style.removeAttribute){style.removeAttribute("filter");if(value===""||currentStyle&&!currentStyle.filter){return}}style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity}}}jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){if(computed){return jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"])}});jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0]}return expanded}};if(!rmargin.test(prefix)){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber}});jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++){map[name[i]]=jQuery.css(elem,name[i],false,styles)}return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,true)},hide:function(){return showHide(this)},toggle:function(state){if(typeof state==="boolean"){return state?this.show():this.hide()}return this.each(function(){if(isHidden(this)){jQuery(this).show()}else{jQuery(this).hide()}})}});function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||"swing";this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration)}else{this.pos=eased=percent}this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(hooks&&hooks.set){hooks.set(this)}else{Tween.propHooks._default.set(this)}return this}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem[tween.prop]!=null&&(!tween.elem.style||tween.elem.style[tween.prop]==null)){return tween.elem[tween.prop]}result=jQuery.css(tween.elem,tween.prop,"");return!result||result==="auto"?0:result},set:function(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween)}else if(tween.elem.style&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop])){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit)}else{tween.elem[tween.prop]=tween.now}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now}}};jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2}};jQuery.fx=Tween.prototype.init;jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts&&parts[3]||(jQuery.cssNumber[prop]?"":"px"),start=(jQuery.cssNumber[prop]||unit!=="px"&&+target)&&rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;if(start&&start[3]!==unit){unit=unit||start[3];parts=parts||[];start=+target||1;do{scale=scale||".5";start=start/scale;jQuery.style(tween.elem,prop,start+unit)}while(scale!==(scale=tween.cur()/target)&&scale!==1&&--maxIterations)}if(parts){start=tween.start=+start||+target||0;tween.unit=unit;tween.end=parts[1]?start+(parts[1]+1)*parts[2]:+parts[2]}return tween}]};function createFxNow(){setTimeout(function(){fxNow=undefined});return fxNow=jQuery.now()}function genFx(type,includeWidth){var which,attrs={height:type},i=0;includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type}if(includeWidth){attrs.opacity=attrs.width=type}return attrs}function createTween(value,prop,animation){var tween,collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;for(;index<length;index++){if(tween=collection[index].call(animation,prop,value)){return tween}}}function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,checkDisplay,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=jQuery._data(elem,"fxshow");if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire()}}}hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length){hooks.empty.fire()}})})}if(elem.nodeType===1&&("height"in props||"width"in props)){opts.overflow=[style.overflow,style.overflowX,style.overflowY];display=jQuery.css(elem,"display");checkDisplay=display==="none"?jQuery._data(elem,"olddisplay")||defaultDisplay(elem.nodeName):display;if(checkDisplay==="inline"&&jQuery.css(elem,"float")==="none"){if(!support.inlineBlockNeedsLayout||defaultDisplay(elem.nodeName)==="inline"){style.display="inline-block"}else{style.zoom=1}}}if(opts.overflow){style.overflow="hidden";if(!support.shrinkWrapBlocks()){anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2]})}}for(prop in props){value=props[prop];if(rfxtypes.exec(value)){delete props[prop];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show")){if(value==="show"&&dataShow&&dataShow[prop]!==undefined){hidden=true}else{continue}}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}else{display=undefined}}if(!jQuery.isEmptyObject(orig)){if(dataShow){if("hidden"in dataShow){hidden=dataShow.hidden}}else{dataShow=jQuery._data(elem,"fxshow",{})}if(toggle){dataShow.hidden=!hidden}if(hidden){jQuery(elem).show()}else{anim.done(function(){jQuery(elem).hide()})}anim.done(function(){var prop;jQuery._removeData(elem,"fxshow");for(prop in orig){jQuery.style(elem,prop,orig[prop])}});for(prop in orig){tween=createTween(hidden?dataShow[prop]:0,prop,anim);if(!(prop in dataShow)){dataShow[prop]=tween.start;if(hidden){tween.end=tween.start;tween.start=prop==="width"||prop==="height"?1:0}}}}else if((display==="none"?defaultDisplay(elem.nodeName):display)==="inline"){style.display=display}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0]}if(index!==name){props[name]=value;delete props[index]}hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing}}}else{specialEasing[name]=easing}}}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped){return false}var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++){animation.tweens[index].run(percent)}deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining}else{deferred.resolveWith(elem,[animation]);return false}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped){return this}stopped=true;for(;index<length;index++){animation.tweens[index].run(1)}if(gotoEnd){deferred.resolveWith(elem,[animation,gotoEnd])}else{deferred.rejectWith(elem,[animation,gotoEnd])}return this}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=animationPrefilters[index].call(animation,elem,props,animation.opts);if(result){return result}}jQuery.map(props,createTween,animation);if(jQuery.isFunction(animation.opts.start)){animation.opts.start.call(elem,animation)}jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"]}else{props=props.split(" ")}var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];tweeners[prop]=tweeners[prop]||[];tweeners[prop].unshift(callback)}},prefilter:function(callback,prepend){if(prepend){animationPrefilters.unshift(callback)}else{animationPrefilters.push(callback)}}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true){opt.queue="fx"}opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old)){opt.old.call(this)}if(opt.queue){jQuery.dequeue(this,opt.queue)}};return opt};jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty||jQuery._data(this,"finish")){anim.stop(true)}};doAnimation.finish=doAnimation;return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd)};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined}if(clearQueue&&type!==false){this.queue(type||"fx",[])}return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index])}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index])}}}for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1)}}if(dequeue||!gotoEnd){jQuery.dequeue(this,type)}})},finish:function(type){if(type!==false){type=type||"fx"}return this.each(function(){var index,data=jQuery._data(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;data.finish=true;jQuery.queue(this,type,[]);if(hooks&&hooks.stop){hooks.stop.call(this,true)}for(index=timers.length;index--;){if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(true);timers.splice(index,1)}}for(index=0;index<length;index++){if(queue[index]&&queue[index].finish){queue[index].finish.call(this)}}delete data.finish})}});jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback)}});jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}});jQuery.timers=[];jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;fxNow=jQuery.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1)}}if(!timers.length){jQuery.fx.stop()}fxNow=undefined};jQuery.fx.timer=function(timer){jQuery.timers.push(timer);if(timer()){jQuery.fx.start()}else{jQuery.timers.pop()}};jQuery.fx.interval=13;jQuery.fx.start=function(){if(!timerId){timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval)}};jQuery.fx.stop=function(){clearInterval(timerId);timerId=null};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fn.delay=function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})};(function(){var input,div,select,a,opt;div=document.createElement("div");div.setAttribute("className","t");div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";a=div.getElementsByTagName("a")[0];select=document.createElement("select");opt=select.appendChild(document.createElement("option"));input=div.getElementsByTagName("input")[0];a.style.cssText="top:1px";support.getSetAttribute=div.className!=="t";support.style=/top/.test(a.getAttribute("style"));support.hrefNormalized=a.getAttribute("href")==="/a";support.checkOn=!!input.value;support.optSelected=opt.selected;support.enctype=!!document.createElement("form").enctype;select.disabled=true;support.optDisabled=!opt.disabled;input=document.createElement("input");input.setAttribute("value","");support.input=input.getAttribute("value")==="";input.value="t";input.setAttribute("type","radio");support.radioValue=input.value==="t"})();var rreturn=/\r/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret}ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret}return}isFunction=jQuery.isFunction(value);return this.each(function(i){var val;if(this.nodeType!==1){return}if(isFunction){val=value.call(this,i,jQuery(this).val())}else{val=value}if(val==null){val=""}else if(typeof val==="number"){val+=""}else if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+""})}hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val}})}});jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return val!=null?val:jQuery.trim(jQuery.text(elem))}},select:{get:function(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;for(;i<max;i++){option=options[i];if((option.selected||i===index)&&(support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value}values.push(value)}}return values},set:function(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--){option=options[i];if(jQuery.inArray(jQuery.valHooks.option.get(option),values)>=0){try{option.selected=optionSet=true}catch(_){option.scrollHeight}}else{option.selected=false}}if(!optionSet){elem.selectedIndex=-1}return options}}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value)){return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0}}};if(!support.checkOn){jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value}}});var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle,ruseDefault=/^(?:checked|selected)$/i,getSetAttribute=support.getSetAttribute,getSetInput=support.input;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})}});jQuery.extend({attr:function(elem,name,value){var hooks,ret,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return}if(typeof elem.getAttribute===strundefined){return jQuery.prop(elem,name,value)}if(nType!==1||!jQuery.isXMLDoc(elem)){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)}if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name)}else if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}else{elem.setAttribute(name,value+"");return value}}else if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret}else{ret=jQuery.find.attr(elem,name);return ret==null?undefined:ret}},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&elem.nodeType===1){while(name=attrNames[i++]){propName=jQuery.propFix[name]||name;if(jQuery.expr.match.bool.test(name)){if(getSetInput&&getSetAttribute||!ruseDefault.test(name)){elem[propName]=false}else{elem[jQuery.camelCase("default-"+name)]=elem[propName]=false}}else{jQuery.attr(elem,name,"")}elem.removeAttribute(getSetAttribute?name:propName)}}},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val}return value}}}}});boolHook={set:function(elem,value,name){if(value===false){jQuery.removeAttr(elem,name)}else if(getSetInput&&getSetAttribute||!ruseDefault.test(name)){elem.setAttribute(!getSetAttribute&&jQuery.propFix[name]||name,name)}else{elem[jQuery.camelCase("default-"+name)]=elem[name]=true}return name}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=getSetInput&&getSetAttribute||!ruseDefault.test(name)?function(elem,name,isXML){var ret,handle;if(!isXML){handle=attrHandle[name];attrHandle[name]=ret;ret=getter(elem,name,isXML)!=null?name.toLowerCase():null;attrHandle[name]=handle}return ret}:function(elem,name,isXML){if(!isXML){return elem[jQuery.camelCase("default-"+name)]?name.toLowerCase():null}}});if(!getSetInput||!getSetAttribute){jQuery.attrHooks.value={set:function(elem,value,name){if(jQuery.nodeName(elem,"input")){elem.defaultValue=value}else{return nodeHook&&nodeHook.set(elem,value,name)}}}}if(!getSetAttribute){nodeHook={set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(!ret){elem.setAttributeNode(ret=elem.ownerDocument.createAttribute(name))}ret.value=value+="";if(name==="value"||value===elem.getAttribute(name)){return value}}};attrHandle.id=attrHandle.name=attrHandle.coords=function(elem,name,isXML){var ret;if(!isXML){return(ret=elem.getAttributeNode(name))&&ret.value!==""?ret.value:null}};jQuery.valHooks.button={get:function(elem,name){var ret=elem.getAttributeNode(name);if(ret&&ret.specified){return ret.value}},set:nodeHook.set};jQuery.attrHooks.contenteditable={set:function(elem,value,name){nodeHook.set(elem,value===""?false:value,name)}};jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]={set:function(elem,value){if(value===""){elem.setAttribute(name,"auto");return value}}}})}if(!support.style){jQuery.attrHooks.style={get:function(elem){return elem.style.cssText||undefined},set:function(elem,value){return elem.style.cssText=value+""}}}var rfocusable=/^(?:input|select|textarea|button|object)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){name=jQuery.propFix[name]||name;return this.each(function(){try{this[name]=undefined;delete this[name]}catch(e){}})}});jQuery.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return}notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}if(value!==undefined){return hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:elem[name]=value}else{return hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null?ret:elem[name]}},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");return tabindex?parseInt(tabindex,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:-1}}}});if(!support.hrefNormalized){jQuery.each(["href","src"],function(i,name){jQuery.propHooks[name]={get:function(elem){return elem.getAttribute(name,4)}}})}if(!support.optSelected){jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex}}return null}}}jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});if(!support.enctype){jQuery.propFix.enctype="encoding"}var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(value){var classes,elem,cur,clazz,j,finalValue,i=0,len=this.length,proceed=typeof value==="string"&&value;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))})}if(proceed){classes=(value||"").match(rnotwhite)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ");if(cur){j=0;while(clazz=classes[j++]){if(cur.indexOf(" "+clazz+" ")<0){cur+=clazz+" "}}finalValue=jQuery.trim(cur);if(elem.className!==finalValue){elem.className=finalValue}}}}return this},removeClass:function(value){var classes,elem,cur,clazz,j,finalValue,i=0,len=this.length,proceed=arguments.length===0||typeof value==="string"&&value;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))})}if(proceed){classes=(value||"").match(rnotwhite)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"");if(cur){j=0;while(clazz=classes[j++]){while(cur.indexOf(" "+clazz+" ")>=0){cur=cur.replace(" "+clazz+" "," ")}}finalValue=value?jQuery.trim(cur):"";if(elem.className!==finalValue){elem.className=finalValue}}}}return this},toggleClass:function(value,stateVal){var type=typeof value;if(typeof stateVal==="boolean"&&type==="string"){return stateVal?this.addClass(value):this.removeClass(value)}if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)})}return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),classNames=value.match(rnotwhite)||[];while(className=classNames[i++]){if(self.hasClass(className)){self.removeClass(className)}else{self.addClass(className)}}}else if(type===strundefined||type==="boolean"){if(this.className){jQuery._data(this,"__className__",this.className)}this.className=this.className||value===false?"":jQuery._data(this,"__className__")||""}})},hasClass:function(selector){var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++){if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0){return true}}return false}});jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}});jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn)}});var nonce=jQuery.now();var rquery=/\?/;var rvalidtokens=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;jQuery.parseJSON=function(data){if(window.JSON&&window.JSON.parse){return window.JSON.parse(data+"")}var requireNonComma,depth=null,str=jQuery.trim(data+"");return str&&!jQuery.trim(str.replace(rvalidtokens,function(token,comma,open,close){if(requireNonComma&&comma){depth=0}if(depth===0){return token}requireNonComma=open||comma;depth+=!close-!open;return""}))?Function("return "+str)():jQuery.error("Invalid JSON: "+data)};jQuery.parseXML=function(data){var xml,tmp;if(!data||typeof data!=="string"){return null}try{if(window.DOMParser){tmp=new DOMParser;xml=tmp.parseFromString(data,"text/xml")}else{xml=new ActiveXObject("Microsoft.XMLDOM");xml.async="false";xml.loadXML(data)}}catch(e){xml=undefined}if(!xml||!xml.documentElement||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data)}return xml};var ajaxLocParts,ajaxLocation,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a");ajaxLocation.href="";ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;
dataTypeExpression="*"}var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func)){while(dataType=dataTypes[i++]){if(dataType.charAt(0)==="+"){dataType=dataType.slice(1)||"*";(structure[dataType]=structure[dataType]||[]).unshift(func)}else{(structure[dataType]=structure[dataType]||[]).push(func)}}}}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure===transports;function inspect(dataType){var selected;inspected[dataType]=true;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport==="string"&&!seekingTransport&&!inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false}else if(seekingTransport){return!(selected=dataTypeOrTransport)}});return selected}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var deep,key,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:deep||(deep={}))[key]=src[key]}}if(deep){jQuery.extend(true,target,deep)}return target}function ajaxHandleResponses(s,jqXHR,responses){var firstDataType,ct,finalDataType,type,contents=s.contents,dataTypes=s.dataTypes;while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("Content-Type")}}if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}}}if(dataTypes[0]in responses){finalDataType=dataTypes[0]}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType){firstDataType=type}}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType)}return responses[finalDataType]}}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv]}}current=dataTypes.shift();while(current){if(s.responseFields[current]){jqXHR[s.responseFields[current]]=response}if(!prev&&isSuccess&&s.dataFilter){response=s.dataFilter(response,s.dataType)}prev=current;current=dataTypes.shift();if(current){if(current==="*"){current=prev}else if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2]}else if(converters[conv2]!==true){current=tmp[0];dataTypes.unshift(tmp[1])}break}}}}if(conv!==true){if(conv&&s["throws"]){response=conv(response)}else{try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}}}}}return{state:"success",data:response}}jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined}options=options||{};var parts,i,cacheURL,responseHeadersString,timeoutTimer,fireGlobals,transport,responseHeaders,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while(match=rheaders.exec(responseHeadersString)){responseHeaders[match[1].toLowerCase()]=match[2]}}match=responseHeaders[key.toLowerCase()]}return match==null?null:match},getAllResponseHeaders:function(){return state===2?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();if(!state){name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value}return this},overrideMimeType:function(type){if(!state){s.mimeType=type}return this},statusCode:function(map){var code;if(map){if(state<2){for(code in map){statusCode[code]=[statusCode[code],map[code]]}}else{jqXHR.always(map[jqXHR.status])}}return this},abort:function(statusText){var finalText=statusText||strAbort;if(transport){transport.abort(finalText)}done(0,finalText);return this}};deferred.promise(jqXHR).complete=completeDeferred.add;jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");s.type=options.method||options.type||s.method||s.type;s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""];if(s.crossDomain==null){parts=rurl.exec(s.url.toLowerCase());s.crossDomain=!!(parts&&(parts[1]!==ajaxLocParts[1]||parts[2]!==ajaxLocParts[2]||(parts[3]||(parts[1]==="http:"?"80":"443"))!==(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?"80":"443"))))}if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional)}inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2){return jqXHR}fireGlobals=s.global;if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart")}s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=s.url;if(!s.hasContent){if(s.data){cacheURL=s.url+=(rquery.test(cacheURL)?"&":"?")+s.data;delete s.data}if(s.cache===false){s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++}}if(s.ifModified){if(jQuery.lastModified[cacheURL]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL])}if(jQuery.etag[cacheURL]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])}}if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType)}jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i])}if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){return jqXHR.abort()}strAbort="abort";for(i in{success:1,error:1,complete:1}){jqXHR[i](s[i])}transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport")}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s])}if(s.async&&s.timeout>0){timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout)}try{state=1;transport.send(requestHeaders,done)}catch(e){if(state<2){done(-1,e)}else{throw e}}}function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(state===2){return}state=2;if(timeoutTimer){clearTimeout(timeoutTimer)}transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;isSuccess=status>=200&&status<300||status===304;if(responses){response=ajaxHandleResponses(s,jqXHR,responses)}response=ajaxConvert(s,response,jqXHR,isSuccess);if(isSuccess){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){jQuery.lastModified[cacheURL]=modified}modified=jqXHR.getResponseHeader("etag");if(modified){jQuery.etag[cacheURL]=modified}}if(status===204||s.type==="HEAD"){statusText="nocontent"}else if(status===304){statusText="notmodified"}else{statusText=response.state;success=response.data;error=response.error;isSuccess=!error}}else{error=statusText;if(status||!statusText){statusText="error";if(status<0){status=0}}}jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR])}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error])}jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error])}completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!--jQuery.active){jQuery.event.trigger("ajaxStop")}}}return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined}return jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}});jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}});jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:false,global:false,"throws":true})};jQuery.fn.extend({wrapAll:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))})}if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0])}wrap.map(function(){var elem=this;while(elem.firstChild&&elem.firstChild.nodeType===1){elem=elem.firstChild}return elem}).append(this)}return this},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))})}return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html)}else{self.append(html)}})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes)}}).end()}});jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0||!support.reliableHiddenOffsets()&&(elem.style&&elem.style.display||jQuery.css(elem,"display"))==="none"};jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v)}else{buildParams(prefix+"["+(typeof v==="object"?i:"")+"]",v,traditional,add)}})}else if(!traditional&&jQuery.type(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add)}}else{add(prefix,obj)}}jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value==null?"":value;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined){traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional}if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a)){jQuery.each(a,function(){add(this.name,this.value)})}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add)}}return s.join("&").replace(r20,"+")};jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});jQuery.ajaxSettings.xhr=window.ActiveXObject!==undefined?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&createStandardXHR()||createActiveXHR()}:createStandardXHR;var xhrId=0,xhrCallbacks={},xhrSupported=jQuery.ajaxSettings.xhr();if(window.ActiveXObject){jQuery(window).on("unload",function(){for(var key in xhrCallbacks){xhrCallbacks[key](undefined,true)}})}support.cors=!!xhrSupported&&"withCredentials"in xhrSupported;xhrSupported=support.ajax=!!xhrSupported;if(xhrSupported){jQuery.ajaxTransport(function(options){if(!options.crossDomain||support.cors){var callback;return{send:function(headers,complete){var i,xhr=options.xhr(),id=++xhrId;xhr.open(options.type,options.url,options.async,options.username,options.password);if(options.xhrFields){for(i in options.xhrFields){xhr[i]=options.xhrFields[i]}}if(options.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(options.mimeType)}if(!options.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest"}for(i in headers){if(headers[i]!==undefined){xhr.setRequestHeader(i,headers[i]+"")}}xhr.send(options.hasContent&&options.data||null);callback=function(_,isAbort){var status,statusText,responses;if(callback&&(isAbort||xhr.readyState===4)){delete xhrCallbacks[id];callback=undefined;xhr.onreadystatechange=jQuery.noop;if(isAbort){if(xhr.readyState!==4){xhr.abort()}}else{responses={};status=xhr.status;if(typeof xhr.responseText==="string"){responses.text=xhr.responseText}try{statusText=xhr.statusText}catch(e){statusText=""}if(!status&&options.isLocal&&!options.crossDomain){status=responses.text?200:404}else if(status===1223){status=204}}}if(responses){complete(status,statusText,responses,xhr.getAllResponseHeaders())}};if(!options.async){callback()}else if(xhr.readyState===4){setTimeout(callback)}else{xhr.onreadystatechange=xhrCallbacks[id]=callback}},abort:function(){if(callback){callback(undefined,true)}}}}})}function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){jQuery.globalEval(text);return text}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false}if(s.crossDomain){s.type="GET";s.global=false}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||jQuery("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script");script.async=true;if(s.scriptCharset){script.charset=s.scriptCharset}script.src=s.url;script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;if(script.parentNode){script.parentNode.removeChild(script)}script=null;if(!isAbort){callback(200,"success")}}};head.insertBefore(script,head.firstChild)},abort:function(){if(script){script.onload(undefined,true)}}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;this[callback]=true;return callback}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?"url":typeof s.data==="string"&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");if(jsonProp||s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;if(jsonProp){s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName)}else if(s.jsonp!==false){s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName}s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called")}return responseContainer[0]};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=arguments};jqXHR.always(function(){window[callbackName]=overwritten;if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName)}if(responseContainer&&jQuery.isFunction(overwritten)){overwritten(responseContainer[0])}responseContainer=overwritten=undefined});return"script"}});jQuery.parseHTML=function(data,context,keepScripts){if(!data||typeof data!=="string"){return null}if(typeof context==="boolean"){keepScripts=context;context=false}context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];if(parsed){return[context.createElement(parsed[1])]}parsed=jQuery.buildFragment([data],context,scripts);if(scripts&&scripts.length){jQuery(scripts).remove()}return jQuery.merge([],parsed.childNodes)};var _load=jQuery.fn.load;jQuery.fn.load=function(url,params,callback){if(typeof url!=="string"&&_load){return _load.apply(this,arguments)}var selector,response,type,self=this,off=url.indexOf(" ");if(off>=0){selector=jQuery.trim(url.slice(off,url.length));url=url.slice(0,off)}if(jQuery.isFunction(params)){callback=params;params=undefined}else if(params&&typeof params==="object"){type="POST"}if(self.length>0){jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])})}return this};jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};var docElem=window.document.documentElement;function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9?elem.defaultView||elem.parentWindow:false}jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static"){elem.style.position="relative"}curOffset=curElem.offset();curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=(position==="absolute"||position==="fixed")&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0}if(jQuery.isFunction(options)){options=options.call(elem,i,curOffset)}if(options.top!=null){props.top=options.top-curOffset.top+curTop}if(options.left!=null){props.left=options.left-curOffset.left+curLeft}if("using"in options){options.using.call(elem,props)}else{curElem.css(props)}}};jQuery.fn.extend({offset:function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)})}var docElem,win,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;if(!doc){return}docElem=doc.documentElement;if(!jQuery.contains(docElem,elem)){return box}if(typeof elem.getBoundingClientRect!==strundefined){box=elem.getBoundingClientRect()}win=getWindow(doc);return{top:box.top+(win.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0),left:box.left+(win.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)}},position:function(){if(!this[0]){return}var offsetParent,offset,parentOffset={top:0,left:0},elem=this[0];if(jQuery.css(elem,"position")==="fixed"){offset=elem.getBoundingClientRect()}else{offsetParent=this.offsetParent();offset=this.offset();if(!jQuery.nodeName(offsetParent[0],"html")){parentOffset=offsetParent.offset()}parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",true);parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",true)}return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||docElem;while(offsetParent&&(!jQuery.nodeName(offsetParent,"html")&&jQuery.css(offsetParent,"position")==="static")){offsetParent=offsetParent.offsetParent}return offsetParent||docElem})}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?prop in win?win[prop]:win.document.documentElement[method]:elem[method]}if(win){win.scrollTo(!top?val:jQuery(win).scrollLeft(),top?val:jQuery(win).scrollTop())}else{elem[method]=val}},method,val,arguments.length,null)}});jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed}})});jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem)){return elem.document.documentElement["client"+name]}if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])}return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})});jQuery.fn.size=function(){return this.length};jQuery.fn.andSelf=jQuery.fn.addBack;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return jQuery})}var _jQuery=window.jQuery,_$=window.$;jQuery.noConflict=function(deep){if(window.$===jQuery){window.$=_$}if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery}return jQuery};if(typeof noGlobal===strundefined){window.jQuery=window.$=jQuery}return jQuery});(function(){var cardFromNumber,cardFromType,cards,defaultFormat,formatBackCardNumber,formatBackExpiry,formatCardNumber,formatExpiry,formatForwardExpiry,formatForwardSlashAndSpace,hasTextSelected,luhnCheck,reFormatCVC,reFormatCardNumber,reFormatExpiry,reFormatNumeric,restrictCVC,restrictCardNumber,restrictExpiry,restrictNumeric,setCardType,__slice=[].slice,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i}return-1};$.payment={};$.payment.fn={};$.fn.payment=function(){var args,method;method=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];return $.payment.fn[method].apply(this,args)};defaultFormat=/(\d{1,4})/g;$.payment.cards=cards=[{type:"visaelectron",pattern:/^4(026|17500|405|508|844|91[37])/,format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:"maestro",pattern:/^(5(018|0[23]|[68])|6(39|7))/,format:defaultFormat,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:true},{type:"forbrugsforeningen",pattern:/^600/,format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:"dankort",pattern:/^5019/,format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:"visa",pattern:/^4/,format:defaultFormat,length:[13,16],cvcLength:[3],luhn:true},{type:"mastercard",pattern:/^5[0-5]/,format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:true},{type:"dinersclub",pattern:/^3[0689]/,format:defaultFormat,length:[14],cvcLength:[3],luhn:true},{type:"discover",pattern:/^6([045]|22)/,format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:"unionpay",pattern:/^(62|88)/,format:defaultFormat,length:[16,17,18,19],cvcLength:[3],luhn:false},{type:"jcb",pattern:/^35/,format:defaultFormat,length:[16],cvcLength:[3],luhn:true}];cardFromNumber=function(num){var card,_i,_len;num=(num+"").replace(/\D/g,"");for(_i=0,_len=cards.length;_i<_len;_i++){card=cards[_i];if(card.pattern.test(num)){return card}}};cardFromType=function(type){var card,_i,_len;for(_i=0,_len=cards.length;_i<_len;_i++){card=cards[_i];if(card.type===type){return card}}};luhnCheck=function(num){var digit,digits,odd,sum,_i,_len;odd=true;sum=0;digits=(num+"").split("").reverse();for(_i=0,_len=digits.length;_i<_len;_i++){digit=digits[_i];digit=parseInt(digit,10);if(odd=!odd){digit*=2}if(digit>9){digit-=9}sum+=digit}return sum%10===0};hasTextSelected=function($target){var _ref;if($target.prop("selectionStart")!=null&&$target.prop("selectionStart")!==$target.prop("selectionEnd")){return true}if((typeof document!=="undefined"&&document!==null?(_ref=document.selection)!=null?_ref.createRange:void 0:void 0)!=null){if(document.selection.createRange().text){return true}}return false};reFormatNumeric=function(e){return setTimeout(function(){var $target,value;$target=$(e.currentTarget);value=$target.val();value=value.replace(/\D/g,"");return $target.val(value)})};reFormatCardNumber=function(e){return setTimeout(function(){var $target,value;$target=$(e.currentTarget);value=$target.val();value=$.payment.formatCardNumber(value);return $target.val(value)})};formatCardNumber=function(e){var $target,card,digit,length,re,upperLength,value;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return}$target=$(e.currentTarget);value=$target.val();card=cardFromNumber(value+digit);length=(value.replace(/\D/g,"")+digit).length;upperLength=16;if(card){upperLength=card.length[card.length.length-1]}if(length>=upperLength){return}if($target.prop("selectionStart")!=null&&$target.prop("selectionStart")!==value.length){return}if(card&&card.type==="amex"){re=/^(\d{4}|\d{4}\s\d{6})$/}else{re=/(?:^|\s)(\d{4})$/}if(re.test(value)){e.preventDefault();return setTimeout(function(){return $target.val(value+" "+digit)})}else if(re.test(value+digit)){e.preventDefault();return setTimeout(function(){return $target.val(value+digit+" ")})}};formatBackCardNumber=function(e){var $target,value;$target=$(e.currentTarget);value=$target.val();if(e.which!==8){return}if($target.prop("selectionStart")!=null&&$target.prop("selectionStart")!==value.length){return}if(/\d\s$/.test(value)){e.preventDefault();return setTimeout(function(){return $target.val(value.replace(/\d\s$/,""))})}else if(/\s\d?$/.test(value)){e.preventDefault();return setTimeout(function(){return $target.val(value.replace(/\d$/,""))})}};reFormatExpiry=function(e){return setTimeout(function(){var $target,value;$target=$(e.currentTarget);value=$target.val();value=$.payment.formatExpiry(value);return $target.val(value)})};formatExpiry=function(e){var $target,digit,val;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return}$target=$(e.currentTarget);val=$target.val()+digit;if(/^\d$/.test(val)&&(val!=="0"&&val!=="1")){e.preventDefault();return setTimeout(function(){return $target.val("0"+val+" / ")})}else if(/^\d\d$/.test(val)){e.preventDefault();return setTimeout(function(){return $target.val(""+val+" / ")})}};formatForwardExpiry=function(e){var $target,digit,val;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return}$target=$(e.currentTarget);val=$target.val();if(/^\d\d$/.test(val)){return $target.val(""+val+" / ")}};formatForwardSlashAndSpace=function(e){var $target,val,which;which=String.fromCharCode(e.which);if(!(which==="/"||which===" ")){return}$target=$(e.currentTarget);val=$target.val();if(/^\d$/.test(val)&&val!=="0"){return $target.val("0"+val+" / ")}};formatBackExpiry=function(e){var $target,value;$target=$(e.currentTarget);value=$target.val();if(e.which!==8){return}if($target.prop("selectionStart")!=null&&$target.prop("selectionStart")!==value.length){return}if(/\d\s\/\s$/.test(value)){e.preventDefault();return setTimeout(function(){return $target.val(value.replace(/\d\s\/\s$/,""))})}};reFormatCVC=function(e){return setTimeout(function(){var $target,value;$target=$(e.currentTarget);value=$target.val();value=value.replace(/\D/g,"").slice(0,4);return $target.val(value)})};restrictNumeric=function(e){var input;if(e.metaKey||e.ctrlKey){return true}if(e.which===32){return false}if(e.which===0){return true}if(e.which<33){return true}input=String.fromCharCode(e.which);return!!/[\d\s]/.test(input)};restrictCardNumber=function(e){var $target,card,digit,value;$target=$(e.currentTarget);digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return}if(hasTextSelected($target)){return}value=($target.val()+digit).replace(/\D/g,"");card=cardFromNumber(value);if(card){return value.length<=card.length[card.length.length-1]}else{return value.length<=16}};restrictExpiry=function(e){var $target,digit,value;$target=$(e.currentTarget);digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return}if(hasTextSelected($target)){return}value=$target.val()+digit;value=value.replace(/\D/g,"");if(value.length>6){return false}};restrictCVC=function(e){var $target,digit,val;$target=$(e.currentTarget);digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return}if(hasTextSelected($target)){return}val=$target.val()+digit;return val.length<=4};setCardType=function(e){var $target,allTypes,card,cardType,val;$target=$(e.currentTarget);val=$target.val();cardType=$.payment.cardType(val)||"unknown";if(!$target.hasClass(cardType)){allTypes=function(){var _i,_len,_results;_results=[];for(_i=0,_len=cards.length;_i<_len;_i++){card=cards[_i];_results.push(card.type)}return _results}();$target.removeClass("unknown");$target.removeClass(allTypes.join(" "));$target.addClass(cardType);$target.toggleClass("identified",cardType!=="unknown");return $target.trigger("payment.cardType",cardType)}};$.payment.fn.formatCardCVC=function(){this.on("keypress",restrictNumeric);this.on("keypress",restrictCVC);this.on("paste",reFormatCVC);this.on("change",reFormatCVC);this.on("input",reFormatCVC);return this};$.payment.fn.formatCardExpiry=function(){this.on("keypress",restrictNumeric);this.on("keypress",restrictExpiry);this.on("keypress",formatExpiry);this.on("keypress",formatForwardSlashAndSpace);this.on("keypress",formatForwardExpiry);this.on("keydown",formatBackExpiry);this.on("change",reFormatExpiry);this.on("input",reFormatExpiry);return this};$.payment.fn.formatCardNumber=function(){this.on("keypress",restrictNumeric);this.on("keypress",restrictCardNumber);this.on("keypress",formatCardNumber);this.on("keydown",formatBackCardNumber);this.on("keyup",setCardType);this.on("paste",reFormatCardNumber);this.on("change",reFormatCardNumber);this.on("input",reFormatCardNumber);this.on("input",setCardType);return this};$.payment.fn.restrictNumeric=function(){this.on("keypress",restrictNumeric);this.on("paste",reFormatNumeric);this.on("change",reFormatNumeric);this.on("input",reFormatNumeric);return this};$.payment.fn.cardExpiryVal=function(){return $.payment.cardExpiryVal($(this).val())
};$.payment.cardExpiryVal=function(value){var month,prefix,year,_ref;value=value.replace(/\s/g,"");_ref=value.split("/",2),month=_ref[0],year=_ref[1];if((year!=null?year.length:void 0)===2&&/^\d+$/.test(year)){prefix=(new Date).getFullYear();prefix=prefix.toString().slice(0,2);year=prefix+year}month=parseInt(month,10);year=parseInt(year,10);return{month:month,year:year}};$.payment.validateCardNumber=function(num){var card,_ref;num=(num+"").replace(/\s+|-/g,"");if(!/^\d+$/.test(num)){return false}card=cardFromNumber(num);if(!card){return false}return(_ref=num.length,__indexOf.call(card.length,_ref)>=0)&&(card.luhn===false||luhnCheck(num))};$.payment.validateCardExpiry=function(month,year){var currentTime,expiry,_ref;if(typeof month==="object"&&"month"in month){_ref=month,month=_ref.month,year=_ref.year}if(!(month&&year)){return false}month=$.trim(month);year=$.trim(year);if(!/^\d+$/.test(month)){return false}if(!/^\d+$/.test(year)){return false}if(!(1<=month&&month<=12)){return false}if(year.length===2){if(year<70){year="20"+year}else{year="19"+year}}if(year.length!==4){return false}expiry=new Date(year,month);currentTime=new Date;expiry.setMonth(expiry.getMonth()-1);expiry.setMonth(expiry.getMonth()+1,1);return expiry>currentTime};$.payment.validateCardCVC=function(cvc,type){var card,_ref;cvc=$.trim(cvc);if(!/^\d+$/.test(cvc)){return false}card=cardFromType(type);if(card!=null){return _ref=cvc.length,__indexOf.call(card.cvcLength,_ref)>=0}else{return cvc.length>=3&&cvc.length<=4}};$.payment.cardType=function(num){var _ref;if(!num){return null}return((_ref=cardFromNumber(num))!=null?_ref.type:void 0)||null};$.payment.formatCardNumber=function(num){var card,groups,upperLength,_ref;num=num.replace(/\D/g,"");card=cardFromNumber(num);if(!card){return num}upperLength=card.length[card.length.length-1];num=num.slice(0,upperLength);if(card.format.global){return(_ref=num.match(card.format))!=null?_ref.join(" "):void 0}else{groups=card.format.exec(num);if(groups==null){return}groups.shift();groups=$.grep(groups,function(n){return n});return groups.join(" ")}};$.payment.formatExpiry=function(expiry){var mon,parts,sep,year;parts=expiry.match(/^\D*(\d{1,2})(\D+)?(\d{1,4})?/);if(!parts){return""}mon=parts[1]||"";sep=parts[2]||"";year=parts[3]||"";if(year.length>0||sep.length>0&&!/\ \/?\ ?/.test(sep)){sep=" / "}if(mon.length===1&&(mon!=="0"&&mon!=="1")){mon="0"+mon;sep=" / "}return mon+sep+year}}).call(this);(function(){var $,checkForCountryChange_,formatBack_,formatForPhone_,formatUp_,format_,formats,formattedPhoneNumber_,formattedPhone_,isEventAllowedChar_,isEventAllowed_,mobilePhoneNumber,prefixesAreSubsets_,restrictEventAndFormat_,supportSelectionEnd,withTimeout,__slice=[].slice;$=jQuery;supportSelectionEnd="selectionEnd"in document.createElement("input");withTimeout=function(fn){return setTimeout(fn,50)};formatForPhone_=function(phone,defaultPrefix){var bestFormat,format,k,precision,prefix,v;if(defaultPrefix==null){defaultPrefix=null}if(phone.indexOf("+")!==0&&defaultPrefix){phone=defaultPrefix+phone.replace(/[^0-9]/g,"")}else{phone="+"+phone.replace(/[^0-9]/g,"")}bestFormat=null;precision=0;for(prefix in formats){format=formats[prefix];if(phone.length>=prefix.length&&phone.substring(0,prefix.length)===prefix&&prefix.length>precision){bestFormat={};for(k in format){v=format[k];bestFormat[k]=v}bestFormat.prefix=prefix;precision=prefix.length}}return bestFormat};prefixesAreSubsets_=function(prefixA,prefixB){if(prefixA===prefixB){return true}if(prefixA.length<prefixB.length){return prefixB.substring(0,prefixA.length)===prefixA}return prefixA.substring(0,prefixB.length)===prefixB};formattedPhoneNumber_=function(phone,lastChar,defaultPrefix){var format,formatChar,formatDigitCount,formattedPhone,i,phoneDigits,phoneFormat,phonePrefix,prefixPhoneFormat,_i,_j,_len,_ref;if(defaultPrefix==null){defaultPrefix=null}if(phone.length!==0&&(phone.substring(0,1)==="+"||defaultPrefix)){format=formatForPhone_(phone,defaultPrefix);if(format&&format.format){phoneFormat=format.format;phonePrefix=format.prefix;if(defaultPrefix){if((defaultPrefix===phonePrefix||prefixesAreSubsets_(phonePrefix,defaultPrefix))&&(phone.indexOf("+")!==0||phone.length===0)){phoneFormat=phoneFormat.substring(Math.min(phonePrefix.length,defaultPrefix.length)+1);if(format.nationalPrefix!=null){prefixPhoneFormat="";for(i=_i=0,_ref=format.nationalPrefix.length;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i){prefixPhoneFormat+="."}phoneFormat=prefixPhoneFormat+phoneFormat}}}if(phone.substring(0,1)==="+"){phoneDigits=phone.substring(1)}else{phoneDigits=phone}formatDigitCount=phoneFormat.match(/\./g).length;formattedPhone="";for(_j=0,_len=phoneFormat.length;_j<_len;_j++){formatChar=phoneFormat[_j];if(formatChar==="."){if(phoneDigits.length===0){break}formattedPhone+=phoneDigits.substring(0,1);phoneDigits=phoneDigits.substring(1)}else if(lastChar||phoneDigits.length>0){formattedPhone+=formatChar}}phone=formattedPhone+phoneDigits}}return phone};isEventAllowed_=function(e){if(e.metaKey){return true}if(e.which===32){return false}if(e.which===0){return true}if(e.which<33){return true}return isEventAllowedChar_(e)};isEventAllowedChar_=function(e){var char;char=String.fromCharCode(e.which);return!!/[\d\s+]/.test(char)};restrictEventAndFormat_=function(e){var caretEnd,value;if(!isEventAllowed_(e)){return e.preventDefault()}if(!isEventAllowedChar_(e)){return}value=this.val();caretEnd=supportSelectionEnd?this.get(0).selectionEnd:this.caret();value=value.substring(0,this.caret())+String.fromCharCode(e.which)+value.substring(caretEnd,value.length);format_.call(this,value,e);return withTimeout(function(_this){return function(){return _this.caret(_this.val().length)}}(this))};formatUp_=function(e){var value;checkForCountryChange_.call(this);value=this.val();if(e.keyCode===8&&this.caret()===value.length){return}return format_.call(this,value,e)};formatBack_=function(e){var phone,value;if(!e){return}if(e.meta){return}value=this.val();if(value.length===0){return}if(!(this.caret()===value.length)){return}if(e.keyCode!==8){return}value=value.substring(0,value.length-1);e.preventDefault();phone=formattedPhone_.call(this,value,false);if(this.val()!==phone){return this.val(phone)}};format_=function(value,e){var phone,selection,selectionAtEnd;phone=formattedPhone_.call(this,value,true);if(phone!==this.val()){selection=this.caret();selectionAtEnd=selection===this.val().length;e.preventDefault();this.val(phone);if(!selectionAtEnd){return withTimeout(function(_this){return function(){return _this.caret(selection)}}(this))}}};formattedPhone_=function(phone,lastChar){if(phone.indexOf("+")!==0&&this.data("defaultPrefix")){phone=phone.replace(/[^0-9]/g,"")}else{phone="+"+phone.replace(/[^0-9]/g,"")}return formattedPhoneNumber_(phone,lastChar,this.data("defaultPrefix"))};checkForCountryChange_=function(){var country,format,phone;phone=this.val();format=formatForPhone_(phone,this.data("defaultPrefix"));country=null;if(format){country=format.country}if(this.data("mobilePhoneCountry")!==country){this.data("mobilePhoneCountry",country);return this.trigger("country.mobilePhoneNumber",country)}};mobilePhoneNumber={};mobilePhoneNumber.init=function(options){var _ref;if(options==null){options={}}if(!this.data("mobilePhoneNumberInited")){this.data("mobilePhoneNumberInited",true);this.bind("keypress",function(_this){return function(){return restrictEventAndFormat_.apply($(_this),arguments)}}(this));this.bind("keyup",function(_this){return function(){return formatUp_.apply($(_this),arguments)}}(this));this.bind("keydown",function(_this){return function(){return formatBack_.apply($(_this),arguments)}}(this))}return this.data("defaultPrefix",(_ref=options.allowPhoneWithoutPrefix)!=null?_ref:options.defaultPrefix)};mobilePhoneNumber.val=function(){var format,val;val=this.val().replace(/[^0-9]/g,"");format=formatForPhone_(val,this.data("defaultPrefix"));if(this.val().indexOf("+")===0||this.data("defaultPrefix")==null){return"+"+val}else{return this.data("defaultPrefix")+val}};mobilePhoneNumber.validate=function(){var format,val;val=this.mobilePhoneNumber("val");format=formatForPhone_(val,this.data("defaultPrefix"));if(!format){return true}return val.length>format.prefix.length};mobilePhoneNumber.country=function(){var format;format=formatForPhone_(this.mobilePhoneNumber("val"));if(format){return format.country}};mobilePhoneNumber.prefix=function(){var countryCode;countryCode=this.mobilePhoneNumber("country");if(countryCode==null){return""}return $.mobilePhoneNumberPrefixFromCountryCode(countryCode)};$.fn.mobilePhoneNumber=function(){var args,method;method=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];if(method==null||!(typeof method==="string")){if(method!=null){args=[method]}method="init"}return mobilePhoneNumber[method].apply(this,args)};$.formatMobilePhoneNumber=function(phone){phone="+"+phone.replace(/[^0-9\*]/g,"");return formattedPhoneNumber_(phone,true)};$.mobilePhoneNumberPrefixFromCountryCode=function(countryCode){var format,prefix;for(prefix in formats){format=formats[prefix];if(format.country.toLowerCase()===countryCode.toLowerCase()){if(prefix.length===5&&prefix[1]==="1"){return"+1"}return prefix}}return null};formats={"+247":{country:"AC"},"+376":{country:"AD",format:"+... ... ..."},"+971":{country:"AE",format:"+... .. ... ...."},"+93":{country:"AF",format:"+.. .. ... ...."},"+1268":{country:"AG"},"+1264":{country:"AI"},"+355":{country:"AL",format:"+... .. ... ...."},"+374":{country:"AM",format:"+... .. ......"},"+244":{country:"AO",format:"+... ... ... ..."},"+54":{country:"AR",format:"+.. .. ..-....-...."},"+1684":{country:"AS"},"+43":{country:"AT",format:"+.. ... ......"},"+61":{country:"AU",format:"+.. ... ... ..."},"+297":{country:"AW",format:"+... ... ...."},"+994":{country:"AZ",format:"+... .. ... .. .."},"+387":{country:"BA",format:"+... .. ...-..."},"+1246":{country:"BB"},"+880":{country:"BD",format:"+... ....-......"},"+32":{country:"BE",format:"+.. ... .. .. .."},"+226":{country:"BF",format:"+... .. .. .. .."},"+359":{country:"BG",format:"+... ... ... .."},"+973":{country:"BH",format:"+... .... ...."},"+257":{country:"BI",format:"+... .. .. .. .."},"+229":{country:"BJ",format:"+... .. .. .. .."},"+1441":{country:"BM"},"+673":{country:"BN",format:"+... ... ...."},"+591":{country:"BO",format:"+... ........"},"+55":{country:"BR",format:"+.. .. .....-...."},"+1242":{country:"BS"},"+975":{country:"BT",format:"+... .. .. .. .."},"+267":{country:"BW",format:"+... .. ... ..."},"+375":{country:"BY",format:"+... .. ...-..-.."},"+501":{country:"BZ",format:"+... ...-...."},"+243":{country:"CD",format:"+... ... ... ..."},"+236":{country:"CF",format:"+... .. .. .. .."},"+242":{country:"CG",format:"+... .. ... ...."},"+41":{country:"CH",format:"+.. .. ... .. .."},"+225":{country:"CI",format:"+... .. .. .. .."},"+682":{country:"CK",format:"+... .. ..."},"+56":{country:"CL",format:"+.. . .... ...."},"+237":{country:"CM",format:"+... .. .. .. .."},"+86":{country:"CN",format:"+.. ... .... ...."},"+57":{country:"CO",format:"+.. ... ......."},"+506":{country:"CR",format:"+... .... ...."},"+53":{country:"CU",format:"+.. . ......."},"+238":{country:"CV",format:"+... ... .. .."},"+599":{country:"CW",format:"+... . ... ...."},"+537":{country:"CY"},"+357":{country:"CY",format:"+... .. ......"},"+420":{country:"CZ",format:"+... ... ... ..."},"+49":{country:"DE",format:"+.. .... ......."},"+253":{country:"DJ",format:"+... .. .. .. .."},"+45":{country:"DK",format:"+.. .. .. .. .."},"+1767":{country:"DM"},"+1849":{country:"DO"},"+213":{country:"DZ",format:"+... ... .. .. .."},"+593":{country:"EC",format:"+... .. ... ...."},"+372":{country:"EE",format:"+... .... ...."},"+20":{country:"EG",format:"+.. ... ... ...."},"+291":{country:"ER",format:"+... . ... ..."},"+34":{country:"ES",format:"+.. ... .. .. .."},"+251":{country:"ET",format:"+... .. ... ...."},"+358":{country:"FI",format:"+... .. ... .. .."},"+679":{country:"FJ",format:"+... ... ...."},"+500":{country:"FK"},"+691":{country:"FM",format:"+... ... ...."},"+298":{country:"FO",format:"+... ......"},"+33":{country:"FR",format:"+.. . .. .. .. .."},"+241":{country:"GA",format:"+... .. .. .. .."},"+44":{country:"GB",format:"+.. .... ......"},"+1473":{country:"GD"},"+995":{country:"GE",format:"+... ... .. .. .."},"+594":{country:"GF",format:"+... ... .. .. .."},"+233":{country:"GH",format:"+... .. ... ...."},"+350":{country:"GI",format:"+... ... ....."},"+299":{country:"GL",format:"+... .. .. .."},"+220":{country:"GM",format:"+... ... ...."},"+224":{country:"GN",format:"+... ... .. .. .."},"+240":{country:"GQ",format:"+... ... ... ..."},"+30":{country:"GR",format:"+.. ... ... ...."},"+502":{country:"GT",format:"+... .... ...."},"+1671":{country:"GU"},"+245":{country:"GW",format:"+... ... ...."},"+592":{country:"GY",format:"+... ... ...."},"+852":{country:"HK",format:"+... .... ...."},"+504":{country:"HN",format:"+... ....-...."},"+385":{country:"HR",format:"+... .. ... ...."},"+509":{country:"HT",format:"+... .. .. ...."},"+36":{country:"HU",format:"+.. .. ... ...."},"+62":{country:"ID",format:"+.. ...-...-..."},"+353":{country:"IE",format:"+... .. ... ...."},"+972":{country:"IL",format:"+... ..-...-...."},"+91":{country:"IN",format:"+.. .. .. ......"},"+246":{country:"IO",format:"+... ... ...."},"+964":{country:"IQ",format:"+... ... ... ...."},"+98":{country:"IR",format:"+.. ... ... ...."},"+354":{country:"IS",format:"+... ... ...."},"+39":{country:"IT",format:"+.. .. .... ...."},"+1876":{country:"JM"},"+962":{country:"JO",format:"+... . .... ...."},"+81":{country:"JP",format:"+.. ...-...-....",nationalPrefix:"0"},"+254":{country:"KE",format:"+... .. ......."},"+996":{country:"KG",format:"+... ... ... ..."},"+855":{country:"KH",format:"+... .. ... ..."},"+686":{country:"KI"},"+269":{country:"KM",format:"+... ... .. .."},"+1869":{country:"KN"},"+850":{country:"KP",format:"+... ... ... ...."},"+82":{country:"KR",format:"+.. ..-....-...."},"+965":{country:"KW",format:"+... ... ....."},"+345":{country:"KY"},"+77":{country:"KZ"},"+856":{country:"LA",format:"+... .. .. ... ..."},"+961":{country:"LB",format:"+... .. ... ..."},"+1758":{country:"LC"},"+423":{country:"LI",format:"+... ... ... ..."},"+94":{country:"LK",format:"+.. .. . ......"},"+231":{country:"LR",format:"+... ... ... ..."},"+266":{country:"LS",format:"+... .... ...."},"+370":{country:"LT",format:"+... ... ....."},"+352":{country:"LU",format:"+... .. .. .. ..."},"+371":{country:"LV",format:"+... .. ... ..."},"+218":{country:"LY",format:"+... ..-......."},"+212":{country:"MA",format:"+... ...-......"},"+377":{country:"MC",format:"+... . .. .. .. .."},"+373":{country:"MD",format:"+... ... .. ..."},"+382":{country:"ME",format:"+... .. ... ..."},"+590":{country:"MF"},"+261":{country:"MG",format:"+... .. .. ... .."},"+692":{country:"MH",format:"+... ...-...."},"+389":{country:"MK",format:"+... .. ... ..."},"+223":{country:"ML",format:"+... .. .. .. .."},"+95":{country:"MM",format:"+.. . ... ...."},"+976":{country:"MN",format:"+... .... ...."},"+853":{country:"MO",format:"+... .... ...."},"+1670":{country:"MP"},"+596":{country:"MQ",format:"+... ... .. .. .."},"+222":{country:"MR",format:"+... .. .. .. .."},"+1664":{country:"MS"},"+356":{country:"MT",format:"+... .... ...."},"+230":{country:"MU",format:"+... .... ...."},"+960":{country:"MV",format:"+... ...-...."},"+265":{country:"MW",format:"+... ... .. .. .."},"+52":{country:"MX",format:"+.. ... ... ... ...."},"+60":{country:"MY",format:"+.. ..-... ...."},"+258":{country:"MZ",format:"+... .. ... ...."},"+264":{country:"NA",format:"+... .. ... ...."},"+687":{country:"NC",format:"+... ........"},"+227":{country:"NE",format:"+... .. .. .. .."},"+672":{country:"NF",format:"+... .. ...."},"+234":{country:"NG",format:"+... ... ... ...."},"+505":{country:"NI",format:"+... .... ...."},"+31":{country:"NL",format:"+.. . ........"},"+47":{country:"NO",format:"+.. ... .. ..."},"+977":{country:"NP",format:"+... ...-......."},"+674":{country:"NR",format:"+... ... ...."},"+683":{country:"NU"},"+64":{country:"NZ",format:"+.. .. ... ...."},"+968":{country:"OM",format:"+... .... ...."},"+507":{country:"PA",format:"+... ....-...."},"+51":{country:"PE",format:"+.. ... ... ..."},"+689":{country:"PF",format:"+... .. .. .."},"+675":{country:"PG",format:"+... ... ...."},"+63":{country:"PH",format:"+.. .... ......"},"+92":{country:"PK",format:"+.. ... ......."},"+48":{country:"PL",format:"+.. .. ... .. .."},"+508":{country:"PM",format:"+... .. .. .."},"+872":{country:"PN"},"+1939":{country:"PR"},"+970":{country:"PS",format:"+... ... ... ..."},"+351":{country:"PT",format:"+... ... ... ..."},"+680":{country:"PW",format:"+... ... ...."},"+595":{country:"PY",format:"+... .. ......."},"+974":{country:"QA",format:"+... .... ...."},"+262":{country:"RE"},"+40":{country:"RO",format:"+.. .. ... ...."},"+381":{country:"RS",format:"+... .. ......."},"+7":{country:"RU",format:"+. ... ...-..-.."},"+250":{country:"RW",format:"+... ... ... ..."},"+966":{country:"SA",format:"+... .. ... ...."},"+677":{country:"SB",format:"+... ... ...."},"+248":{country:"SC",format:"+... . ... ..."},"+249":{country:"SD",format:"+... .. ... ...."},"+46":{country:"SE",format:"+.. ..-... .. .."},"+65":{country:"SG",format:"+.. .... ...."},"+290":{country:"SH"},"+386":{country:"SI",format:"+... .. ... ..."},"+421":{country:"SK",format:"+... ... ... ..."},"+232":{country:"SL",format:"+... .. ......"},"+378":{country:"SM",format:"+... .. .. .. .."},"+221":{country:"SN",format:"+... .. ... .. .."},"+252":{country:"SO",format:"+... .. ......."},"+597":{country:"SR",format:"+... ...-...."},"+211":{country:"SS",format:"+... ... ... ..."},"+239":{country:"ST",format:"+... ... ...."},"+503":{country:"SV",format:"+... .... ...."},"+963":{country:"SY",format:"+... ... ... ..."},"+268":{country:"SZ",format:"+... .... ...."},"+1649":{country:"TC"},"+235":{country:"TD",format:"+... .. .. .. .."},"+228":{country:"TG",format:"+... .. .. .. .."},"+66":{country:"TH",format:"+.. .. ... ...."},"+992":{country:"TJ",format:"+... ... .. ...."},"+690":{country:"TK"},"+670":{country:"TL",format:"+... .... ...."},"+993":{country:"TM",format:"+... .. ..-..-.."},"+216":{country:"TN",format:"+... .. ... ..."},"+676":{country:"TO",format:"+... ... ...."},"+90":{country:"TR",format:"+.. ... ... ...."},"+1868":{country:"TT"},"+688":{country:"TV"},"+886":{country:"TW",format:"+... ... ... ..."},"+255":{country:"TZ",format:"+... ... ... ..."},"+380":{country:"UA",format:"+... .. ... ...."},"+256":{country:"UG",format:"+... ... ......"},"+1":{country:"US"},"+598":{country:"UY",format:"+... .... ...."},"+998":{country:"UZ",format:"+... .. ... .. .."},"+379":{country:"VA"},"+1784":{country:"VC"},"+58":{country:"VE",format:"+.. ...-......."},"+1284":{country:"VG"},"+1340":{country:"VI"},"+84":{country:"VN",format:"+.. .. ... .. .."},"+678":{country:"VU",format:"+... ... ...."},"+681":{country:"WF",format:"+... .. .. .."},"+685":{country:"WS"},"+967":{country:"YE",format:"+... ... ... ..."},"+27":{country:"ZA",format:"+.. .. ... ...."},"+260":{country:"ZM",format:"+... .. ......."},"+263":{country:"ZW",format:"+... .. ... ...."}};(function(formats){var canadaPrefixes,format,prefix,_i,_len,_results;canadaPrefixes=[403,587,780,250,604,778,204,506,709,902,226,249,289,343,416,519,613,647,705,807,905,418,438,450,514,579,581,819,873,306,867];for(_i=0,_len=canadaPrefixes.length;_i<_len;_i++){prefix=canadaPrefixes[_i];formats["+1"+prefix]={country:"CA"}}_results=[];for(prefix in formats){format=formats[prefix];if(prefix.substring(0,2)==="+1"){_results.push(format.format="+. (...) ...-....")}else{_results.push(void 0)}}return _results})(formats)}).call(this);(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else{factory(jQuery)}})(function($){var pluses=/\+/g;function raw(s){return s}function decoded(s){return decodeURIComponent(s.replace(pluses," "))}function converted(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{return config.json?JSON.parse(s):s}catch(er){}}var config=$.cookie=function(key,value,options){if(value!==undefined){options=$.extend({},config.defaults,options);if(typeof options.expires==="number"){var days=options.expires,t=options.expires=new Date;t.setDate(t.getDate()+days)}value=config.json?JSON.stringify(value):String(value);return document.cookie=[config.raw?key:encodeURIComponent(key),"=",config.raw?value:encodeURIComponent(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}var decode=config.raw?raw:decoded;var cookies=document.cookie.split("; ");var result=key?undefined:{};for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split("=");var name=decode(parts.shift());var cookie=decode(parts.join("="));if(key&&key===name){result=converted(cookie);break}if(!key){result[name]=converted(cookie)}}return result};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)!==undefined){$.cookie(key,"",$.extend({},options,{expires:-1}));return true}return false}});(function($){$.fn.caret=function(pos){var target=this[0];var isContentEditable=target.contentEditable==="true";if(arguments.length==0){if(window.getSelection){if(isContentEditable){target.focus();var range1=window.getSelection().getRangeAt(0),range2=range1.cloneRange();range2.selectNodeContents(target);range2.setEnd(range1.endContainer,range1.endOffset);return range2.toString().length}return target.selectionStart}if(document.selection){target.focus();if(isContentEditable){var range1=document.selection.createRange(),range2=document.body.createTextRange();range2.moveToElementText(target);range2.setEndPoint("EndToEnd",range1);return range2.text.length}var pos=0,range=target.createTextRange(),range2=document.selection.createRange().duplicate(),bookmark=range2.getBookmark();range.moveToBookmark(bookmark);while(range.moveStart("character",-1)!==0)pos++;return pos}if(target.selectionStart)return target.selectionStart;return 0}if(pos==-1)pos=this[isContentEditable?"text":"val"]().length;if(window.getSelection){if(isContentEditable){target.focus();window.getSelection().collapse(target.firstChild,pos)}else target.setSelectionRange(pos,pos)}else if(document.body.createTextRange){if(isContentEditable){var range=document.body.createTextRange();range.moveToElementText(target);range.moveStart("character",pos);range.collapse(true);range.select()}else{var range=target.createTextRange();range.move("character",pos);range.select()}}if(!isContentEditable)target.focus();return pos}})(jQuery);(function(window,undefined){"use strict";var TraceKit={remoteFetching:false,collectWindowErrors:true,linesOfContext:7};var _slice=[].slice;var UNKNOWN_FUNCTION="?";TraceKit.wrap=function traceKitWrapper(func){function wrapped(){try{return func.apply(this,arguments)}catch(e){TraceKit.report(e);throw e}}return wrapped};TraceKit.report=function reportModuleWrapper(){var handlers=[],lastArgs=null,lastException=null,lastExceptionStack=null;function subscribe(handler){installGlobalHandler();handlers.push(handler)}function unsubscribe(handler){for(var i=handlers.length-1;i>=0;--i){if(handlers[i]===handler){handlers.splice(i,1)}}}function unsubscribeAll(){uninstallGlobalHandler();handlers=[]}function notifyHandlers(stack,isWindowError){var exception=null;if(isWindowError&&!TraceKit.collectWindowErrors){return}for(var i in handlers){if(hasKey(handlers,i)){try{handlers[i].apply(null,[stack].concat(_slice.call(arguments,2)))}catch(inner){exception=inner}}}if(exception){throw exception}}var _oldOnerrorHandler,_onErrorHandlerInstalled;function traceKitWindowOnError(message,url,lineNo,colNo,ex){var stack=null;if(lastExceptionStack){TraceKit.computeStackTrace.augmentStackTraceWithInitialElement(lastExceptionStack,url,lineNo,message);processLastException()}else if(ex){stack=TraceKit.computeStackTrace(ex);notifyHandlers(stack,true)}else{var location={url:url,line:lineNo,column:colNo};location.func=TraceKit.computeStackTrace.guessFunctionName(location.url,location.line);location.context=TraceKit.computeStackTrace.gatherContext(location.url,location.line);stack={message:message,url:document.location.href,stack:[location]};notifyHandlers(stack,true)}if(_oldOnerrorHandler){return _oldOnerrorHandler.apply(this,arguments)}return false}function installGlobalHandler(){if(_onErrorHandlerInstalled){return}_oldOnerrorHandler=window.onerror;window.onerror=traceKitWindowOnError;_onErrorHandlerInstalled=true}function uninstallGlobalHandler(){if(!_onErrorHandlerInstalled){return}window.onerror=_oldOnerrorHandler;_onErrorHandlerInstalled=false;_oldOnerrorHandler=undefined}function processLastException(){var _lastExceptionStack=lastExceptionStack,_lastArgs=lastArgs;lastArgs=null;lastExceptionStack=null;lastException=null;notifyHandlers.apply(null,[_lastExceptionStack,false].concat(_lastArgs))}function report(ex,rethrow){var args=_slice.call(arguments,1);if(lastExceptionStack){if(lastException===ex){return}else{processLastException()}}var stack=TraceKit.computeStackTrace(ex);lastExceptionStack=stack;lastException=ex;lastArgs=args;window.setTimeout(function(){if(lastException===ex){processLastException()}},stack.incomplete?2e3:0);if(rethrow!==false){throw ex}}report.subscribe=subscribe;report.unsubscribe=unsubscribe;report.uninstall=unsubscribeAll;return report}();TraceKit.computeStackTrace=function computeStackTraceWrapper(){var debug=false,sourceCache={};function loadSource(url){if(!TraceKit.remoteFetching){return""}try{var getXHR=function(){try{return new window.XMLHttpRequest}catch(e){return new window.ActiveXObject("Microsoft.XMLHTTP")}};var request=getXHR();request.open("GET",url,false);request.send("");return request.responseText}catch(e){return""}}function getSource(url){if(!isString(url))return[];if(!hasKey(sourceCache,url)){var source="";if(url.indexOf(document.domain)!==-1){source=loadSource(url)}sourceCache[url]=source?source.split("\n"):[]}return sourceCache[url]}function guessFunctionName(url,lineNo){var reFunctionArgNames=/function ([^(]*)\(([^)]*)\)/,reGuessFunction=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,line="",maxLines=10,source=getSource(url),m;if(!source.length){return UNKNOWN_FUNCTION}for(var i=0;i<maxLines;++i){line=source[lineNo-i]+line;if(!isUndefined(line)){if(m=reGuessFunction.exec(line)){return m[1]}else if(m=reFunctionArgNames.exec(line)){return m[1]}}}return UNKNOWN_FUNCTION}function gatherContext(url,line){var source=getSource(url);if(!source.length){return null}var context=[],linesBefore=Math.floor(TraceKit.linesOfContext/2),linesAfter=linesBefore+TraceKit.linesOfContext%2,start=Math.max(0,line-linesBefore-1),end=Math.min(source.length,line+linesAfter-1);line-=1;for(var i=start;i<end;++i){if(!isUndefined(source[i])){context.push(source[i])}}return context.length>0?context:null}function escapeRegExp(text){return text.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function escapeCodeAsRegExpForMatchingInsideHTML(body){return escapeRegExp(body).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function findSourceInUrls(re,urls){var source,m;for(var i=0,j=urls.length;i<j;++i){if((source=getSource(urls[i])).length){source=source.join("\n");if(m=re.exec(source)){return{url:urls[i],line:source.substring(0,m.index).split("\n").length,column:m.index-source.lastIndexOf("\n",m.index)-1}}}}return null}function findSourceInLine(fragment,url,line){var source=getSource(url),re=new RegExp("\\b"+escapeRegExp(fragment)+"\\b"),m;line-=1;if(source&&source.length>line&&(m=re.exec(source[line]))){return m.index}return null}function findSourceByFunctionBody(func){var urls=[window.location.href],scripts=document.getElementsByTagName("script"),body,code=""+func,codeRE=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,eventRE=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,re,parts,result;for(var i=0;i<scripts.length;++i){var script=scripts[i];if(script.src){urls.push(script.src)}}if(!(parts=codeRE.exec(code))){re=new RegExp(escapeRegExp(code).replace(/\s+/g,"\\s+"))}else{var name=parts[1]?"\\s+"+parts[1]:"",args=parts[2].split(",").join("\\s*,\\s*");body=escapeRegExp(parts[3]).replace(/;$/,";?");re=new RegExp("function"+name+"\\s*\\(\\s*"+args+"\\s*\\)\\s*{\\s*"+body+"\\s*}")}if(result=findSourceInUrls(re,urls)){return result}if(parts=eventRE.exec(code)){var event=parts[1];body=escapeCodeAsRegExpForMatchingInsideHTML(parts[2]);re=new RegExp("on"+event+"=[\\'\"]\\s*"+body+"\\s*[\\'\"]","i");if(result=findSourceInUrls(re,urls[0])){return result}re=new RegExp(body);if(result=findSourceInUrls(re,urls)){return result}}return null}function computeStackTraceFromStackProp(ex){if(!ex.stack){return null}var chrome=/^\s*at (?:((?:\[object object\])?\S+(?: \[as \S+\])?) )?\(?((?:file|https?):.*?):(\d+)(?::(\d+))?\)?\s*$/i,gecko=/^\s*(\S*)(?:\((.*?)\))?@((?:file|https?).*?):(\d+)(?::(\d+))?\s*$/i,lines=ex.stack.split("\n"),stack=[],parts,element,reference=/^(.*) is undefined$/.exec(ex.message);for(var i=0,j=lines.length;i<j;++i){if(parts=gecko.exec(lines[i])){element={url:parts[3],func:parts[1]||UNKNOWN_FUNCTION,args:parts[2]?parts[2].split(","):"",line:+parts[4],column:parts[5]?+parts[5]:null}}else if(parts=chrome.exec(lines[i])){element={url:parts[2],func:parts[1]||UNKNOWN_FUNCTION,line:+parts[3],column:parts[4]?+parts[4]:null}}else{continue}if(!element.func&&element.line){element.func=guessFunctionName(element.url,element.line)}if(element.line){element.context=gatherContext(element.url,element.line)}stack.push(element)}if(!stack.length){return null}if(stack[0].line&&!stack[0].column&&reference){stack[0].column=findSourceInLine(reference[1],stack[0].url,stack[0].line)}else if(!stack[0].column&&!isUndefined(ex.columnNumber)){stack[0].column=ex.columnNumber+1}return{name:ex.name,message:ex.message,url:document.location.href,stack:stack}}function computeStackTraceFromStacktraceProp(ex){var stacktrace=ex.stacktrace;var testRE=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,lines=stacktrace.split("\n"),stack=[],parts;for(var i=0,j=lines.length;i<j;i+=2){if(parts=testRE.exec(lines[i])){var element={line:+parts[1],column:+parts[2],func:parts[3]||parts[4],args:parts[5]?parts[5].split(","):[],url:parts[6]};if(!element.func&&element.line){element.func=guessFunctionName(element.url,element.line)}if(element.line){try{element.context=gatherContext(element.url,element.line)}catch(exc){}}if(!element.context){element.context=[lines[i+1]]}stack.push(element)}}if(!stack.length){return null}return{name:ex.name,message:ex.message,url:document.location.href,stack:stack}}function computeStackTraceFromOperaMultiLineMessage(ex){var lines=ex.message.split("\n");if(lines.length<4){return null}var lineRE1=/^\s*Line (\d+) of linked script ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,lineRE2=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,lineRE3=/^\s*Line (\d+) of function script\s*$/i,stack=[],scripts=document.getElementsByTagName("script"),inlineScriptBlocks=[],parts,i,len,source;for(i in scripts){if(hasKey(scripts,i)&&!scripts[i].src){inlineScriptBlocks.push(scripts[i])}}for(i=2,len=lines.length;i<len;i+=2){var item=null;if(parts=lineRE1.exec(lines[i])){item={url:parts[2],func:parts[3],line:+parts[1]}}else if(parts=lineRE2.exec(lines[i])){item={url:parts[3],func:parts[4]};var relativeLine=+parts[1];var script=inlineScriptBlocks[parts[2]-1];if(script){source=getSource(item.url);if(source){source=source.join("\n");var pos=source.indexOf(script.innerText);if(pos>=0){item.line=relativeLine+source.substring(0,pos).split("\n").length}}}}else if(parts=lineRE3.exec(lines[i])){var url=window.location.href.replace(/#.*$/,""),line=parts[1];var re=new RegExp(escapeCodeAsRegExpForMatchingInsideHTML(lines[i+1]));
source=findSourceInUrls(re,[url]);item={url:url,line:source?source.line:line,func:""}}if(item){if(!item.func){item.func=guessFunctionName(item.url,item.line)}var context=gatherContext(item.url,item.line);var midline=context?context[Math.floor(context.length/2)]:null;if(context&&midline.replace(/^\s*/,"")===lines[i+1].replace(/^\s*/,"")){item.context=context}else{item.context=[lines[i+1]]}stack.push(item)}}if(!stack.length){return null}return{name:ex.name,message:lines[0],url:document.location.href,stack:stack}}function augmentStackTraceWithInitialElement(stackInfo,url,lineNo,message){var initial={url:url,line:lineNo};if(initial.url&&initial.line){stackInfo.incomplete=false;if(!initial.func){initial.func=guessFunctionName(initial.url,initial.line)}if(!initial.context){initial.context=gatherContext(initial.url,initial.line)}var reference=/ '([^']+)' /.exec(message);if(reference){initial.column=findSourceInLine(reference[1],initial.url,initial.line)}if(stackInfo.stack.length>0){if(stackInfo.stack[0].url===initial.url){if(stackInfo.stack[0].line===initial.line){return false}else if(!stackInfo.stack[0].line&&stackInfo.stack[0].func===initial.func){stackInfo.stack[0].line=initial.line;stackInfo.stack[0].context=initial.context;return false}}}stackInfo.stack.unshift(initial);stackInfo.partial=true;return true}else{stackInfo.incomplete=true}return false}function computeStackTraceByWalkingCallerChain(ex,depth){var functionName=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,stack=[],funcs={},recursion=false,parts,item,source;for(var curr=computeStackTraceByWalkingCallerChain.caller;curr&&!recursion;curr=curr.caller){if(curr===computeStackTrace||curr===TraceKit.report){continue}item={url:null,func:UNKNOWN_FUNCTION,line:null,column:null};if(curr.name){item.func=curr.name}else if(parts=functionName.exec(curr.toString())){item.func=parts[1]}if(source=findSourceByFunctionBody(curr)){item.url=source.url;item.line=source.line;if(item.func===UNKNOWN_FUNCTION){item.func=guessFunctionName(item.url,item.line)}var reference=/ '([^']+)' /.exec(ex.message||ex.description);if(reference){item.column=findSourceInLine(reference[1],source.url,source.line)}}if(funcs[""+curr]){recursion=true}else{funcs[""+curr]=true}stack.push(item)}if(depth){stack.splice(0,depth)}var result={name:ex.name,message:ex.message,url:document.location.href,stack:stack};augmentStackTraceWithInitialElement(result,ex.sourceURL||ex.fileName,ex.line||ex.lineNumber,ex.message||ex.description);return result}function computeStackTrace(ex,depth){var stack=null;depth=depth==null?0:+depth;try{stack=computeStackTraceFromStacktraceProp(ex);if(stack){return stack}}catch(e){if(debug){throw e}}try{stack=computeStackTraceFromStackProp(ex);if(stack){return stack}}catch(e){if(debug){throw e}}try{stack=computeStackTraceFromOperaMultiLineMessage(ex);if(stack){return stack}}catch(e){if(debug){throw e}}try{stack=computeStackTraceByWalkingCallerChain(ex,depth+1);if(stack){return stack}}catch(e){if(debug){throw e}}return{}}function computeStackTraceOfCaller(depth){depth=(depth==null?0:+depth)+1;try{throw new Error}catch(ex){return computeStackTrace(ex,depth+1)}}computeStackTrace.augmentStackTraceWithInitialElement=augmentStackTraceWithInitialElement;computeStackTrace.guessFunctionName=guessFunctionName;computeStackTrace.gatherContext=gatherContext;computeStackTrace.ofCaller=computeStackTraceOfCaller;return computeStackTrace}();"use strict";var _Raven=window.Raven,hasJSON=!!(window.JSON&&window.JSON.stringify),lastCapturedException,lastEventId,globalServer,globalUser,globalKey,globalProject,globalOptions={logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],collectWindowErrors:true,tags:{},extra:{}},authQueryString;var Raven={VERSION:"1.1.15",noConflict:function(){window.Raven=_Raven;return Raven},config:function(dsn,options){if(!dsn)return Raven;var uri=parseDSN(dsn),lastSlash=uri.path.lastIndexOf("/"),path=uri.path.substr(1,lastSlash);if(options){each(options,function(key,value){globalOptions[key]=value})}globalOptions.ignoreErrors.push("Script error.");globalOptions.ignoreErrors.push("Script error");globalOptions.ignoreErrors=joinRegExp(globalOptions.ignoreErrors);globalOptions.ignoreUrls=globalOptions.ignoreUrls.length?joinRegExp(globalOptions.ignoreUrls):false;globalOptions.whitelistUrls=globalOptions.whitelistUrls.length?joinRegExp(globalOptions.whitelistUrls):false;globalOptions.includePaths=joinRegExp(globalOptions.includePaths);globalKey=uri.user;globalProject=uri.path.substr(lastSlash+1);globalServer="//"+uri.host+(uri.port?":"+uri.port:"")+"/"+path+"api/"+globalProject+"/store/";if(uri.protocol){globalServer=uri.protocol+":"+globalServer}if(globalOptions.fetchContext){TraceKit.remoteFetching=true}if(globalOptions.linesOfContext){TraceKit.linesOfContext=globalOptions.linesOfContext}TraceKit.collectWindowErrors=!!globalOptions.collectWindowErrors;setAuthQueryString();return Raven},install:function(){if(isSetup()){TraceKit.report.subscribe(handleStackInfo)}return Raven},context:function(options,func,args){if(isFunction(options)){args=func||[];func=options;options=undefined}return Raven.wrap(options,func).apply(this,args)},wrap:function(options,func){if(isUndefined(func)&&!isFunction(options)){return options}if(isFunction(options)){func=options;options=undefined}if(!isFunction(func)){return func}if(func.__raven__){return func}function wrapped(){var args=[],i=arguments.length,deep=!options||options&&options.deep!==false;while(i--)args[i]=deep?Raven.wrap(options,arguments[i]):arguments[i];try{return func.apply(this,args)}catch(e){Raven.captureException(e,options);throw e}}for(var property in func){if(func.hasOwnProperty(property)){wrapped[property]=func[property]}}wrapped.__raven__=true;wrapped.__inner__=func;return wrapped},uninstall:function(){TraceKit.report.uninstall();return Raven},captureException:function(ex,options){if(!(ex instanceof Error))return Raven.captureMessage(ex,options);lastCapturedException=ex;try{TraceKit.report(ex,options)}catch(ex1){if(ex!==ex1){throw ex1}}return Raven},captureMessage:function(msg,options){send(objectMerge({message:msg+""},options));return Raven},setUser:function(user){globalUser=user;return Raven},lastException:function(){return lastCapturedException},lastEventId:function(){return lastEventId}};function triggerEvent(eventType,options){var event,key;options=options||{};eventType="raven"+eventType.substr(0,1).toUpperCase()+eventType.substr(1);if(document.createEvent){event=document.createEvent("HTMLEvents");event.initEvent(eventType,true,true)}else{event=document.createEventObject();event.eventType=eventType}for(key in options)if(options.hasOwnProperty(key)){event[key]=options[key]}if(document.createEvent){document.dispatchEvent(event)}else{try{document.fireEvent("on"+event.eventType.toLowerCase(),event)}catch(e){}}}var dsnKeys="source protocol user pass host port path".split(" "),dsnPattern=/^(?:(\w+):)?\/\/(\w+)(:\w+)?@([\w\.-]+)(?::(\d+))?(\/.*)/;function RavenConfigError(message){this.name="RavenConfigError";this.message=message}RavenConfigError.prototype=new Error;RavenConfigError.prototype.constructor=RavenConfigError;function parseDSN(str){var m=dsnPattern.exec(str),dsn={},i=7;try{while(i--)dsn[dsnKeys[i]]=m[i]||""}catch(e){throw new RavenConfigError("Invalid DSN: "+str)}if(dsn.pass)throw new RavenConfigError("Do not specify your private key in the DSN!");return dsn}function isUndefined(what){return typeof what==="undefined"}function isFunction(what){return typeof what==="function"}function isString(what){return typeof what==="string"}function isEmptyObject(what){for(var k in what)return false;return true}function hasKey(object,key){return Object.prototype.hasOwnProperty.call(object,key)}function each(obj,callback){var i,j;if(isUndefined(obj.length)){for(i in obj){if(obj.hasOwnProperty(i)){callback.call(null,i,obj[i])}}}else{j=obj.length;if(j){for(i=0;i<j;i++){callback.call(null,i,obj[i])}}}}function setAuthQueryString(){authQueryString="?sentry_version=4"+"&sentry_client=raven-js/"+Raven.VERSION+"&sentry_key="+globalKey}function handleStackInfo(stackInfo,options){var frames=[];if(stackInfo.stack&&stackInfo.stack.length){each(stackInfo.stack,function(i,stack){var frame=normalizeFrame(stack);if(frame){frames.push(frame)}})}triggerEvent("handle",{stackInfo:stackInfo,options:options});processException(stackInfo.name,stackInfo.message,stackInfo.url,stackInfo.lineno,frames,options)}function normalizeFrame(frame){if(!frame.url)return;var normalized={filename:frame.url,lineno:frame.line,colno:frame.column,"function":frame.func||"?"},context=extractContextFromFrame(frame),i;if(context){var keys=["pre_context","context_line","post_context"];i=3;while(i--)normalized[keys[i]]=context[i]}normalized.in_app=!(!globalOptions.includePaths.test(normalized.filename)||/(Raven|TraceKit)\./.test(normalized["function"])||/raven\.(min\.)js$/.test(normalized.filename));return normalized}function extractContextFromFrame(frame){if(!frame.context||!globalOptions.fetchContext)return;var context=frame.context,pivot=~~(context.length/2),i=context.length,isMinified=false;while(i--){if(context[i].length>300){isMinified=true;break}}if(isMinified){if(isUndefined(frame.column))return;return[[],context[pivot].substr(frame.column,50),[]]}return[context.slice(0,pivot),context[pivot],context.slice(pivot+1)]}function processException(type,message,fileurl,lineno,frames,options){var stacktrace,label,i;message+="";if(type==="Error"&&!message)return;if(globalOptions.ignoreErrors.test(message))return;if(frames&&frames.length){fileurl=frames[0].filename||fileurl;frames.reverse();stacktrace={frames:frames}}else if(fileurl){stacktrace={frames:[{filename:fileurl,lineno:lineno,in_app:true}]}}message=truncate(message,100);if(globalOptions.ignoreUrls&&globalOptions.ignoreUrls.test(fileurl))return;if(globalOptions.whitelistUrls&&!globalOptions.whitelistUrls.test(fileurl))return;label=lineno?message+" at "+lineno:message;send(objectMerge({exception:{type:type,value:message},stacktrace:stacktrace,culprit:fileurl,message:label},options))}function objectMerge(obj1,obj2){if(!obj2){return obj1}each(obj2,function(key,value){obj1[key]=value});return obj1}function truncate(str,max){return str.length<=max?str:str.substr(0,max)+"…"}function getHttpData(){var http={url:document.location.href,headers:{"User-Agent":navigator.userAgent}};if(document.referrer){http.headers.Referer=document.referrer}return http}function send(data){if(!isSetup())return;data=objectMerge({project:globalProject,logger:globalOptions.logger,site:globalOptions.site,platform:"javascript",request:getHttpData()},data);data.tags=objectMerge(globalOptions.tags,data.tags);data.extra=objectMerge(globalOptions.extra,data.extra);if(isEmptyObject(data.tags))delete data.tags;if(isEmptyObject(data.extra))delete data.extra;if(globalUser){data.user=globalUser}if(isFunction(globalOptions.dataCallback)){data=globalOptions.dataCallback(data)}if(isFunction(globalOptions.shouldSendCallback)&&!globalOptions.shouldSendCallback(data)){return}lastEventId=data.event_id||(data.event_id=uuid4());makeRequest(data)}function makeRequest(data){var img=new Image,src=globalServer+authQueryString+"&sentry_data="+encodeURIComponent(JSON.stringify(data));img.onload=function success(){triggerEvent("success",{data:data,src:src})};img.onerror=img.onabort=function failure(){triggerEvent("failure",{data:data,src:src})};img.src=src}function isSetup(){if(!hasJSON)return false;if(!globalServer){if(window.console&&console.error){console.error("Error: Raven has not been configured.")}return false}return true}function joinRegExp(patterns){var sources=[],i=0,len=patterns.length,pattern;for(;i<len;i++){pattern=patterns[i];if(isString(pattern)){sources.push(pattern.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"))}else if(pattern&&pattern.source){sources.push(pattern.source)}}return new RegExp(sources.join("|"),"i")}function uuid4(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)})}function afterLoad(){var RavenConfig=window.RavenConfig;if(RavenConfig){Raven.config(RavenConfig.dsn,RavenConfig.config).install()}}afterLoad();window.Raven=Raven;if(typeof define==="function"&&define.amd){define("raven",[],function(){return Raven})}})(this);(function extendToAsynchronousCallbacks(window,Raven){"use strict";var _helper=function _helper(fnName){var originalFn=window[fnName];window[fnName]=function ravenAsyncExtension(){var args=[].slice.call(arguments);var originalCallback=args[0];if(typeof originalCallback==="function"){args[0]=Raven.wrap(originalCallback)}if(originalFn.apply){return originalFn.apply(this,args)}else{return originalFn(args[0],args[1])}}};_helper("setTimeout");_helper("setInterval")})(this,Raven);(function(window,Raven,$){"use strict";if(!$){return}var _oldEventAdd=$.event.add;$.event.add=function ravenEventAdd(elem,types,handler,data,selector){var _handler;if(handler&&handler.handler){_handler=handler.handler;handler.handler=Raven.wrap(handler.handler)}else{_handler=handler;handler=Raven.wrap(handler)}if(_handler.guid){handler.guid=_handler.guid}else{handler.guid=_handler.guid=$.guid++}return _oldEventAdd.call(this,elem,types,handler,data,selector)};var _oldReady=$.fn.ready;$.fn.ready=function ravenjQueryReadyWrapper(fn){return _oldReady.call(this,Raven.wrap(fn))};var _oldAjax=$.ajax;$.ajax=function ravenAjaxWrapper(url,options){var keys=["complete","error","success"],key;if(typeof url==="object"){options=url;url=undefined}options=options||{};while(key=keys.pop()){if($.isFunction(options[key])){options[key]=Raven.wrap(options[key])}}try{return _oldAjax.call(this,url,options)}catch(e){Raven.captureException(e);throw e}}})(this,Raven,window.jQuery);(function(root){var NumberFormat=function(locale,pattern,opt_currency,opt_currencyStyle){this.locale=locale||"en";pattern=pattern||NumberFormat.Format.DECIMAL;this.intlCurrencyCode_=opt_currency||NumberFormat.locale[this.locale].DEF_CURRENCY_CODE;this.currencyStyle_=opt_currencyStyle||NumberFormat.CurrencyStyle.LOCAL;this.maximumIntegerDigits_=40;this.minimumIntegerDigits_=1;this.maximumFractionDigits_=3;this.minimumFractionDigits_=0;this.minExponentDigits_=0;this.useSignForPositiveExponent_=false;this.positivePrefix_="";this.positiveSuffix_="";this.negativePrefix_="-";this.negativeSuffix_="";this.multiplier_=1;this.groupingSize_=3;this.decimalSeparatorAlwaysShown_=false;this.useExponentialNotation_=false;if(typeof pattern=="number"){this.applyStandardPattern_(pattern)}else{this.applyPattern_(pattern)}};NumberFormat.locale={en:{DECIMAL_SEP:".",GROUP_SEP:",",PERCENT:"%",ZERO_DIGIT:"0",PLUS_SIGN:"+",MINUS_SIGN:"-",EXP_SYMBOL:"E",PERMILL:"‰",INFINITY:"∞",NAN:"NaN",DECIMAL_PATTERN:"#,##0.###",SCIENTIFIC_PATTERN:"#E0",PERCENT_PATTERN:"#,##0%",CURRENCY_PATTERN:"¤#,##0.00;(¤#,##0.00)",DEF_CURRENCY_CODE:"USD"}};NumberFormat.Format={DECIMAL:1,SCIENTIFIC:2,PERCENT:3,CURRENCY:4};NumberFormat.CurrencyStyle={LOCAL:0,PORTABLE:1,GLOBAL:2};NumberFormat.enforceAsciiDigits_=false;NumberFormat.setEnforceAsciiDigits=function(doEnforce){NumberFormat.enforceAsciiDigits_=doEnforce};NumberFormat.isEnforceAsciiDigits=function(){return NumberFormat.enforceAsciiDigits_};NumberFormat.prototype.applyPattern_=function(pattern){this.pattern_=pattern.replace(/ /g," ");var pos=[0];this.positivePrefix_=this.parseAffix_(pattern,pos);var trunkStart=pos[0];this.parseTrunk_(pattern,pos);var trunkLen=pos[0]-trunkStart;this.positiveSuffix_=this.parseAffix_(pattern,pos);if(pos[0]<pattern.length&&pattern.charAt(pos[0])==NumberFormat.PATTERN_SEPARATOR_){pos[0]++;this.negativePrefix_=this.parseAffix_(pattern,pos);pos[0]+=trunkLen;this.negativeSuffix_=this.parseAffix_(pattern,pos)}else{this.negativePrefix_=this.positivePrefix_+this.negativePrefix_;this.negativeSuffix_+=this.positiveSuffix_}};NumberFormat.prototype.applyStandardPattern_=function(patternType){switch(patternType){case NumberFormat.Format.DECIMAL:this.applyPattern_(NumberFormat.locale[this.locale].DECIMAL_PATTERN);break;case NumberFormat.Format.SCIENTIFIC:this.applyPattern_(NumberFormat.locale[this.locale].SCIENTIFIC_PATTERN);break;case NumberFormat.Format.PERCENT:this.applyPattern_(NumberFormat.locale[this.locale].PERCENT_PATTERN);break;case NumberFormat.Format.CURRENCY:this.applyPattern_(currency.adjustPrecision(NumberFormat.locale[this.locale].CURRENCY_PATTERN,this.intlCurrencyCode_));break;default:throw Error("Unsupported pattern type.")}};NumberFormat.prototype.parse=function(text,opt_pos){var pos=opt_pos||[0];var start=pos[0];var ret=NaN;text=text.replace(/ /g," ");var gotPositive=text.indexOf(this.positivePrefix_,pos[0])==pos[0];var gotNegative=text.indexOf(this.negativePrefix_,pos[0])==pos[0];if(gotPositive&&gotNegative){if(this.positivePrefix_.length>this.negativePrefix_.length){gotNegative=false}else if(this.positivePrefix_.length<this.negativePrefix_.length){gotPositive=false}}if(gotPositive){pos[0]+=this.positivePrefix_.length}else if(gotNegative){pos[0]+=this.negativePrefix_.length}if(text.indexOf(NumberFormat.locale[this.locale].INFINITY,pos[0])==pos[0]){pos[0]+=NumberFormat.locale[this.locale].INFINITY.length;ret=Infinity}else{ret=this.parseNumber_(text,pos)}if(gotPositive){if(!(text.indexOf(this.positiveSuffix_,pos[0])==pos[0])){return NaN}pos[0]+=this.positiveSuffix_.length}else if(gotNegative){if(!(text.indexOf(this.negativeSuffix_,pos[0])==pos[0])){return NaN}pos[0]+=this.negativeSuffix_.length}return gotNegative?-ret:ret};NumberFormat.prototype.parseNumber_=function(text,pos){var sawDecimal=false;var sawExponent=false;var sawDigit=false;var scale=1;var decimal=NumberFormat.locale[this.locale].DECIMAL_SEP;var grouping=NumberFormat.locale[this.locale].GROUP_SEP;var exponentChar=NumberFormat.locale[this.locale].EXP_SYMBOL;var normalizedText="";for(;pos[0]<text.length;pos[0]++){var ch=text.charAt(pos[0]);var digit=this.getDigit_(ch);if(digit>=0&&digit<=9){normalizedText+=digit;sawDigit=true}else if(ch==decimal.charAt(0)){if(sawDecimal||sawExponent){break}normalizedText+=".";sawDecimal=true}else if(ch==grouping.charAt(0)&&(" "!=grouping.charAt(0)||pos[0]+1<text.length&&this.getDigit_(text.charAt(pos[0]+1))>=0)){if(sawDecimal||sawExponent){break}continue}else if(ch==exponentChar.charAt(0)){if(sawExponent){break}normalizedText+="E";sawExponent=true}else if(ch=="+"||ch=="-"){normalizedText+=ch}else if(ch==NumberFormat.locale[this.locale].PERCENT.charAt(0)){if(scale!=1){break}scale=100;if(sawDigit){pos[0]++;break}}else if(ch==NumberFormat.locale[this.locale].PERMILL.charAt(0)){if(scale!=1){break}scale=1e3;if(sawDigit){pos[0]++;break}}else{break}}return parseFloat(normalizedText)/scale};NumberFormat.prototype.format=function(number){if(isNaN(number)){return NumberFormat.locale[this.locale].NAN}var parts=[];var isNegative=number<0||number==0&&1/number<0;parts.push(isNegative?this.negativePrefix_:this.positivePrefix_);if(!isFinite(number)){parts.push(NumberFormat.locale[this.locale].INFINITY)}else{number*=isNegative?-1:1;number*=this.multiplier_;this.useExponentialNotation_?this.subformatExponential_(number,parts):this.subformatFixed_(number,this.minimumIntegerDigits_,parts)}parts.push(isNegative?this.negativeSuffix_:this.positiveSuffix_);return parts.join("")};NumberFormat.prototype.subformatFixed_=function(number,minIntDigits,parts){var power=Math.pow(10,this.maximumFractionDigits_);var shiftedNumber=Math.round(number*power);var intValue,fracValue;if(isFinite(shiftedNumber)){intValue=Math.floor(shiftedNumber/power);fracValue=Math.floor(shiftedNumber-intValue*power)}else{intValue=number;fracValue=0}var fractionPresent=this.minimumFractionDigits_>0||fracValue>0;var intPart="";var translatableInt=intValue;while(translatableInt>1e20){intPart="0"+intPart;translatableInt=Math.round(translatableInt/10)}intPart=translatableInt+intPart;var decimal=NumberFormat.locale[this.locale].DECIMAL_SEP;var grouping=NumberFormat.locale[this.locale].GROUP_SEP;var zeroCode=NumberFormat.enforceAsciiDigits_?48:NumberFormat.locale[this.locale].ZERO_DIGIT.charCodeAt(0);var digitLen=intPart.length;if(intValue>0||minIntDigits>0){for(var i=digitLen;i<minIntDigits;i++){parts.push(String.fromCharCode(zeroCode))}for(var i=0;i<digitLen;i++){parts.push(String.fromCharCode(zeroCode+intPart.charAt(i)*1));if(digitLen-i>1&&this.groupingSize_>0&&(digitLen-i)%this.groupingSize_==1){parts.push(grouping)}}}else if(!fractionPresent){parts.push(String.fromCharCode(zeroCode))}if(this.decimalSeparatorAlwaysShown_||fractionPresent){parts.push(decimal)}var fracPart=""+(fracValue+power);var fracLen=fracPart.length;while(fracPart.charAt(fracLen-1)=="0"&&fracLen>this.minimumFractionDigits_+1){fracLen--}for(var i=1;i<fracLen;i++){parts.push(String.fromCharCode(zeroCode+fracPart.charAt(i)*1))}};NumberFormat.prototype.addExponentPart_=function(exponent,parts){parts.push(NumberFormat.locale[this.locale].EXP_SYMBOL);if(exponent<0){exponent=-exponent;parts.push(NumberFormat.locale[this.locale].MINUS_SIGN)}else if(this.useSignForPositiveExponent_){parts.push(NumberFormat.locale[this.locale].PLUS_SIGN)}var exponentDigits=""+exponent;var zeroChar=NumberFormat.enforceAsciiDigits_?"0":NumberFormat.locale[this.locale].ZERO_DIGIT;for(var i=exponentDigits.length;i<this.minExponentDigits_;i++){parts.push(zeroChar)}parts.push(exponentDigits)};NumberFormat.prototype.subformatExponential_=function(number,parts){if(number==0){this.subformatFixed_(number,this.minimumIntegerDigits_,parts);this.addExponentPart_(0,parts);return}var exponent=Math.floor(Math.log(number)/Math.log(10));number/=Math.pow(10,exponent);var minIntDigits=this.minimumIntegerDigits_;if(this.maximumIntegerDigits_>1&&this.maximumIntegerDigits_>this.minimumIntegerDigits_){while(exponent%this.maximumIntegerDigits_!=0){number*=10;exponent--}minIntDigits=1}else{if(this.minimumIntegerDigits_<1){exponent++;number/=10}else{exponent-=this.minimumIntegerDigits_-1;number*=Math.pow(10,this.minimumIntegerDigits_-1)}}this.subformatFixed_(number,minIntDigits,parts);this.addExponentPart_(exponent,parts)};NumberFormat.prototype.getDigit_=function(ch){var code=ch.charCodeAt(0);if(48<=code&&code<58){return code-48}else{var zeroCode=NumberFormat.locale[this.locale].ZERO_DIGIT.charCodeAt(0);return zeroCode<=code&&code<zeroCode+10?code-zeroCode:-1}};NumberFormat.PATTERN_ZERO_DIGIT_="0";NumberFormat.PATTERN_GROUPING_SEPARATOR_=",";NumberFormat.PATTERN_DECIMAL_SEPARATOR_=".";NumberFormat.PATTERN_PER_MILLE_="‰";NumberFormat.PATTERN_PERCENT_="%";NumberFormat.PATTERN_DIGIT_="#";NumberFormat.PATTERN_SEPARATOR_=";";NumberFormat.PATTERN_EXPONENT_="E";NumberFormat.PATTERN_PLUS_="+";NumberFormat.PATTERN_MINUS_="-";NumberFormat.PATTERN_CURRENCY_SIGN_="¤";NumberFormat.QUOTE_="'";NumberFormat.prototype.parseAffix_=function(pattern,pos){var affix="";var inQuote=false;var len=pattern.length;for(;pos[0]<len;pos[0]++){var ch=pattern.charAt(pos[0]);if(ch==NumberFormat.QUOTE_){if(pos[0]+1<len&&pattern.charAt(pos[0]+1)==NumberFormat.QUOTE_){pos[0]++;affix+="'"}else{inQuote=!inQuote}continue}if(inQuote){affix+=ch}else{switch(ch){case NumberFormat.PATTERN_DIGIT_:case NumberFormat.PATTERN_ZERO_DIGIT_:case NumberFormat.PATTERN_GROUPING_SEPARATOR_:case NumberFormat.PATTERN_DECIMAL_SEPARATOR_:case NumberFormat.PATTERN_SEPARATOR_:return affix;case NumberFormat.PATTERN_CURRENCY_SIGN_:if(pos[0]+1<len&&pattern.charAt(pos[0]+1)==NumberFormat.PATTERN_CURRENCY_SIGN_){pos[0]++;affix+=this.intlCurrencyCode_}else{switch(this.currencyStyle_){case NumberFormat.CurrencyStyle.LOCAL:affix+=currency.getLocalCurrencySign(this.intlCurrencyCode_);break;case NumberFormat.CurrencyStyle.GLOBAL:affix+=currency.getGlobalCurrencySign(this.intlCurrencyCode_);break;case NumberFormat.CurrencyStyle.PORTABLE:affix+=currency.getPortableCurrencySign(this.intlCurrencyCode_);break;default:break}}break;case NumberFormat.PATTERN_PERCENT_:if(this.multiplier_!=1){throw Error("Too many percent/permill")}this.multiplier_=100;affix+=NumberFormat.locale[this.locale].PERCENT;break;case NumberFormat.PATTERN_PER_MILLE_:if(this.multiplier_!=1){throw Error("Too many percent/permill")}this.multiplier_=1e3;affix+=NumberFormat.locale[this.locale].PERMILL;break;default:affix+=ch}}}return affix};NumberFormat.prototype.parseTrunk_=function(pattern,pos){var decimalPos=-1;var digitLeftCount=0;var zeroDigitCount=0;var digitRightCount=0;var groupingCount=-1;var len=pattern.length;for(var loop=true;pos[0]<len&&loop;pos[0]++){var ch=pattern.charAt(pos[0]);switch(ch){case NumberFormat.PATTERN_DIGIT_:if(zeroDigitCount>0){digitRightCount++}else{digitLeftCount++}if(groupingCount>=0&&decimalPos<0){groupingCount++}break;case NumberFormat.PATTERN_ZERO_DIGIT_:if(digitRightCount>0){throw Error('Unexpected "0" in pattern "'+pattern+'"')}zeroDigitCount++;if(groupingCount>=0&&decimalPos<0){groupingCount++}break;case NumberFormat.PATTERN_GROUPING_SEPARATOR_:groupingCount=0;break;case NumberFormat.PATTERN_DECIMAL_SEPARATOR_:if(decimalPos>=0){throw Error('Multiple decimal separators in pattern "'+pattern+'"')}decimalPos=digitLeftCount+zeroDigitCount+digitRightCount;break;case NumberFormat.PATTERN_EXPONENT_:if(this.useExponentialNotation_){throw Error('Multiple exponential symbols in pattern "'+pattern+'"')}this.useExponentialNotation_=true;this.minExponentDigits_=0;if(pos[0]+1<len&&pattern.charAt(pos[0]+1)==NumberFormat.PATTERN_PLUS_){pos[0]++;this.useSignForPositiveExponent_=true}while(pos[0]+1<len&&pattern.charAt(pos[0]+1)==NumberFormat.PATTERN_ZERO_DIGIT_){pos[0]++;this.minExponentDigits_++}if(digitLeftCount+zeroDigitCount<1||this.minExponentDigits_<1){throw Error('Malformed exponential pattern "'+pattern+'"')}loop=false;break;default:pos[0]--;loop=false;break}}if(zeroDigitCount==0&&digitLeftCount>0&&decimalPos>=0){var n=decimalPos;if(n==0){n++}digitRightCount=digitLeftCount-n;digitLeftCount=n-1;zeroDigitCount=1}if(decimalPos<0&&digitRightCount>0||decimalPos>=0&&(decimalPos<digitLeftCount||decimalPos>digitLeftCount+zeroDigitCount)||groupingCount==0){throw Error('Malformed pattern "'+pattern+'"')}var totalDigits=digitLeftCount+zeroDigitCount+digitRightCount;this.maximumFractionDigits_=decimalPos>=0?totalDigits-decimalPos:0;if(decimalPos>=0){this.minimumFractionDigits_=digitLeftCount+zeroDigitCount-decimalPos;if(this.minimumFractionDigits_<0){this.minimumFractionDigits_=0}}var effectiveDecimalPos=decimalPos>=0?decimalPos:totalDigits;this.minimumIntegerDigits_=effectiveDecimalPos-digitLeftCount;if(this.useExponentialNotation_){this.maximumIntegerDigits_=digitLeftCount+this.minimumIntegerDigits_;if(this.maximumFractionDigits_==0&&this.minimumIntegerDigits_==0){this.minimumIntegerDigits_=1}}this.groupingSize_=Math.max(0,groupingCount);this.decimalSeparatorAlwaysShown_=decimalPos==0||decimalPos==totalDigits};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=NumberFormat}exports.NumberFormat=NumberFormat}else{root["NumberFormat"]=NumberFormat}})(this);(function(root){currency={};currency.PRECISION_MASK_=7;currency.POSITION_FLAG_=8;currency.SPACE_FLAG_=32;currency.addTier2Support=function(){for(var key in currency.CurrencyInfoTier2){currency.CurrencyInfo[key]=currency.CurrencyInfoTier2[key]}};currency.getGlobalCurrencyPattern=function(currencyCode){var info=currency.CurrencyInfo[currencyCode];var patternNum=info[0];if(currencyCode==info[1]){return currency.getCurrencyPattern_(patternNum,info[1])}return currencyCode+" "+currency.getCurrencyPattern_(patternNum,info[1])};currency.getGlobalCurrencySign=function(currencyCode){var info=currency.CurrencyInfo[currencyCode];return currencyCode==info[1]?currencyCode:currencyCode+" "+info[1]};currency.getLocalCurrencyPattern=function(currencyCode){var info=currency.CurrencyInfo[currencyCode];return currency.getCurrencyPattern_(info[0],info[1])};currency.getLocalCurrencySign=function(currencyCode){return currency.CurrencyInfo[currencyCode][1]};currency.getPortableCurrencyPattern=function(currencyCode){var info=currency.CurrencyInfo[currencyCode];return currency.getCurrencyPattern_(info[0],info[2])};currency.getPortableCurrencySign=function(currencyCode){return currency.CurrencyInfo[currencyCode][2]};currency.isPrefixSignPosition=function(currencyCode){return(currency.CurrencyInfo[currencyCode][0]&currency.POSITION_FLAG_)==0};currency.getCurrencyPattern_=function(patternNum,sign){var strParts=["#,##0"];var precision=patternNum&currency.PRECISION_MASK_;if(precision>0){strParts.push(".");for(var i=0;i<precision;i++){strParts.push("0")}}if((patternNum&currency.POSITION_FLAG_)==0){strParts.unshift(patternNum&currency.SPACE_FLAG_?"' ":"'");strParts.unshift(sign);strParts.unshift("'")}else{strParts.push(patternNum&currency.SPACE_FLAG_?" '":"'",sign,"'")}return strParts.join("")};currency.adjustPrecision=function(pattern,currencyCode){var strParts=["0"];var info=currency.CurrencyInfo[currencyCode];var precision=info[0]&currency.PRECISION_MASK_;if(precision>0){strParts.push(".");for(var i=0;i<precision;i++){strParts.push("0")}}return pattern.replace(/0.00/g,strParts.join(""))};currency.CurrencyInfo={AED:[2,"dh","د.إ.","DH"],AUD:[2,"$","AU$"],BDT:[2,"৳","Tk"],BRL:[2,"R$","R$"],CAD:[2,"$","CAD$"],CHF:[2,"CHF","CHF"],CLP:[0,"$","CL$"],CNY:[2,"¥","RMB¥"],COP:[0,"$","COL$"],CRC:[0,"₡","CR₡"],CZK:[2,"Kč","Kč"],DKK:[18,"kr","kr"],DOP:[2,"$","RD$"],EGP:[2,"£","LE"],EUR:[18,"€","€"],GBP:[2,"£","£"],HKD:[2,"$","HK$"],ILS:[2,"₪","IL₪"],INR:[2,"₹","Rs"],ISK:[0,"kr","kr"],JMD:[2,"$","JA$"],JPY:[0,"¥","JP¥"],KRW:[0,"₩","KR₩"],LKR:[2,"Rs","SLRs"],MNT:[0,"₮","MN₮"],MXN:[2,"$","Mex$"],MYR:[2,"RM","RM"],NOK:[18,"kr","NOkr"],PAB:[2,"B/.","B/."],PEN:[2,"S/.","S/."],PHP:[2,"₱","Php"],PKR:[0,"Rs","PKRs."],RUB:[42,"руб.","руб."],SAR:[2,"Rial","Rial"],SEK:[2,"kr","kr"],SGD:[2,"$","S$"],THB:[2,"฿","THB"],TRY:[2,"TL","YTL"],TWD:[2,"NT$","NT$"],USD:[2,"$","$"],UYU:[2,"$","UY$"],VND:[0,"₫","VN₫"],YER:[0,"Rial","Rial"],ZAR:[2,"R","ZAR"]};currency.CurrencyInfoTier2={AFN:[16,"Af.","AFN"],ALL:[0,"Lek","Lek"],AMD:[0,"Dram","dram"],AOA:[2,"Kz","Kz"],ARS:[2,"$","AR$"],AWG:[2,"Afl.","Afl."],AZN:[2,"man.","man."],BAM:[18,"KM","KM"],BBD:[2,"$","Bds$"],BGN:[2,"lev","lev"],BHD:[3,"din","din"],BIF:[0,"FBu","FBu"],BMD:[2,"$","BD$"],BND:[2,"$","B$"],BOB:[2,"Bs","Bs"],BSD:[2,"$","BS$"],BTN:[2,"Nu.","Nu."],BWP:[2,"P","pula"],BYR:[0,"BYR","BYR"],BZD:[2,"$","BZ$"],CDF:[2,"FrCD","CDF"],CUC:[1,"$","CUC$"],CUP:[2,"$","CU$"],CVE:[2,"CVE","Esc"],DJF:[0,"Fdj","Fdj"],DZD:[2,"din","din"],ERN:[2,"Nfk","Nfk"],ETB:[2,"Birr","Birr"],FJD:[2,"$","FJ$"],FKP:[2,"£","FK£"],GEL:[2,"GEL","GEL"],GHS:[2,"GHS","GHS"],GIP:[2,"£","GI£"],GMD:[2,"GMD","GMD"],GNF:[0,"FG","FG"],GTQ:[2,"Q","GTQ"],GYD:[0,"$","GY$"],HNL:[2,"L","HNL"],HRK:[2,"kn","kn"],HTG:[2,"HTG","HTG"],HUF:[0,"Ft","Ft"],IDR:[0,"Rp","Rp"],IQD:[0,"din","IQD"],IRR:[0,"Rial","IRR"],JOD:[3,"din","JOD"],KES:[2,"Ksh","Ksh"],KGS:[2,"KGS","KGS"],KHR:[2,"Riel","KHR"],KMF:[0,"CF","KMF"],KPW:[0,"₩KP","KPW"],KWD:[3,"din","KWD"],KYD:[2,"$","KY$"],KZT:[2,"₸","KZT"],LAK:[0,"₭","₭"],LBP:[0,"L£","LBP"],LRD:[2,"$","L$"],LSL:[2,"LSL","LSL"],LTL:[2,"Lt","Lt"],LVL:[2,"Ls","Ls"],LYD:[3,"din","LD"],MAD:[2,"dh","MAD"],MDL:[2,"MDL","MDL"],MGA:[0,"Ar","MGA"],MKD:[2,"din","MKD"],MMK:[0,"K","MMK"],MOP:[2,"MOP","MOP$"],MRO:[0,"MRO","MRO"],MUR:[0,"MURs","MURs"],MWK:[2,"MWK","MWK"],MZN:[2,"MTn","MTn"],NAD:[2,"$","N$"],NGN:[2,"₦","NG₦"],NIO:[2,"C$","C$"],NPR:[2,"Rs","NPRs"],NZD:[2,"$","NZ$"],OMR:[3,"Rial","OMR"],PGK:[2,"PGK","PGK"],PLN:[2,"zł","zł"],PYG:[0,"Gs","PYG"],QAR:[2,"Rial","QR"],RON:[2,"RON","RON"],RSD:[0,"din","RSD"],RWF:[0,"RF","RF"],SBD:[2,"$","SI$"],SCR:[2,"SCR","SCR"],SDG:[2,"SDG","SDG"],SHP:[2,"£","SH£"],SLL:[0,"SLL","SLL"],SOS:[0,"SOS","SOS"],SRD:[2,"$","SR$"],STD:[0,"Db","Db"],SYP:[16,"£","SY£"],SZL:[2,"SZL","SZL"],TJS:[2,"Som","TJS"],TND:[3,"din","DT"],TOP:[2,"T$","T$"],TTD:[2,"$","TT$"],TZS:[0,"TSh","TSh"],UAH:[2,"₴","UAH"],UGX:[0,"UGX","UGX"],UYU:[1,"$","$U"],UZS:[0,"soʼm","UZS"],VEF:[2,"Bs","Bs"],VUV:[0,"VUV","VUV"],WST:[2,"WST","WST"],XAF:[0,"FCFA","FCFA"],XCD:[2,"$","EC$"],XOF:[0,"CFA","CFA"],XPF:[0,"FCFP","FCFP"],ZMK:[0,"ZMK","ZMK"]};
if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=currency}exports.currency=currency}else{root["currency"]=currency}})(this);StripeCheckout.require.define({"vendor/lodash":function(exports,require,module){(function(){var arrayPool=[],objectPool=[];var indicatorObject={};var keyPrefix=+new Date+"";var largeArraySize=75;var maxPoolSize=40;var shadowedProps=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];var argsClass="[object Arguments]",arrayClass="[object Array]",boolClass="[object Boolean]",dateClass="[object Date]",errorClass="[object Error]",funcClass="[object Function]",numberClass="[object Number]",objectClass="[object Object]",regexpClass="[object RegExp]",stringClass="[object String]";var iteratorData={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:false};var objectTypes={"boolean":false,"function":true,object:true,number:false,string:false,undefined:false};var root=objectTypes[typeof window]&&window||this;var freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports;var freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports;var freeGlobal=objectTypes[typeof global]&&global;if(freeGlobal&&(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal)){root=freeGlobal}function baseIndexOf(array,value,fromIndex){var index=(fromIndex||0)-1,length=array?array.length:0;while(++index<length){if(array[index]===value){return index}}return-1}function cacheIndexOf(cache,value){var type=typeof value;cache=cache.cache;if(type=="boolean"||value==null){return cache[value]?0:-1}if(type!="number"&&type!="string"){type="object"}var key=type=="number"?value:keyPrefix+value;cache=(cache=cache[type])&&cache[key];return type=="object"?cache&&baseIndexOf(cache,value)>-1?0:-1:cache?0:-1}function cachePush(value){var cache=this.cache,type=typeof value;if(type=="boolean"||value==null){cache[value]=true}else{if(type!="number"&&type!="string"){type="object"}var key=type=="number"?value:keyPrefix+value,typeCache=cache[type]||(cache[type]={});if(type=="object"){(typeCache[key]||(typeCache[key]=[])).push(value)}else{typeCache[key]=true}}}function createCache(array){var index=-1,length=array.length,first=array[0],mid=array[length/2|0],last=array[length-1];if(first&&typeof first=="object"&&mid&&typeof mid=="object"&&last&&typeof last=="object"){return false}var cache=getObject();cache["false"]=cache["null"]=cache["true"]=cache["undefined"]=false;var result=getObject();result.array=array;result.cache=cache;result.push=cachePush;while(++index<length){result.push(array[index])}return result}function getArray(){return arrayPool.pop()||[]}function getObject(){return objectPool.pop()||{array:null,cache:null,"false":false,"null":false,number:null,object:null,push:null,string:null,"true":false,undefined:false}}function isNode(value){return typeof value.toString!="function"&&typeof(value+"")=="string"}function releaseArray(array){array.length=0;if(arrayPool.length<maxPoolSize){arrayPool.push(array)}}function releaseObject(object){var cache=object.cache;if(cache){releaseObject(cache)}object.array=object.cache=object.object=object.number=object.string=null;if(objectPool.length<maxPoolSize){objectPool.push(object)}}function slice(array,start,end){start||(start=0);if(typeof end=="undefined"){end=array?array.length:0}var index=-1,length=end-start||0,result=Array(length<0?0:length);while(++index<length){result[index]=array[start+index]}return result}var arrayRef=[];var errorProto=Error.prototype,objectProto=Object.prototype,stringProto=String.prototype;var toString=objectProto.toString;var hasOwnProperty=objectProto.hasOwnProperty,push=arrayRef.push,propertyIsEnumerable=objectProto.propertyIsEnumerable;var nativeMax=Math.max;var nonEnumProps={};nonEnumProps[arrayClass]=nonEnumProps[dateClass]=nonEnumProps[numberClass]={constructor:true,toLocaleString:true,toString:true,valueOf:true};nonEnumProps[boolClass]=nonEnumProps[stringClass]={constructor:true,toString:true,valueOf:true};nonEnumProps[errorClass]=nonEnumProps[funcClass]=nonEnumProps[regexpClass]={constructor:true,toString:true};nonEnumProps[objectClass]={constructor:true};(function(){var length=shadowedProps.length;while(length--){var key=shadowedProps[length];for(var className in nonEnumProps){if(hasOwnProperty.call(nonEnumProps,className)&&!hasOwnProperty.call(nonEnumProps[className],key)){nonEnumProps[className][key]=false}}}})();function lodash(){}var support=lodash.support={};(function(){var ctor=function(){this.x=1},object={0:1,length:1},props=[];ctor.prototype={valueOf:1,y:1};for(var key in new ctor){props.push(key)}for(key in arguments){}support.argsClass=false;support.argsObject=arguments.constructor==Object&&!(arguments instanceof Array);support.enumErrorProps=propertyIsEnumerable.call(errorProto,"message")||propertyIsEnumerable.call(errorProto,"name");support.enumPrototypes=propertyIsEnumerable.call(ctor,"prototype");support.nonEnumArgs=key!=0;support.nonEnumShadows=!/valueOf/.test(props);support.spliceObjects=(arrayRef.splice.call(object,0,1),!object[0]);support.unindexedChars="x"[0]+Object("x")[0]!="xx"})(1);var iteratorTemplate=function(obj){var __p="var index, iterable = "+obj.firstArg+", result = "+obj.init+";\nif (!iterable) return result;\n"+obj.top+";";if(obj.array){__p+="\nvar length = iterable.length; index = -1;\nif ("+obj.array+") {  ";if(support.unindexedChars){__p+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "}__p+="\n  while (++index < length) {\n    "+obj.loop+";\n  }\n}\nelse {  "}else if(support.nonEnumArgs){__p+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+obj.loop+";\n    }\n  } else {  "}if(support.enumPrototypes){__p+="\n  var skipProto = typeof iterable == 'function';\n  "}if(support.enumErrorProps){__p+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  "}var conditions=[];if(support.enumPrototypes){conditions.push('!(skipProto && index == "prototype")')}if(support.enumErrorProps){conditions.push('!(skipErrorProps && (index == "message" || index == "name"))')}__p+="\n  for (index in iterable) {\n";if(obj.useHas){conditions.push("hasOwnProperty.call(iterable, index)")}if(conditions.length){__p+="    if ("+conditions.join(" && ")+") {\n  "}__p+=obj.loop+";    ";if(conditions.length){__p+="\n    }"}__p+="\n  }    ";if(support.nonEnumShadows){__p+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ";for(k=0;k<7;k++){__p+="\n    index = '"+obj.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))";if(!obj.useHas){__p+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"}__p+=") {\n      "+obj.loop+";\n    }      "}__p+="\n  }    "}if(obj.array||support.nonEnumArgs){__p+="\n}"}__p+=obj.bottom+";\nreturn result";return __p};function baseBind(bindData){var func=bindData[0],partialArgs=bindData[2],thisArg=bindData[4];function bound(){if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments)}if(this instanceof bound){var thisBinding=baseCreate(func.prototype),result=func.apply(thisBinding,args||arguments);return isObject(result)?result:thisBinding}return func.apply(thisArg,args||arguments)}return bound}var baseCreate=function(){function Object(){}return function(prototype){if(isObject(prototype)){Object.prototype=prototype;var result=new Object;Object.prototype=null}return result||root.Object()}}();function baseCreateCallback(func,thisArg,argCount){if(typeof func!="function"){return identity}if(typeof thisArg=="undefined"||!("prototype"in func)){return func}switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 2:return function(a,b){return func.call(thisArg,a,b)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)}}return bind(func,thisArg)}function baseCreateWrapper(bindData){var func=bindData[0],bitmask=bindData[1],partialArgs=bindData[2],partialRightArgs=bindData[3],thisArg=bindData[4],arity=bindData[5];var isBind=bitmask&1,isBindKey=bitmask&2,isCurry=bitmask&4,isCurryBound=bitmask&8,key=func;function bound(){var thisBinding=isBind?thisArg:this;if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments)}if(partialRightArgs||isCurry){args||(args=slice(arguments));if(partialRightArgs){push.apply(args,partialRightArgs)}if(isCurry&&args.length<arity){bitmask|=16&~32;return baseCreateWrapper([func,isCurryBound?bitmask:bitmask&~3,args,null,thisArg,arity])}}args||(args=arguments);if(isBindKey){func=thisBinding[key]}if(this instanceof bound){thisBinding=baseCreate(func.prototype);var result=func.apply(thisBinding,args);return isObject(result)?result:thisBinding}return func.apply(thisBinding,args)}return bound}function baseDifference(array,values){var index=-1,indexOf=getIndexOf(),length=array?array.length:0,isLarge=length>=largeArraySize&&indexOf===baseIndexOf,result=[];if(isLarge){var cache=createCache(values);if(cache){indexOf=cacheIndexOf;values=cache}else{isLarge=false}}while(++index<length){var value=array[index];if(indexOf(values,value)<0){result.push(value)}}if(isLarge){releaseObject(values)}return result}function baseFlatten(array,isShallow,isStrict,fromIndex){var index=(fromIndex||0)-1,length=array?array.length:0,result=[];while(++index<length){var value=array[index];if(value&&typeof value=="object"&&typeof value.length=="number"&&(isArray(value)||isArguments(value))){if(!isShallow){value=baseFlatten(value,isShallow,isStrict)}var valIndex=-1,valLength=value.length,resIndex=result.length;result.length+=valLength;while(++valIndex<valLength){result[resIndex++]=value[valIndex]}}else if(!isStrict){result.push(value)}}return result}function baseIsEqual(a,b,callback,isWhere,stackA,stackB){if(callback){var result=callback(a,b);if(typeof result!="undefined"){return!!result}}if(a===b){return a!==0||1/a==1/b}var type=typeof a,otherType=typeof b;if(a===a&&!(a&&objectTypes[type])&&!(b&&objectTypes[otherType])){return false}if(a==null||b==null){return a===b}var className=toString.call(a),otherClass=toString.call(b);if(className==argsClass){className=objectClass}if(otherClass==argsClass){otherClass=objectClass}if(className!=otherClass){return false}switch(className){case boolClass:case dateClass:return+a==+b;case numberClass:return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case regexpClass:case stringClass:return a==String(b)}var isArr=className==arrayClass;if(!isArr){var aWrapped=hasOwnProperty.call(a,"__wrapped__"),bWrapped=hasOwnProperty.call(b,"__wrapped__");if(aWrapped||bWrapped){return baseIsEqual(aWrapped?a.__wrapped__:a,bWrapped?b.__wrapped__:b,callback,isWhere,stackA,stackB)}if(className!=objectClass){return false}var ctorA=!support.argsObject&&isArguments(a)?Object:a.constructor,ctorB=!support.argsObject&&isArguments(b)?Object:b.constructor;if(ctorA!=ctorB&&!(isFunction(ctorA)&&ctorA instanceof ctorA&&isFunction(ctorB)&&ctorB instanceof ctorB)&&("constructor"in a&&"constructor"in b)){return false}}var initedStack=!stackA;stackA||(stackA=getArray());stackB||(stackB=getArray());var length=stackA.length;while(length--){if(stackA[length]==a){return stackB[length]==b}}var size=0;result=true;stackA.push(a);stackB.push(b);if(isArr){length=a.length;size=b.length;result=size==length;if(result||isWhere){while(size--){var index=length,value=b[size];if(isWhere){while(index--){if(result=baseIsEqual(a[index],value,callback,isWhere,stackA,stackB)){break}}}else if(!(result=baseIsEqual(a[size],value,callback,isWhere,stackA,stackB))){break}}}}else{forIn(b,function(value,key,b){if(hasOwnProperty.call(b,key)){size++;return result=hasOwnProperty.call(a,key)&&baseIsEqual(a[key],value,callback,isWhere,stackA,stackB)}});if(result&&!isWhere){forIn(a,function(value,key,a){if(hasOwnProperty.call(a,key)){return result=--size>-1}})}}stackA.pop();stackB.pop();if(initedStack){releaseArray(stackA);releaseArray(stackB)}return result}function baseUniq(array,isSorted,callback){var index=-1,indexOf=getIndexOf(),length=array?array.length:0,result=[];var isLarge=!isSorted&&length>=largeArraySize&&indexOf===baseIndexOf,seen=callback||isLarge?getArray():result;if(isLarge){var cache=createCache(seen);indexOf=cacheIndexOf;seen=cache}while(++index<length){var value=array[index],computed=callback?callback(value,index,array):value;if(isSorted?!index||seen[seen.length-1]!==computed:indexOf(seen,computed)<0){if(callback||isLarge){seen.push(computed)}result.push(value)}}if(isLarge){releaseArray(seen.array);releaseObject(seen)}else if(callback){releaseArray(seen)}return result}function createWrapper(func,bitmask,partialArgs,partialRightArgs,thisArg,arity){var isBind=bitmask&1,isBindKey=bitmask&2,isCurry=bitmask&4,isCurryBound=bitmask&8,isPartial=bitmask&16,isPartialRight=bitmask&32;if(!isBindKey&&!isFunction(func)){throw new TypeError}if(isPartial&&!partialArgs.length){bitmask&=~16;isPartial=partialArgs=false}if(isPartialRight&&!partialRightArgs.length){bitmask&=~32;isPartialRight=partialRightArgs=false}var creater=bitmask==1||bitmask===17?baseBind:baseCreateWrapper;return creater([func,bitmask,partialArgs,partialRightArgs,thisArg,arity])}function createIterator(){iteratorData.shadowedProps=shadowedProps;iteratorData.array=iteratorData.bottom=iteratorData.loop=iteratorData.top="";iteratorData.init="iterable";iteratorData.useHas=true;for(var object,index=0;object=arguments[index];index++){for(var key in object){iteratorData[key]=object[key]}}var args=iteratorData.args;iteratorData.firstArg=/^[^,]+/.exec(args)[0];var factory=Function("baseCreateCallback, errorClass, errorProto, hasOwnProperty, "+"indicatorObject, isArguments, isArray, isString, objectProto, "+"objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+args+") {\n"+iteratorTemplate(iteratorData)+"\n}");return factory(baseCreateCallback,errorClass,errorProto,hasOwnProperty,indicatorObject,isArguments,isArray,isString,objectProto,objectTypes,nonEnumProps,stringClass,stringProto,toString)}function getIndexOf(){var result=(result=lodash.indexOf)===indexOf?baseIndexOf:result;return result}var isArguments=function(value){return value&&typeof value=="object"&&typeof value.length=="number"&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")||false};var isArray=function(value){return value&&typeof value=="object"&&typeof value.length=="number"&&toString.call(value)==arrayClass||false};var keys=createIterator({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"});var eachIteratorOptions={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",loop:"if (callback(iterable[index], index, collection) === false) return result"};var defaultsIteratorOptions={args:"object, source, guard",top:"var args = arguments,\n"+"    argsIndex = 0,\n"+"    argsLength = typeof guard == 'number' ? 2 : args.length;\n"+"while (++argsIndex < argsLength) {\n"+"  iterable = args[argsIndex];\n"+"  if (iterable && objectTypes[typeof iterable]) {",loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"};var forOwnIteratorOptions={top:"if (!objectTypes[typeof iterable]) return result;\n"+eachIteratorOptions.top,array:false};var baseEach=createIterator(eachIteratorOptions);var defaults=createIterator(defaultsIteratorOptions);var forIn=createIterator(eachIteratorOptions,forOwnIteratorOptions,{useHas:false});function isFunction(value){return typeof value=="function"}if(isFunction(/x/)){isFunction=function(value){return typeof value=="function"&&toString.call(value)==funcClass}}function isObject(value){return!!(value&&objectTypes[typeof value])}function isString(value){return typeof value=="string"||value&&typeof value=="object"&&toString.call(value)==stringClass||false}function pick(object,callback,thisArg){var result={};if(typeof callback!="function"){var index=-1,props=baseFlatten(arguments,true,false,1),length=isObject(object)?props.length:0;while(++index<length){var key=props[index];if(key in object){result[key]=object[key]}}}else{callback=lodash.createCallback(callback,thisArg,3);forIn(object,function(value,key,object){if(callback(value,key,object)){result[key]=value}})}return result}function filter(collection,callback,thisArg){var result=[];callback=lodash.createCallback(callback,thisArg,3);if(isArray(collection)){var index=-1,length=collection.length;while(++index<length){var value=collection[index];if(callback(value,index,collection)){result.push(value)}}}else{baseEach(collection,function(value,index,collection){if(callback(value,index,collection)){result.push(value)}})}return result}function map(collection,callback,thisArg){var index=-1,length=collection?collection.length:0,result=Array(typeof length=="number"?length:0);callback=lodash.createCallback(callback,thisArg,3);if(isArray(collection)){while(++index<length){result[index]=callback(collection[index],index,collection)}}else{baseEach(collection,function(value,key,collection){result[++index]=callback(value,key,collection)})}return result}function difference(array){return baseDifference(array,baseFlatten(arguments,true,true,1))}function flatten(array,isShallow,callback,thisArg){if(typeof isShallow!="boolean"&&isShallow!=null){thisArg=callback;callback=typeof isShallow!="function"&&thisArg&&thisArg[isShallow]===array?null:isShallow;isShallow=false}if(callback!=null){array=map(array,callback,thisArg)}return baseFlatten(array,isShallow)}function indexOf(array,value,fromIndex){if(typeof fromIndex=="number"){var length=array?array.length:0;fromIndex=fromIndex<0?nativeMax(0,length+fromIndex):fromIndex||0}else if(fromIndex){var index=sortedIndex(array,value);return array[index]===value?index:-1}return baseIndexOf(array,value,fromIndex)}function sortedIndex(array,value,callback,thisArg){var low=0,high=array?array.length:low;callback=callback?lodash.createCallback(callback,thisArg,1):identity;value=callback(value);while(low<high){var mid=low+high>>>1;callback(array[mid])<value?low=mid+1:high=mid}return low}function uniq(array,isSorted,callback,thisArg){if(typeof isSorted!="boolean"&&isSorted!=null){thisArg=callback;callback=typeof isSorted!="function"&&thisArg&&thisArg[isSorted]===array?null:isSorted;isSorted=false}if(callback!=null){callback=lodash.createCallback(callback,thisArg,3)}return baseUniq(array,isSorted,callback)}function without(array){return baseDifference(array,slice(arguments,1))}function bind(func,thisArg){return arguments.length>2?createWrapper(func,17,slice(arguments,2),null,thisArg):createWrapper(func,1,null,null,thisArg)}function createCallback(func,thisArg,argCount){var type=typeof func;if(func==null||type=="function"){return baseCreateCallback(func,thisArg,argCount)}if(type!="object"){return property(func)}var props=keys(func),key=props[0],a=func[key];if(props.length==1&&a===a&&!isObject(a)){return function(object){var b=object[key];return a===b&&(a!==0||1/a==1/b)}}return function(object){var length=props.length,result=false;while(length--){if(!(result=baseIsEqual(object[props[length]],func[props[length]],null,true))){break}}return result}}function identity(value){return value}function noop(){}function property(key){return function(object){return object[key]}}lodash.bind=bind;lodash.createCallback=createCallback;lodash.defaults=defaults;lodash.difference=difference;lodash.filter=filter;lodash.flatten=flatten;lodash.forIn=forIn;lodash.keys=keys;lodash.map=map;lodash.pick=pick;lodash.property=property;lodash.uniq=uniq;lodash.without=without;lodash.collect=map;lodash.select=filter;lodash.unique=uniq;lodash.identity=identity;lodash.indexOf=indexOf;lodash.isArguments=isArguments;lodash.isArray=isArray;lodash.isFunction=isFunction;lodash.isObject=isObject;lodash.isString=isString;lodash.noop=noop;lodash.sortedIndex=sortedIndex;lodash.VERSION="2.4.1";if(freeExports&&freeModule){if(moduleExports){(freeModule.exports=lodash)._=lodash}}}).call(this)}});StripeCheckout.require.define({"vendor/qrcode":function(exports,require,module){var QRCode;(function(){function QR8bitByte(data){this.mode=QRMode.MODE_8BIT_BYTE;this.data=data;this.parsedData=[];for(var i=0,l=this.data.length;i<l;i++){var byteArray=[];var code=this.data.charCodeAt(i);if(code>65536){byteArray[0]=240|(code&1835008)>>>18;byteArray[1]=128|(code&258048)>>>12;byteArray[2]=128|(code&4032)>>>6;byteArray[3]=128|code&63}else if(code>2048){byteArray[0]=224|(code&61440)>>>12;byteArray[1]=128|(code&4032)>>>6;byteArray[2]=128|code&63}else if(code>128){byteArray[0]=192|(code&1984)>>>6;byteArray[1]=128|code&63}else{byteArray[0]=code}this.parsedData.push(byteArray)}this.parsedData=Array.prototype.concat.apply([],this.parsedData);if(this.parsedData.length!=this.data.length){this.parsedData.unshift(191);this.parsedData.unshift(187);this.parsedData.unshift(239)}}QR8bitByte.prototype={getLength:function(buffer){return this.parsedData.length},write:function(buffer){for(var i=0,l=this.parsedData.length;i<l;i++){buffer.put(this.parsedData[i],8)}}};function QRCodeModel(typeNumber,errorCorrectLevel){this.typeNumber=typeNumber;this.errorCorrectLevel=errorCorrectLevel;this.modules=null;this.moduleCount=0;this.dataCache=null;this.dataList=[]}QRCodeModel.prototype={addData:function(data){var newData=new QR8bitByte(data);this.dataList.push(newData);this.dataCache=null},isDark:function(row,col){if(row<0||this.moduleCount<=row||col<0||this.moduleCount<=col){throw new Error(row+","+col)}return this.modules[row][col]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(false,this.getBestMaskPattern())},makeImpl:function(test,maskPattern){this.moduleCount=this.typeNumber*4+17;this.modules=new Array(this.moduleCount);for(var row=0;row<this.moduleCount;row++){this.modules[row]=new Array(this.moduleCount);for(var col=0;col<this.moduleCount;col++){this.modules[row][col]=null}}this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(test,maskPattern);if(this.typeNumber>=7){this.setupTypeNumber(test)}if(this.dataCache==null){this.dataCache=QRCodeModel.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)}this.mapData(this.dataCache,maskPattern)},setupPositionProbePattern:function(row,col){for(var r=-1;r<=7;r++){if(row+r<=-1||this.moduleCount<=row+r)continue;for(var c=-1;c<=7;c++){if(col+c<=-1||this.moduleCount<=col+c)continue;if(0<=r&&r<=6&&(c==0||c==6)||0<=c&&c<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=c&&c<=4){this.modules[row+r][col+c]=true}else{this.modules[row+r][col+c]=false}}}},getBestMaskPattern:function(){var minLostPoint=0;var pattern=0;for(var i=0;i<8;i++){this.makeImpl(true,i);var lostPoint=QRUtil.getLostPoint(this);if(i==0||minLostPoint>lostPoint){minLostPoint=lostPoint;pattern=i}}return pattern},createMovieClip:function(target_mc,instance_name,depth){var qr_mc=target_mc.createEmptyMovieClip(instance_name,depth);var cs=1;this.make();for(var row=0;row<this.modules.length;row++){var y=row*cs;for(var col=0;col<this.modules[row].length;col++){var x=col*cs;var dark=this.modules[row][col];if(dark){qr_mc.beginFill(0,100);qr_mc.moveTo(x,y);qr_mc.lineTo(x+cs,y);qr_mc.lineTo(x+cs,y+cs);qr_mc.lineTo(x,y+cs);qr_mc.endFill()}}}return qr_mc},setupTimingPattern:function(){for(var r=8;r<this.moduleCount-8;r++){if(this.modules[r][6]!=null){continue}this.modules[r][6]=r%2==0}for(var c=8;c<this.moduleCount-8;c++){if(this.modules[6][c]!=null){continue}this.modules[6][c]=c%2==0}},setupPositionAdjustPattern:function(){var pos=QRUtil.getPatternPosition(this.typeNumber);for(var i=0;i<pos.length;i++){for(var j=0;j<pos.length;j++){var row=pos[i];var col=pos[j];if(this.modules[row][col]!=null){continue}for(var r=-2;r<=2;r++){for(var c=-2;c<=2;c++){if(r==-2||r==2||c==-2||c==2||r==0&&c==0){this.modules[row+r][col+c]=true}else{this.modules[row+r][col+c]=false}}}}}},setupTypeNumber:function(test){var bits=QRUtil.getBCHTypeNumber(this.typeNumber);for(var i=0;i<18;i++){var mod=!test&&(bits>>i&1)==1;this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=mod}for(var i=0;i<18;i++){var mod=!test&&(bits>>i&1)==1;this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=mod}},setupTypeInfo:function(test,maskPattern){var data=this.errorCorrectLevel<<3|maskPattern;var bits=QRUtil.getBCHTypeInfo(data);for(var i=0;i<15;i++){var mod=!test&&(bits>>i&1)==1;if(i<6){this.modules[i][8]=mod}else if(i<8){this.modules[i+1][8]=mod}else{this.modules[this.moduleCount-15+i][8]=mod}}for(var i=0;i<15;i++){var mod=!test&&(bits>>i&1)==1;if(i<8){this.modules[8][this.moduleCount-i-1]=mod}else if(i<9){this.modules[8][15-i-1+1]=mod}else{this.modules[8][15-i-1]=mod}}this.modules[this.moduleCount-8][8]=!test},mapData:function(data,maskPattern){var inc=-1;var row=this.moduleCount-1;var bitIndex=7;var byteIndex=0;for(var col=this.moduleCount-1;col>0;col-=2){if(col==6)col--;while(true){for(var c=0;c<2;c++){if(this.modules[row][col-c]==null){var dark=false;if(byteIndex<data.length){dark=(data[byteIndex]>>>bitIndex&1)==1}var mask=QRUtil.getMask(maskPattern,row,col-c);if(mask){dark=!dark}this.modules[row][col-c]=dark;bitIndex--;if(bitIndex==-1){byteIndex++;bitIndex=7}}}row+=inc;if(row<0||this.moduleCount<=row){row-=inc;inc=-inc;break}}}}};QRCodeModel.PAD0=236;QRCodeModel.PAD1=17;QRCodeModel.createData=function(typeNumber,errorCorrectLevel,dataList){var rsBlocks=QRRSBlock.getRSBlocks(typeNumber,errorCorrectLevel);var buffer=new QRBitBuffer;for(var i=0;i<dataList.length;i++){var data=dataList[i];buffer.put(data.mode,4);buffer.put(data.getLength(),QRUtil.getLengthInBits(data.mode,typeNumber));data.write(buffer)}var totalDataCount=0;for(var i=0;i<rsBlocks.length;i++){totalDataCount+=rsBlocks[i].dataCount}if(buffer.getLengthInBits()>totalDataCount*8){throw new Error("code length overflow. ("+buffer.getLengthInBits()+">"+totalDataCount*8+")")}if(buffer.getLengthInBits()+4<=totalDataCount*8){buffer.put(0,4)}while(buffer.getLengthInBits()%8!=0){buffer.putBit(false)}while(true){if(buffer.getLengthInBits()>=totalDataCount*8){break}buffer.put(QRCodeModel.PAD0,8);if(buffer.getLengthInBits()>=totalDataCount*8){break}buffer.put(QRCodeModel.PAD1,8)}return QRCodeModel.createBytes(buffer,rsBlocks)};QRCodeModel.createBytes=function(buffer,rsBlocks){var offset=0;var maxDcCount=0;var maxEcCount=0;var dcdata=new Array(rsBlocks.length);var ecdata=new Array(rsBlocks.length);for(var r=0;r<rsBlocks.length;r++){var dcCount=rsBlocks[r].dataCount;var ecCount=rsBlocks[r].totalCount-dcCount;maxDcCount=Math.max(maxDcCount,dcCount);maxEcCount=Math.max(maxEcCount,ecCount);dcdata[r]=new Array(dcCount);for(var i=0;i<dcdata[r].length;i++){dcdata[r][i]=255&buffer.buffer[i+offset]}offset+=dcCount;var rsPoly=QRUtil.getErrorCorrectPolynomial(ecCount);var rawPoly=new QRPolynomial(dcdata[r],rsPoly.getLength()-1);var modPoly=rawPoly.mod(rsPoly);ecdata[r]=new Array(rsPoly.getLength()-1);for(var i=0;i<ecdata[r].length;i++){var modIndex=i+modPoly.getLength()-ecdata[r].length;ecdata[r][i]=modIndex>=0?modPoly.get(modIndex):0}}var totalCodeCount=0;for(var i=0;i<rsBlocks.length;i++){totalCodeCount+=rsBlocks[i].totalCount}var data=new Array(totalCodeCount);var index=0;for(var i=0;i<maxDcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<dcdata[r].length){data[index++]=dcdata[r][i]}}}for(var i=0;i<maxEcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<ecdata[r].length){data[index++]=ecdata[r][i]}}}return data};var QRMode={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3};var QRErrorCorrectLevel={L:1,M:0,Q:3,H:2};var QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,G18:1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,G15_MASK:1<<14|1<<12|1<<10|1<<4|1<<1,getBCHTypeInfo:function(data){var d=data<<10;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)>=0){d^=QRUtil.G15<<QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)}return(data<<10|d)^QRUtil.G15_MASK},getBCHTypeNumber:function(data){var d=data<<12;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)>=0){d^=QRUtil.G18<<QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)}return data<<12|d},getBCHDigit:function(data){var digit=0;while(data!=0){digit++;data>>>=1}return digit},getPatternPosition:function(typeNumber){return QRUtil.PATTERN_POSITION_TABLE[typeNumber-1]},getMask:function(maskPattern,i,j){switch(maskPattern){case QRMaskPattern.PATTERN000:return(i+j)%2==0;case QRMaskPattern.PATTERN001:return i%2==0;case QRMaskPattern.PATTERN010:return j%3==0;case QRMaskPattern.PATTERN011:return(i+j)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(i/2)+Math.floor(j/3))%2==0;case QRMaskPattern.PATTERN101:return i*j%2+i*j%3==0;case QRMaskPattern.PATTERN110:return(i*j%2+i*j%3)%2==0;case QRMaskPattern.PATTERN111:return(i*j%3+(i+j)%2)%2==0;default:throw new Error("bad maskPattern:"+maskPattern)}},getErrorCorrectPolynomial:function(errorCorrectLength){var a=new QRPolynomial([1],0);for(var i=0;i<errorCorrectLength;i++){a=a.multiply(new QRPolynomial([1,QRMath.gexp(i)],0))}return a},getLengthInBits:function(mode,type){if(1<=type&&type<10){switch(mode){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+mode)}}else if(type<27){switch(mode){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+mode)}}else if(type<41){switch(mode){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+mode)}}else{throw new Error("type:"+type)}},getLostPoint:function(qrCode){var moduleCount=qrCode.getModuleCount();var lostPoint=0;for(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount;col++){var sameCount=0;var dark=qrCode.isDark(row,col);for(var r=-1;r<=1;r++){if(row+r<0||moduleCount<=row+r){continue}for(var c=-1;c<=1;c++){if(col+c<0||moduleCount<=col+c){continue}if(r==0&&c==0){continue}if(dark==qrCode.isDark(row+r,col+c)){sameCount++}}}if(sameCount>5){lostPoint+=3+sameCount-5}}}for(var row=0;row<moduleCount-1;row++){for(var col=0;col<moduleCount-1;col++){var count=0;if(qrCode.isDark(row,col))count++;if(qrCode.isDark(row+1,col))count++;if(qrCode.isDark(row,col+1))count++;if(qrCode.isDark(row+1,col+1))count++;if(count==0||count==4){lostPoint+=3}}}for(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount-6;col++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row,col+1)&&qrCode.isDark(row,col+2)&&qrCode.isDark(row,col+3)&&qrCode.isDark(row,col+4)&&!qrCode.isDark(row,col+5)&&qrCode.isDark(row,col+6)){lostPoint+=40
}}}for(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount-6;row++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row+1,col)&&qrCode.isDark(row+2,col)&&qrCode.isDark(row+3,col)&&qrCode.isDark(row+4,col)&&!qrCode.isDark(row+5,col)&&qrCode.isDark(row+6,col)){lostPoint+=40}}}var darkCount=0;for(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount;row++){if(qrCode.isDark(row,col)){darkCount++}}}var ratio=Math.abs(100*darkCount/moduleCount/moduleCount-50)/5;lostPoint+=ratio*10;return lostPoint}};var QRMath={glog:function(n){if(n<1){throw new Error("glog("+n+")")}return QRMath.LOG_TABLE[n]},gexp:function(n){while(n<0){n+=255}while(n>=256){n-=255}return QRMath.EXP_TABLE[n]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var i=0;i<8;i++){QRMath.EXP_TABLE[i]=1<<i}for(var i=8;i<256;i++){QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8]}for(var i=0;i<255;i++){QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i}function QRPolynomial(num,shift){if(num.length==undefined){throw new Error(num.length+"/"+shift)}var offset=0;while(offset<num.length&&num[offset]==0){offset++}this.num=new Array(num.length-offset+shift);for(var i=0;i<num.length-offset;i++){this.num[i]=num[i+offset]}}QRPolynomial.prototype={get:function(index){return this.num[index]},getLength:function(){return this.num.length},multiply:function(e){var num=new Array(this.getLength()+e.getLength()-1);for(var i=0;i<this.getLength();i++){for(var j=0;j<e.getLength();j++){num[i+j]^=QRMath.gexp(QRMath.glog(this.get(i))+QRMath.glog(e.get(j)))}}return new QRPolynomial(num,0)},mod:function(e){if(this.getLength()-e.getLength()<0){return this}var ratio=QRMath.glog(this.get(0))-QRMath.glog(e.get(0));var num=new Array(this.getLength());for(var i=0;i<this.getLength();i++){num[i]=this.get(i)}for(var i=0;i<e.getLength();i++){num[i]^=QRMath.gexp(QRMath.glog(e.get(i))+ratio)}return new QRPolynomial(num,0).mod(e)}};function QRRSBlock(totalCount,dataCount){this.totalCount=totalCount;this.dataCount=dataCount}QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];QRRSBlock.getRSBlocks=function(typeNumber,errorCorrectLevel){var rsBlock=QRRSBlock.getRsBlockTable(typeNumber,errorCorrectLevel);if(rsBlock==undefined){throw new Error("bad rs block @ typeNumber:"+typeNumber+"/errorCorrectLevel:"+errorCorrectLevel)}var length=rsBlock.length/3;var list=[];for(var i=0;i<length;i++){var count=rsBlock[i*3+0];var totalCount=rsBlock[i*3+1];var dataCount=rsBlock[i*3+2];for(var j=0;j<count;j++){list.push(new QRRSBlock(totalCount,dataCount))}}return list};QRRSBlock.getRsBlockTable=function(typeNumber,errorCorrectLevel){switch(errorCorrectLevel){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+3];default:return undefined}};function QRBitBuffer(){this.buffer=[];this.length=0}QRBitBuffer.prototype={get:function(index){var bufIndex=Math.floor(index/8);return(this.buffer[bufIndex]>>>7-index%8&1)==1},put:function(num,length){for(var i=0;i<length;i++){this.putBit((num>>>length-i-1&1)==1)}},getLengthInBits:function(){return this.length},putBit:function(bit){var bufIndex=Math.floor(this.length/8);if(this.buffer.length<=bufIndex){this.buffer.push(0)}if(bit){this.buffer[bufIndex]|=128>>>this.length%8}this.length++}};var QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function _isSupportCanvas(){return typeof CanvasRenderingContext2D!="undefined"}function _getAndroid(){var android=false;var sAgent=navigator.userAgent;if(/android/i.test(sAgent)){android=true;aMat=sAgent.toString().match(/android ([0-9]\.[0-9])/i);if(aMat&&aMat[1]){android=parseFloat(aMat[1])}}return android}var svgDrawer=function(){var Drawing=function(el,htOption){this._el=el;this._htOption=htOption};Drawing.prototype.draw=function(oQRCode){var _htOption=this._htOption;var _el=this._el;var nCount=oQRCode.getModuleCount();var nWidth=Math.floor(_htOption.width/nCount);var nHeight=Math.floor(_htOption.height/nCount);this.clear();function makeSVG(tag,attrs){var el=document.createElementNS("http://www.w3.org/2000/svg",tag);for(var k in attrs)if(attrs.hasOwnProperty(k))el.setAttribute(k,attrs[k]);return el}var svg=makeSVG("svg",{viewBox:"0 0 "+String(nCount)+" "+String(nCount),width:"100%",height:"100%",fill:_htOption.colorLight});svg.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");_el.appendChild(svg);svg.appendChild(makeSVG("rect",{fill:_htOption.colorDark,width:"1",height:"1",id:"template"}));for(var row=0;row<nCount;row++){for(var col=0;col<nCount;col++){if(oQRCode.isDark(row,col)){var child=makeSVG("use",{x:String(row),y:String(col)});child.setAttributeNS("http://www.w3.org/1999/xlink","href","#template");svg.appendChild(child)}}}};Drawing.prototype.clear=function(){while(this._el.hasChildNodes())this._el.removeChild(this._el.lastChild)};return Drawing}();var useSVG=document.documentElement.tagName.toLowerCase()==="svg";var Drawing=useSVG?svgDrawer:!_isSupportCanvas()?function(){var Drawing=function(el,htOption){this._el=el;this._htOption=htOption};Drawing.prototype.draw=function(oQRCode){var _htOption=this._htOption;var _el=this._el;var nCount=oQRCode.getModuleCount();var nWidth=Math.floor(_htOption.width/nCount);var nHeight=Math.floor(_htOption.height/nCount);var aHTML=['<table style="border:0;border-collapse:collapse;">'];for(var row=0;row<nCount;row++){aHTML.push("<tr>");for(var col=0;col<nCount;col++){aHTML.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+nWidth+"px;height:"+nHeight+"px;background-color:"+(oQRCode.isDark(row,col)?_htOption.colorDark:_htOption.colorLight)+';"></td>')}aHTML.push("</tr>")}aHTML.push("</table>");_el.innerHTML=aHTML.join("")};Drawing.prototype.clear=function(){this._el.innerHTML=""};return Drawing}():function(){function _onMakeImage(){this._elImage.src=this._elCanvas.toDataURL("image/png");this._elImage.style.display="block";this._elCanvas.style.display="none"}if(this._android&&this._android<=2.1){var factor=1/window.devicePixelRatio;var drawImage=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(image,sx,sy,sw,sh,dx,dy,dw,dh){if("nodeName"in image&&/img/i.test(image.nodeName)){for(var i=arguments.length-1;i>=1;i--){arguments[i]=arguments[i]*factor}}else if(typeof dw=="undefined"){arguments[1]*=factor;arguments[2]*=factor;arguments[3]*=factor;arguments[4]*=factor}drawImage.apply(this,arguments)}}function _safeSetDataURI(fSuccess,fFail){var self=this;self._fFail=fFail;self._fSuccess=fSuccess;if(self._bSupportDataURI===null){var el=document.createElement("img");var fOnError=function(){self._bSupportDataURI=false;if(self._fFail){_fFail.call(self)}};var fOnSuccess=function(){self._bSupportDataURI=true;if(self._fSuccess){self._fSuccess.call(self)}};el.onabort=fOnError;el.onerror=fOnError;el.onload=fOnSuccess;el.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==";return}else if(self._bSupportDataURI===true&&self._fSuccess){self._fSuccess.call(self)}else if(self._bSupportDataURI===false&&self._fFail){self._fFail.call(self)}}var Drawing=function(el,htOption){this._bIsPainted=false;this._android=_getAndroid();this._htOption=htOption;this._elCanvas=document.createElement("canvas");this._elCanvas.width=htOption.width;this._elCanvas.height=htOption.height;el.appendChild(this._elCanvas);this._el=el;this._oContext=this._elCanvas.getContext("2d");this._bIsPainted=false;this._elImage=document.createElement("img");this._elImage.style.display="none";this._el.appendChild(this._elImage);this._bSupportDataURI=null};Drawing.prototype.draw=function(oQRCode){var _elImage=this._elImage;var _oContext=this._oContext;var _htOption=this._htOption;var nCount=oQRCode.getModuleCount();var nWidth=_htOption.width/nCount;var nHeight=_htOption.height/nCount;var nRoundedWidth=Math.round(nWidth);var nRoundedHeight=Math.round(nHeight);_elImage.style.display="none";this.clear();for(var row=0;row<nCount;row++){for(var col=0;col<nCount;col++){var bIsDark=oQRCode.isDark(row,col);var nLeft=col*nWidth;var nTop=row*nHeight;_oContext.strokeStyle=bIsDark?_htOption.colorDark:_htOption.colorLight;_oContext.lineWidth=1;_oContext.fillStyle=bIsDark?_htOption.colorDark:_htOption.colorLight;_oContext.fillRect(nLeft,nTop,nWidth,nHeight);_oContext.strokeRect(Math.floor(nLeft)+.5,Math.floor(nTop)+.5,nRoundedWidth,nRoundedHeight);_oContext.strokeRect(Math.ceil(nLeft)-.5,Math.ceil(nTop)-.5,nRoundedWidth,nRoundedHeight)}}this._bIsPainted=true};Drawing.prototype.makeImage=function(){if(this._bIsPainted){_safeSetDataURI.call(this,_onMakeImage)}};Drawing.prototype.isPainted=function(){return this._bIsPainted};Drawing.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height);this._bIsPainted=false};Drawing.prototype.round=function(nNumber){if(!nNumber){return nNumber}return Math.floor(nNumber*1e3)/1e3};return Drawing}();function _getTypeNumber(sText,nCorrectLevel){var nType=1;var length=_getUTF8Length(sText);for(var i=0,len=QRCodeLimitLength.length;i<=len;i++){var nLimit=0;switch(nCorrectLevel){case QRErrorCorrectLevel.L:nLimit=QRCodeLimitLength[i][0];break;case QRErrorCorrectLevel.M:nLimit=QRCodeLimitLength[i][1];break;case QRErrorCorrectLevel.Q:nLimit=QRCodeLimitLength[i][2];break;case QRErrorCorrectLevel.H:nLimit=QRCodeLimitLength[i][3];break}if(length<=nLimit){break}else{nType++}}if(nType>QRCodeLimitLength.length){throw new Error("Too long data")}return nType}function _getUTF8Length(sText){var replacedText=encodeURI(sText).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return replacedText.length+(replacedText.length!=sText?3:0)}QRCode=function(el,vOption){this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRErrorCorrectLevel.H};if(typeof vOption==="string"){vOption={text:vOption}}if(vOption){for(var i in vOption){this._htOption[i]=vOption[i]}}if(typeof el=="string"){el=document.getElementById(el)}this._android=_getAndroid();this._el=el;this._oQRCode=null;this._oDrawing=new Drawing(this._el,this._htOption);if(this._htOption.text){this.makeCode(this._htOption.text)}};QRCode.prototype.makeCode=function(sText){this._oQRCode=new QRCodeModel(_getTypeNumber(sText,this._htOption.correctLevel),this._htOption.correctLevel);this._oQRCode.addData(sText);this._oQRCode.make();this._el.title=sText;this._oDrawing.draw(this._oQRCode);this.makeImage()};QRCode.prototype.makeImage=function(){if(typeof this._oDrawing.makeImage=="function"&&(!this._android||this._android>=3)){this._oDrawing.makeImage()}};QRCode.prototype.clear=function(){this._oDrawing.clear()};QRCode.CorrectLevel=QRErrorCorrectLevel})();module.exports=QRCode}});var VerificatorStatus=function(url){var errorCases={exception:{error:{type:"api_error",message:"There was a problem confirming that a message was sent to your phone"}},expired:{error:{type:"verification_error",message:"The verification code expired before it could be used."}},failed:{error:{type:"delivery_error",message:"We weren't able to send a message to your phone."}}};function primeWss(){var d=$.Deferred();var p=d.promise();var parser=document.createElement("a");parser.href=url;if(parser.protocol==="wss:"){var img=new Image;img.onload=function(){d.resolve()};img.src="https://"+parser.host+"/cert_primer.gif"}else{d.resolve()}return p}function websocketDeferred(){var deferred=$.Deferred();var clientClosed=false;var socket;primeWss().then(function(){socket=new WebSocket(url);socket.onclose=function(evt){var resp;if(evt.code==WebSocket.CLOSE_NORMAL){resp=JSON.parse(evt.reason)}else{resp=errorCases.exception}if(!clientClosed){deferred.resolve(resp)}};socket.onmessage=function(msg){resp=JSON.parse(msg.data);if(resp.error_code!==undefined){deferred.resolve(resp)}else if(resp.status==="delivered"){socket.close();deferred.resolve()}else if(errorCases[resp.status]!==undefined){socket.close();deferred.reject(errorCases[resp.status])}}});var promise=deferred.promise();promise.cancel=function(){if(socket){clientClosed=true;socket.close()}};return promise}function immediateDeferred(){var deferred=$.Deferred().resolve();var promise=deferred.promise();promise.cancel=function(){};return promise}if(!url){return immediateDeferred()}else if(typeof WebSocket!=="function"){return immediateDeferred()}else{return websocketDeferred()}};if(typeof define!=="undefined"){define(function(require,exports,module){module.exports=VerificatorStatus})}StripeCheckout.require.define({"lib/ab":function(exports,require,module){(function(){var AB,excludedExperiment,getVariant,helpers,pixel,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i}return-1},__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};pixel=require("lib/pixel");helpers=require("lib/helpers");getVariant=function(experimentName,variants,id){var curr,rate,target,variant;if(id==="DNT"||id==="NA"){return"excluded"}target=helpers.hashCode(experimentName+":"+id)/65535;curr=0;for(variant in variants){rate=variants[variant];curr+=rate;if(curr>target){return variant}}return"control"};excludedExperiment=function(experiment,options){var key,values,_ref,_ref1,_ref2,_ref3;if(options==null){options={}}if(experiment.only){_ref=experiment.only;for(key in _ref){values=_ref[key];if(!(options[key]&&(_ref1=options[key],__indexOf.call(values,_ref1)>=0))){return true}}}if(experiment.exclude){_ref2=experiment.exclude;for(key in _ref2){values=_ref2[key];if(options[key]&&(_ref3=options[key],__indexOf.call(values,_ref3)>=0)){return true}}}return false};AB=function(){function AB(experiments,getID,getOverride){this.getVariants=__bind(this.getVariants,this);this.experiments=experiments;this.getID=getID;this.getOverride=getOverride;this.options={}}AB.prototype.getVariant=function(experimentName){var experiment,override;experiment=this.experiments[experimentName];if(experiment==null){if(typeof Raven!=="undefined"&&Raven!==null){Raven.captureMessage("Invalid experiment `"+experimentName+"`.")}return"control"}if(this.getOverride){override=this.getOverride(experimentName)||this.getOverride("all");if(override){if(override==="control"||experiment.variants[override]!=null){return override}else{if(typeof Raven!=="undefined"&&Raven!==null){Raven.captureMessage("Attempted to override experiment `"+experimentName+"` with invalid "+("variant `"+override+"`, defaulting to `control`"))}return"control"}}}if(excludedExperiment(experiment,this.options)){return"excluded"}return getVariant(experimentName,experiment.variants,this.getID())};AB.prototype.isActiveVariant=function(experimentName,variant){var _ref,_ref1;if(!(((_ref=this.experiments[experimentName])!=null?(_ref1=_ref.variants)!=null?_ref1[variant]:void 0:void 0)!=null)){if(typeof Raven!=="undefined"&&Raven!==null){Raven.captureMessage("Invalid experiment `"+experimentName+"` with variant `"+variant+"`.")}return false}else{return this.getVariant(experimentName)===variant}};AB.prototype.getVariants=function(){var exp,variants;variants={};for(exp in this.experiments){variants[exp]=this.getVariant(exp)}return variants};AB.prototype.setOptions=function(options){var k,v,_results;_results=[];for(k in options){v=options[k];_results.push(this.options[k]=v)}return _results};return AB}();module.exports=AB}).call(this)}});StripeCheckout.require.define({"lib/account":function(exports,require,module){(function(){var API,Account,EventDispatcher,addressHelper,currentVerification,newAccountToken,newStripeJSToken,pixel,sharedAccount,tracker,translateAccountResponse,zipCode,_;API=require("lib/api");EventDispatcher=require("lib/eventDispatcher");addressHelper=require("lib/addressHelper");zipCode=require("lib/zipCode");tracker=require("lib/tracker");pixel=require("lib/pixel");_=require("vendor/lodash");sharedAccount=null;currentVerification=null;Account=new EventDispatcher;Account.sharedAccount=function(){return sharedAccount};Account.setSharedAccount=function(account){var previousSharedAccount;previousSharedAccount=sharedAccount;sharedAccount=translateAccountResponse(account);if(sharedAccount!==previousSharedAccount){return Account.trigger("sharedAccountChanged",account)}};Account.clearSharedAccount=function(){return Account.setSharedAccount(null)};Account.setAuthorizingAccount=function(account){return Account.trigger("authorizingAccountChanged",account)};Account.lookup=function(email){var params,promise;params={email:email,send:false};promise=API.request({url:"/account/lookup",data:params,type:"POST",dataType:"json"}).then(function(resp){if((resp!=null?resp.account:void 0)!=null){return translateAccountResponse(resp.account)}else{return resp}});return promise};Account.createAuthorization=function(email,merchant_name){var defer,params,promise,verificatorStatus;defer=$.Deferred();verificatorStatus=null;params={email:email};if(merchant_name){params.merchant_name=merchant_name}API.request({url:"/account/verifications",data:params,type:"POST",dataType:"json"}).done(function(resp){currentVerification=resp.id;verificatorStatus=VerificatorStatus(resp.status_url);return verificatorStatus.done(defer.resolve).fail(defer.reject)}).fail(defer.reject);promise=defer.promise();promise.cancel=function(){return verificatorStatus!=null?verificatorStatus.cancel():void 0};return promise};Account.authorize=function(code){if(!currentVerification){return $.Deferred().reject("Failed to authorize account").promise()}return API.request({url:"/account/verifications/"+currentVerification,data:{code:code},type:"PUT",dataType:"json"}).then(function(response){var account;account=response.account;if(!account){throw new Error("Failed to authorize account")}account.isNotRemembered=true;tracker.state.setLoggedIn(true);Account.setSharedAccount(account);return sharedAccount})};Account.newToken=function(params){var accountParams,promise,tokenParams,_ref;if(!params.email){throw new Error("Email is not provided")}if(!(params.card||params.account)){throw new Error("Card is not provided")}tokenParams={email:params.email,amount:params.amount,currency:params.currency,validation_type:params.phoneVerification?"none":"card",payment_user_agent:"Stripe Checkout v3",user_agent:navigator.userAgent,device_id:pixel.getCookieID(),referrer:params.referrer,phone_verification:params.phoneVerification,verification_allowed:params.verificationAllowed,pasted_fields:(_ref=params.pastedFields)!=null?_ref.join(","):void 0,time_checkout_opened:params.timeOpened!=null?params.timeOpened:void 0,time_checkout_loaded:params.timeLoaded!=null?params.timeLoaded:void 0,force_address_verification:params.forceAddressVerification};tokenParams=_.pick(tokenParams,_.identity);accountParams=$.extend({remember_me:params.rememberAccount,merchant_name:params.merchantName},tokenParams);addressHelper.applyPrefix("billing",params.billingAddress,accountParams);if(params.card){if(!API.hasValidCSRFToken()){params.saveAccount=false;params.account=null}if(params.saveAccount||params.account){API.useConnectStripeKey()}else{API.useMerchantStripeKey()}promise=newStripeJSToken(tokenParams,params.card,params.billingAddress)}else{promise=newAccountToken(accountParams,params.billingAddress)}if(params.card&&(params.saveAccount||params.account)){promise=promise.then(function(token){var method;accountParams.token=token.id;if(params.account){method="PUT"}else{if(!params.phone){throw new Error("Phone is not provided")}accountParams.phone=params.phone;method="POST"}return API.request({url:"/account",data:accountParams,type:method,dataType:"json",timeout:4e4}).then(function(resp){tracker.state.setAccountCreated(true);tracker.track.accountCreateSuccess();if((resp!=null?resp.token:void 0)!=null){return resp.token}else{return token}}).fail(function(){return tracker.track.accountCreateFail()})})}return promise.then(function(token){var args;args={};addressHelper.applyPrefix("billing",params.billingAddress,args,true);addressHelper.applyPrefix("shipping",params.shippingAddress,args,true);return{token:token,args:args}})};Account.logout=function(params){var promise;if(params==null){params={}}tracker.state.setLoggedIn(false);Account.clearSharedAccount();promise=API.request({url:"/account/logout",data:params,type:"POST",dataType:"json",timeout:4e4});return promise};newStripeJSToken=function(params,card,billingAddress){var defer,e,k,_i,_len,_ref;defer=$.Deferred();card=$.extend({},card);card.name=(billingAddress!=null?billingAddress.name:void 0)||params.email;if(billingAddress!=null){_ref=["line1","apt","line2","city","state","zip","country"];for(_i=0,_len=_ref.length;_i<_len;_i++){k=_ref[_i];if(billingAddress[k]){card["address_"+k]=billingAddress[k]}}addressHelper.normalizeLine1("",card)}try{Stripe.createToken(card,params,function(status,response){if(response.error){return defer.reject(response.error)}else{return defer.resolve(response)}})}catch(_error){e=_error;tracker.track.tokenError(e.message);defer.reject({message:e.message})}return defer.promise()};newAccountToken=function(params){var promise;promise=API.request({url:"/account/tokens",data:params,type:"POST",dataType:"json",timeout:4e4}).then(function(resp){if((resp!=null?resp.token:void 0)!=null){return resp.token}else{return resp}});return promise};translateAccountResponse=function(acct){var addr,_ref;if((acct!=null?(_ref=acct.card)!=null?_ref.billing_address:void 0:void 0)!=null){addr=acct.card.billing_address;delete acct.card.billing_address;addressHelper.applyPrefix("billing",addr,acct)}return acct};module.exports=Account}).call(this)}});StripeCheckout.require.define({"lib/accountLookupHelper":function(exports,require,module){(function(){var Account,AccountLookup,accountLookupHelper,appType,i18n,popoverManager,support,tracker,validation,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};support=require("lib/support");validation=require("lib/validation");tracker=require("lib/tracker");Account=require("lib/account");appType=require("lib/appType");i18n=require("lib/i18n");popoverManager=require("inner/lib/popoverManager");AccountLookup=function(){function AccountLookup(options){if(options==null){options={}}this.checkForExistingAccount=__bind(this.checkForExistingAccount,this);this.onEmailValueDidChange=__bind(this.onEmailValueDidChange,this);this.options=options;this.checkedAccounts={};this.input=options.input;if(options.email!=null){this.checkForExistingAccount(options.email)}if(this.input!=null){this.input.on("valueDidChange",this.onEmailValueDidChange)}}AccountLookup.prototype.onEmailValueDidChange=function(){var email;if(!support.accounts()){return}email=this.input.val();if(!validation.validateEmail(email)){this.input.setSpinnerVisibility(false);return}this.input.setSpinnerVisibility(true);this.currentEmailValue=email;if(this.emailLookupTimeout!=null){clearTimeout(this.emailLookupTimeout)}return this.emailLookupTimeout=setTimeout(function(_this){return function(){return _this.checkForExistingAccount(email)}}(this),250)};AccountLookup.prototype.checkForExistingAccount=function(email){var accountLookup,merchantName,_ref;if(Account.sharedAccount()||!support.accounts()||this.checkedAccounts[email]){if((_ref=this.input)!=null){_ref.setSpinnerVisibility(false)}return}this.checkedAccounts[email]=true;merchantName=this.options.name;accountLookup=Account.lookup(email,merchantName);accountLookup.fail(function(_this){return function(){var _ref1;return(_ref1=_this.input)!=null?_ref1.setSpinnerVisibility(false):void 0}}(this));return accountLookup.done(function(_this){return function(account){var _base,_ref1;if(_this.currentEmailValue!=null&&email!==_this.currentEmailValue){return}if((_ref1=_this.input)!=null){_ref1.setSpinnerVisibility(false)}if(!account){return}if(typeof(_base=_this.options).callback==="function"){_base.callback(account)}return tracker.track.authorizeAccount()}}(this))};return AccountLookup}();accountLookupHelper={};accountLookupHelper.observe=function(options){if(options==null){options={}}return new AccountLookup($.extend({},options,{},{callback:function(account){var popover,str;if(options.input==null||options.input.isFocused()||!$("input:focus").val()||appType.isMobile()){return Account.setAuthorizingAccount(account)}else{str=i18n.loc("auth.manualLogin")({link:'<a href="#">'+i18n.loc("auth.manualLogin.link")()+"</a>"});popover=popoverManager.openPopover(options.input,str);return popover!=null?popover.on("linkDidClick",function(){Account.setAuthorizingAccount(account);return popoverManager.closePopover(popover)}):void 0}}}))};module.exports=accountLookupHelper}).call(this)}});StripeCheckout.require.define({"lib/addressHelper":function(exports,require,module){(function(){var addressHelper,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i}return-1};addressHelper={};addressHelper.applyPrefix=function(prefix,src,dst,normalizeLine1){var KEYS,fullPrefix,key,value;if(normalizeLine1==null){normalizeLine1=false}if(!(src&&dst)){return}KEYS=["name","line1","apt","zip","city","state","country","country_code"];for(key in src){value=src[key];if(!(value&&__indexOf.call(KEYS,key)>=0)){continue}if(key==="name"){fullPrefix=prefix}else{fullPrefix=""+prefix+"_address"}dst[""+fullPrefix+"_"+key]=value}if(normalizeLine1){return addressHelper.normalizeLine1(prefix,dst)}};addressHelper.normalizeLine1=function(prefix,dst){var apt,_name;if(prefix){prefix=""+prefix+"_"}apt=dst[""+prefix+"address_apt"];if(apt){if(/^[0-9]+$/.test(apt)){apt="#"+apt}if(dst[_name=""+prefix+"address_line1"]==null){dst[_name]=""}dst[""+prefix+"address_line1"]+=" "+apt}return delete dst[""+prefix+"address_apt"]};module.exports=addressHelper}).call(this)}});StripeCheckout.require.define({"lib/alert":function(exports,require,module){(function(){var Alert,i18n,tracker;tracker=require("lib/tracker");i18n=require("lib/i18n");Alert=function(){function Alert(){this.alerts=[]}Alert.prototype.alert=function(i18n_key,options){var msg;if(options==null){options={}}msg=i18n.loc(i18n_key)();if(typeof window!=="undefined"&&window!==null){if(typeof window.alert==="function"){window.alert(msg)}}options=$.extend({msg:msg,i18n_key:i18n_key},options);this.alerts.push(options);return tracker.track.alert(options)};Alert.prototype.isEmpty=function(){return this.alerts.length===0};Alert.prototype.reset=function(){return this.alerts=[]};return Alert}();module.exports=new Alert}).call(this)}});StripeCheckout.require.define({"lib/api":function(exports,require,module){(function(){var API,CONNECT_KEYS,CSRF_LIFETIME,LOCAL_STORAGE_SESSION_KEYS,SESSION_HEADERS,config,errorHandler,helpers,i18n,now;i18n=require("lib/i18n");helpers=require("lib/helpers");API={};LOCAL_STORAGE_SESSION_KEYS={"true":"sessionID","false":"testSessionID"};SESSION_HEADERS={"true":"X-Rack-Session","false":"Stripe-Checkout-Test-Session"};CONNECT_KEYS={"true":"pk_live_4aL9ZBJ3JfYjXueQs1O89xm8","false":"pk_test_4aL9PzbEQswf87pSKTeTDu22"};CSRF_LIFETIME=3*60*60*1e3;now=function(){return(new Date).getTime()};config={merchantStripeKey:null,csrfAcquired:null,csrfToken:null,livemode:true,sessionID:null};errorHandler=function(callback){return function(xhr){var e,response,status;try{status=xhr.status}catch(_error){status=null}if(status===401){if(!config.merchantStripeKey){alert(i18n.loc("error.missingAPIKey")())}else{alert(i18n.loc("error.invalidAPIKey")())}callback();return}try{response=JSON.parse(xhr.responseText)}catch(_error){e=_error;callback(xhr.responseText,status);return}return callback(response.error,status)}};API.setMerchantStripeKey=function(key){return config.merchantStripeKey=key};API.useMerchantStripeKey=function(){return Stripe.setPublishableKey(config.merchantStripeKey)};API.useConnectStripeKey=function(){return Stripe.setPublishableKey(CONNECT_KEYS[config.livemode])};API.hasPublishableKey=function(){return config.merchantStripeKey!==null};API.hasValidCSRFToken=function(){return config.csrfToken&&now()-config.csrfAcquired<CSRF_LIFETIME};API.stripeRequest=function(options){var defer;if(options==null){options={}}defer=$.Deferred();Stripe.ajaxJSONP($.extend(true,{},options,{url:""+Stripe.endpoint+options.url,data:{key:config.merchantStripeKey},timeout:4e4,success:function(body,status){if(status&&status>199&&status<300){return defer.resolve(body)
}else{return defer.reject(body,status)}},complete:function(type,xhr){if(type!=="success"){return errorHandler(defer.reject)(xhr)}}}));return defer.promise()};API.request=function(options){var defer,headers,mode,sid,xhr,_i,_len,_ref;if(options==null){options={}}headers={};_ref=[true,false];for(_i=0,_len=_ref.length;_i<_len;_i++){mode=_ref[_i];sid=config.sessionID;if(!sid){try{sid=localStorage.getItem(LOCAL_STORAGE_SESSION_KEYS[mode])}catch(_error){}}if(sid){headers[SESSION_HEADERS[mode]]=sid}}if(config.csrfToken){headers["X-CSRF-Token"]=config.csrfToken}defer=$.Deferred();xhr=$.ajax($.extend(true,options,{url:"/api"+options.url,data:{key:config.merchantStripeKey},headers:headers,timeout:1e4}));xhr.done(function(data){if(!data){return}if(data.securityToken){config.csrfToken=data.securityToken;config.csrfAcquired=now()}if(data.livemode!=null){config.livemode=!!data.livemode}if(data.sessionID){config.sessionID=data.sessionID;try{return localStorage.setItem(LOCAL_STORAGE_SESSION_KEYS[config.livemode],data.sessionID)}catch(_error){}}});xhr.done(defer.resolve);xhr.fail(errorHandler(defer.reject));return defer.promise()};module.exports=API}).call(this)}});StripeCheckout.require.define({"lib/appType":function(exports,require,module){(function(){var appType;appType={};appType.types=[];appType.setTypes=function(types){return appType.types=types};appType.isDesktop=function(){return appType.types.indexOf("desktop")!==-1};appType.isTablet=function(){return appType.types.indexOf("tablet")!==-1};appType.isMobile=function(){return appType.types.indexOf("mobile")!==-1};appType.isiOSNative=function(){return appType.types.indexOf("iOSNative")!==-1};appType.toString=function(){return appType.types.join(",")};module.exports=appType}).call(this)}});(function(){if(!Array.prototype.indexOf){Array.prototype.indexOf=function(obj,start){var f,i,j,_i;j=this.length;f=start?start:0;for(i=_i=f;f<=j?_i<j:_i>j;i=f<=j?++_i:--_i){if(this[i]===obj){return i}}return-1}}}).call(this);StripeCheckout.require.define({"lib/binRanges":function(exports,require,module){(function(){var binRanges,ranges,streamContains;ranges=null;binRanges={};binRanges.preload=function(done){if(ranges!=null){return}return $.getJSON("/v3/data/binRanges/ranges.json",{crossDomain:true}).done(function(data){ranges=data;return typeof done==="function"?done():void 0})};binRanges.isPreloaded=function(){return ranges!=null};binRanges.binCountry=function(bin){var countryCode,_i,_len,_ref;if(!binRanges.isPreloaded()){return null}if(bin.length<6){return null}bin=bin.substring(0,6);_ref=["US","UK","CA"];for(_i=0,_len=_ref.length;_i<_len;_i++){countryCode=_ref[_i];if(ranges[countryCode]){if(streamContains(ranges[countryCode],bin)){return countryCode}}else if(ranges["non"+countryCode]){if(!streamContains(ranges["non"+countryCode],bin)){return countryCode}}else{return null}}return null};streamContains=function(ranges,bin){var currIntervalStart,currIntervalValue,nextIntervalStart,offset,_i,_len;bin=parseInt(bin,10);currIntervalStart=0;currIntervalValue=false;for(_i=0,_len=ranges.length;_i<_len;_i++){offset=ranges[_i];nextIntervalStart=currIntervalStart+offset;if(bin>=currIntervalStart&&bin<nextIntervalStart){return currIntervalValue}currIntervalValue=!currIntervalValue;currIntervalStart=nextIntervalStart}return false};module.exports=binRanges}).call(this)}});StripeCheckout.require.define({"lib/cache":function(exports,require,module){(function(){var cache;cache={};cache.fn=function(func){var cachedMethod,data;data={};cachedMethod=function(){var k,key,result,_i,_len;key="";for(_i=0,_len=arguments.length;_i<_len;_i++){k=arguments[_i];key+=k.toString()+","}result=data[key];if(!result){data[key]=result=func.apply(this,arguments)}return result};return cachedMethod};module.exports=cache}).call(this)}});StripeCheckout.require.define({"lib/cardUtils":function(exports,require,module){(function(){var CARD_BRAND_TYPES,CARD_TYPES,cardUtils,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i}return-1};CARD_TYPES=["amex","diners","discover","jcb","mastercard","visa"];CARD_BRAND_TYPES={americanexpress:"amex",dinersclub:"diners"};cardUtils={getCvcLength:function(type){switch(cardUtils.extractCardType(type)){case"amex":return 4;default:return 3}},extractCardType:function(formattedType){var type;type=formattedType.toLowerCase().replace(/\ /g,"");if(CARD_BRAND_TYPES[type]!=null){type=CARD_BRAND_TYPES[type]}if(__indexOf.call(CARD_TYPES,type)>=0){return type}else{return null}}};module.exports=cardUtils}).call(this)}});StripeCheckout.require.define({"lib/color":function(exports,require,module){(function(){var API,Color,LOCALHOST_RE,rgbToHex,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};LOCALHOST_RE=/^https?:\/\/(localhost|127\.0\.0\.\d{1,3})(:\d+)?(\/|$)/;API=require("lib/api");Color=function(){Color.fromImageURI=function(uri){var deferred;deferred=$.Deferred();if(uri.match(LOCALHOST_RE)){deferred.reject(new Error("Cannot process an image unless it is accessible to the public internet"))}else{API.request({url:"/color",data:{image_url:uri}}).done(function(colorSpec){return deferred.resolve(new Color(colorSpec.rgb))}).fail(function(_jqXHR,status,error){return deferred.reject(""+status+" "+error)})}return deferred.promise()};function Color(value){this.css=__bind(this.css,this);if(value instanceof Object){this.hex=rgbToHex(value)}else{this.hex=value}}Color.prototype.css=function(){return this.hex};return Color}();rgbToHex=function(value){return"#"+((1<<24)+(value.r<<16)+(value.g<<8)+value.b).toString(16).slice(1)};module.exports=Color}).call(this)}});StripeCheckout.require.define({"lib/controller":function(exports,require,module){(function(){var Controller,EventDispatcher,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};EventDispatcher=require("lib/eventDispatcher");Controller=function(_super){__extends(Controller,_super);function Controller(options){if(options==null){options={}}Controller.__super__.constructor.apply(this,arguments);this.options=options;this.view=null}return Controller}(EventDispatcher);module.exports=Controller}).call(this)}});StripeCheckout.require.define({"lib/countries":function(exports,require,module){(function(){module.exports={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua and Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BQ:"Bonaire",BA:"Bosnia and Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",VG:"British Virgin Islands",BN:"Brunei",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CD:"Congo, Democratic Republic of",CG:"Congo, Republic of",CK:"Cook Islands",CR:"Costa Rica",HR:"Croatia",CU:"Cuba",CW:"Curaçao",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern and Antarctic Lands",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island and McDonald Islands",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran",IQ:"Iraq",IE:"Ireland",IM:"Isle of Man",IL:"Israel",IT:"Italy",CI:"Ivory Coast",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",XK:"Kosovo",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Laos",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macau",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn Islands",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RO:"Romania",RU:"Russia",RW:"Rwanda",RE:"Réunion",BL:"Saint Barthélemy",SH:"Saint Helena, Ascension and Tristan da Cunha",KN:"Saint Kitts and Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre and Miquelon",VC:"Saint Vincent and the Grenadines",WS:"Samoa",SM:"San Marino",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SX:"Sint Maarten",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard and Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syria",ST:"São Tomé and Príncipe",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Minor Outlying Islands",VI:"United States Virgin Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VA:"Vatican City",VE:"Venezuela",VN:"Vietnam",WF:"Wallis and Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"}}).call(this)}});StripeCheckout.require.define({"lib/delegateMethods":function(exports,require,module){(function(){var __slice=[].slice;module.exports=function(){var context,method,methods,property,_i,_len,_results;context=arguments[0],property=arguments[1],methods=3<=arguments.length?__slice.call(arguments,2):[];_results=[];for(_i=0,_len=methods.length;_i<_len;_i++){method=methods[_i];_results.push(function(method){return context[method]=function(){var target,_ref;target=context[property];return target!=null?(_ref=target[method])!=null?_ref.apply(target,arguments):void 0:void 0}}(method))}return _results}}).call(this)}});StripeCheckout.require.define({"lib/eventDispatcher":function(exports,require,module){(function(){var $,EventDispatcher,tracker,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__slice=[].slice;tracker=require("lib/tracker");$=jQuery;EventDispatcher=function(){function EventDispatcher(){this.trigger=__bind(this.trigger,this);this.onOff=__bind(this.onOff,this);this.off=__bind(this.off,this);this.on=__bind(this.on,this);this.eventCallbacks={}}EventDispatcher.prototype.on=function(eventName,callback){var _base;(_base=this.eventCallbacks)[eventName]||(_base[eventName]=[]);if(this.eventCallbacks[eventName].indexOf(callback)===-1){return this.eventCallbacks[eventName].push(callback)}};EventDispatcher.prototype.off=function(eventName,callback){if(eventName==null){eventName=null}if(callback==null){callback=null}if(!eventName){return this.eventCallbacks={}}else if(!callback){return this.eventCallbacks[eventName]=[]}else if(this.eventCallbacks[eventName]!=null){return this.eventCallbacks[eventName]=$.map(this.eventCallbacks[eventName],function(cb){if(cb!==callback){return cb}})}};EventDispatcher.prototype.onOff=function(eventName,callback){var fn;fn=function(_this){return function(){_this.off(eventName,fn);return callback.apply(_this,arguments)}}(this);return this.on(eventName,fn)};EventDispatcher.prototype.trigger=function(){var args,callback,callbacks,eventName,_i,_len;eventName=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];tracker.trace.trigger(eventName,args);callbacks=this.eventCallbacks[eventName];if(!callbacks){return}for(_i=0,_len=callbacks.length;_i<_len;_i++){callback=callbacks[_i];callback.apply(null,args)}return null};EventDispatcher.prototype.propagateEvent=function(event,source){return source.on(event,function(_this){return function(){var args;args=1<=arguments.length?__slice.call(arguments,0):[];return _this.trigger.apply(_this,[event].concat(__slice.call(args)))}}(this))};return EventDispatcher}();module.exports=EventDispatcher}).call(this)}});StripeCheckout.require.define({"lib/formatting":function(exports,require,module){(function(){var Alert,currencyStyle,currencySymbolFromCode,formatLabel,formatting,helpers,locale,zeroDecimalCurrencies;helpers=require("lib/helpers");Alert=require("lib/alert");formatting=module.exports;locale="en";zeroDecimalCurrencies=["BIF","CLP","DJF","GNF","JPY","KMF","KRW","MGA","PYG","RWF","VND","VUV","XAF","XOF","XPF"];formatLabel=function(label,amount,currency,textOnly){var amount_str,e,str,unitAmount;if(currency==null){currency="USD"}if(textOnly==null){textOnly=false}label=label.replace(/\{\{amount\}\}/g,"{amount}");if(label.indexOf("{amount}")===-1){label=""+label+" {amount}"}currency=helpers.trim(currency.toUpperCase());str="";if(window.currency!=null){if(window.currency.CurrencyInfo[currency]==null){Alert.alert("error.invalidCurrency")}}else{if(currency.length>3){Alert.alert("error.invalidCurrency")}}if(amount){if($.inArray(currency,zeroDecimalCurrencies)!==-1){unitAmount=amount}else{unitAmount=amount/100}try{if(window.NumberFormat!=null){str=new window.NumberFormat(locale,4,currency,currencyStyle(currency)).format(unitAmount)}else{if(unitAmount===amount){amount_str=unitAmount}else{amount_str=unitAmount.toFixed(2)}str=""+currency+" "+amount_str}}catch(_error){e=_error;str=unitAmount.toFixed(2)}}return helpers.trim(label.replace("{amount}",str))};currencySymbolFromCode=function(currencyCode){return window.currency.CurrencyInfo[currencyCode][1]};currencyStyle=function(currency){var localeCurrencyCode,useGlobal;localeCurrencyCode=window.NumberFormat.locale[locale].DEF_CURRENCY_CODE;useGlobal=localeCurrencyCode!==currency&&currencySymbolFromCode(currency)===currencySymbolFromCode(localeCurrencyCode);if(useGlobal){return window.NumberFormat.CurrencyStyle.GLOBAL}else{return window.NumberFormat.CurrencyStyle.LOCAL}};module.exports.setFormatLocale=function(options){if(options==null){options={}}if(!(options.locale&&options.format)){return}locale=options.locale;return window.NumberFormat.locale[options.locale]=options.format};module.exports.formatLabelSafe=function(label,amount,currency,textOnly){if(textOnly==null){textOnly=false}return formatLabel(helpers.escape(label),parseInt(amount,10),helpers.escape(currency),textOnly)};module.exports.restrictInput=function($input,regex){return $input.on("keypress",function(e){var input;if(e.metaKey||e.ctrlKey){return true}if(e.which===32){return false}if(e.which===0){return true}if(e.which<33){return true}input=String.fromCharCode(e.which);return!!regex.test(input)})}}).call(this)}});StripeCheckout.require.define({"lib/geolocation":function(exports,require,module){(function(){var Geolocation;Geolocation=function(){function Geolocation(){}Geolocation.prototype.setLocation=function(loc){this.precision=loc.precision;this.countryCode=loc.countryCode;this.latitude=loc.latitude;return this.longitude=loc.longitude};return Geolocation}();module.exports=new Geolocation}).call(this)}});StripeCheckout.require.define({"lib/gfx":function(exports,require,module){(function(){var dataKeys,defaults,emulateTransitionEnd,gfxClearComplete,setOrderedTimeout,support,transformTypes,transitionEndEventName,transitionEndPrefix,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i}return-1};support=require("lib/support");transitionEndPrefix=support.prefixFor("transition");if(transitionEndPrefix.length>0){transitionEndEventName=transitionEndPrefix+"TransitionEnd"}else{transitionEndEventName="transitionend"}defaults={duration:400,easing:"",animated:true,transformFallbackKeys:{},forceFallback:false};transformTypes=["scale","scaleX","scaleY","scale3d","rotate","rotateX","rotateY","rotateZ","rotate3d","translate","translateX","translateY","translateZ","translate3d","skew","skewX","skewY","matrix","matrix3d","perspective","origin"];dataKeys={callback:"gfxAnimationEndCallback",timeout:"gfxEmulatedTransitionEndTimeout",notFired:"gfxTransitionEndNotFired"};gfxClearComplete=function(){this.data(dataKeys.callback,null);return clearTimeout(this.data(dataKeys.timeout))};emulateTransitionEnd=function(duration,callback){var transitionEndCallback;this.data(dataKeys.callback,callback);if(!this.data(dataKeys.notFired)){this.data(dataKeys.notFired,true);transitionEndCallback=function(_this){return function(e){var _base;if(e.target!==_this.get(0)){_this.one(transitionEndEventName,transitionEndCallback);return}if(typeof(_base=_this.data(dataKeys.callback))==="function"){_base()}gfxClearComplete.call(_this);return _this.data(dataKeys.notFired,false)}}(this);this.one(transitionEndEventName,transitionEndCallback)}return this.data(dataKeys.timeout,setTimeout(function(_this){return function(){return _this.trigger(transitionEndEventName)}}(this),duration+300))};setOrderedTimeout=function(){var nextOrderedTimeout,orderedTimeout,timeoutFns;timeoutFns=[];orderedTimeout=false;nextOrderedTimeout=function(){var fn;if(timeoutFns.length===0){orderedTimeout=false;return}orderedTimeout=true;fn=timeoutFns.shift();return setTimeout(function(){fn();return nextOrderedTimeout()},0)};return function(fn){timeoutFns.push(fn);if(!orderedTimeout){return nextOrderedTimeout()}}}();$.fn.clearTransition=function(){return this.css(support.propertyWithPrefix("transition"),"none")};$.fn.transform=function(properties,options){var key,newKey,oldKey,opts,transforms,value,_ref;opts=$.extend({},defaults,options);transforms=[];if(!support.transform()||opts.forceFallback){_ref=opts.transformFallbackKeys;for(oldKey in _ref){newKey=_ref[oldKey];if(properties[oldKey]!=null){properties[newKey]=properties[oldKey];delete properties[oldKey]}}}for(key in properties){value=properties[key];if(!(__indexOf.call(transformTypes,key)>=0)){continue}if(typeof value==="number"&&key.match(/translate/)){value=""+value+"px"}else if(typeof value==="number"&&key.match(/rotate/)){value=""+value+"deg"}transforms.push(""+key+"("+value+")");delete properties[key]}if(support.transform()&&transforms.length>0){properties[support.propertyWithPrefix("transform")]=transforms.join(" ")}if(opts.origin){properties[support.propertyWithPrefix("transformOrigin")]=opts.origin}return this.css(properties)};$.fn.gfx=function(properties,options){var callback,opts,transform;opts=$.extend({},defaults,options);if(!support.transitions()){opts.animated=false}gfxClearComplete.call(this);callback=function(_this){return function(){var _ref;if(opts.animated){_this.clearTransition()}return(_ref=opts.complete)!=null?_ref.apply(_this,arguments):void 0}}(this);transform=function(_this){return function(){return _this.transform(properties,opts)}}(this);if(opts.animated){properties[support.propertyWithPrefix("transition")]="all "+opts.duration+"ms "+opts.easing;return setOrderedTimeout(function(_this){return function(){emulateTransitionEnd.call(_this,opts.duration,callback);return transform()}}(this))}else{properties[support.propertyWithPrefix("transition")]="none";transform();return callback()}}}).call(this)}});StripeCheckout.require.define({"lib/helpers":function(exports,require,module){(function(){var delurkWinPhone,helpers,uaVersionFn;uaVersionFn=function(re){return function(){var uaMatch;uaMatch=helpers.userAgent.match(re);return uaMatch&&parseInt(uaMatch[1])}};delurkWinPhone=function(fn){return function(){return fn()&&!helpers.isWindowsPhone()}};helpers={userAgent:window.navigator.userAgent,escape:function(value){return value&&(""+value).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;")},trim:function(value){return value.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},sanitizeURL:function(value){var SCHEME_WHITELIST,allowed,scheme,_i,_len;if(!value){return}value=helpers.trim(value);SCHEME_WHITELIST=["data:","http:","https:"];allowed=false;for(_i=0,_len=SCHEME_WHITELIST.length;_i<_len;_i++){scheme=SCHEME_WHITELIST[_i];if(value.indexOf(scheme)===0){allowed=true;break}}if(!allowed){return null}return encodeURI(value)},iOSVersion:uaVersionFn(/(?:iPhone OS |iPad; CPU OS )(\d+)_\d+/),iOSMinorVersion:uaVersionFn(/(?:iPhone OS |iPad; CPU OS )\d+_(\d+)/),iOSBuildVersion:uaVersionFn(/(?:iPhone OS |iPad; CPU OS )\d+_\d+_(\d+)/),androidWebkitVersion:uaVersionFn(/Mozilla\/5\.0.*Android.*AppleWebKit\/([\d]+)/),androidVersion:uaVersionFn(/Android (\d+)\.\d+/),firefoxVersion:uaVersionFn(/Firefox\/(\d+)\.\d+/),chromeVersion:uaVersionFn(/Chrome\/(\d+)\.\d+/),safariVersion:uaVersionFn(/Version\/(\d+)\.\d+ Safari/),iOSChromeVersion:uaVersionFn(/CriOS\/(\d+)\.\d+/),iOSNativeVersion:uaVersionFn(/Stripe\/(\d+)\.\d+/),ieVersion:uaVersionFn(/(?:MSIE |Trident\/.*rv:)(\d{1,2})\./),isiOSChrome:function(){return/CriOS/.test(helpers.userAgent)},isiOSWebView:function(){return/(iPhone|iPod|iPad).*AppleWebKit((?!.*Safari)|(.*\([^)]*like[^)]*Safari[^)]*\)))/i.test(helpers.userAgent)},isiOS:delurkWinPhone(function(){return/(iPhone|iPad|iPod)/i.test(helpers.userAgent)}),isiOSNative:function(){return this.isiOS()&&this.iOSNativeVersion()>=3},isiPad:function(){return/(iPad)/i.test(helpers.userAgent)},isMac:delurkWinPhone(function(){return/mac/i.test(helpers.userAgent)}),isWindowsPhone:function(){return/(Windows\sPhone|IEMobile)/i.test(helpers.userAgent)},isWindowsOS:function(){return/(Windows NT \d\.\d)/i.test(helpers.userAgent)},isIE:function(){return/(MSIE ([0-9]{1,}[\.0-9]{0,})|Trident\/)/i.test(helpers.userAgent)},isChrome:function(){return"chrome"in window},isSafari:delurkWinPhone(function(){var userAgent;userAgent=helpers.userAgent;return/Safari/i.test(userAgent)&&!/Chrome/i.test(userAgent)}),isFirefox:delurkWinPhone(function(){return helpers.firefoxVersion()!=null}),isAndroidBrowser:function(){var version;version=helpers.androidWebkitVersion();return version&&version<537},isAndroidChrome:function(){var version;version=helpers.androidWebkitVersion();return version&&version>=537},isAndroidDevice:delurkWinPhone(function(){return/Android/.test(helpers.userAgent)}),isAndroidWebView:function(){return helpers.isAndroidChrome()&&/Version\/\d+\.\d+/.test(helpers.userAgent)},isNativeWebContainer:function(){return window.cordova!=null||/GSA\/\d+\.\d+/.test(helpers.userAgent)},isSupportedMobileOS:function(){return helpers.isiOS()||helpers.isAndroidDevice()},isAndroidWebapp:function(){var metaTag;if(!helpers.isAndroidChrome()){return false}metaTag=document.getElementsByName("apple-mobile-web-app-capable")[0]||document.getElementsByName("mobile-web-app-capable")[0];return metaTag&&metaTag.content==="yes"},isiOSBroken:function(){if(!(helpers.isiPad()&&helpers.iOSVersion()===8)){return false}switch(helpers.iOSMinorVersion()){case 0:return true;case 1:return helpers.iOSBuildVersion()<1}return false},isUserGesture:function(){var _ref,_ref1;return(_ref=(_ref1=window.event)!=null?_ref1.type:void 0)==="click"||_ref==="touchstart"||_ref==="touchend"},isInsideFrame:function(){return window.top!==window.self},isFallback:function(){var androidVersion,criosVersion,ffVersion,iOSVersion;if(!("postMessage"in window)||window.postMessageDisabled||document.documentMode&&document.documentMode<8){return true}androidVersion=helpers.androidVersion();if(androidVersion&&androidVersion<4){return true}iOSVersion=helpers.iOSVersion();if(iOSVersion&&iOSVersion<6){return true}ffVersion=helpers.firefoxVersion();if(ffVersion&&ffVersion<11){return true}criosVersion=helpers.iOSChromeVersion();if(criosVersion&&criosVersion<36){return true}return false},isSmallScreen:function(){return Math.min(window.screen.availHeight,window.screen.availWidth)<=640||/FakeCheckoutMobile/.test(helpers.userAgent)},pad:function(number,width,padding){var leading;if(width==null){width=2}if(padding==null){padding="0"}number=number+"";if(number.length>width){return number}leading=new Array(width-number.length+1).join(padding);return leading+number},requestAnimationFrame:function(callback){return(typeof window.requestAnimationFrame==="function"?window.requestAnimationFrame(callback):void 0)||(typeof window.webkitRequestAnimationFrame==="function"?window.webkitRequestAnimationFrame(callback):void 0)||window.setTimeout(callback,100)},requestAnimationInterval:function(func,interval){var callback,previous;previous=new Date;callback=function(){var frame,now,remaining;frame=helpers.requestAnimationFrame(callback);now=new Date;remaining=interval-(now-previous);if(remaining<=0){previous=now;func()}return frame};return callback()},getQueryParameterByName:function(name){var match;match=RegExp("[?&]"+name+"=([^&]*)").exec(window.location.search);return match&&decodeURIComponent(match[1].replace(/\+/g," "))},addQueryParameter:function(url,name,value){var hashParts,query;query=encodeURIComponent(name)+"="+encodeURIComponent(value);hashParts=new String(url).split("#");hashParts[0]+=hashParts[0].indexOf("?")!==-1?"&":"?";hashParts[0]+=query;return hashParts.join("#")},bind:function(element,name,callback){if(element.addEventListener){return element.addEventListener(name,callback,false)}else{return element.attachEvent("on"+name,callback)}},unbind:function(element,name,callback){if(element.removeEventListener){return element.removeEventListener(name,callback,false)}else{return element.detachEvent("on"+name,callback)}},host:function(url){var parent,parser;parent=document.createElement("div");parent.innerHTML='<a href="'+this.escape(url)+'">x</a>';parser=parent.firstChild;return""+parser.protocol+"//"+parser.host},strip:function(html){var tmp,_ref,_ref1;tmp=document.createElement("div");tmp.innerHTML=html;return(_ref=(_ref1=tmp.textContent)!=null?_ref1:tmp.innerText)!=null?_ref:""},setAutocomplete:function(el,type){var secureCCFill;secureCCFill=helpers.chromeVersion()>14||helpers.safariVersion()>7;if(type!=="cc-csc"&&(!/^cc-/.test(type)||secureCCFill)){el.setAttribute("x-autocompletetype",type);el.setAttribute("autocompletetype",type)}else{el.setAttribute("autocomplete","off")}if(!(type==="country-name"||type==="language"||type==="sex"||type==="gender-identity")){el.setAttribute("autocorrect","off");el.setAttribute("spellcheck","off")}if(!(/name|honorific/.test(type)||(type==="locality"||type==="city"||type==="adminstrative-area"||type==="state"||type==="province"||type==="region"||type==="language"||type==="org"||type==="organization-title"||type==="sex"||type==="gender-identity"))){return el.setAttribute("autocapitalize","off")}},hashCode:function(str){var hash,i,_i,_ref;hash=5381;for(i=_i=0,_ref=str.length;_i<_ref;i=_i+=1){hash=(hash<<5)+hash+str.charCodeAt(i)}return(hash>>>0)%65535},stripeUrlPrefix:function(){var match;match=window.location.hostname.match("^([a-z-]*)checkout.");if(match){return match[1]}else{return""}}};module.exports=helpers}).call(this)}});StripeCheckout.require.define({"lib/i18n":function(exports,require,module){(function(){var backupLanguage,defaultLocale,i18n,load,loadedLanguage,loadedLocale;defaultLocale="en";loadedLocale=null;loadedLanguage=null;backupLanguage={"error.invalidAPIKey":"We can't communicate with our payment processor because the API key is invalid. Please contact the website owner or support@stripe.com.","error.missingAPIKey":"Stripe Checkout is missing the required `key` parameter. Please contact the website owner or support@stripe.com.","error.unableToOpen":"Stripe Checkout couldn't open. Please check your internet connection and try again. If it still doesn't work, please contact support@stripe.com."};i18n={};i18n.loc=function(key){var value;value=key;if(loadedLanguage!=null&&loadedLanguage[key]){value=loadedLanguage[key]}else if(backupLanguage[key]){value=backupLanguage[key]}return function(args){var k,regex,v;if(args==null){args={}}for(k in args){v=args[k];regex=new RegExp("{"+k+"}","g");value=value.replace(regex,v)}return value}};i18n.setLanguage=function(json,locale){loadedLanguage=json;return loadedLocale=locale};i18n.getLocale=function(){return loadedLocale};i18n.loadLanguageIfNotLoaded=function(locale,callback){if(loadedLanguage!=null){return callback()}if(locale==null||locale==="auto"){locale=defaultLocale}return load(locale,function(err){if(err&&locale!==defaultLocale){return load(defaultLocale,callback)}else{return callback()}})};load=function(locale,callback){var promise;promise=$.getJSON("/v3/data/languages/"+locale+".json");promise.fail(function(args){return callback("Failure loading language information.")});return promise.done(function(data){if(data){i18n.setLanguage(data,locale);return callback()}else{return callback("Missing language information.")}})};module.exports=i18n}).call(this)}});(function(){$.fn.redraw=function(){$(this).each(function(){var redraw;return redraw=this.offsetHeight});return $(this).addClass("redraw").removeClass("redraw")}}).call(this);StripeCheckout.require.define({"lib/moreInfo":function(exports,require,module){(function(){module.exports.setCookies=function(name,image){var cookieOptions;if(image==null){image=null}cookieOptions={domain:"stripe.com",path:"/"};$.cookie("last-used-checkout-name",name,cookieOptions);if(image){return $.cookie("last-used-checkout-image",image,cookieOptions)}else{return $.removeCookie("last-used-checkout-image",cookieOptions)}}}).call(this)}});StripeCheckout.require.define({"lib/optionParser":function(exports,require,module){(function(){var BOOLEAN_OPTIONS,DEFAULTS,STRING_OPTIONS,URL_OPTIONS,extractValue,helpers,toBoolean,_;_=require("vendor/lodash");helpers=require("lib/helpers");DEFAULTS={currency:"usd",allowRememberMe:true};BOOLEAN_OPTIONS=["billingAddress","shippingAddress","notrack","nostyle","allowRememberMe","allowPhoneVerification","zipCode","trace","alipayReusable","bitcoin","supportsTokenCallback"];STRING_OPTIONS=["key","amount","name","description","panelLabel","currency","email","locale","alipay","color"];URL_OPTIONS=["url","referrer","image"];extractValue=function(raw,key){var dashed,downcased;if(raw[key]!=null){return raw[key]}downcased=key.toLowerCase();if(raw[downcased]!=null){return raw[downcased]}dashed=key.replace(/([A-Z])/g,function(g){return"-"+g.toLowerCase()});if(raw[dashed]!=null){return raw[dashed]}};toBoolean=function(val){return val!=="false"&&val!==false};module.exports={parse:function(raw){var opt,parsed,val,_i,_j,_k,_len,_len1,_len2;if(raw==null){raw={}}parsed=$.extend({},DEFAULTS);for(_i=0,_len=BOOLEAN_OPTIONS.length;_i<_len;_i++){opt=BOOLEAN_OPTIONS[_i];val=extractValue(raw,opt);if(val!=null){parsed[opt]=toBoolean(val)}}for(_j=0,_len1=STRING_OPTIONS.length;_j<_len1;_j++){opt=STRING_OPTIONS[_j];val=extractValue(raw,opt);if(val!=null){parsed[opt]=""+val}}for(_k=0,_len2=URL_OPTIONS.length;_k<_len2;_k++){opt=URL_OPTIONS[_k];val=extractValue(raw,opt);if(val!=null){parsed[opt]=helpers.sanitizeURL(val)}}if(parsed.alipay!=null&&parsed.alipay!=="auto"){parsed.alipay=toBoolean(parsed.alipay)}if(parsed.shippingAddress){parsed.billingAddress=true}if(raw.address!=null&&raw.address!=="false"&&raw.address!==false){parsed.billingAddress=true}if(parsed.locale){parsed.billingAddress=false;parsed.shippingAddress=false}if(parsed.billingAddress){parsed.zipCode=false
}return parsed}}}).call(this)}});StripeCheckout.require.define({"lib/phoneVerification":function(exports,require,module){(function(){var $,API,PhoneVerification,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};API=require("lib/api");$=jQuery;PhoneVerification=function(){function PhoneVerification(phone,useSms){this.phone=phone;this.useSms=useSms;this.val=__bind(this.val,this);this.authorize=__bind(this.authorize,this);this.send=__bind(this.send,this)}PhoneVerification.prototype.send=function(){this.sendDefer=$.Deferred();this.authorized=false;return API.stripeRequest({url:"/phone_verification",method:"POST",data:{phone:this.phone,contact_type:this.useSms?"sms":"call"}}).done(function(_this){return function(res){_this.id=res.id;return _this.sendDefer.resolve()}}(this)).fail(function(_this){return function(){return _this.sendDefer.reject()}}(this))};PhoneVerification.prototype.authorize=function(code){var url;url="/phone_verification/"+this.id;return this.sendDefer.then(function(_this){return function(){return API.stripeRequest({url:url,method:"POST",data:{code:code}}).then(function(){return _this.authorized=true})}}(this))};PhoneVerification.prototype.val=function(){if(this.authorized){return this.id}};return PhoneVerification}();module.exports=PhoneVerification}).call(this)}});StripeCheckout.require.define({"lib/pixel":function(exports,require,module){(function(){var canTrack,encode,generateID,getCookie,getCookieID,getLocalStorageID,request,setCookie,track;generateID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r,v;r=Math.random()*16|0;v=c==="x"?r:r&3|8;return v.toString(16)})};setCookie=function(name,value,options){var cookie,expires;if(options==null){options={}}if(options.expires===true){options.expires=-1}if(typeof options.expires==="number"){expires=new Date;expires.setTime(expires.getTime()+options.expires*24*60*60*1e3);options.expires=expires}if(options.path==null){options.path="/"}value=(value+"").replace(/[^!#-+\--:<-\[\]-~]/g,encodeURIComponent);cookie=encodeURIComponent(name)+"="+value;if(options.expires){cookie+=";expires="+options.expires.toGMTString()}if(options.path){cookie+=";path="+options.path}if(options.domain){cookie+=";domain="+options.domain}return document.cookie=cookie};getCookie=function(name){var cookie,cookies,index,key,value,_i,_len;cookies=document.cookie.split("; ");for(_i=0,_len=cookies.length;_i<_len;_i++){cookie=cookies[_i];index=cookie.indexOf("=");key=decodeURIComponent(cookie.substr(0,index));value=decodeURIComponent(cookie.substr(index+1));if(key===name){return value}}return null};encode=function(param){if(typeof param==="string"){return encodeURIComponent(param)}else{return encodeURIComponent(JSON.stringify(param))}};request=function(url,params,callback){var image,k,v;if(params==null){params={}}params.i=(new Date).getTime();params=function(){var _results;_results=[];for(k in params){v=params[k];_results.push(""+k+"="+encode(v))}return _results}().join("&");image=new Image;if(callback){image.onload=callback}image.src=""+url+"?"+params;return true};canTrack=function(){var dnt,_ref;dnt=(_ref=window.navigator.doNotTrack)!=null?_ref.toString().toLowerCase():void 0;switch(dnt){case"1":case"yes":case"true":return false;default:return true}};getLocalStorageID=function(){var err,lsid;if(!canTrack()){return"DNT"}try{lsid=localStorage.getItem("lsid");if(!lsid){lsid=generateID();localStorage.setItem("lsid",lsid)}return lsid}catch(_error){err=_error;return"NA"}};getCookieID=function(){var err,id;if(!canTrack()){return"DNT"}try{id=getCookie("cid")||generateID();setCookie("cid",id,{expires:360*20,domain:".stripe.com"});return id}catch(_error){err=_error;return"NA"}};track=function(event,params,callback){var k,referrer,request_params,search,v;if(params==null){params={}}referrer=document.referrer;search=window.location.search;request_params={event:event,rf:referrer,sc:search};for(k in params){v=params[k];request_params[k]=v}request_params.lsid||(request_params.lsid=getLocalStorageID());request_params.cid||(request_params.cid=getCookieID());return request("https://q.stripe.com",request_params,callback)};module.exports.track=track;module.exports.getLocalStorageID=getLocalStorageID;module.exports.getCookieID=getCookieID}).call(this)}});StripeCheckout.require.define({"lib/placeAutocomplete":function(exports,require,module){(function(){var PlaceAutocomplete,geolocation,googlePlacesAPIDefer,googlePlacesAPILoading,googlePlacesAPIPromise,isGooglePlacesAPILoaded,loadGooglePlacesAPI,scriptLoader,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};geolocation=require("lib/geolocation");scriptLoader=require("lib/scriptLoader");googlePlacesAPILoading=false;googlePlacesAPIDefer=null;googlePlacesAPIPromise=null;isGooglePlacesAPILoaded=function(){return typeof google!=="undefined"&&google!==null&&google.maps!=null&&google.maps.places!=null};loadGooglePlacesAPI=function(){var onError;if(googlePlacesAPILoading){return googlePlacesAPIPromise}googlePlacesAPIDefer=$.Deferred();googlePlacesAPIPromise=googlePlacesAPIDefer.promise();googlePlacesAPILoading=true;window.gMapsCallback=function(){if(isGooglePlacesAPILoaded()){googlePlacesAPIDefer.resolve()}else{googlePlacesAPIDefer.reject()}return googlePlacesAPILoading=false};onError=function(){googlePlacesAPIDefer.reject();return googlePlacesAPILoading=false};scriptLoader.loadScript("https://maps.googleapis.com/maps/api/js?v=3.14&sensor=false&libraries=places&callback=gMapsCallback",{async:true,err:onError});return googlePlacesAPIPromise};PlaceAutocomplete=function(){function PlaceAutocomplete(input,callback){this.input=input;this.callback=callback!=null?callback:null;this.blur=__bind(this.blur,this);this.focus=__bind(this.focus,this);this.changed=__bind(this.changed,this);this.disable=__bind(this.disable,this);this.enable=__bind(this.enable,this);this.init=__bind(this.init,this);loadGooglePlacesAPI().done(this.init)}PlaceAutocomplete.prototype.init=function(){this.service=new google.maps.places.AutocompleteService;this.$input=$(this.input);this.$input.on("keyup",this.changed);this.$input.on("focus",this.focus);return this.$input.on("blur",this.blur)};PlaceAutocomplete.componentsFromPrediction=function(prediction,callback){var request;if(!isGooglePlacesAPILoaded()){return}request={reference:prediction.reference};this.placesService||(this.placesService=new google.maps.places.PlacesService($("<input>")[0]));return this.placesService.getDetails(request,function(place,status){var component,components,result,street,streetNumber,type,_i,_j,_len,_len1,_ref,_ref1,_ref2,_ref3,_ref4,_ref5,_ref6,_ref7;if(status!==google.maps.places.PlacesServiceStatus.OK){return}result={};streetNumber=null;street=null;components={};_ref=place.address_components;for(_i=0,_len=_ref.length;_i<_len;_i++){component=_ref[_i];_ref1=component.types;for(_j=0,_len1=_ref1.length;_j<_len1;_j++){type=_ref1[_j];components[type]={"long":component.long_name,"short":component.short_name}}}result.postalCode=(_ref2=components["postal_code"])!=null?_ref2.long:void 0;result.city=((_ref3=components["locality"])!=null?_ref3.long:void 0)||((_ref4=components["sublocality"])!=null?_ref4.long:void 0);result.countryCode=(_ref5=components["country"])!=null?_ref5.short:void 0;streetNumber=(_ref6=components["street_number"])!=null?_ref6.long:void 0;street=(_ref7=components["route"])!=null?_ref7.long:void 0;result.street="";if(streetNumber){result.street=streetNumber+" "}if(street){result.street+=street}return typeof callback==="function"?callback(result):void 0})};PlaceAutocomplete.prototype.enable=function(){return this.disabled=false};PlaceAutocomplete.prototype.disable=function(){return this.disabled=true};PlaceAutocomplete.prototype.changed=function(){var poBox,request,val;val=this.$input.val();if(this.inputVal===val){return}this.inputVal=val;if(this.disabled||!this.focused){return}poBox=/^P\.?\s?O\.?([B\s]|$)/i;if(val.length===0||poBox.test(val)){return this.callback([])}request={};request.input=val;request.types=["geocode"];if(geolocation.precision==="city"){request.location=new google.maps.LatLng(geolocation.latitude,geolocation.longitude);request.radius=4e4}return this.service.getPlacePredictions(request,function(_this){return function(predictions,status){var filtered,prediction,type,_i,_j,_len,_len1,_ref;if(status!==google.maps.places.PlacesServiceStatus.OK){return}filtered=[];for(_i=0,_len=predictions.length;_i<_len;_i++){prediction=predictions[_i];if(prediction.types!=null){_ref=prediction.types;for(_j=0,_len1=_ref.length;_j<_len1;_j++){type=_ref[_j];if(type==="street_address"||type==="route"){filtered.push(prediction);break}}}}return _this.callback(filtered)}}(this))};PlaceAutocomplete.prototype.focus=function(){return this.focused=true};PlaceAutocomplete.prototype.blur=function(){return this.focused=false};return PlaceAutocomplete}();module.exports=PlaceAutocomplete}).call(this)}});(function(){var $;$=jQuery;$.fn.setPlaceholder=function(value){var checkBlur,focused;if(!/MSIE [89]/.test(navigator.userAgent)){return this.attr("placeholder",value)}else{checkBlur=function(_this){return function(){if((_this._val()===value||_this._val()==="")&&!_this.is(":focus")){_this.addClass("placeholder");return _this._val(value)}else{return _this.removeClass("placeholder")}}}(this);focused=false;this.on("valChanged",function(){if(!focused){return checkBlur()}});this.on("focus",function(_this){return function(){focused=true;if(_this._val()===value){_this.removeClass("placeholder");return _this._val("")}}}(this));this.on("blur",function(){focused=false;return checkBlur()});return checkBlur()}};$.fn._val=$.fn.val;$.fn.val=function(value){var changed,r;if(arguments.length){changed=value!==this._val();r=this._val(value);if(changed){this.trigger("valChanged")}return r}else if(!this.hasClass("placeholder")){return this._val()}else{return""}}}).call(this);StripeCheckout.require.define({"lib/rpc":function(exports,require,module){(function(){var RPC,helpers,tracker,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__slice=[].slice;helpers=require("lib/helpers");tracker=require("lib/tracker");RPC=function(){function RPC(target,options){if(options==null){options={}}this.processMessage=__bind(this.processMessage,this);this.sendMessage=__bind(this.sendMessage,this);this.invoke=__bind(this.invoke,this);this.startSession=__bind(this.startSession,this);this.rpcID=0;this.target=target;this.callbacks={};this.readyQueue=[];this.readyStatus=false;this.methods={};helpers.bind(window,"message",function(_this){return function(){var args;args=1<=arguments.length?__slice.call(arguments,0):[];return _this.message.apply(_this,args)}}(this))}RPC.prototype.startSession=function(){this.sendMessage("frameReady");return this.frameReady()};RPC.prototype.invoke=function(){var args,method;method=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];tracker.trace.rpcInvoke(method);return this.ready(function(_this){return function(){return _this.sendMessage(method,args)}}(this))};RPC.prototype.message=function(e){var shouldProcess;shouldProcess=false;try{shouldProcess=e.source===this.target}catch(_error){}if(shouldProcess){return this.processMessage(e.data)}};RPC.prototype.ready=function(fn){if(this.readyStatus){return fn()}else{return this.readyQueue.push(fn)}};RPC.prototype.frameCallback=function(id,result){var _base;if(typeof(_base=this.callbacks)[id]==="function"){_base[id](result)}delete this.callbacks[id];return true};RPC.prototype.frameReady=function(){var callbacks,cb,_i,_len;this.readyStatus=true;callbacks=this.readyQueue.slice(0);for(_i=0,_len=callbacks.length;_i<_len;_i++){cb=callbacks[_i];cb()}return false};RPC.prototype.isAlive=function(){return true};RPC.prototype.sendMessage=function(method,args){var err,id,message,_ref;if(args==null){args=[]}id=++this.rpcID;if(typeof args[args.length-1]==="function"){this.callbacks[id]=args.pop()}message=JSON.stringify({method:method,args:args,id:id});if(((_ref=this.target)!=null?_ref.postMessage:void 0)==null){err=new Error("Unable to communicate with Checkout. Please contact support@stripe.com if the problem persists.");if(this.methods.rpcError!=null){this.methods.rpcError(err)}else{throw err}return}this.target.postMessage(message,"*");return tracker.trace.rpcPostMessage(method,args,id)};RPC.prototype.processMessage=function(data){var method,result,_base,_name;try{data=JSON.parse(data)}catch(_error){return}if(["frameReady","frameCallback","isAlive"].indexOf(data.method)!==-1){result=null;method=this[data.method];if(method!=null){result=method.apply(this,data.args)}}else{result=typeof(_base=this.methods)[_name=data.method]==="function"?_base[_name].apply(_base,data.args):void 0}if(data.method!=="frameCallback"){return this.invoke("frameCallback",data.id,result)}};return RPC}();module.exports=RPC}).call(this)}});StripeCheckout.require.define({"lib/scriptLoader":function(exports,require,module){(function(){var insert;insert=function(el){var head;head=document.getElementsByTagName("head")[0]||document.documentElement;return head.insertBefore(el,head.firstChild)};module.exports.loadScript=function(src,options){var done,scriptTag;if(options==null){options={}}scriptTag=document.createElement("script");scriptTag.src=src;if(options.async){scriptTag.async=true}if(typeof options.load==="function"){done=false;scriptTag.onload=scriptTag.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){done=true;setTimeout(options.load,0);return scriptTag.onload=scriptTag.onreadystatechange=null}}}if(typeof options.err==="function"){scriptTag.onerror=options.err}return insert(scriptTag)}}).call(this)}});StripeCheckout.require.define({"lib/stringTools":function(exports,require,module){(function(){var stringTools;stringTools={};stringTools.width=function(string,fontSize,options){var $span,width;if(options==null){options={}}if(options.bold==null){options.bold=false}$span=$("<span>");$span.css("position","absolute");$span.css("top","-100px");$span.css("font-size",""+fontSize+"px");if(options.bold){$span.css("font-weight","bold")}$span.text(string);$(document.body).append($span);width=$span.width();$span.remove();return width};module.exports=stringTools}).call(this)}});StripeCheckout.require.define({"lib/support":function(exports,require,module){(function(){var accountsEnabled,cache,helpers,persistenceEnabled,support,supportedBrowserForAccounts;helpers=require("lib/helpers");cache=require("lib/cache");support=module.exports;accountsEnabled=true;supportedBrowserForAccounts=true;if(helpers.iOSVersion()!=null&&helpers.iOSVersion()<=5||helpers.isAndroidBrowser()){supportedBrowserForAccounts=false}module.exports.cookiesEnabled=function(){var cookieKey,value;try{cookieKey="cookiesEnabled";value=""+Math.random();$.cookie(cookieKey,value);return $.cookie(cookieKey)===value}catch(_error){return false}}();module.exports.localStorageEnabled=function(){var e,value;try{if(!localStorage){return false}value=""+Math.random();localStorage.setItem("localStorageKey",value);return localStorage.getItem("localStorageKey")===value}catch(_error){e=_error;return false}}();module.exports.disableAccounts=function(){return accountsEnabled=false};persistenceEnabled=support.cookiesEnabled||support.localStorageEnabled;module.exports.accounts=function(){return persistenceEnabled&&accountsEnabled&&supportedBrowserForAccounts};module.exports.svg=function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect};module.exports.transitions=function(){return support.cssProperty("transition")};module.exports.transform=function(){return support.cssProperty("transform")};module.exports.cssProperty=cache.fn(function(property){var k,prefix,prop,propArray,propertyName,_i,_j,_len,_len1,_ref;if(document.body.style[property]!==void 0){return true}propArray=property.split("-");propertyName="";for(_i=0,_len=propArray.length;_i<_len;_i++){prop=propArray[_i];propertyName+=prop.substring(0,1).toUpperCase()+prop.substring(1)}_ref=["webkit","Moz","ms"];for(_j=0,_len1=_ref.length;_j<_len1;_j++){prefix=_ref[_j];k=prefix+propertyName;if(document.body.style[k]!==void 0){return true}}return false});module.exports.prefixFor=cache.fn(function(property){var k,prefix,prop,propArray,propertyName,_i,_j,_len,_len1,_ref;if(document.body.style[property]!==void 0){return""}propArray=property.split("-");propertyName="";for(_i=0,_len=propArray.length;_i<_len;_i++){prop=propArray[_i];propertyName+=prop.substring(0,1).toUpperCase()+prop.substring(1)}_ref=["webkit","Moz","ms"];for(_j=0,_len1=_ref.length;_j<_len1;_j++){prefix=_ref[_j];k=prefix+propertyName;if(document.body.style[k]!==void 0){return prefix}}return""});module.exports.propertyWithPrefix=cache.fn(function(property){var prefix;prefix=support.prefixFor(property);if(prefix==="Moz"){return""+prefix+(property.substring(0,1).toUpperCase()+property.substring(1))}if(prefix!==""){return"-"+prefix.toLowerCase()+"-"+property}return property});module.exports.isRetina=function(){var isRetina,matchMedia,mediaQuery;mediaQuery="(-webkit-min-device-pixel-ratio: 1.5),(min--moz-device-pixel-ratio: 1.5),(-o-min-device-pixel-ratio: 3/2),(min-resolution: 1.5dppx)";isRetina=false;if(window.devicePixelRatio>1){isRetina=true}else if(window.matchMedia){matchMedia=window.matchMedia(mediaQuery);if(matchMedia&&matchMedia.matches){isRetina=true}}return function(){return isRetina}}();module.exports.canvas=function(){var elem,supportCanvas;elem=document.createElement("canvas");supportCanvas=!!(elem.getContext&&elem.getContext("2d"));return function(){return supportCanvas}}();module.exports.pointerEvents=function(){var el,pointerEvents;el=document.createElement("div");pointerEvents="pointer-events"in el.style;return function(){return pointerEvents}}();module.exports.clickEvent=function(){if(helpers.isSupportedMobileOS()){return"touchend"}else{return"click"}};module.exports.badPlaceholderBehavior=function(){return helpers.isIE()};module.exports.giveIndirectFocus=function(){return!helpers.isiOS()};module.exports.automaticallyGiveFocus=function(){return support.giveIndirectFocus()&&!support.badPlaceholderBehavior()};module.exports.webProtocolHandlers=function(){return helpers.isChrome()||helpers.isFirefox()}}).call(this)}});StripeCheckout.require.define({"lib/uuid":function(exports,require,module){(function(){var S4;S4=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};module.exports.generate=function(){var delim;delim="-";return S4()+S4()+delim+S4()+delim+S4()+delim+S4()+delim+S4()+S4()+S4()}}).call(this)}});StripeCheckout.require.define({"vendor/base64":function(exports,require,module){var utf8Encode=function(string){string=(string+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");var utftext="",start,end;var stringl=0,n;start=end=0;stringl=string.length;for(n=0;n<stringl;n++){var c1=string.charCodeAt(n);var enc=null;if(c1<128){end++}else if(c1>127&&c1<2048){enc=String.fromCharCode(c1>>6|192,c1&63|128)}else{enc=String.fromCharCode(c1>>12|224,c1>>6&63|128,c1&63|128)}if(enc!==null){if(end>start){utftext+=string.substring(start,end)}utftext+=enc;start=end=n+1}}if(end>start){utftext+=string.substring(start,string.length)}return utftext};module.exports.encode=function(data){var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var o1,o2,o3,h1,h2,h3,h4,bits,i=0,ac=0,enc="",tmp_arr=[];if(!data){return data}data=utf8Encode(data);do{o1=data.charCodeAt(i++);o2=data.charCodeAt(i++);o3=data.charCodeAt(i++);bits=o1<<16|o2<<8|o3;h1=bits>>18&63;h2=bits>>12&63;h3=bits>>6&63;h4=bits&63;tmp_arr[ac++]=b64.charAt(h1)+b64.charAt(h2)+b64.charAt(h3)+b64.charAt(h4)}while(i<data.length);enc=tmp_arr.join("");switch(data.length%3){case 1:enc=enc.slice(0,-2)+"==";break;case 2:enc=enc.slice(0,-1)+"=";break}return enc}}});StripeCheckout.require.define({"lib/tracker":function(exports,require,module){(function(){var base64,config,isEventNameExisting,mixpanel,pixel,stateParameters,trace,traceSerialize,track,tracker,uuid,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i}return-1};uuid=require("lib/uuid");pixel=require("lib/pixel");base64=require("vendor/base64");config={enabled:false,tracingEnabled:false,eventNamePrefix:"checkout.",distinctId:uuid.generate(),mixpanelKey:null};stateParameters={};tracker={};tracker.setEnabled=function(enabled){return config.enabled=enabled};tracker.setTracingEnabled=function(enabled){return config.tracingEnabled=enabled};tracker.setDistinctID=function(value){if(value){return config.distinctId=value}};tracker.getDistinctID=function(){return config.distinctId};tracker.setMixpanelKey=function(mixpanelKey){return config.mixpanelKey=mixpanelKey};tracker.track={outerOpen:function(parameters){var requiredKeys;requiredKeys=["key"];return track("outer.open",parameters,requiredKeys,{appendStateParameters:false})},open:function(options){var k,v;for(k in options){v=options[k];stateParameters["option-"+k]=v}return track("open")},close:function(parameters){return track("close",parameters,["withToken"])},rememberMe:function(parameters){return track("checkbox.rememberMe",parameters,["checked"])},authorizeAccount:function(){return track("account.authorize")},login:function(){return track("account.authorize.success")},wrongVerificationCode:function(){return track("account.authorize.fail")},keepMeLoggedIn:function(parameters){return track("checkbox.keepMeLoggedIn",parameters,["checked"])},logout:function(){return track("account.logout")},submit:function(){return track("submit")},invalid:function(parameters){if(parameters["err"]==null&&parameters["fields"]==null){throw new Error("Cannot track invalid because err or fields should be provided")}return track("invalid",parameters)},tokenError:function(msg){return track("token.error",{message:msg,type:"exception"})},moreInfo:function(){return track("moreInfoLink.click")},accountCreateSuccess:function(){return track("account.create.success")},accountCreateFail:function(){return track("account.create.fail")},addressAutocompleteShow:function(){return track("addressAutoComplete.show")},addressAutocompleteResultSelected:function(){return track("addressAutocomplete.result.selected")},back:function(parameters){return track("back",parameters,["from_step","to_step"])},token:function(parameters){return track("token",parameters,["stripe_token"])},phoneVerificationShow:function(){return track("phoneVerification.show")},phoneVerificationCreate:function(parameters){return track("phoneVerification.create",parameters,["use_sms"])},phoneVerificationAuthorize:function(parameters){return track("fraudCodeVerification.authorize",parameters,["valid"])},addressVerificationShow:function(){return track("addressVerification.show")},alert:function(parameters){return track("alert",parameters)}};tracker.trace={trigger:function(eventName,args){var EXCLUDED_EVENTS;EXCLUDED_EVENTS=["didResize","viewAddedToDOM","valueDidChange","checkedDidChange","keyUp","keyDown","keyPress","keyInput","click","blur"];eventName=eventName.split(".");if(eventName[eventName.length-1]==="checkout"){eventName.pop()}eventName=eventName.join(".");if(__indexOf.call(EXCLUDED_EVENTS,eventName)<0){if(this._triggerQueue==null){this._triggerQueue={}}this._triggerQueue[eventName]=traceSerialize(args);return this._triggerTimeout!=null?this._triggerTimeout:this._triggerTimeout=setTimeout(function(_this){return function(){var _ref;_ref=_this._triggerQueue;for(eventName in _ref){args=_ref[eventName];trace("trigger."+eventName,{args:args})}_this._triggerQueue={};return _this._triggerTimeout=null}}(this),0)}},rpcInvoke:function(method){return trace("rpc.invoke."+method)},rpcPostMessage:function(method,args,id){return trace("rpc.postMessage."+method,{id:id,args:traceSerialize(args)})}};tracker.state={setUIType:function(type){return stateParameters["st-ui-type"]=type},setUIIntegration:function(integration){return stateParameters["st-ui-integration"]=integration},setAccountsEnabled:function(bool){return stateParameters["st-accounts-enabled"]=bool},setRememberMeEnabled:function(bool){return stateParameters["st-remember-me-enabled"]=bool},setRememberMeChecked:function(bool){return stateParameters["st-remember-me-checked"]=bool},setAccountCreated:function(bool){return stateParameters["st-account-created"]=bool},setLoggedIn:function(bool){return stateParameters["st-logged-in"]=bool},setVariants:function(variants){var k,v,_results;_results=[];for(k in variants){v=variants[k];_results.push(stateParameters["st-variant-"+k]=v)}return _results},setPhoneVerificationShown:function(bool){return stateParameters["st-phone-verification-shown"]=bool},setAddressVerificationShown:function(bool){return stateParameters["st-address-verification-shown"]=bool},setAlipayShouldDisplay:function(bool){return stateParameters["st-alipay-should-display"]=bool}};tracker.dontTrack=function(fn){var enabled;enabled=config.enabled;config.enabled=false;fn();return config.enabled=enabled};isEventNameExisting=function(eventName){var exists,k,v,_ref;exists=false;_ref=tracker.events;for(k in _ref){v=_ref[k];if(v===eventName){exists=true;break}}return exists};trace=function(eventName,parameters,requiredKeys,options){if(parameters==null){parameters={}}if(requiredKeys==null){requiredKeys=[]}if(options==null){options={}}if(!config.tracingEnabled){return}eventName="trace."+eventName;options.excludeMixpanel=true;return track.apply(this,arguments)};track=function(eventName,parameters,requiredKeys,options){var fullEventName,k,key,missingKeys,v,_i,_len;if(parameters==null){parameters={}}if(requiredKeys==null){requiredKeys=[]}if(options==null){options={}}if(!config.enabled){return}missingKeys=function(){var _i,_len,_results;_results=[];for(_i=0,_len=requiredKeys.length;_i<_len;_i++){key=requiredKeys[_i];if(!(key in parameters)){_results.push(key)}}return _results}();if(missingKeys.length>0){throw new Error("Missing required data ("+missingKeys.join(", ")+") for tracking "+eventName+".")}parameters.distinct_id=config.distinctId;if(options.appendStateParameters==null){options.appendStateParameters=true}if(options.appendStateParameters){for(k in stateParameters){v=stateParameters[k];parameters[k]=v}}parameters.h=screen.height;parameters.w=screen.width;for(v=_i=0,_len=parameters.length;_i<_len;v=++_i){k=parameters[v];if(v instanceof Array){v.sort()}}fullEventName=""+config.eventNamePrefix+eventName;if(!options.excludeMixpanel){mixpanel.track(fullEventName,parameters)}return pixel.track(fullEventName,parameters)};mixpanel={};mixpanel.track=function(eventName,options){var dataStr,properties;if(options==null){options={}}if(!(typeof $!=="undefined"&&$!==null&&config.mixpanelKey!=null)){return}properties=$.extend({token:config.mixpanelKey,userAgent:window.navigator.userAgent},options);delete properties["stripe_token"];dataStr=base64.encode(JSON.stringify({event:eventName,properties:properties}));return(new Image).src="https://api.mixpanel.com/track/?ip=1&img=1&data="+dataStr};traceSerialize=function(value){var k,obj,v;if(value instanceof Array){return JSON.stringify(function(){var _i,_len,_results;_results=[];for(_i=0,_len=value.length;_i<_len;_i++){v=value[_i];_results.push(traceSerialize(v))}return _results}())}else if(value!=null&&value.target!=null&&value.type!=null){return traceSerialize({type:value.type,target_id:value.target.id})}else if(value instanceof Object){if(value.constructor===Object){obj={};for(k in value){v=value[k];obj[k]=traceSerialize(v)}return JSON.stringify(obj)}else{return value.toString()}}else{return value}};module.exports=tracker}).call(this)}});StripeCheckout.require.define({"lib/validation":function(exports,require,module){(function(){module.exports.validateEmail=function(email){return/.+@.+\..+/.test(email)}}).call(this)}});StripeCheckout.require.define({"lib/variants":function(exports,require,module){(function(){var AB,Variants,experiments,pixel,tracker,variantOverride,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};pixel=require("lib/pixel");tracker=require("lib/tracker");AB=require("lib/ab");experiments={tracing:{variants:{enable:1e-4}},rememberMe:{variants:{hide:.005}},autocomplete:{variants:{google:1},only:{country:["US"]}},emailPrediction:{variants:{enable:.01}},phoneVerificationPay:{variants:{appear:.2,auto:.2}},address:{variants:{ziponly:.5},only:{api_key:["pk_live_Z77z5cJvv0rUOE1ayBDe1xHq","pk_test_x779rlMLmyTABNycHmtsu2pV"]}},alipay:{variants:{holdout:.05}},jsunit:{variants:{foo:.1,bar:.3,baz:.2},exclude:{country:["AU"]}}};variantOverride=function(k){try{return localStorage.getItem("ab:"+k)}catch(_error){}};Variants=function(_super){__extends(Variants,_super);function Variants(){return Variants.__super__.constructor.apply(this,arguments)}Variants.prototype.setOptions=function(options){Variants.__super__.setOptions.call(this,options);return tracker.state.setVariants(this.getVariants())};return Variants}(AB);module.exports=new Variants(experiments,pixel.getLocalStorageID,variantOverride)}).call(this)}});StripeCheckout.require.define({"lib/view":function(exports,require,module){(function(){var $,EventDispatcher,View,fastdom,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},__slice=[].slice;EventDispatcher=require("lib/eventDispatcher");$=jQuery;try{fastdom=require("vendor/fastdom")}catch(_error){}View=function(_super){__extends(View,_super);View.prototype.tag="div";function View(options){var classNames,ref;this.options=options!=null?options:{};this.setTopOffset=__bind(this.setTopOffset,this);this.forwardDidResize=__bind(this.forwardDidResize,this);this.patchJQueryMethod=__bind(this.patchJQueryMethod,this);this.patchJQueryMethods=__bind(this.patchJQueryMethods,this);this.viewWasHidden=__bind(this.viewWasHidden,this);this.viewWasShown=__bind(this.viewWasShown,this);this.triggerToSubviews=__bind(this.triggerToSubviews,this);this.viewWasRemovedFromDom=__bind(this.viewWasRemovedFromDom,this);this.listenForDOMElementVisibleChanged=__bind(this.listenForDOMElementVisibleChanged,this);this.topOffset=__bind(this.topOffset,this);this.isDOMElementVisible=__bind(this.isDOMElementVisible,this);this.inDOM=__bind(this.inDOM,this);this.isInDOM=__bind(this.isInDOM,this);this.parent=__bind(this.parent,this);this.detach=__bind(this.detach,this);this.height=__bind(this.height,this);this.redraw=__bind(this.redraw,this);this.isVisible=__bind(this.isVisible,this);this.hide=__bind(this.hide,this);this.show=__bind(this.show,this);this.animatableViews=__bind(this.animatableViews,this);this.removeSubview=__bind(this.removeSubview,this);this.addSubviews=__bind(this.addSubviews,this);this.insertSubviewBefore=__bind(this.insertSubviewBefore,this);this.addSubview=__bind(this.addSubview,this);View.__super__.constructor.apply(this,arguments);classNames=[];ref=this.constructor.prototype;while(ref!==View.prototype){classNames.push(ref.className);ref=ref.constructor.__super__}if(this.options["className"]!=null){classNames.push(this.options["className"])}this.className=classNames.join(" ");this.el=this.el||this.options.el||document.createElement(this.options["tag"]||this.tag);this.$el=$(this.el);this.$el.addClass(this.className);this.$el.data("view",this);this.patchJQueryMethods();this.hidden=false;this.subviews=[];if(this.layout!=null){this.inDOM(function(_this){return function(){return _this.layout({animated:false})}}(this));this.on("DOMElementVisibleChanged",function(_this){return function(visible){if(visible){return _this.layout({animated:false})
}}}(this))}this.listenForDOMElementVisibleChanged()}View.prototype.$=function(sel){return $(sel,this.$el)};View.prototype.focus=function(){return false};View.prototype.addSubview=function(subview){return this.insertSubviewBefore(subview)};View.prototype.insertSubviewBefore=function(subview,beforeSubview){var index;if(beforeSubview==null){beforeSubview=null}this.$el.append(subview.$el);if(this.subviews.indexOf(subview)!==-1){return}index=this.subviews.indexOf(beforeSubview);if(index===-1){index=this.subviews.length}subview.superview=this;this.subviews.splice(index,0,subview);return subview.on("didResize",this.forwardDidResize)};View.prototype.addSubviews=function(subviews){var subview,_i,_len,_results;if(subviews==null){subviews=[]}_results=[];for(_i=0,_len=subviews.length;_i<_len;_i++){subview=subviews[_i];_results.push(this.addSubview(subview))}return _results};View.prototype.removeSubview=function(subview,options){if(options==null){options={}}if(options.detach==null){options.detach=true}subview.superview=null;if(options.detach){subview.$el.detach()}this.subviews=$.grep(this.subviews,function(v){return v!==subview});return subview.off("didResize",this.forwardDidResize)};View.prototype.animatableViews=function(){return[this]};View.prototype.show=function(){this.hidden=false;this.$el.show();return this};View.prototype.hide=function(){this.hidden=true;this.$el.hide();return this};View.prototype.isVisible=function(){return!this.hidden};View.prototype.redraw=function(){this.$el.redraw();return this};View.prototype.height=function(){return this.$el.outerHeight(true)};View.prototype.detach=function(){this.$el.detach();return this};View.prototype.parent=function(){var _base;return typeof(_base=$(this.$el.parent())).data==="function"?_base.data("view"):void 0};View.prototype.isInDOM=function(){var parent,_ref;parent=this.$el.parent();while(parent!=null&&parent.length>0){if(((_ref=parent.prop("tagName"))!=null?_ref.toUpperCase():void 0)==="BODY"){return true}parent=parent.parent()}return false};View.prototype.inDOM=function(fn){if(this.isInDOM()){return fn()}else{return this.on("viewAddedToDOM.checkout",fn)}};View.prototype.isDOMElementVisible=function(){return this.isInDOM()&&this.$el.is(":visible")};View.prototype.topOffset=function(){return this.$el.offset().top};View.prototype.listenForDOMElementVisibleChanged=function(){var cb,currentVisible,goInvisible,goVisible;currentVisible=false;cb=function(_this){return function(){var visible;visible=_this.isDOMElementVisible();if(visible===currentVisible){return false}currentVisible=visible;_this.trigger("DOMElementVisibleChanged",visible);return true}}(this);goVisible=function(){if(!currentVisible){return cb()}};goInvisible=function(){if(currentVisible){return cb()}};cb();this.on("viewShown.checkout",goVisible);this.on("viewAddedToDOM.checkout",goVisible);this.on("viewHidden.checkout",goInvisible);return this.on("viewRemovedFromDOM.checkout",goInvisible)};View.prototype.viewWasAddedToElement=function(el){var view,_base;view=typeof(_base=$(el)).data==="function"?_base.data("view"):void 0;if(view==null){return}if(view.isInDOM()){return view.triggerToSubviews("viewAddedToDOM.checkout")}};View.prototype.viewWasRemovedFromDom=function(el){return this.triggerToSubviews("viewRemovedFromDOM.checkout")};View.prototype.triggerToSubviews=function(){var args,eventName,subview,_i,_len,_ref;eventName=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];if(this.subviews!=null){_ref=this.subviews;for(_i=0,_len=_ref.length;_i<_len;_i++){subview=_ref[_i];subview.triggerToSubviews.apply(subview,arguments)}}return this.trigger.apply(this,arguments)};View.prototype.viewWasShown=function(){return this.triggerToSubviews("viewShown.checkout")};View.prototype.viewWasHidden=function(){return this.triggerToSubviews("viewHidden.checkout")};View.prototype.patchJQueryMethods=function(){this.patchJQueryMethod("append",this.viewWasAddedToElement);this.patchJQueryMethod("prepend",this.viewWasAddedToElement);this.patchJQueryMethod("detach",this.viewWasRemovedFromDom);this.patchJQueryMethod("remove",this.viewWasRemovedFromDom);this.patchJQueryMethod("show",this.viewWasShown);return this.patchJQueryMethod("hide",this.viewWasHidden)};View.prototype.patchJQueryMethod=function(method,fn){var oldMethod;oldMethod=this.$el[method];return this.$el[method]=function(){var r;r=oldMethod.apply(this,arguments);fn.apply(this,arguments);return r}};View.prototype.forwardDidResize=function(){if(this.subviewDidResize==null){return this.trigger("didResize")}else{return this.subviewDidResize()}};View.prototype.setTopOffset=function(y,options){var fn;if(options==null){options={}}fn=function(_this){return function(){return _this.$el.gfx({translateY:y},$.extend({},options,{transformFallbackKeys:{translateY:"top"}}))}}(this);if(fastdom!=null){return fastdom.write(fn)}else{return fn()}};return View}(EventDispatcher);module.exports=View}).call(this)}});(function(){var origin;if(!window.location.origin){origin=window.location.protocol+"//"+window.location.hostname;if(window.location.port){origin+=":"+window.location.port}window.location.origin=origin}}).call(this);StripeCheckout.require.define({"lib/zipCode":function(exports,require,module){(function(){var countries,findClosestCodeData,preloadedZipData,zipCodeMetadata,__hasProp={}.hasOwnProperty;countries=require("lib/countries");zipCodeMetadata=require("lib/zipCodeMetadata");preloadedZipData={};findClosestCodeData=function(data,searchCode){var currentCode,currentIndex,maxIndex,minIndex;minIndex=0;maxIndex=data.length-1;while(minIndex<=maxIndex){currentIndex=(minIndex+maxIndex)/2|0;currentCode=data[currentIndex][0].split("	")[0];if(currentCode<searchCode){minIndex=currentIndex+1}else if(currentCode>searchCode){maxIndex=currentIndex-1}else{break}}if(currentCode>searchCode){currentIndex=Math.max(currentIndex-1,0)}return{code:data[currentIndex][0],city:data[currentIndex][1],state:data[currentIndex][2]}};module.exports.preloadCountry=function(countryCode){if(preloadedZipData[countryCode]){return}preloadedZipData[countryCode]={};return $.getJSON("/v3/data/zipCodes/"+countryCode+".json",{crossDomain:true}).done(function(data){return preloadedZipData[countryCode]=data.d}).fail(function(){if(!module.exports.isCountryPreloaded(countryCode)){return preloadedZipData[countryCode]=null}})};module.exports.isCountryPreloaded=function(countryCode){var k,v,_ref;_ref=preloadedZipData[countryCode]||{};for(k in _ref){if(!__hasProp.call(_ref,k))continue;v=_ref[k];return true}return false};module.exports.isNumeric=function(countryCode){var _ref;return(_ref=zipCodeMetadata[countryCode])!=null?_ref.isNumeric:void 0};module.exports.maximumLength=function(countryCode){var _ref,_ref1;return(_ref=zipCodeMetadata[countryCode])!=null?(_ref1=_ref.lengthRange)!=null?_ref1[1]:void 0:void 0};module.exports.getData=function(zip,countryCode){var data,lower,match,normalized,upper,_ref;if(!module.exports.isCountryPreloaded(countryCode)){return null}normalized=zip.toString().toUpperCase().replace(/\W/g,"");match=findClosestCodeData(preloadedZipData[countryCode],normalized);data={zip:zip,city:match.city,state:match.state,country:countries[countryCode]};_ref=match.code.split("	"),lower=_ref[0],upper=_ref[1];if(normalized.indexOf(lower)===0||upper&&normalized.indexOf(upper)===0){return data}if(!upper){return null}if(lower<=normalized&&upper>=normalized){return data}}}).call(this)}});StripeCheckout.require.define({"lib/zipCodeMetadata":function(exports,require,module){(function(){module.exports={AD:{lengthRange:[5,5],isNumeric:false},AR:{lengthRange:[4,8],isNumeric:false},AS:{lengthRange:[5,5],isNumeric:true},AT:{lengthRange:[4,4],isNumeric:true},AU:{lengthRange:[4,4],isNumeric:true},AX:{lengthRange:[5,5],isNumeric:true},BD:{lengthRange:[4,4],isNumeric:true},BE:{lengthRange:[4,4],isNumeric:true},BG:{lengthRange:[4,4],isNumeric:true},BR:{lengthRange:[9,9],isNumeric:true},CA:{lengthRange:[6,6],isNumeric:false},CH:{lengthRange:[4,4],isNumeric:true},CZ:{lengthRange:[6,6],isNumeric:true},DE:{lengthRange:[5,5],isNumeric:true},DK:{lengthRange:[3,4],isNumeric:true},DO:{lengthRange:[5,5],isNumeric:true},DZ:{lengthRange:[5,5],isNumeric:true},ES:{lengthRange:[5,5],isNumeric:true},FI:{lengthRange:[5,5],isNumeric:true},FO:{lengthRange:[3,3],isNumeric:true},FR:{lengthRange:[5,5],isNumeric:true},GB:{lengthRange:[6,8],isNumeric:false},GF:{lengthRange:[5,5],isNumeric:true},GG:{lengthRange:[3,4],isNumeric:false},GL:{lengthRange:[4,4],isNumeric:true},GP:{lengthRange:[5,5],isNumeric:true},GT:{lengthRange:[5,5],isNumeric:true},GU:{lengthRange:[5,5],isNumeric:true},HR:{lengthRange:[5,5],isNumeric:true},HU:{lengthRange:[4,4],isNumeric:true},IM:{lengthRange:[3,3],isNumeric:false},IN:{lengthRange:[6,6],isNumeric:true},IS:{lengthRange:[3,3],isNumeric:true},IT:{lengthRange:[5,5],isNumeric:true},JE:{lengthRange:[3,3],isNumeric:false},JP:{lengthRange:[8,8],isNumeric:true},LI:{lengthRange:[4,4],isNumeric:true},LK:{lengthRange:[3,5],isNumeric:true},LT:{lengthRange:[5,5],isNumeric:true},LU:{lengthRange:[4,4],isNumeric:true},MC:{lengthRange:[5,5],isNumeric:true},MD:{lengthRange:[7,7],isNumeric:false},MH:{lengthRange:[5,5],isNumeric:true},MK:{lengthRange:[4,4],isNumeric:true},MP:{lengthRange:[5,5],isNumeric:true},MQ:{lengthRange:[5,5],isNumeric:true},MX:{lengthRange:[5,5],isNumeric:true},MY:{lengthRange:[5,5],isNumeric:true},NL:{lengthRange:[6,6],isNumeric:false},NO:{lengthRange:[4,4],isNumeric:true},NZ:{lengthRange:[4,4],isNumeric:true},PH:{lengthRange:[4,4],isNumeric:false},PK:{lengthRange:[5,5],isNumeric:true},PL:{lengthRange:[6,6],isNumeric:true},PM:{lengthRange:[5,5],isNumeric:true},PR:{lengthRange:[5,5],isNumeric:true},PT:{lengthRange:[8,8],isNumeric:true},RE:{lengthRange:[5,5],isNumeric:true},RO:{lengthRange:[6,6],isNumeric:true},RU:{lengthRange:[6,6],isNumeric:true},SE:{lengthRange:[6,6],isNumeric:true},SI:{lengthRange:[4,4],isNumeric:true},SJ:{lengthRange:[4,4],isNumeric:true},SK:{lengthRange:[5,6],isNumeric:true},SM:{lengthRange:[5,5],isNumeric:true},TH:{lengthRange:[5,5],isNumeric:true},TR:{lengthRange:[5,5],isNumeric:true},US:{lengthRange:[5,5],isNumeric:true},VA:{lengthRange:[5,5],isNumeric:true},VI:{lengthRange:[5,5],isNumeric:true},YT:{lengthRange:[5,5],isNumeric:true},ZA:{lengthRange:[4,4],isNumeric:true},GY:{lengthRange:[5,5],isNumeric:true}}}).call(this)}});StripeCheckout.require.define({"inner/controllers/accountLookupStepController":function(exports,require,module){(function(){var Account,AccountLookupStepController,CodeVerificationView,StepController,support,svgPaths,tracker,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};StepController=require("inner/controllers/stepController");CodeVerificationView=require("inner/views/form/codeVerificationView");Account=require("lib/account");support=require("lib/support");tracker=require("lib/tracker");svgPaths=require("inner/lib/svgPaths");AccountLookupStepController=function(_super){__extends(AccountLookupStepController,_super);function AccountLookupStepController(){this.willDisappear=__bind(this.willDisappear,this);this.willAppear=__bind(this.willAppear,this);this.onCancel=__bind(this.onCancel,this);this.onCodeDidChange=__bind(this.onCodeDidChange,this);this.focus=__bind(this.focus,this);this.bindEvents=__bind(this.bindEvents,this);AccountLookupStepController.__super__.constructor.apply(this,arguments);this.view=new CodeVerificationView({color:this.options.color,svgPaths:svgPaths});this.view.setPhoneNumber(this.options.account.phone);this.bindEvents()}AccountLookupStepController.prototype.bindEvents=function(){this.view.on("valueDidChange.checkout",this.onCodeDidChange);return this.view.on("cancel.checkout",this.onCancel)};AccountLookupStepController.prototype.focus=function(){if(support.automaticallyGiveFocus()){return this.view.focus()}};AccountLookupStepController.prototype.onCodeDidChange=function(code){var promise;promise=Account.authorize(code);promise.done(function(_this){return function(){_this.view.setCodeVerifiedSuccess(true);return tracker.track.login()}}(this));return promise.fail(function(_this){return function(){_this.view.setCodeVerifiedSuccess(false);return tracker.track.wrongVerificationCode()}}(this))};AccountLookupStepController.prototype.onCancel=function(){return this.trigger("pop")};AccountLookupStepController.prototype.willAppear=function(){this.authPromise=Account.createAuthorization(this.options.account.email,this.options.name).done(this.view.onDelivered).fail(this.view.onDeliveryFailed);return this.view.willEnter()};AccountLookupStepController.prototype.willDisappear=function(){var _ref;return(_ref=this.authPromise)!=null?_ref.cancel():void 0};return AccountLookupStepController}(StepController);module.exports=AccountLookupStepController}).call(this)}});StripeCheckout.require.define({"inner/controllers/addressStepController":function(exports,require,module){(function(){var Account,AddressStepController,AddressesView,StepController,accountLookupHelper,cardPaymentHelper,support,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};StepController=require("inner/controllers/stepController");AddressesView=require("inner/views/addressesView");Account=require("lib/account");accountLookupHelper=require("lib/accountLookupHelper");support=require("lib/support");cardPaymentHelper=require("inner/lib/payment/cardPaymentHelper");AddressStepController=function(_super){__extends(AddressStepController,_super);function AddressStepController(){this.onSharedAccountChanged=__bind(this.onSharedAccountChanged,this);this.validate=__bind(this.validate,this);this.focus=__bind(this.focus,this);this.data=__bind(this.data,this);this.handleError=__bind(this.handleError,this);this.submit=__bind(this.submit,this);this.buttons=__bind(this.buttons,this);this.bindEvents=__bind(this.bindEvents,this);AddressStepController.__super__.constructor.apply(this,arguments);this.verifying=this.options.verifying;this.view=new AddressesView(this.options);this.view.setUsesAccount(Account.sharedAccount(),{animated:false});accountLookupHelper.observe({input:this.view.emailInput,email:this.options.email,name:this.options.name});this.bindEvents()}AddressStepController.prototype.bindEvents=function(){return Account.on("sharedAccountChanged",this.onSharedAccountChanged)};AddressStepController.prototype.buttons=function(){return this.view.buttons()};AddressStepController.prototype.submit=function(options){var PaymentStepController,promise;if(options==null){options={}}options.invalid=(options.invalid||[]).concat(this.validate());options.data=this.data(options.data);if(options.invalid.length>0){return this.trigger("invalid",options.invalid)}else{if(this.verifying){promise=cardPaymentHelper.submit(options.data,this.options);promise.done(function(_this){return function(token){return _this.trigger("token",token,_this)}}(this));return promise.fail(function(_this){return function(err){return _this.trigger("error",err)}}(this))}else{PaymentStepController=require("inner/controllers/paymentStepController");return this.trigger("push",new PaymentStepController($.extend({},this.options,{shouldHideEmailInput:true,data:options.data})))}}};AddressStepController.prototype.handleError=function(err){return this.view.handleError(err)};AddressStepController.prototype.data=function(){var data;data=AddressStepController.__super__.data.apply(this,arguments);return $.extend({},data,this.view.val())};AddressStepController.prototype.focus=function(){if(support.automaticallyGiveFocus()){return this.view.focus()}};AddressStepController.prototype.validate=function(){return this.view.validate()};AddressStepController.prototype.onSharedAccountChanged=function(account){return this.view.setUsesAccount(account)};return AddressStepController}(StepController);module.exports=AddressStepController}).call(this)}});StripeCheckout.require.define({"inner/controllers/alipayAccountStepController":function(exports,require,module){(function(){var AlipayAccountStepController,AlipayPaymentStepController,AlipayUserIdInput,LabelView,LayoutView,StepController,View,alipayPaymentHelper,i18n,popoverManager,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};StepController=require("inner/controllers/stepController");AlipayPaymentStepController=require("inner/controllers/alipayPaymentStepController");View=require("lib/view");LabelView=require("inner/views/labelView");LayoutView=require("inner/views/layoutView");AlipayUserIdInput=require("inner/views/inputs/alipayUserIdInput");alipayPaymentHelper=require("inner/lib/payment/alipayPaymentHelper");i18n=require("lib/i18n");popoverManager=require("inner/lib/popoverManager");AlipayAccountStepController=function(_super){__extends(AlipayAccountStepController,_super);function AlipayAccountStepController(){this.data=__bind(this.data,this);this.validate=__bind(this.validate,this);this.handleError=__bind(this.handleError,this);this.submit=__bind(this.submit,this);this.focus=__bind(this.focus,this);this.initViews=__bind(this.initViews,this);AlipayAccountStepController.__super__.constructor.apply(this,arguments);this.view=new LayoutView({className:"alipayAccountLayoutView"});this.initViews();this.bindEvents()}AlipayAccountStepController.prototype.initViews=function(){this.labelView=new LabelView(this.options);this.labelView.setText(i18n.loc("alipay.userId.label")());this.userIdInput=new AlipayUserIdInput(this.options);this.view.addSubview(this.labelView);return this.view.addSubview(this.userIdInput)};AlipayAccountStepController.prototype.bindEvents=function(){};AlipayAccountStepController.prototype.buttons=function(){return{submit:{label:i18n.loc("alipay.continue")(),className:"iconContinue"}}};AlipayAccountStepController.prototype.focus=function(){return this.userIdInput.focus()};AlipayAccountStepController.prototype.submit=function(options){var promise;if(options==null){options={}}popoverManager.closePopover(this.popover);this.popover=null;options.invalid=(options.invalid||[]).concat(this.validate());options.data=this.data(options.data);if(options.invalid.length>0){return this.trigger("invalid",options.invalid)}else{promise=alipayPaymentHelper.sendSMS(options.data.alipay.userId,this.options);promise.done(function(_this){return function(response){options.data=$.extend({},options.data,{alipay:{sms:response}});return _this.trigger("push",new AlipayPaymentStepController($.extend({},_this.options,{data:options.data})))}}(this));return promise.fail(function(_this){return function(err){return _this.trigger("error",err)}}(this))}};AlipayAccountStepController.prototype.handleError=function(err){var msg;popoverManager.closePopover(this.popover);this.popover=null;if(err.type==="alipay_error"){switch(err.code){case"unknown_user_id":msg=i18n.loc("alipay.error.unknownUserId")();this.userIdInput.setInvalid(true);this.userIdInput.focus();break;case"unsupported_user_id":msg=i18n.loc("alipay.error.unsupportedUserId")();this.userIdInput.setInvalid(true);this.userIdInput.focus()}}if(msg!=null){this.popover=popoverManager.openPopover(this.view.$el,msg,{className:err.code});return true}return false};AlipayAccountStepController.prototype.validate=function(){return this.userIdInput.validate()};AlipayAccountStepController.prototype.data=function(data){data=AlipayAccountStepController.__super__.data.apply(this,arguments);data=$.extend({},data,{alipay:{userId:this.userIdInput.val()}});return data};return AlipayAccountStepController}(StepController);module.exports=AlipayAccountStepController}).call(this)}});StripeCheckout.require.define({"inner/controllers/alipayNavigationController":function(exports,require,module){(function(){var AlipayAccountStepController,AlipayNavigationController,AlipayPaymentStepController,LayoutView,NavigationController,alipayPaymentHelper,i18n,navigationAnimationHelper,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};NavigationController=require("inner/controllers/navigationController");AlipayAccountStepController=require("inner/controllers/alipayAccountStepController");AlipayPaymentStepController=require("inner/controllers/alipayPaymentStepController");LayoutView=require("inner/views/layoutView");alipayPaymentHelper=require("inner/lib/payment/alipayPaymentHelper");navigationAnimationHelper=require("inner/lib/animation/navigationAnimationHelper");i18n=require("lib/i18n");AlipayNavigationController=function(_super){__extends(AlipayNavigationController,_super);AlipayNavigationController.prototype.WHITELIST=[AlipayAccountStepController,AlipayPaymentStepController];function AlipayNavigationController(){this.onCurrentChanged=__bind(this.onCurrentChanged,this);this.load=__bind(this.load,this);this.bindEvents=__bind(this.bindEvents,this);AlipayNavigationController.__super__.constructor.apply(this,arguments);this.view=new LayoutView({className:"alipayNavigationView"});this.initViews();this.bindEvents()}AlipayNavigationController.prototype.initViews=function(){};AlipayNavigationController.prototype.bindEvents=function(){return this.on("currentChanged",this.onCurrentChanged)};AlipayNavigationController.prototype.load=function(options){var defer,promise;if(options==null){options={}}defer=$.Deferred();if(this.current instanceof AlipayPaymentStepController&&(this.current.options.data.alipay.email===options.data.email||this.stackSize()>1)){defer.resolve()}else{promise=alipayPaymentHelper.sendSMS(options.data.email,this.options);promise.done(function(_this){return function(response){var data;data=$.extend({},_this.options.data,{alipay:{sms:response,email:options.data.email}});_this.push(new AlipayPaymentStepController($.extend({},_this.options,{data:data})),{clearStack:true});return defer.resolve()}}(this));promise.fail(function(_this){return function(err,status){if(status>=400&&status<500){if(!(_this.current instanceof AlipayAccountStepController)){_this.push(new AlipayAccountStepController(_this.options),{clearStack:true})}return defer.resolve()}else{return defer.reject(i18n.loc("alipay.error.connection")())}}}(this))}return defer.promise()};AlipayNavigationController.prototype.loadOptions=function(){return{validate:true}};AlipayNavigationController.prototype.onCurrentChanged=function(options){var oldView;if(options==null){options={}}if(options.old!=null){oldView=options.old.view;this.view.removeSubview(oldView,{detach:false})}this.current.view.$el.transform({opacity:0});this.view.addSubview(this.current.view);if(options.old!=null){return navigationAnimationHelper.animate(options.old.view,this.current.view,{animated:true,transition:"shortSlide",duration:300,easing:"ease-in-out",direction:options.type,complete:function(_this){return function(){options.old.view.parent().detach();return _this.current.focus()}}(this)})}else{return navigationAnimationHelper.animate(null,this.current.view,{animated:false,transition:"shortSlide"})}};return AlipayNavigationController}(NavigationController);module.exports=AlipayNavigationController}).call(this)}});StripeCheckout.require.define({"inner/controllers/alipayPaymentStepController":function(exports,require,module){(function(){var AlipayIdCardInput,AlipayPaymentStepController,CarouselView,CodeInput,LabelView,LayoutView,StepController,alipayPaymentHelper,formatting,helpers,i18n,popoverManager,tracker,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};StepController=require("inner/controllers/stepController");LayoutView=require("inner/views/layoutView");CarouselView=require("inner/views/carouselView");LabelView=require("inner/views/labelView");CodeInput=require("inner/views/form/codeInput");AlipayIdCardInput=require("inner/views/inputs/alipayIdCardInput");i18n=require("lib/i18n");helpers=require("lib/helpers");formatting=require("lib/formatting");alipayPaymentHelper=require("inner/lib/payment/alipayPaymentHelper");popoverManager=require("inner/lib/popoverManager");tracker=require("lib/tracker");AlipayPaymentStepController=function(_super){__extends(AlipayPaymentStepController,_super);function AlipayPaymentStepController(){this.willAppear=__bind(this.willAppear,this);this.onCodeDidChange=__bind(this.onCodeDidChange,this);this.data=__bind(this.data,this);this.validate=__bind(this.validate,this);this.setPhone=__bind(this.setPhone,this);this.handleError=__bind(this.handleError,this);this.submit=__bind(this.submit,this);this.focus=__bind(this.focus,this);this.buttons=__bind(this.buttons,this);this.initViews=__bind(this.initViews,this);AlipayPaymentStepController.__super__.constructor.apply(this,arguments);this.view=new LayoutView({className:"alipayPaymentLayoutView"});this.initViews();this.bindEvents();this.setPhone(this.options.data.alipay.sms.redacted_mobile_number)}AlipayPaymentStepController.prototype.initViews=function(){var descriptionView,panelLabel,sendingView,sentView;this.carouselView=new CarouselView;sendingView=new LabelView;sendingView.setText(i18n.loc("alipay.carousel.sending")());sentView=new LabelView;sentView.setText(i18n.loc("alipay.carousel.sent")());descriptionView=new LabelView({className:"alipayCodeSent"});this.carouselViews=[sendingView,sentView,descriptionView];this.codeInput=new CodeInput({appType:this.options.appType});this.idCardInput=new AlipayIdCardInput({color:this.options.color,appType:this.options.appType});if(this.options.alipayReusable){panelLabel=this.options.panelLabel||i18n.loc("button.pay")();panelLabel=panelLabel.replace("{{amount}}","").replace("{amount}","");this.recurringLabelView=new LabelView({className:"recurringLabelView"});this.recurringLabelView.$el.addClass("recurringLabelView");this.recurringLabelView.setText(i18n.loc("alipay.recurringAgreement")({panelLabel:"<strong>"+panelLabel+"</strong>",link:'<a href="/-/alipay-terms" target="_blank" class="arrow">'+i18n.loc("alipay.recurringAgreement.link")()+"</a>"}))}this.view.addSubview(this.carouselView);this.view.addSubview(this.codeInput);if(this.idCardInput!=null){this.view.addSubview(this.idCardInput)}if(this.recurringLabelView!=null){return this.view.addSubview(this.recurringLabelView)}};AlipayPaymentStepController.prototype.bindEvents=function(){return this.codeInput.on("valueDidChange.checkout",this.onCodeDidChange)};AlipayPaymentStepController.prototype.buttons=function(){return{submit:{label:formatting.formatLabelSafe(this.options.panelLabel||i18n.loc("button.pay")(),this.options.amount,this.options.currency),className:"iconTick"}}};AlipayPaymentStepController.prototype.focus=function(){return this.codeInput.focus()};AlipayPaymentStepController.prototype.submit=function(options){var promise;if(options==null){options={}}tracker.track.submit();popoverManager.closePopover(this.popover);this.popover=null;options.invalid=(options.invalid||[]).concat(this.validate());options.data=this.data(options.data);if(options.invalid.length>0){return this.trigger("invalid",options.invalid)}else{this.codeInput.setEditable(false);promise=alipayPaymentHelper.submit(options.data);promise.always(function(_this){return function(){return _this.codeInput.setEditable(true)}}(this));promise.done(function(_this){return function(token){return _this.trigger("token",token,_this)}}(this));return promise.fail(function(_this){return function(err){return _this.trigger("error",err)}}(this))}};AlipayPaymentStepController.prototype.handleError=function(err){var field,msg;popoverManager.closePopover(this.popover);this.popover=null;if(err.type==="alipay_error"){switch(err.code){case"alipay_decline":msg=i18n.loc("alipay.error.declined")();break;case"incorrect_sms_code":msg=i18n.loc("alipay.error.incorrectSMSCode")();field=this.codeInput;break;case"expired_sms_code":msg=i18n.loc("alipay.error.expiredSMSCode")();field=this.codeInput;break;case"incorrect_last5":msg=i18n.loc("alipay.error.incorrectLast5")();field=this.idCardInput}}if(field!=null){field.clear();field.focus();field.setInvalid(true)}if(msg!=null){this.popover=popoverManager.openPopover(this.view.$el,msg,{className:err.code});return true}return false};AlipayPaymentStepController.prototype.setPhone=function(phone){return this.carouselViews[2].setText(i18n.loc("alipay.carousel.enterCode")({prefix:"<strong>"+i18n.loc("alipay.carousel.enterCode.prefix")()+"</strong>",phone:'<span class="phone">'+this.formatPhone(phone)+"</span>"}))};AlipayPaymentStepController.prototype.formatPhone=function(phone){if(phone.length>0&&phone.substring(0,1)!=="+"){phone="+86"+phone}phone=$.formatMobilePhoneNumber(phone);phone=phone.replace(/\*/g,"•");phone=phone.replace(/^\+86 /,"");return phone};AlipayPaymentStepController.prototype.validate=function(){var fields;fields=[];fields=fields.concat(this.codeInput.validate());if(this.idCardInput!=null){fields=fields.concat(this.idCardInput.validate())}return fields};AlipayPaymentStepController.prototype.data=function(){var data,id_last5,_ref,_ref1;data=AlipayPaymentStepController.__super__.data.apply(this,arguments);id_last5=(_ref=(_ref1=this.idCardInput)!=null?_ref1.val():void 0)!=null?_ref:"12345";data.alipay=$.extend({},data.alipay,{code:this.codeInput.val(),id_last5:id_last5});return data};AlipayPaymentStepController.prototype.onCodeDidChange=function(){var _ref;return(_ref=this.idCardInput)!=null?_ref.focus():void 0};AlipayPaymentStepController.prototype.willAppear=function(){return this.carouselView.animate(this.carouselViews)};return AlipayPaymentStepController}(StepController);module.exports=AlipayPaymentStepController}).call(this)}});StripeCheckout.require.define({"inner/controllers/app":function(exports,require,module){(function(){var API,Account,App,AppView,CheckoutController,Color,Controller,DEFAULT_COLOR,PreloaderController,RPC,alipayPaymentHelper,appType,formatting,geolocation,helpers,i18n,moreInfo,optionParser,support,tracker,variants,_,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Controller=require("lib/controller");CheckoutController=require("inner/controllers/checkoutController");PreloaderController=require("inner/controllers/preloaderController");AppView=require("inner/views/appView");Account=require("lib/account");Color=require("lib/color");i18n=require("lib/i18n");appType=require("lib/appType");helpers=require("lib/helpers");support=require("lib/support");_=require("vendor/lodash");tracker=require("lib/tracker");variants=require("lib/variants");API=require("lib/api");RPC=require("lib/rpc");optionParser=require("lib/optionParser");moreInfo=require("lib/moreInfo");
geolocation=require("lib/geolocation");formatting=require("lib/formatting");alipayPaymentHelper=require("inner/lib/payment/alipayPaymentHelper");DEFAULT_COLOR=new Color({r:43,g:43,b:43});App=function(_super){__extends(App,_super);function App(initOptions){if(initOptions==null){initOptions={}}this.onClosing=__bind(this.onClosing,this);this.onRPCClose=__bind(this.onRPCClose,this);this.onTokenCallback=__bind(this.onTokenCallback,this);this.onToken=__bind(this.onToken,this);this.close=__bind(this.close,this);this.bootstrap=__bind(this.bootstrap,this);this.initTracking=__bind(this.initTracking,this);this.openNow=__bind(this.openNow,this);this.open=__bind(this.open,this);this.render=__bind(this.render,this);this.preload=__bind(this.preload,this);this.initColor=__bind(this.initColor,this);App.__super__.constructor.call(this,{});this.livemode=true;this.token=null;this.bootstrapped=false;this.preloader=new PreloaderController;currency.addTier2Support();this.onLoad=initOptions.onLoad;this.onOpen=initOptions.onOpen;this.onError=initOptions.onError;this.el=initOptions.el;this.mixpanelKey=initOptions.mixpanelKey;this.bootstrapDefer=$.Deferred();this.bootstrapPromise=this.bootstrapDefer.promise();this.locale="en";this.timeLoaded=Math.floor((new Date).getTime()/1e3);this.rpc=new RPC(window.opener||window.parent||window,{host:window.location.origin});this.rpc.methods.preload=this.preload;this.rpc.methods.render=this.render;this.rpc.methods.open=this.open;this.rpc.methods.close=this.onRPCClose;this.rpc.methods.tokenCallback=this.onTokenCallback;this.rpc.methods.rpcError=this.onRPCError;this.rpc.startSession();this.timeoutRender=setTimeout(function(_this){return function(){if(!helpers.isInsideFrame()){return typeof _this.onError==="function"?_this.onError():void 0}}}(this),3e3)}App.prototype.initColor=function(options,useDefault){var _ref;if(useDefault==null){useDefault=false}if(this.primaryColorPromise){return}if(options.color){this.primaryColorPromise=$.Deferred().resolve(new Color(options.color)).promise()}else if(options.image){this.preloader.preloadImage(options.image);this.primaryColorPromise=Color.fromImageURI(options.image)}else if(useDefault){this.primaryColorPromise=$.Deferred().resolve(DEFAULT_COLOR).promise()}return(_ref=this.primaryColorPromise)!=null?_ref.done(function(_this){return function(color){return _this.color=color}}(this)).fail(function(_this){return function(){return _this.color=DEFAULT_COLOR}}(this)):void 0};App.prototype.preload=function(options){options=optionParser.parse(options);this.initColor(options);this.locale=options.locale;if(options.key){variants.setOptions({api_key:options.key});API.setMerchantStripeKey(options.key);this.bootstrap()}return false};App.prototype.render=function(deprecated_type,deprecated_integration,rawOptions){this.rawOptions=rawOptions!=null?rawOptions:{};clearTimeout(this.timeoutRender);this.options=optionParser.parse(this.rawOptions);if(this.options.locale){this.locale=this.options.locale}moreInfo.setCookies(this.options.name,this.options.image);this.initColor(this.options,true);if(this.options.key){variants.setOptions({api_key:this.options.key});API.setMerchantStripeKey(this.options.key)}if(variants.isActiveVariant("address","ziponly")&&this.options.billingAddress&&!this.options.shippingAddress){this.options.billingAddress=false;this.options.zipCode=true}return true};App.prototype.open=function(){if(this.onOpen){this.onOpen()}this.bootstrap();this.bootstrapPromise.always(function(_this){return function(){_this.initTracking();tracker.track.open(_this.rawOptions);setTimeout(_this.openNow,2500);return _this.primaryColorPromise.always(_this.openNow)}}(this));this.bootstrapPromise.fail(function(_this){return function(reason){var msg;msg=i18n.loc("error.unableToOpen")();if(reason){msg+=" "+reason}return _this.rpc.invoke("closed",{type:"error.close",message:msg})}}(this));return true};App.prototype.openNow=function(){var account,options,usesRememberMe;if(this.opened){return}this.opened=true;if(this.color==null){this.color=DEFAULT_COLOR}this.options.color=this.color.css();if(this.onLoad){this.onLoad(this.options)}if(this.options.name){document.title=this.options.name}account=Account.sharedAccount();if(account&&this.options.email&&this.options.email!==account.email){Account.clearSharedAccount()}if(variants.isActiveVariant("rememberMe","hide")){support.disableAccounts()}usesRememberMe=!(this.options["allowRememberMe"]!=null&&!this.options["allowRememberMe"]);if(this.options.alipay==="auto"){this.options.alipay=alipayPaymentHelper.shouldDisplayAlipay()}options=_.pick(this.options,["amount","name","description","image","address","billingAddress","shippingAddress","panelLabel","url","currency","email","zipCode","alipay","alipayReusable","bitcoin","supportsTokenCallback"]);options.rememberMeText=i18n.loc("rememberMe")();options.color=this.color;options.appType=appType;options.referrer=this.options.url;options.rememberMe=usesRememberMe;options.livemode=this.livemode;options.autocomplete=variants.isActiveVariant("autocomplete","google");options.timeOpened=Math.floor((new Date).getTime()/1e3);options.timeLoaded=this.timeLoaded;this.checkoutController=new CheckoutController(options);this.checkoutController.on("token",this.onToken);this.checkoutController.on("closing",this.onClosing);this.checkoutController.on("closed",this.close);this.view.addSubview(this.checkoutController.view);return this.checkoutController.open()};App.prototype.initTracking=function(){tracker.setMixpanelKey(this.mixpanelKey);tracker.setEnabled(!this.options.notrack);tracker.setTracingEnabled(this.options.trace||variants.isActiveVariant("tracing","enable"));tracker.state.setVariants(variants.getVariants());tracker.state.setAccountsEnabled(support.accounts());tracker.state.setRememberMeEnabled(this.options.allowRememberMe);tracker.state.setRememberMeChecked(false);tracker.state.setAccountCreated(false);tracker.state.setLoggedIn(Account.sharedAccount()!=null);tracker.state.setUIType(appType.toString());if(appType.isiOSNative()){return tracker.state.setUIIntegration("native")}else if(helpers.isInsideFrame()){return tracker.state.setUIIntegration("iframe")}else{return tracker.state.setUIIntegration("tab")}};App.prototype.bootstrap=function(){var loadLanguageWithDeferredHandle,promise,types;if(this.bootstrapped&&API.hasValidCSRFToken()){return}this.bootstrapped=true;this.view=new AppView({el:this.el});types=[];if(helpers.isSupportedMobileOS()){if(helpers.isiOSNative()){types.push("iOSNative")}if(!helpers.isiPad()&&!helpers.isInsideFrame()){types.push("mobile")}else{types.push("tablet");if(helpers.isSmallScreen()){types.push("smallScreen")}}}else{types.push("desktop")}appType.setTypes(types);this.view.setAppType(appType);if(this.locale==null){this.locale="en"}promise=API.request({url:"/bootstrap",data:{locale:this.locale}});loadLanguageWithDeferredHandle=function(_this){return function(){return i18n.loadLanguageIfNotLoaded(_this.locale,function(err){if(err){return _this.bootstrapDefer.reject(err)}else{return _this.bootstrapDefer.resolve()}})}}(this);promise.done(function(_this){return function(json){var locale;if(support.accounts()){if(json.account){Account.setSharedAccount(json.account)}}if(json.livemode!=null){_this.livemode=!!json.livemode}if(json.ipLocation){geolocation.setLocation(json.ipLocation)}variants.setOptions({country:geolocation.countryCode});if(json.accountsDisabled||geolocation.countryCode==="AU"){support.disableAccounts()}if(json.numberFormatLocale){formatting.setFormatLocale({locale:json.numberFormatLocale.locale,format:json.numberFormatLocale.value});if(_this.locale==="auto"){_this.locale=json.numberFormatLocale.locale}}if(json.language!=null){i18n.setLanguage(json.language,_this.locale);locale=(_this.locale||"").split("-")[0];$("body").addClass(locale)}if(json.apiEndpoint&&json.apiEndpoint!=="https://api.stripe.com/v1"){Stripe.endpoint=json.apiEndpoint}else{Stripe.endpoint="https://"+helpers.stripeUrlPrefix()+"api.stripe.com/v1"}return loadLanguageWithDeferredHandle()}}(this));return promise.fail(function(_this){return function(e){var _ref;if(e!=null?(_ref=e.message)!=null?_ref.match(/Invalid `key`/):void 0:void 0){return _this.bootstrapDefer.reject(i18n.loc("error.invalidAPIKey")())}else{support.disableAccounts();return loadLanguageWithDeferredHandle()}}}(this))};App.prototype.close=function(){var closed,timeout;timeout=null;closed=function(_this){return function(){clearTimeout(timeout);if(!helpers.isInsideFrame()){window.close()}return _this.checkoutController.closed()}}(this);timeout=setTimeout(closed);return this.rpc.invoke("closed",closed)};App.prototype.onToken=function(token,controller){this.token=token;tracker.track.token({stripe_token:this.token.token.id});this.rpc.invoke("setToken",this.token);this.tokenController=controller;if(!this.options.supportsTokenCallback){return this.tokenController.trigger("success")}};App.prototype.onTokenCallback=function(err){if(err){return this.tokenController.trigger("error",{message:err})}else{return this.tokenController.trigger("success")}};App.prototype.onRPCClose=function(){var _ref;return(_ref=this.checkoutController)!=null?_ref.close():void 0};App.prototype.onRPCError=function(err){return alert("It appears that the page that launched Checkout is no longer open. We are unable to complete your payment and you haven't been charged. Please try again or contact support@stripe.com if the problem persists.")};App.prototype.onClosing=function(){return tracker.track.close({withToken:this.token!=null})};return App}(Controller);module.exports=App}).call(this)}});StripeCheckout.require.define({"inner/controllers/bitcoinStepController":function(exports,require,module){(function(){var BitcoinAddressView,BitcoinStepController,CarouselView,LabelView,LayoutView,LoadingScreenStepController,QRCodeStepController,StepController,bitcoinPaymentHelper,helpers,i18n,support,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};StepController=require("inner/controllers/stepController");QRCodeStepController=require("inner/controllers/qrCodeStepController");LoadingScreenStepController=require("inner/controllers/loadingScreenStepController");LayoutView=require("inner/views/layoutView");CarouselView=require("inner/views/carouselView");LabelView=require("inner/views/labelView");BitcoinAddressView=require("inner/views/bitcoinAddressView");bitcoinPaymentHelper=require("inner/lib/payment/bitcoinPaymentHelper");i18n=require("lib/i18n");support=require("lib/support");helpers=require("lib/helpers");BitcoinStepController=function(_super){__extends(BitcoinStepController,_super);function BitcoinStepController(){this.onOpenWalletDidClick=__bind(this.onOpenWalletDidClick,this);this.onScanDidClick=__bind(this.onScanDidClick,this);this.onAddressViewGenerateReceiver=__bind(this.onAddressViewGenerateReceiver,this);this.onAddressViewWaitingBitcoins=__bind(this.onAddressViewWaitingBitcoins,this);this.onExpiredTick=__bind(this.onExpiredTick,this);this.onAddressViewSuccess=__bind(this.onAddressViewSuccess,this);this.onSuccess=__bind(this.onSuccess,this);this.onToken=__bind(this.onToken,this);this.createReceiver=__bind(this.createReceiver,this);this.willAppear=__bind(this.willAppear,this);this.load=__bind(this.load,this);this.bindEvents=__bind(this.bindEvents,this);this.initViews=__bind(this.initViews,this);BitcoinStepController.__super__.constructor.apply(this,arguments);this.view=new LayoutView({className:"bitcoinLayoutView"});this.initViews();this.bindEvents()}BitcoinStepController.prototype.initViews=function(){this.carouselView=new CarouselView(this.options);this.headLabelView=new LabelView(this.options);this.headLabelView.setText(i18n.loc("bitcoin.instructions.sendBitcoins"));this.carouselView.animate(this.headLabelView);this.addressView=new BitcoinAddressView(this.options);this.view.addSubview(this.carouselView);return this.view.addSubview(this.addressView)};BitcoinStepController.prototype.bindEvents=function(){this.on("success",this.onSuccess);this.addressView.on("success",this.onAddressViewSuccess);this.addressView.on("waitingBitcoins",this.onAddressViewWaitingBitcoins);this.addressView.on("generateReceiver",this.onAddressViewGenerateReceiver);this.addressView.on("scanDidClick",this.onScanDidClick);return this.addressView.on("openWalletDidClick",this.onOpenWalletDidClick)};BitcoinStepController.prototype.load=function(options){if(options==null){options={}}if(this.email===options.data.email){return $.Deferred().resolve().promise()}else{return this.createReceiver(options.data)}};BitcoinStepController.prototype.loadOptions=function(){return{validate:true}};BitcoinStepController.prototype.willAppear=function(){this.loadingWalletController=null;return this.qrCodeController=null};BitcoinStepController.prototype.createReceiver=function(data){var promise;promise=bitcoinPaymentHelper.createReceiver(data,this.options);promise=promise.done(function(_this){return function(receiver,paidPromise){var expirationDate,expirationDelay;_this.email=data.email;expirationDelay=10*60*1e3;if(_this.expirationTimeout!=null){clearTimeout(_this.expirationTimeout)}_this.expirationTimeout=setTimeout(_this.onExpiredTick,expirationDelay);_this.addressView.setAmount(receiver.bitcoin_amount);_this.addressView.setAddress(receiver.inbound_address);expirationDate=new Date((new Date).getTime()+expirationDelay);_this.addressView.start(expirationDate);_this.receiver=receiver;return paidPromise.done(_this.onToken)}}(this));return promise};BitcoinStepController.prototype.onToken=function(token){var controller,_ref,_ref1;if((_ref=this.loadingWalletWindow)!=null){_ref.close()}controller=(_ref1=this.loadingWalletController)!=null?_ref1:this.qrCodeController;if(controller!=null){controller.trigger("pop")}return setTimeout(function(_this){return function(){return _this.trigger("token",token,_this)}}(this),controller!=null?1e3:0)};BitcoinStepController.prototype.onSuccess=function(){return this.addressView.showSuccess()};BitcoinStepController.prototype.onAddressViewSuccess=function(){var successLabelView;successLabelView=new LabelView(this.options);successLabelView.setText(i18n.loc("bitcoin.instructions.success"));return this.carouselView.animate(successLabelView)};BitcoinStepController.prototype.onExpiredTick=function(){var expiredLabelView;this.expirationTimeout=null;this.addressView.showExpired();expiredLabelView=new LabelView(this.options);expiredLabelView.setText(i18n.loc("bitcoin.instructions.expired"));return this.carouselView.animate(expiredLabelView)};BitcoinStepController.prototype.onAddressViewWaitingBitcoins=function(){return this.carouselView.animate(this.headLabelView)};BitcoinStepController.prototype.onAddressViewGenerateReceiver=function(e){var promise;promise=this.createReceiver(this.email);return promise.done(e.done).fail(e.fail)};BitcoinStepController.prototype.onScanDidClick=function(){this.qrCodeController=new QRCodeStepController({code:this.receiver.bitcoin_uri,fromEl:this.addressView.qrCodePlaceholderEl()});return this.trigger("push",this.qrCodeController,{modal:true})};BitcoinStepController.prototype.onOpenWalletDidClick=function(){var $iframe,opts,redirectUrl;opts={url:this.receiver.bitcoin_uri,title:i18n.loc("bitcoin.wallet.loading.title")(),subtitle:i18n.loc("bitcoin.wallet.loading.subtitle")(),linkUrl:"/-/bitcoin-wallets",linkLabel:i18n.loc("bitcoin.wallet.loading.chooseWalletLink")()};if(support.webProtocolHandlers()||helpers.ieVersion()!=null&&helpers.ieVersion()<11){redirectUrl="/redirect?";redirectUrl+=$.param(opts);return this.loadingWalletWindow=window.open(redirectUrl,"_blank")}else{$iframe=$("<iframe>");$iframe.hide();$iframe.attr("src",opts.url);setTimeout(function(){return $("body").append($iframe)},500);this.loadingWalletController=new LoadingScreenStepController($.extend({},this.options,opts));return this.trigger("push",this.loadingWalletController,{modal:true})}};return BitcoinStepController}(StepController);module.exports=BitcoinStepController}).call(this)}});StripeCheckout.require.define({"inner/controllers/cardStepController":function(exports,require,module){(function(){var Account,Button,CardPaymentView,CardStepController,LabelView,LabelWithCheckbox,LayoutView,RememberMe,SeparatorLineView,StepController,View,cardPaymentHelper,formatting,helpers,i18n,support,tracker,verificationHelper,_,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};StepController=require("inner/controllers/stepController");LayoutView=require("inner/views/layoutView");RememberMe=require("inner/views/inputs/rememberMe");LabelWithCheckbox=require("inner/views/inputs/labelWithCheckbox");CardPaymentView=require("inner/views/cardPaymentView");SeparatorLineView=require("inner/views/separatorLineView");LabelView=require("inner/views/labelView");View=require("lib/view");Button=require("inner/views/controls/button");Account=require("lib/account");i18n=require("lib/i18n");support=require("lib/support");helpers=require("lib/helpers");formatting=require("lib/formatting");tracker=require("lib/tracker");cardPaymentHelper=require("inner/lib/payment/cardPaymentHelper");_=require("vendor/lodash");verificationHelper=require("inner/lib/verificationHelper");CardStepController=function(_super){__extends(CardStepController,_super);function CardStepController(){this.onSharedAccountChanged=__bind(this.onSharedAccountChanged,this);this.onKeepMeLoggedInCheckedChange=__bind(this.onKeepMeLoggedInCheckedChange,this);this.onPhoneVisibleChange=__bind(this.onPhoneVisibleChange,this);this.setFormDisabled=__bind(this.setFormDisabled,this);this.setUsesAccount=__bind(this.setUsesAccount,this);this.validate=__bind(this.validate,this);this.data=__bind(this.data,this);this.focus=__bind(this.focus,this);this.handleError=__bind(this.handleError,this);this.submit=__bind(this.submit,this);this.cancel=__bind(this.cancel,this);this.buttons=__bind(this.buttons,this);this.bindEvents=__bind(this.bindEvents,this);this.initViews=__bind(this.initViews,this);CardStepController.__super__.constructor.apply(this,arguments);this.view=new LayoutView({className:"cardView"});this.initViews();this.bindEvents();this.setUsesAccount(Account.sharedAccount(),{animated:false})}CardStepController.prototype.initViews=function(){this.cardPaymentView=new CardPaymentView({color:this.options.color,appType:this.options.appType,zipCode:this.options.zipCode});this.view.addSubview(this.cardPaymentView);if(this.options.rememberMe&&support.accounts()){this.rememberMeSeparatorLine=new SeparatorLineView;if(this.options.appType.isMobile()){this.view.addSubview(this.rememberMeSeparatorLine)}this.rememberMe=new RememberMe({label:this.options.rememberMeText,moreInfoLink:this.options.moreInfoLink,color:this.options.color,appType:this.options.appType});this.view.addSubview(this.rememberMe);this.keepMeLoggedInCheckbox=new LabelWithCheckbox({color:this.options.color,appType:this.options.appType,iconName:"user",label:i18n.loc("rememberMe.keepMeLoggedIn")()});return this.view.addSubview(this.keepMeLoggedInCheckbox,false)}};CardStepController.prototype.bindEvents=function(){var _ref,_ref1;if((_ref=this.rememberMe)!=null){_ref.on("phoneVisibleDidChange",this.onPhoneVisibleChange)}if((_ref1=this.keepMeLoggedInCheckbox)!=null){_ref1.on("checkedDidChange",this.onKeepMeLoggedInCheckedChange)}return Account.on("sharedAccountChanged",this.onSharedAccountChanged)};CardStepController.prototype.buttons=function(){var _ref;if(((_ref=this.rememberMe)!=null?_ref.isPhoneVisible():void 0)&&this.options.appType.isMobile()){return{cancel:{label:i18n.loc("rememberMe.button.cancel")()},submit:{label:i18n.loc("rememberMe.button.save")()}}}else{return{submit:{label:formatting.formatLabelSafe(this.options.panelLabel||i18n.loc("button.pay")(),this.options.amount,this.options.currency),className:"iconTick"}}}};CardStepController.prototype.cancel=function(){return this.rememberMe.setChecked(false)};CardStepController.prototype.submit=function(options){var fields,promise,_ref;if(options==null){options={}}if(((_ref=this.rememberMe)!=null?_ref.isPhoneVisible():void 0)&&this.options.appType.isMobile()){fields=this.rememberMe.validate();if(fields.length>0){this.trigger("invalid",fields);return}this.rememberMe.setPhoneVisible(false);return}tracker.track.submit();options.invalid=(options.invalid||[]).concat(this.validate());options.data=this.data(options.data);options.data.timeOpened=options.timeOpened;options.data.timeLoaded=options.timeLoaded;if(options.invalid.length>0){return this.trigger("invalid",options.invalid)}else{promise=cardPaymentHelper.submit(options.data,this.options);promise.done(function(_this){return function(token){return _this.trigger("token",token,_this)}}(this));return promise.fail(function(_this){return function(err){var note,opts;opts=$.extend({},_this.options,{data:options.data});if(verificationHelper.shouldVerify(err!=null?err.code:void 0)){note=JSON.parse(err.note)[0];return _this.trigger("push",verificationHelper.getController(note,opts))}else{return _this.trigger("error",err)}}}(this))}};CardStepController.prototype.handleError=function(err){return this.cardPaymentView.handleError(err)};CardStepController.prototype.focus=function(){if(support.automaticallyGiveFocus()){return this.cardPaymentView.focus()}};CardStepController.prototype.data=function(){var data,paymentVal,_ref;data=CardStepController.__super__.data.apply(this,arguments);paymentVal=this.cardPaymentView.val();data.payment={usesAccountCard:(_ref=this.cardPaymentView.editionState)===CardPaymentView.editionStates.DISABLED||_ref===CardPaymentView.editionStates.BEFORE_CHANGING,card:_.pick(paymentVal,["number","cvc","exp_month","exp_year"]),pastedFields:paymentVal.pastedFields};if(this.rememberMe!=null&&this.view.isSubviewVisible(this.rememberMe)){data.rememberMe={checked:this.rememberMe.isChecked(),phone:this.rememberMe.val()}}else if(this.keepMeLoggedInCheckbox!=null&&this.view.isSubviewVisible(this.keepMeLoggedInCheckbox)){data.rememberMe={checked:this.keepMeLoggedInCheckbox.isChecked()}}if(paymentVal.zip!=null){data.billingAddress={zip:paymentVal.zip}}return data};CardStepController.prototype.validate=function(){var fields;fields=this.cardPaymentView.validate();if(this.rememberMe!=null){fields=fields.concat(this.rememberMe.validate())}return fields};CardStepController.prototype.setUsesAccount=function(account,options){if(options==null){options={}}if(options.animated==null){options.animated=true}if(this.rememberMe!=null){this.view.setSubviewAsVisible(this.rememberMe,account==null);this.keepMeLoggedInCheckbox.setChecked(true);this.view.setSubviewAsVisible(this.keepMeLoggedInCheckbox,account!=null&&account.isNotRemembered);if(this.rememberMeSeparatorLine!=null){this.view.setSubviewAsVisible(this.rememberMeSeparatorLine,account!=null&&account.isNotRemembered||account==null)}}if(account!=null&&!cardPaymentHelper.isCardExpired(account.card)){this.cardPaymentView.setCard(account.card);return this.cardPaymentView.setEditionState(CardPaymentView.editionStates.BEFORE_CHANGING,{animated:options.animated})}else{this.cardPaymentView.clear();this.cardPaymentView.setEditionState(CardPaymentView.editionStates.NORMAL,{animated:options.animated});if(account!=null&&cardPaymentHelper.isCardExpired(account.card)){if(this.expiredCardLabelView==null){this.expiredCardLabelView=new LabelView({className:"expiredCardLabelView warning"})}this.expiredCardLabelView.setText(i18n.loc("error.cardExpired")({last4:"<strong>"+account.card.last4.replace(/\ /g,"")+"</strong>",expired:"<strong>"+i18n.loc("error.cardExpired.expired")()+"</strong>"}));return this.view.insertSubviewBefore(this.expiredCardLabelView,this.cardPaymentView)}else if(this.expiredCardLabelView!=null){this.view.removeSubview(this.expiredCardLabelView);return this.expiredCardLabelView=null}}};CardStepController.prototype.setFormDisabled=function(disabled){var _ref,_ref1;this.cardPaymentView.setDisabled(disabled);if((_ref=this.rememberMe)!=null){if(typeof _ref.setDisabled==="function"){_ref.setDisabled(disabled)}}return(_ref1=this.keepMeLoggedInCheckbox)!=null?typeof _ref1.setDisabled==="function"?_ref1.setDisabled(disabled):void 0:void 0};CardStepController.prototype.onPhoneVisibleChange=function(visible,args){var toView,viewsToHide;if(args==null){args={}}this.trigger("displayLegalLinks",visible);if(this.options.appType.isMobile()){toView=visible?this.rememberMe.animatableViews()[0]:null;viewsToHide=_.difference(this.rememberMe.animatableViews({allViews:true}),this.rememberMe.animatableViews());this.trigger("scrollToView",toView,viewsToHide);this.trigger("buttonsChanged")}if(args.userAction){tracker.state.setRememberMeChecked(visible);return tracker.track.rememberMe({checked:visible})}};CardStepController.prototype.onKeepMeLoggedInCheckedChange=function(args){if(args==null){args={}}if(args.userAction){return tracker.track.keepMeLoggedIn({checked:this.keepMeLoggedInCheckbox.isChecked()})}};CardStepController.prototype.onSharedAccountChanged=function(account){return this.setUsesAccount(account)};return CardStepController}(StepController);module.exports=CardStepController}).call(this)}});StripeCheckout.require.define({"inner/controllers/checkoutController":function(exports,require,module){(function(){var Account,AccountLookupStepController,AddressStepController,ButtonsView,CheckoutController,CheckoutView,CloseStepController,HeaderView,LayoutView,LoggedBarController,NavigationController,OverlayView,PaymentStepController,easingCurves,i18n,navigationAnimationHelper,popoverManager,rowsAnimationHelper,support,tracker,validation,_,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};NavigationController=require("inner/controllers/navigationController");AddressStepController=require("inner/controllers/addressStepController");PaymentStepController=require("inner/controllers/paymentStepController");LoggedBarController=require("inner/controllers/loggedBarController");AccountLookupStepController=require("inner/controllers/accountLookupStepController");CloseStepController=require("inner/controllers/closeStepController");OverlayView=require("inner/views/overlayView");CheckoutView=require("inner/views/checkoutView");LayoutView=require("inner/views/layoutView");HeaderView=require("inner/views/headerView");ButtonsView=require("inner/views/buttonsView");_=require("vendor/lodash");Account=require("lib/account");support=require("lib/support");tracker=require("lib/tracker");validation=require("lib/validation");navigationAnimationHelper=require("inner/lib/animation/navigationAnimationHelper");rowsAnimationHelper=require("inner/lib/animation/rowsAnimationHelper");easingCurves=require("inner/lib/easingCurves");i18n=require("lib/i18n");popoverManager=require("inner/lib/popoverManager");CheckoutController=function(_super){__extends(CheckoutController,_super);function CheckoutController(options){this.onDidClickCancel=__bind(this.onDidClickCancel,this);this.onAuthorizingAccountChanged=__bind(this.onAuthorizingAccountChanged,this);this.onSharedAccountChanged=__bind(this.onSharedAccountChanged,this);this.onLoggedBarVisibleChanged=__bind(this.onLoggedBarVisibleChanged,this);this.onEscape=__bind(this.onEscape,this);this.onBack=__bind(this.onBack,this);this.onClose=__bind(this.onClose,this);this.onDisplayLegalLinks=__bind(this.onDisplayLegalLinks,this);this.onFooterViewChanged=__bind(this.onFooterViewChanged,this);this.onButtonsChanged=__bind(this.onButtonsChanged,this);this.onSuccess=__bind(this.onSuccess,this);this.onError=__bind(this.onError,this);this.onInvalid=__bind(this.onInvalid,this);this.onSubmit=__bind(this.onSubmit,this);this.onCurrentChanged=__bind(this.onCurrentChanged,this);this.onStackSizeChanged=__bind(this.onStackSizeChanged,this);this.animationOptionsDelegate=__bind(this.animationOptionsDelegate,this);this.updateFooterView=__bind(this.updateFooterView,this);this.setButtonsVisible=__bind(this.setButtonsVisible,this);this.updateButtons=__bind(this.updateButtons,this);this.closed=__bind(this.closed,this);this.close=__bind(this.close,this);this.open=__bind(this.open,this);this.bindEvents=__bind(this.bindEvents,this);this.initViews=__bind(this.initViews,this);CheckoutController.__super__.constructor.apply(this,arguments);this.options.shouldHideEmailInput=this.options.email&&validation.validateEmail(this.options.email);if(this.options.shippingAddress||this.options.billingAddress){this.firstController=new AddressStepController(this.options)}else{this.firstController=new PaymentStepController(this.options)}this.loggedBarController=new LoggedBarController(this.options);this.initViews();this.bindEvents();this.push(this.firstController)}CheckoutController.prototype.initViews=function(){this.view=new OverlayView(this.options);this.checkoutView=new CheckoutView(this.options);this.contentView=new LayoutView({className:"contentView",animationOptionsDelegate:this.animationOptionsDelegate});this.checkoutView.setContentView(this.contentView);this.headerView=new HeaderView(this.options);this.buttonsView=new ButtonsView(this.options);this.view.addSubview(this.checkoutView);this.contentView.addSubview(this.headerView);this.contentView.setZIndexForSubview(this.headerView,100);this.contentView.addSubview(this.loggedBarController.view,this.loggedBarController.visible);if(this.options.appType.isMobile()){return this.checkoutView.addSubview(this.buttonsView)}else{this.contentView.addSubview(this.buttonsView);return this.contentView.setZIndexForSubview(this.buttonsView,100)}};CheckoutController.prototype.bindEvents=function(){this.on("stackSizeChanged",this.onStackSizeChanged);this.on("currentChanged",this.onCurrentChanged);this.on("invalid",this.onInvalid);this.on("error",this.onError);this.on("success",this.onSuccess);this.on("buttonsChanged",this.onButtonsChanged);this.on("footerViewChanged",this.onFooterViewChanged);this.on("displayLegalLinks",this.onDisplayLegalLinks);this.on("submit",function(_this){return function(options){return _this.onSubmit($.extend({pending:false},options))}}(this));this.loggedBarController.on("visibleChanged",this.onLoggedBarVisibleChanged);this.checkoutView.on("escape",this.onEscape);this.checkoutView.on("submit",this.onSubmit);this.headerView.on("close",this.onClose);this.headerView.on("back",this.onBack);this.buttonsView.on("didClickCancel",this.onDidClickCancel);Account.on("sharedAccountChanged",this.onSharedAccountChanged);return Account.on("authorizingAccountChanged",this.onAuthorizingAccountChanged)};CheckoutController.prototype.open=function(){var buttonDelay,formDelay,formViews,loggedBarDelay,showButton,showLoggedBar,showPanel,showView,_ref,_ref1;showView=function(_this){return function(){_this.view.show();return _this.headerView.show()}}(this);showPanel=function(_this){return function(){return _this.checkoutView.show()}}(this);showLoggedBar=function(_this){return function(){return _this.loggedBarController.view.show()}}(this);showButton=function(_this){return function(){return _this.buttonsView.show({initial:true})}}(this);if(this.options.appType.isMobile()){formViews=((_ref=this.current)!=null?(_ref1=_ref.view)!=null?_ref1.animatableViews():void 0:void 0)||[];rowsAnimationHelper.hide(formViews);loggedBarDelay=this.loggedBarController.visible?500:0;
formDelay=loggedBarDelay+380;buttonDelay=formDelay+(formViews.length*50+50);setTimeout(showView,0);setTimeout(showPanel,0);setTimeout(showLoggedBar,loggedBarDelay);setTimeout(function(){return rowsAnimationHelper.show(formViews)},formDelay);return setTimeout(showButton,buttonDelay)}else{showView();showLoggedBar();showButton();return setTimeout(showPanel,300)}};CheckoutController.prototype.close=function(options){if(options==null){options={}}this.trigger("closing");return this.checkoutView.hide($.extend({},options,{complete:function(_this){return function(){return _this.view.hide($.extend({},options,{complete:function(){return _this.trigger("closed")}}))}}(this)}))};CheckoutController.prototype.closed=function(){if(this.options.appType.isMobile()){return this.push(new CloseStepController(this.options),{clearStack:true})}};CheckoutController.prototype.updateButtons=function(options){var button,buttons,k;if(options==null){options={}}buttons=this.buttons();this.setButtonsVisible(buttons!=null);if(buttons!=null){for(k in buttons){button=buttons[k];buttons[k]=$.extend({},button,options)}return this.buttonsView.setButtons(buttons)}};CheckoutController.prototype.setButtonsVisible=function(visible){if(this.options.appType.isMobile()){if(visible){return this.buttonsView.show()}else{return this.buttonsView.hide()}}else{return this.contentView.setSubviewAsVisible(this.buttonsView,visible)}};CheckoutController.prototype.updateFooterView=function(){var footerView;footerView=this.footerView();if(this.currentFooterView===footerView){return}if(this.currentFooterView!=null){this.contentView.removeSubview(this.currentFooterView)}this.currentFooterView=footerView;if(this.currentFooterView!=null){this.contentView.addSubview(this.currentFooterView,false);return this.contentView.setSubviewAsVisible(this.currentFooterView,true)}};CheckoutController.prototype.setViewVisible=function(view,visible){if(visible){view.show()}return view.$el.gfx({opacity:visible?1:0},{complete:function(){if(!visible){return view.hide()}}})};CheckoutController.prototype.animationOptionsDelegate=function(subview,state,toState,options){if(options==null){options={}}if(subview===this.buttonsView){options.duration=400;options.easing=easingCurves.BOUNCING;if(state.y>toState.y){options.delay=200}}return options};CheckoutController.prototype.onStackSizeChanged=function(){return this.headerView.setBackButtonVisible(this.stackSize()>1)};CheckoutController.prototype.onCurrentChanged=function(options){var oldView,_base,_base1,_ref,_ref1;if(options==null){options={}}if(options.modal){oldView=options.old.view;if(this.options.appType.isMobile()){this.checkoutView.addSubview(this.current.view);if(typeof(_base=this.current).modalWillAppear==="function"){_base.modalWillAppear()}}else{this.contentView.addSubviewOnTop(this.current.view,oldView);if(typeof(_base1=this.current).modalWillAppear==="function"){_base1.modalWillAppear()}this.setViewVisible(oldView,false)}}else if((_ref=this.currentOptions)!=null?_ref.modal:void 0){if(!this.options.appType.isMobile()){this.setViewVisible(this.current.view,true)}if(options.old.modalWillDisappear!=null){options.old.modalWillDisappear(options.old.view.detach)}else{options.old.view.detach()}}else{if(options.old!=null){oldView=options.old.view;this.contentView.removeSubview(oldView,{detach:false})}if(this.options.appType.isMobile()){window.scrollTo(0,0);if((_ref1=document.activeElement)!=null){_ref1.blur()}}this.current.view.$el.transform({opacity:0});this.contentView.insertSubviewBefore(this.current.view,this.buttonsView);if(options.old!=null){navigationAnimationHelper.animate(options.old.view,this.current.view,{animated:true,transition:"shortSlide",duration:300,easing:"ease-in-out",direction:options.type,complete:function(_this){return function(){options.old.view.parent().detach();return _this.checkoutView.shown(_this.current.focus)}}(this)})}else{navigationAnimationHelper.animate(null,this.current.view,{animated:false,transition:"shortSlide",complete:function(_this){return function(){return _this.checkoutView.shown(_this.current.focus)}}(this)})}}return this.currentOptions=options};CheckoutController.prototype.onSubmit=function(options){var _ref;if(options==null){options={}}if(options.pending==null){options.pending=true}if(options.pending){this.buttonsView.setPending(true)}if(this.popoverView){popoverManager.closePopover(this.popoverView)}options.timeOpened=this.options.timeOpened;options.timeLoaded=this.options.timeLoaded;if((_ref=document.activeElement)!=null){_ref.blur()}return this.submit(options)};CheckoutController.prototype.onInvalid=function(invalidFields){var fields,_ref;if(invalidFields!=null){fields=_.map(invalidFields,function(invalidField){var parts;parts=[];if(invalidField.name){parts.push(invalidField.name)}if(invalidField.reason){parts.push(invalidField.reason)}return parts.join(".")});tracker.track.invalid({fields:fields});if(invalidFields.length>0&&support.automaticallyGiveFocus()){if((_ref=invalidFields[0].input)!=null){if(typeof _ref.focus==="function"){_ref.focus()}}}}this.buttonsView.setPending(false);return this.checkoutView.shake()};CheckoutController.prototype.onError=function(err){var message;tracker.track.invalid({err:err||"no_error_provided"});this.buttonsView.setPending(false);this.checkoutView.shake();if(!this.handleError(err||{})&&err!=null){message=err.message||i18n.loc("error.unexpected")();return this.popoverView=popoverManager.openPopover(this.buttonsView.$el,message)}};CheckoutController.prototype.onSuccess=function(token){this.buttonsView.setSuccess(true);return this.close({success:true})};CheckoutController.prototype.onButtonsChanged=function(options){if(options==null){options={}}this.buttonsView.setPending(false);return this.updateButtons({direction:options.type})};CheckoutController.prototype.onFooterViewChanged=function(){return this.updateFooterView()};CheckoutController.prototype.onDisplayLegalLinks=function(visible){return this.checkoutView.setLegalLinksVisible(visible!=null?visible:true)};CheckoutController.prototype.onClose=function(){var _ref;if((_ref=document.activeElement)!=null){_ref.blur()}return this.close()};CheckoutController.prototype.onBack=function(){return this.pop()};CheckoutController.prototype.onEscape=function(){if(!this.pop()){return this.close()}};CheckoutController.prototype.onLoggedBarVisibleChanged=function(){return this.contentView.setSubviewAsVisible(this.loggedBarController.view,this.loggedBarController.visible)};CheckoutController.prototype.onSharedAccountChanged=function(account){return this.push(this.firstController,{clearStack:true})};CheckoutController.prototype.onAuthorizingAccountChanged=function(account){return this.push(new AccountLookupStepController($.extend({},{account:account},this.options)))};CheckoutController.prototype.onDidClickCancel=function(){return this.cancel()};return CheckoutController}(NavigationController);module.exports=CheckoutController}).call(this)}});StripeCheckout.require.define({"inner/controllers/closeStepController":function(exports,require,module){(function(){var CloseStepController,CloseView,StepController,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};StepController=require("inner/controllers/stepController");CloseView=require("inner/views/closeView");CloseStepController=function(_super){__extends(CloseStepController,_super);function CloseStepController(){this.buttons=__bind(this.buttons,this);CloseStepController.__super__.constructor.apply(this,arguments);this.view=new CloseView(this.options)}CloseStepController.prototype.buttons=function(){return{submit:{disabled:true}}};return CloseStepController}(StepController);module.exports=CloseStepController}).call(this)}});StripeCheckout.require.define({"inner/controllers/loadingScreenStepController":function(exports,require,module){(function(){var LoadingScreenStepController,LoadingScreenView,StepController,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};StepController=require("inner/controllers/stepController");LoadingScreenView=require("inner/views/loadingScreenView");LoadingScreenStepController=function(_super){__extends(LoadingScreenStepController,_super);function LoadingScreenStepController(){this.onCloseButtonClick=__bind(this.onCloseButtonClick,this);this.modalWillDisappear=__bind(this.modalWillDisappear,this);this.modalWillAppear=__bind(this.modalWillAppear,this);this.bindEvents=__bind(this.bindEvents,this);LoadingScreenStepController.__super__.constructor.apply(this,arguments);this.view=new LoadingScreenView(this.options);this.view.hide({animated:false});this.bindEvents()}LoadingScreenStepController.prototype.bindEvents=function(){return this.view.on("closeButtonClick",this.onCloseButtonClick)};LoadingScreenStepController.prototype.modalWillAppear=function(){return this.view.show()};LoadingScreenStepController.prototype.modalWillDisappear=function(callback){return this.view.hide({complete:callback})};LoadingScreenStepController.prototype.onCloseButtonClick=function(){return this.trigger("pop")};return LoadingScreenStepController}(StepController);module.exports=LoadingScreenStepController}).call(this)}});StripeCheckout.require.define({"inner/controllers/loggedBarController":function(exports,require,module){(function(){var Account,Controller,LoggedBarController,LoggedBarView,tracker,validation,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Controller=require("lib/controller");LoggedBarView=require("inner/views/loggedBarView");Account=require("lib/account");validation=require("lib/validation");tracker=require("lib/tracker");LoggedBarController=function(_super){__extends(LoggedBarController,_super);function LoggedBarController(){this.onSharedAccountChanged=__bind(this.onSharedAccountChanged,this);this.updateVisibility=__bind(this.updateVisibility,this);this.isEmailPrefilled=__bind(this.isEmailPrefilled,this);this.bindEvents=__bind(this.bindEvents,this);LoggedBarController.__super__.constructor.apply(this,arguments);this.view=new LoggedBarView({appType:this.options.appType,color:this.options.color,alternate:!this.options.image||!this.options.name&&!this.options.description?"simple":void 0});this.bindEvents();this.updateVisibility({animated:false})}LoggedBarController.prototype.bindEvents=function(){this.view.on("logout",this.onLogout);return Account.on("sharedAccountChanged",this.onSharedAccountChanged)};LoggedBarController.prototype.isEmailPrefilled=function(){return this.options.email&&validation.validateEmail(this.options.email)};LoggedBarController.prototype.updateVisibility=function(options){var _ref;if(options==null){options={}}if(options.animated==null){options.animated=true}this.visible=true;if(this.isEmailPrefilled()){this.view.setEmail(this.options.email)}else if(Account.sharedAccount()!=null){this.view.setEmail((_ref=Account.sharedAccount())!=null?_ref.email:void 0)}else{this.visible=false}this.view.setLinkVisible(!this.isEmailPrefilled());return this.trigger("visibleChanged")};LoggedBarController.prototype.onLogout=function(){Account.logout();return tracker.track.logout()};LoggedBarController.prototype.onSharedAccountChanged=function(account){return this.updateVisibility()};return LoggedBarController}(Controller);module.exports=LoggedBarController}).call(this)}});StripeCheckout.require.define({"inner/controllers/navigationController":function(exports,require,module){(function(){var NavigationController,StepController,_,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};StepController=require("inner/controllers/stepController");_=require("vendor/lodash");NavigationController=function(_super){__extends(NavigationController,_super);function NavigationController(){this.triggerStackSizeChanged=__bind(this.triggerStackSizeChanged,this);this.setCurrent=__bind(this.setCurrent,this);this.handleError=__bind(this.handleError,this);this.stackSize=__bind(this.stackSize,this);this.pop=__bind(this.pop,this);this.push=__bind(this.push,this);NavigationController.__super__.constructor.apply(this,arguments);this.stack=[]}NavigationController.prototype.push=function(controller,options){var instanceOfWhiteList,white,_i,_len,_ref;if(options==null){options={}}if(controller===this.current){if(options.clearStack){if(typeof controller.resetViews==="function"){controller.resetViews()}}return}if(this.WHITELIST!=null){instanceOfWhiteList=false;_ref=this.WHITELIST;for(_i=0,_len=_ref.length;_i<_len;_i++){white=_ref[_i];if(controller instanceof white){instanceOfWhiteList=true;break}}if(!instanceOfWhiteList){this.trigger("push",controller,options);return}}if(options.clearStack){this.stack=[]}this.setCurrent(controller,$.extend({},options,{type:"push"}));this.stack.push({controller:controller});this.triggerStackSizeChanged();return controller.on("stackSizeChanged",this.triggerStackSizeChanged)};NavigationController.prototype.pop=function(){var stacked,_base;if(this.current!=null&&(typeof(_base=this.current).stackSize==="function"?_base.stackSize():void 0)>1){this.current.pop()}else{if(this.stack.length<2){return false}stacked=this.stack.pop();stacked.controller.off("stackSizeChanged",this.triggerStackSizeChanged);this.setCurrent(this.stack[this.stack.length-1].controller,{type:"pop"});this.triggerStackSizeChanged()}return true};NavigationController.prototype.stackSize=function(){var size,stacked,_i,_len,_ref;size=0;_ref=this.stack;for(_i=0,_len=_ref.length;_i<_len;_i++){stacked=_ref[_i];size+=stacked.controller.stackSize()}return size};NavigationController.prototype.handleError=function(err){var controller,i,result,_i,_ref;if(this.stack.length<1){return false}for(i=_i=_ref=this.stack.length-1;_ref<=0?_i<=0:_i>=0;i=_ref<=0?++_i:--_i){controller=this.stack[i].controller;result=controller.handleError(err);if(result){while(this.current!==controller&&this.stackSize()>1){this.pop()}return true}}return false};NavigationController.prototype.setCurrent=function(controller,options){if(options==null){options={}}if(this.current!=null){this.current.off("push",this.push);this.current.off("pop",this.pop)}NavigationController.__super__.setCurrent.apply(this,arguments);this.current.on("push",this.push);return this.current.on("pop",this.pop)};NavigationController.prototype.bubblingEvents=function(){return _.without(NavigationController.__super__.bubblingEvents.apply(this,arguments),"push")};NavigationController.prototype.triggerStackSizeChanged=function(){return this.trigger("stackSizeChanged")};return NavigationController}(StepController);module.exports=NavigationController}).call(this)}});StripeCheckout.require.define({"inner/controllers/paymentStepController":function(exports,require,module){(function(){var Account,AlipayNavigationController,BitcoinStepController,CardStepController,ContentSwitcher,EmailInput,LayoutView,PaymentStepController,SegmentedControl,SeparatorLineView,StepController,accountLookupHelper,i18n,popoverManager,support,_,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};StepController=require("inner/controllers/stepController");CardStepController=require("inner/controllers/cardStepController");AlipayNavigationController=require("inner/controllers/alipayNavigationController");BitcoinStepController=require("inner/controllers/bitcoinStepController");LayoutView=require("inner/views/layoutView");SegmentedControl=require("inner/views/controls/segmentedControl");EmailInput=require("inner/views/inputs/emailInput");SeparatorLineView=require("inner/views/separatorLineView");ContentSwitcher=require("inner/views/contentSwitcher");Account=require("lib/account");accountLookupHelper=require("lib/accountLookupHelper");support=require("lib/support");i18n=require("lib/i18n");popoverManager=require("inner/lib/popoverManager");_=require("vendor/lodash");PaymentStepController=function(_super){__extends(PaymentStepController,_super);PaymentStepController.prototype.WHITELIST=[];function PaymentStepController(){this.onScrollToView=__bind(this.onScrollToView,this);this.onSelectedIndexDidChange=__bind(this.onSelectedIndexDidChange,this);this.onWillSelectIndex=__bind(this.onWillSelectIndex,this);this.onSharedAccountChanged=__bind(this.onSharedAccountChanged,this);this.onToken=__bind(this.onToken,this);this.onCurrentChanged=__bind(this.onCurrentChanged,this);this.setUsesAccount=__bind(this.setUsesAccount,this);this.isEmailEnabled=__bind(this.isEmailEnabled,this);this.emailVal=__bind(this.emailVal,this);this.validate=__bind(this.validate,this);this.data=__bind(this.data,this);this.setFormDisabled=__bind(this.setFormDisabled,this);this.focus=__bind(this.focus,this);this.submit=__bind(this.submit,this);this.bindEvents=__bind(this.bindEvents,this);this.resetViews=__bind(this.resetViews,this);this.initViews=__bind(this.initViews,this);PaymentStepController.__super__.constructor.apply(this,arguments);this.view=new LayoutView($.extend({},{className:"paymentView"},this.options));this.methods=[{label:i18n.loc("paymentMethods.card")(),type:"card",controller:new CardStepController(this.options)}];if(this.options.alipay){this.methods.push({label:i18n.loc("paymentMethods.alipay")(),type:"alipay",controller:new AlipayNavigationController(this.options)})}if(this.options.bitcoin){this.methods.push({label:i18n.loc("paymentMethods.bitcoin")(),type:"bitcoin",controller:new BitcoinStepController(this.options)})}this.initViews();this.bindEvents();this.setUsesAccount(Account.sharedAccount());this.setCurrent(this.methods[0].controller);accountLookupHelper.observe({input:this.emailInput,email:this.options.email,name:this.options.name})}PaymentStepController.prototype.initViews=function(){var method,_i,_len,_ref,_results;if(!this.options.shouldHideEmailInput){this.emailInput=new EmailInput({color:this.options.color,email:this.options.email,appType:this.options.appType});this.view.addSubview(this.emailInput);if(this.options.appType.isMobile()&&this.methods.length<=1){this.emailInputSeparatorLine=new SeparatorLineView;this.view.addSubview(this.emailInputSeparatorLine)}}if(this.methods.length>1){this.methodsControl=new SegmentedControl({items:this.methods,style:SegmentedControl.styles.SMALL,className:"paymentMethodsSegmentedControl"});this.view.addSubview(this.methodsControl)}this.contentSwitcher=new ContentSwitcher;this.view.addSubview(this.contentSwitcher);_ref=this.methods;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){method=_ref[_i];_results.push(this.contentSwitcher.addSubview(method.controller.view))}return _results};PaymentStepController.prototype.resetViews=function(){var _ref;return(_ref=this.methodsControl)!=null?_ref.selectIndex(0):void 0};PaymentStepController.prototype.bindEvents=function(){var method,_fn,_i,_len,_ref,_ref1,_ref2;_ref=this.methods;_fn=function(_this){return function(method){method.controller.on("scrollToView",_this.onScrollToView);return method.controller.on("token",function(token,controller){return _this.onToken(token,controller,method)})}}(this);for(_i=0,_len=_ref.length;_i<_len;_i++){method=_ref[_i];_fn(method)}this.on("currentChanged",this.onCurrentChanged);Account.on("sharedAccountChanged",this.onSharedAccountChanged);if((_ref1=this.methodsControl)!=null){_ref1.on("willSelectIndex",this.onWillSelectIndex)}return(_ref2=this.methodsControl)!=null?_ref2.on("selectedIndexDidChange",this.onSelectedIndexDidChange):void 0};PaymentStepController.prototype.submit=function(options){if(options==null){options={}}options.invalid=(options.invalid||[]).concat(this.validate());options.data=this.data(options.data);return PaymentStepController.__super__.submit.call(this,options)};PaymentStepController.prototype.focus=function(){if(this.isEmailEnabled()){if(support.automaticallyGiveFocus()){return this.emailInput.focus()}}else{return PaymentStepController.__super__.focus.apply(this,arguments)}};PaymentStepController.prototype.setFormDisabled=function(disabled){PaymentStepController.__super__.setFormDisabled.apply(this,arguments);return this.emailInput.setDisabled(disabled)};PaymentStepController.prototype.data=function(){var data;data=PaymentStepController.__super__.data.apply(this,arguments);if(data.email==null){data.email=this.emailVal()}return data};PaymentStepController.prototype.bubblingEvents=function(){return _.without(PaymentStepController.__super__.bubblingEvents.apply(this,arguments),"token")};PaymentStepController.prototype.validate=function(){var invalid;invalid=[];if(this.isEmailEnabled()){invalid=invalid.concat(this.emailInput.validate())}return invalid};PaymentStepController.prototype.emailVal=function(){var _ref;if(this.isEmailEnabled()){return this.emailInput.val()}else{return this.options.email||((_ref=Account.sharedAccount())!=null?_ref.email:void 0)}};PaymentStepController.prototype.isEmailEnabled=function(){return this.emailInput!=null&&this.view.isSubviewVisible(this.emailInput)};PaymentStepController.prototype.setUsesAccount=function(account,options){var visible;if(options==null){options={}}if(this.emailInput!=null){visible=!account&&!this.options.emailBar;this.view.setSubviewAsVisible(this.emailInput,visible);if(this.emailInputSeparatorLine!=null){return this.view.setSubviewAsVisible(this.emailInputSeparatorLine,visible)}}};PaymentStepController.prototype.onCurrentChanged=function(){return this.contentSwitcher.setSelectedSubview(this.current.view,{complete:function(_this){return function(){if(support.automaticallyGiveFocus()){return _this.current.focus()}}}(this)})};PaymentStepController.prototype.onToken=function(token,controller,method){var _ref;this.trigger("token",token,controller);return(_ref=this.methodsControl)!=null?_ref.setSelectedIndex(this.methods.indexOf(method)):void 0};PaymentStepController.prototype.onSharedAccountChanged=function(account){return this.setUsesAccount(account)};PaymentStepController.prototype.onWillSelectIndex=function(evt){var controller,invalid,promise;if(this.isLoading){evt.fail();return}controller=this.methods[evt.index].controller;if(typeof controller.loadOptions==="function"?controller.loadOptions().validate:void 0){invalid=this.validate();if(invalid.length>0){if(support.automaticallyGiveFocus()){this.emailInput.focus()}this.emailInput.openPopover(i18n.loc("input.email.invalid")());this.trigger("invalid",invalid);evt.fail();return}}popoverManager.closePopover(this.popover);this.popover=null;if(controller.load==null){return}this.isLoading=true;evt.showLoading();promise=controller.load({data:this.data(this.options.data)});promise.done(evt.select);promise.fail(function(_this){return function(message){evt.fail();if(message!=null){return _this.popover=popoverManager.openPopover(_this.methodsControl,message)}}}(this));return promise.always(function(_this){return function(){return _this.isLoading=false}}(this))};PaymentStepController.prototype.onSelectedIndexDidChange=function(newIndex){return this.setCurrent(this.methods[newIndex].controller)};PaymentStepController.prototype.onScrollToView=function(toView,viewsToHide){if(viewsToHide==null){viewsToHide=[]}return this.view.scrollTo(toView,viewsToHide)};return PaymentStepController}(StepController);module.exports=PaymentStepController}).call(this)}});StripeCheckout.require.define({"inner/controllers/phoneCodeVerificationStepController":function(exports,require,module){(function(){var PhoneCodeVerificationStepController,PhoneCodeVerificationView,PhoneVerification,StepController,cardPaymentHelper,formatting,helpers,i18n,support,svgPaths,tracker,variants,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};StepController=require("inner/controllers/stepController");PhoneCodeVerificationView=require("inner/views/phoneCodeVerificationView");PhoneVerification=require("lib/phoneVerification");cardPaymentHelper=require("inner/lib/payment/cardPaymentHelper");support=require("lib/support");tracker=require("lib/tracker");svgPaths=require("inner/lib/svgPaths");i18n=require("lib/i18n");helpers=require("lib/helpers");formatting=require("lib/formatting");variants=require("lib/variants");PhoneCodeVerificationStepController=function(_super){__extends(PhoneCodeVerificationStepController,_super);function PhoneCodeVerificationStepController(){this.willAppear=__bind(this.willAppear,this);this.onCancel=__bind(this.onCancel,this);this.onCodeDidChange=__bind(this.onCodeDidChange,this);this.focus=__bind(this.focus,this);this.data=__bind(this.data,this);this.submit=__bind(this.submit,this);this.buttons=__bind(this.buttons,this);this.bindEvents=__bind(this.bindEvents,this);PhoneCodeVerificationStepController.__super__.constructor.apply(this,arguments);this.phoneVerification=this.options.phoneVerification;this.payVariant=variants.getVariant("phoneVerificationPay");this.buttonDisabled=true;this.view=new PhoneCodeVerificationView({color:this.options.color,svgPaths:svgPaths,appType:this.options.appType,phoneNumber:this.options.phone,showSuccess:true,useSms:this.options.useSms,reason:i18n.loc("codeVerification.enterYourCodeFraudReason")(),notReceivedMessage:i18n.loc("codeVerification.tryAgain")()});this.bindEvents()}PhoneCodeVerificationStepController.prototype.bindEvents=function(){this.view.on("valueDidChange.checkout",this.onCodeDidChange);return this.view.on("cancel.checkout",this.onCancel)};PhoneCodeVerificationStepController.prototype.buttons=function(){if(!(this.payVariant==="auto"||this.payVariant==="appear"&&this.buttonDisabled)){this.view.setButtonVisible(true);return{submit:{label:formatting.formatLabelSafe(this.options.panelLabel||i18n.loc("button.pay")(),this.options.amount,this.options.currency),disabled:this.buttonDisabled,className:"iconTick"}}}};PhoneCodeVerificationStepController.prototype.submit=function(options){var promise;if(options==null){options={}}options.data=this.data(options.data);promise=cardPaymentHelper.submit(options.data,this.options);promise.done(function(_this){return function(token){return _this.trigger("token",token,_this)}}(this));return promise.fail(function(_this){return function(err){return _this.trigger("error",err)}}(this))};PhoneCodeVerificationStepController.prototype.data=function(){var data;data=PhoneCodeVerificationStepController.__super__.data.apply(this,arguments);data.phoneVerification=this.phoneVerification.val();return data};PhoneCodeVerificationStepController.prototype.focus=function(){if(support.automaticallyGiveFocus()){return this.view.focus()}};PhoneCodeVerificationStepController.prototype.onCodeDidChange=function(code){var promise;promise=this.phoneVerification.authorize(code);promise.done(function(_this){return function(response){tracker.track.phoneVerificationAuthorize({valid:true});_this.view.setCodeVerifiedSuccess(true);_this.buttonDisabled=false;switch(_this.payVariant){case"auto":return _this.trigger("submit");case"appear":return setTimeout(function(){return _this.trigger("buttonsChanged")},750);default:return _this.trigger("buttonsChanged")}}}(this));return promise.fail(function(_this){return function(){tracker.track.phoneVerificationAuthorize({valid:false});return _this.view.setCodeVerifiedSuccess(false)}}(this))};PhoneCodeVerificationStepController.prototype.onCancel=function(){return this.trigger("pop")};PhoneCodeVerificationStepController.prototype.willAppear=function(){this.view.willEnter();return setTimeout(function(_this){return function(){return _this.view.onDelivered()}}(this),1500)};return PhoneCodeVerificationStepController}(StepController);module.exports=PhoneCodeVerificationStepController}).call(this)}});StripeCheckout.require.define({"inner/controllers/phoneVerificationStepController":function(exports,require,module){(function(){var LabelView,PhoneCodeVerificationStepController,PhoneVerification,PhoneVerificationStepController,PhoneVerificationView,StepController,appType,i18n,support,tracker,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};StepController=require("inner/controllers/stepController");PhoneCodeVerificationStepController=require("inner/controllers/phoneCodeVerificationStepController");PhoneVerificationView=require("inner/views/phoneVerificationView");LabelView=require("inner/views/labelView");PhoneVerification=require("lib/phoneVerification");support=require("lib/support");tracker=require("lib/tracker");i18n=require("lib/i18n");appType=require("lib/appType");PhoneVerificationStepController=function(_super){__extends(PhoneVerificationStepController,_super);function PhoneVerificationStepController(){this.onVerifyCallClick=__bind(this.onVerifyCallClick,this);this.submit=__bind(this.submit,this);this.footerView=__bind(this.footerView,this);this.focus=__bind(this.focus,this);this.bindEvents=__bind(this.bindEvents,this);this.insertFooterView=__bind(this.insertFooterView,this);this.initViews=__bind(this.initViews,this);PhoneVerificationStepController.__super__.constructor.apply(this,arguments);this.view=new PhoneVerificationView(this.options);this.initViews();this.bindEvents()}PhoneVerificationStepController.prototype.initViews=function(){return this.insertFooterView()};PhoneVerificationStepController.prototype.insertFooterView=function(){if(!appType.isMobile()){this.footerLabelView=new LabelView({className:"alternateAction"});return this.footerLabelView.setText(i18n.loc("alternateAction.verifyByCall")({link:"<a>"+i18n.loc("alternateAction.verifyByCall.link")()+"</a>"}))}};PhoneVerificationStepController.prototype.bindEvents=function(){var _ref;return(_ref=this.footerLabelView)!=null?_ref.on("click",this.onVerifyCallClick):void 0};PhoneVerificationStepController.prototype.buttons=function(){return{submit:{label:i18n.loc("button.verifyBySMS")()}}};PhoneVerificationStepController.prototype.focus=function(){if(support.automaticallyGiveFocus()){return this.view.focus()}};PhoneVerificationStepController.prototype.footerView=function(){return this.footerLabelView};PhoneVerificationStepController.prototype.submit=function(options){var phone,phoneVerification,useSms,_ref;if(options==null){options={}}options.invalid=(options.invalid||[]).concat(this.view.validate());options.data=this.data(options.data);if(options.invalid.length>0){return this.trigger("invalid",options.invalid)}else{useSms=(_ref=options.useSms)!=null?_ref:true;
tracker.track.phoneVerificationCreate({use_sms:useSms});phone=this.view.val().phone;phoneVerification=new PhoneVerification(phone,useSms);this.trigger("push",new PhoneCodeVerificationStepController($.extend({},{phone:phone,phoneVerification:phoneVerification,useSms:useSms,data:options.data},this.options)));$("#currentPhoneVerification").remove();return phoneVerification.send().fail(function(_this){return function(err){_this.trigger("error",i18n.loc("error.verificationCode")());return _this.trigger("pop")}}(this)).done(function(res){var el;return el=$("<input>").attr("type","hidden").attr("id","currentPhoneVerification").attr("value",res.id).appendTo("body")})}};PhoneVerificationStepController.prototype.onVerifyCallClick=function(){return this.trigger("submit",{useSms:false})};return PhoneVerificationStepController}(StepController);module.exports=PhoneVerificationStepController}).call(this)}});StripeCheckout.require.define({"inner/controllers/preloaderController":function(exports,require,module){(function(){var Controller,PreloaderController,View,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Controller=require("lib/controller");View=require("lib/view");PreloaderController=function(_super){__extends(PreloaderController,_super);function PreloaderController(){this.preloadImage=__bind(this.preloadImage,this);this.view=new View({className:"preloader"});$(document.body).append(this.view.$el)}PreloaderController.prototype.preloadImage=function(url){var $div;$div=$("<div>");$div.css("background-image","url("+url+")");return this.view.$el.append($div)};return PreloaderController}(Controller);module.exports=PreloaderController}).call(this)}});StripeCheckout.require.define({"inner/controllers/qrCodeStepController":function(exports,require,module){(function(){var QRCodeStepController,QRCodeView,StepController,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};StepController=require("inner/controllers/stepController");QRCodeView=require("inner/views/qrCodeView");QRCodeStepController=function(_super){__extends(QRCodeStepController,_super);function QRCodeStepController(){this.onViewDidClick=__bind(this.onViewDidClick,this);this.modalWillDisappear=__bind(this.modalWillDisappear,this);this.modalWillAppear=__bind(this.modalWillAppear,this);this.bindEvents=__bind(this.bindEvents,this);QRCodeStepController.__super__.constructor.apply(this,arguments);this.view=new QRCodeView;this.view.hide();if(this.options.code!=null){this.view.text(this.options.code)}this.bindEvents()}QRCodeStepController.prototype.bindEvents=function(){return this.view.on("click",this.onViewDidClick)};QRCodeStepController.prototype.modalWillAppear=function(){if(this.options.fromEl!=null){return this.view.showFrom(this.options.fromEl)}};QRCodeStepController.prototype.modalWillDisappear=function(callback){if(this.options.fromEl!=null){return this.view.hideTo(this.options.fromEl,{complete:callback})}else{return callback()}};QRCodeStepController.prototype.onViewDidClick=function(){return this.trigger("pop")};return QRCodeStepController}(StepController);module.exports=QRCodeStepController}).call(this)}});StripeCheckout.require.define({"inner/controllers/stepController":function(exports,require,module){(function(){var Controller,StepController,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},__slice=[].slice;Controller=require("lib/controller");StepController=function(_super){__extends(StepController,_super);function StepController(){this.setCurrent=__bind(this.setCurrent,this);this.data=__bind(this.data,this);this.pop=__bind(this.pop,this);this.stackSize=__bind(this.stackSize,this);this.handleError=__bind(this.handleError,this);this.focus=__bind(this.focus,this);this.submit=__bind(this.submit,this);this.cancel=__bind(this.cancel,this);this.footerView=__bind(this.footerView,this);this.buttons=__bind(this.buttons,this);var e,_base,_fn,_i,_len,_ref;StepController.__super__.constructor.apply(this,arguments);this.bubblingEventFns={};_ref=this.bubblingEvents();_fn=function(_this){return function(e){var fn;return _this.bubblingEventFns[e]=fn=function(){var args;args=1<=arguments.length?__slice.call(arguments,0):[];return _this.trigger.apply(_this,[e].concat(__slice.call(args)))}}}(this);for(_i=0,_len=_ref.length;_i<_len;_i++){e=_ref[_i];_fn(e)}if((_base=this.options).data==null){_base.data={}}}StepController.prototype.buttons=function(){var _ref,_ref1;return(_ref=this.current)!=null?(_ref1=_ref.buttons)!=null?_ref1.apply(this,arguments):void 0:void 0};StepController.prototype.footerView=function(){var _ref,_ref1;return(_ref=this.current)!=null?(_ref1=_ref.footerView)!=null?_ref1.apply(this,arguments):void 0:void 0};StepController.prototype.cancel=function(){var _ref,_ref1,_ref2;return(_ref=(_ref1=this.current)!=null?(_ref2=_ref1.cancel)!=null?_ref2.apply(this,arguments):void 0:void 0)!=null?_ref:false};StepController.prototype.submit=function(){var _ref,_ref1;return(_ref=this.current)!=null?(_ref1=_ref.submit)!=null?_ref1.apply(this,arguments):void 0:void 0};StepController.prototype.focus=function(){var _ref,_ref1,_ref2;return(_ref=(_ref1=this.current)!=null?(_ref2=_ref1.focus)!=null?_ref2.apply(this,arguments):void 0:void 0)!=null?_ref:false};StepController.prototype.handleError=function(){var _ref,_ref1,_ref2;return(_ref=(_ref1=this.current)!=null?(_ref2=_ref1.handleError)!=null?_ref2.apply(this,arguments):void 0:void 0)!=null?_ref:false};StepController.prototype.stackSize=function(){var _ref;return((_ref=this.current)!=null?_ref.stackSize():void 0)||1};StepController.prototype.pop=function(){var _ref,_ref1;return(_ref=(_ref1=this.current)!=null?_ref1.pop():void 0)!=null?_ref:false};StepController.prototype.data=function(data){data=$.extend({},this.options.data,data);return data};StepController.prototype.setCurrent=function(controller,options){var e,fn,old,_base,_base1,_ref,_ref1,_results;if(options==null){options={}}if(this.current!=null){_ref=this.bubblingEventFns;for(e in _ref){fn=_ref[e];this.current.off(e,fn)}if(typeof(_base=this.current).willDisappear==="function"){_base.willDisappear()}}old=this.current;this.current=controller;this.trigger("currentChanged",$.extend({},options,{old:old}));this.trigger("buttonsChanged",{type:options.type});this.trigger("footerViewChanged");this.trigger("stackSizeChanged");if(typeof(_base1=this.current).willAppear==="function"){_base1.willAppear()}_ref1=this.bubblingEventFns;_results=[];for(e in _ref1){fn=_ref1[e];_results.push(this.current.on(e,fn))}return _results};StepController.prototype.bubblingEvents=function(){return["push","pop","submit","success","invalid","error","buttonsChanged","displayLegalLinks","stackSizeChanged","token"]};return StepController}(Controller);module.exports=StepController}).call(this)}});StripeCheckout.require.define({"inner/lib/animation/navigationAnimationHelper":function(exports,require,module){(function(){var animateShow,helpers,navigationAnimationHelper,oppositeDirection,propertiesForNewSubview,propertiesForOldSubview,support;helpers=require("lib/helpers");support=require("lib/support");navigationAnimationHelper={};navigationAnimationHelper.animate=function(viewA,viewB,options){if(options==null){options={}}if(options.transition==null){options.transition="slide"}if(options.direction==null){options.direction="push"}if(options.animated==null){options.animated=true}if(options.delay==null){options.delay=0}if(viewA!=null){viewA.$el.redraw();viewA.$el.addClass("animating");setTimeout(function(){return viewA.$el.gfx(propertiesForOldSubview(options),$.extend({},options,{complete:function(){return viewA.$el.removeClass("animating")}}))},10)}return setTimeout(function(){return animateShow(viewB,options)},options.delay)};animateShow=function(subview,options){var $el;if(options==null){options={}}$el=subview.$el;$el.addClass("animating");if(options.animated&&support.transitions()){$el.transform(propertiesForOldSubview($.extend({},options,{direction:oppositeDirection(options.direction)})))}$el.redraw();return setTimeout(function(){return $el.gfx(propertiesForNewSubview(options),{duration:options.duration,easing:options.easing,animated:options.animated,complete:function(){$el.css("overflow","inherit");$el.removeClass("animating");if(typeof options.complete==="function"){options.complete()}if(helpers.isAndroidDevice()){return setTimeout($el.redraw,100)}}})},10)};propertiesForOldSubview=function(options){var properties;if(options==null){options={}}properties={};if(options.transition==="slide"){properties.translateX=options.direction==="push"?"-100%":"100%"}else if(options.transition==="shortSlide"){properties.opacity=0;properties.translateX=options.direction==="push"?-25:25}else if(options.transition==="scale"){properties.opacity=0;properties.scale=options.direction==="push"?1.2:.8}return properties};propertiesForNewSubview=function(options){var properties;if(options==null){options={}}properties={};if(options.transition==="slide"){properties.translateX=0}else if(options.transition==="shortSlide"){properties.opacity=1;properties.translateX=0}else if(options.transition==="scale"){properties.opacity=1;properties.scale=1}return properties};oppositeDirection=function(direction){if(direction==="push"){return"pop"}return"push"};module.exports=navigationAnimationHelper}).call(this)}});StripeCheckout.require.define({"inner/lib/animation/rowsAnimationHelper":function(exports,require,module){(function(){var helpers,rowsAnimationHelper;helpers=require("lib/helpers");rowsAnimationHelper={};rowsAnimationHelper.hide=function(views){var view,_i,_len,_results;_results=[];for(_i=0,_len=views.length;_i<_len;_i++){view=views[_i];_results.push(view.$el.transform({opacity:0,translateY:46}))}return _results};rowsAnimationHelper.show=function(views){return rowsAnimationHelper.scrollTo(views,0)};rowsAnimationHelper.scrollTo=function(views,offset,options){var cancelled,delay,delayInterval,index,view,_fn,_i,_len;if(options==null){options={}}if(options.reverse==null){options.reverse=false}if(options.viewsToHide==null){options.viewsToHide=[]}if(options.reverse){views=views.reverse()}index=0;delayInterval=50;cancelled=false;_fn=function(view){var visible;visible=options.viewsToHide.indexOf(view)===-1;return setTimeout(function(){if(cancelled){return}return view.$el.gfx({opacity:visible?1:0,translateY:offset},{easing:"cubic-bezier(.15,1.45,.55,1)",duration:550,complete:function(){if(cancelled){return}if(!visible){return view.hide()}}})},delay)};for(_i=0,_len=views.length;_i<_len;_i++){view=views[_i];delay=index*delayInterval;view.show().redraw();_fn(view);index+=1}return{cancel:function(){return cancelled=true}}};module.exports=rowsAnimationHelper}).call(this)}});StripeCheckout.require.define({"inner/lib/easingCurves":function(exports,require,module){(function(){module.exports.LAZY_BOUNCE="cubic-bezier(.15,1.45,.55,1)";module.exports.BOUNCING="cubic-bezier(.41,1.34,.51,1.01)";module.exports.HARD_BOUNCING="cubic-bezier(.35,1.83,.62,1)";module.exports.FLAG_EASING="cubic-bezier(.455, .03, .515, .955)";module.exports.CONTROLLER_EASING="cubic-bezier(.52,0,.27,1.01)"}).call(this)}});StripeCheckout.require.define({"inner/lib/emailDomains":function(exports,require,module){(function(){module.exports=["gmail.com","hotmail.com","yahoo.com","live.com","aol.com","hotmail.co.uk","mail.ru","naver.com","me.com","comcast.net","outlook.com","yandex.ru","msn.com","hotmail.fr","yahoo.co.uk","googlemail.com","live.co.uk","ymail.com","mac.com","icloud.com","sbcglobal.net","live.dk","seznam.cz","btinternet.com"]}).call(this)}});(function(){(function(){var keyword,keywords,_i,_len,_results;keywords="header nav section article aside footer hgroup".split(" ");_results=[];for(_i=0,_len=keywords.length;_i<_len;_i++){keyword=keywords[_i];_results.push(document.createElement(keyword))}return _results})()}).call(this);StripeCheckout.require.define({"inner/lib/payment/alipayPaymentHelper":function(exports,require,module){(function(){var API,addressHelper,alipayPaymentHelper,geolocation,tracker,variants,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i}return-1};API=require("lib/api");geolocation=require("lib/geolocation");addressHelper=require("lib/addressHelper");variants=require("lib/variants");tracker=require("lib/tracker");alipayPaymentHelper={};alipayPaymentHelper.shouldDisplayAlipay=function(){var countryCode,holdout,language,navigator,shouldDisplay,_ref,_ref1,_ref2;navigator=window.navigator;language=(_ref=(_ref1=(_ref2=navigator.languages)!=null?_ref2[0]:void 0)!=null?_ref1:navigator.language)!=null?_ref:navigator.userLanguage;countryCode=geolocation.countryCode;holdout=variants.isActiveVariant("alipay","holdout");shouldDisplay=countryCode==="CN"||language.match(/zh/i)!=null;tracker.state.setAlipayShouldDisplay(shouldDisplay);return shouldDisplay&&!holdout};alipayPaymentHelper.sendSMS=function(userId,options){var a,defer,params,parsedURL,promise,_ref,_ref1;if(options==null){options={}}params={alipay_username:userId,reusable:(_ref=options.alipayReusable)!=null?_ref:false};if(!options.alipayReusable){params.amount=options.amount;params.currency=(_ref1=options.currency)!=null?_ref1:"usd"}if(__indexOf.call(window,"URL")>=0){parsedURL=new URL(options.url);params.description_in_sms=parsedURL.hostname}else{a=document.createElement("a");a.href=options.url;params.description_in_sms=a.hostname}if(options.description!=null){params.description_in_sms+=": "+options.description}else if(options.name!=null){params.description_in_sms+=": "+options.name}defer=$.Deferred();promise=API.stripeRequest({url:"/alipay/send_sms",data:params,method:"POST"});promise.done(defer.resolve);promise.fail(function(_this){return function(response,status){return defer.reject(response!=null?response.error:void 0,status)}}(this));return defer.promise()};alipayPaymentHelper.submit=function(fields){var defer,params,promise;defer=$.Deferred();params={email:fields.email,sms_id:fields.alipay.sms.id,user_last5:fields.alipay.id_last5,sms_verification_code:fields.alipay.code};promise=API.stripeRequest({url:"/alipay/verify_user",data:params,method:"POST"});promise.done(function(_this){return function(token){var args;args={};addressHelper.applyPrefix("billing",fields.billingAddress,args,true);addressHelper.applyPrefix("shipping",fields.shippingAddress,args,true);if(token.type==null){token.type="alipay_account"}return defer.resolve({token:token,args:args})}}(this));promise.fail(function(_this){return function(response){return defer.reject(response!=null?response.error:void 0)}}(this));return defer.promise()};module.exports=alipayPaymentHelper}).call(this)}});StripeCheckout.require.define({"inner/lib/payment/bitcoinPaymentHelper":function(exports,require,module){(function(){var API,addressHelper,bitcoinPaymentHelper;API=require("lib/api");addressHelper=require("lib/addressHelper");bitcoinPaymentHelper={};bitcoinPaymentHelper.createReceiver=function(data,options){var defer,params,_ref,_ref1;defer=$.Deferred();params={amount:options.amount,currency:(_ref=options.currency)!=null?_ref:"usd",description:(_ref1=options.description)!=null?_ref1:options.name,email:data.email,payment_user_agent:"Stripe Checkout v3",refund_mispayments:true};API.useMerchantStripeKey();Stripe.bitcoinReceiver.createReceiver(params,function(status,receiver){var receiverPaidDefer,_ref2;if(status===200){receiverPaidDefer=$.Deferred();API.useMerchantStripeKey();Stripe.bitcoinReceiver.pollReceiver(receiver.id,function(_this){return function(status,token){var args;if(status===200&&token.filled===true){args={};addressHelper.applyPrefix("billing",data.billingAddress,args,true);addressHelper.applyPrefix("shipping",data.shippingAddress,args,true);if(token.type==null){token.type="bitcoin_receiver"}return receiverPaidDefer.resolve({token:token,args:args})}}}(this));return defer.resolve(receiver,receiverPaidDefer.promise())}else{return defer.reject(receiver!=null?(_ref2=receiver.error)!=null?_ref2.message:void 0:void 0,status)}});return defer.promise()};module.exports=bitcoinPaymentHelper}).call(this)}});StripeCheckout.require.define({"inner/lib/payment/cardPaymentHelper":function(exports,require,module){(function(){var Account,CARD_VERIFICATION_RATE,cardPaymentHelper,helpers,tracker,variants;Account=require("lib/account");variants=require("lib/variants");tracker=require("lib/tracker");helpers=require("lib/helpers");CARD_VERIFICATION_RATE=.5;cardPaymentHelper={};cardPaymentHelper.submit=function(fields,options){var account,key,params,_i,_len,_ref,_ref1,_ref2,_ref3;if(options==null){options={}}params={merchantName:options.name,referrer:options.referrer,billingAddress:fields.billingAddress,shippingAddress:fields.shippingAddress};account=Account.sharedAccount();if(!account){params.card=fields.payment.card;if((_ref=fields.rememberMe)!=null?_ref.checked:void 0){params.phone=fields.rememberMe.phone}if(params.phone){params.saveAccount=true}params.verificationAllowed=true;params.forceAddressVerification=!!options.forceAddressVerification;params.pastedFields=fields.payment.pastedFields;_ref1=["email","phoneVerification","timeOpened","timeLoaded"];for(_i=0,_len=_ref1.length;_i<_len;_i++){key=_ref1[_i];params[key]=fields[key]}}else{params.account=true;params.email=account.email;params.rememberAccount=(_ref2=(_ref3=fields.rememberMe)!=null?_ref3.checked:void 0)!=null?_ref2:true;if(!fields.payment.usesAccountCard){params.card=fields.payment.card}}return Account.newToken(params).then(function(res){if(params.account){account.isNotRemembered=!params.rememberAccount}if(!options.billingAddress){delete res.args.billing_address_zip}return res})};cardPaymentHelper.isCardExpired=function(card){var currentTime,expiry;expiry=new Date(card.exp_year,card.exp_month);currentTime=new Date;expiry.setMonth(expiry.getMonth()-1);expiry.setMonth(expiry.getMonth()+1,1);return expiry<=currentTime};module.exports=cardPaymentHelper}).call(this)}});StripeCheckout.require.define({"inner/lib/popoverManager":function(exports,require,module){(function(){var PopoverView,View,appType,fastdom,helpers,popoverManager;PopoverView=require("inner/views/popoverView");View=require("lib/view");helpers=require("lib/helpers");appType=require("lib/appType");fastdom=require("vendor/fastdom");popoverManager={};popoverManager.supportPopovers=function(){return!(appType.isMobile()||appType.isTablet()&&(helpers.isSmallScreen()||helpers.isInsideFrame()))};popoverManager.openPopover=function(superView,text,options){var popoverView;if(options==null){options={}}if(popoverManager.supportPopovers()){popoverView=new PopoverView(options);popoverView.setContent(text);popoverView.on("didClick",function(){return popoverManager.closePopover(popoverView)});fastdom.write(function(){if(superView instanceof View){superView.addSubview(popoverView)}else{superView.append(popoverView.$el)}return popoverView.open()});return popoverView}else{alert(helpers.strip(text));return null}};popoverManager.closePopover=function(popoverView){return popoverView!=null?popoverView.close(function(){return popoverView.detach()}):void 0};module.exports=popoverManager}).call(this)}});StripeCheckout.require.define({"inner/lib/svgPaths":function(exports,require,module){(function(){var defaults,paths,svgPaths;defaults={desktop:{size:[30,30]},tablet:{size:[38,38]},mobile:{size:[34,34],ratio:2}};paths={email:{desktop:{path:"M1.86849119,1.00882648 C1.91231938,1.00300503 1.95704343,1 2.00247329,1 L11.9975267,1 C12.0428075,1 12.0874644,1.00306369 12.1312901,1.00899658 L7,5 L1.86849119,1.00882648 Z M1.05353134,1.67496881 C1.01882906,1.77613675 1,1.88463985 1,1.99754465 L1,9.00245535 C1,9.55338405 1.45576096,10 2.00247329,10 L11.9975267,10 C12.5511774,10 13,9.5536886 13,9.00245535 L13,1.99754465 C13,1.88482573 12.9809217,1.77647338 12.9458895,1.67541927 L7,6.29999999 L1.05353134,1.67496881 Z M2.00585866,0 C0.898053512,0 0,0.900176167 0,1.99201702 L0,9.00798298 C0,10.1081436 0.897060126,11 2.00585866,11 L11.9941413,11 C13.1019465,11 14,10.0998238 14,9.00798298 L14,1.99201702 C14,0.891856397 13.1029399,0 11.9941413,0 L2.00585866,0 Z M2.00585866,0",translate:[8,10]},tablet:{path:"M3.00253237,2.00001175 C3.00418197,2.00000392 3.00583251,2 3.00748397,2 L15.992516,2 C16.0056823,2 16.0187877,2.00024766 16.0318278,2.00073851 L9.51771117,6.45776567 L3.00253207,2.00001155 Z M2,3.81406855 L2,12.0044225 C2,12.5542648 2.44892021,13 3.00748397,13 L15.992516,13 C16.5489341,13 17,12.555163 17,12.0044225 L17,3.83830489 L9.51771117,8.95776567 L2,3.81406855 Z M1.99742191,0 C0.894276248,0 0,0.893397331 0,1.99188419 L0,13.0081158 C0,14.1082031 0.890925393,15 1.99742191,15 L17.0025781,15 C18.1057238,15 19,14.1066027 19,13.0081158 L19,1.99188419 C19,0.891796927 18.1090746,0 17.0025781,0 L1.99742191,0 Z M1.99742191,0",translate:[9,12]},mobile:{path:"M2.99649048,0 L25.0035095,0 C26.6495018,0 28,1.3437667 28,3.00138694 L28,18.9986131 C28,20.6569187 26.6584255,22 25.0035095,22 L2.99649048,22 C1.3504982,22 0,20.6562333 0,18.9986131 L0,3.00138694 C0,1.34308127 1.34157448,0 2.99649048,0 Z M2,2 L2,19.0066023 C2,19.5552407 2.44746922,20 3.00069463,20 L24.9993054,20 C25.5519738,20 26,19.5550537 26,19.0066023 L26,2 Z M3.76923077,2 L14,9 L24.2307692,2 L26,2 L26,3.08947367 L14,11.3 L2,3.08947367 L2,2 Z M3.76923077,2",translate:[18,23]}},card:{desktop:{path:"M2.00585866,0 C0.898053512,0 0,0.900176167 0,1.99201702 L0,9.00798298 C0,10.1081436 0.897060126,11 2.00585866,11 L11.9941413,11 C13.1019465,11 14,10.0998238 14,9.00798298 L14,1.99201702 C14,0.891856397 13.1029399,0 11.9941413,0 L2.00585866,0 Z M2.00247329,1 C1.44882258,1 1,1.4463114 1,1.99754465 L1,9.00245535 C1,9.55338405 1.45576096,10 2.00247329,10 L11.9975267,10 C12.5511774,10 13,9.5536886 13,9.00245535 L13,1.99754465 C13,1.44661595 12.544239,1 11.9975267,1 L2.00247329,1 Z M1,3 L1,5 L13,5 L13,3 L1,3 Z M11,8 L11,9 L12,9 L12,8 L11,8 Z M9,8 L9,9 L10,9 L10,8 L9,8 Z M9,8",translate:[8,10]},tablet:{path:"M1.99742191,0 C0.894276248,0 0,0.893397331 0,1.99188419 L0,13.0081158 C0,14.1082031 0.890925393,15 1.99742191,15 L17.0025781,15 C18.1057238,15 19,14.1066027 19,13.0081158 L19,1.99188419 C19,0.891796927 18.1090746,0 17.0025781,0 L1.99742191,0 Z M3.00748397,2 C2.45106594,2 2,2.44483697 2,2.9955775 L2,12.0044225 C2,12.5542648 2.44892021,13 3.00748397,13 L15.992516,13 C16.5489341,13 17,12.555163 17,12.0044225 L17,2.9955775 C17,2.44573523 16.5510798,2 15.992516,2 L3.00748397,2 Z M2,4 L2,6 L17,6 L17,4 L2,4 Z M14,10 L14,12 L16,12 L16,10 L14,10 Z M11,10 L11,12 L13,12 L13,10 L11,10 Z M11,10",translate:[9,12]},mobile:{path:"M3.00069463,2 C2.44802625,2 2,2.44494629 2,2.99339768 L2,19.0066023 C2,19.5552407 2.44746922,20 3.00069463,20 L24.9993054,20 C25.5519738,20 26,19.5550537 26,19.0066023 L26,2.99339768 C26,2.44475929 25.5525308,2 24.9993054,2 Z M2.99649048,0 L25.0035095,0 C26.6495018,0 28,1.3437667 28,3.00138694 L28,18.9986131 C28,20.6569187 26.6584255,22 25.0035095,22 L2.99649048,22 C1.3504982,22 0,20.6562333 0,18.9986131 L0,3.00138694 C0,1.34308127 1.34157448,0 2.99649048,0 Z M20,16 L24,16 L24,18 L20,18 Z M14,16 L18,16 L18,18 L14,18 Z M2,5 L2,8 L26,8 L26,5 L2,5 Z M2,5",translate:[18,23]}},lock:{desktop:{path:"M8.8,4 C8.8,1.79086089 7.76640339,4.18628304e-07 5.5,0 C3.23359661,-4.1480896e-07 2.2,1.79086089 2.2,4 L3.2,4 C3.2,2.34314567 3.81102123,0.999999681 5.5,1 C7.18897877,1.00000032 7.80000001,2.34314567 7.80000001,4 L8.8,4 Z M1.99201702,4 C0.891856397,4 0,4.88670635 0,5.99810135 L0,10.0018986 C0,11.1054196 0.900176167,12 1.99201702,12 L9.00798298,12 C10.1081436,12 11,11.1132936 11,10.0018986 L11,5.99810135 C11,4.89458045 10.0998238,4 9.00798298,4 L1.99201702,4 Z M1.99754465,5 C1.44661595,5 1,5.45097518 1,5.99077797 L1,10.009222 C1,10.5564136 1.4463114,11 1.99754465,11 L9.00245535,11 C9.55338405,11 10,10.5490248 10,10.009222 L10,5.99077797 C10,5.44358641 9.5536886,5 9.00245535,5 L1.99754465,5 Z M1.99754465,5",translate:[9,9]},tablet:{path:"M14.9239548,7 C14.9739678,6.67479153 15,6.34071221 15,6 C15,2.68629134 12.5375663,0 9.5,0 C6.46243373,0 4,2.68629134 4,6 C4,6.34071221 4.02603223,6.67479153 4.07604523,7 L4.00012623,7 C2.34320226,7 1,8.34226429 1,9.99878564 L1,17.0012144 C1,18.6573979 2.33396149,20 4.00012623,20 L14.9998738,20 C16.6567977,20 18,18.6577357 18,17.0012144 L18,9.99878564 C18,8.34260206 16.6660385,7 14.9998738,7 L14.9239548,7 L14.9239548,7 Z M6.11026529,7 C6.03828387,6.68038008 6,6.34529957 6,6 C6,3.79086089 7.56700328,2 9.5,2 C11.4329967,2 13,3.79086089 13,6 C13,6.34529957 12.9617161,6.68038008 12.8897347,7 L6.11026529,7 L6.11026529,7 Z M3.99850233,9 C3.44704472,9 3,9.4463114 3,9.99754465 L3,17.0024554 C3,17.553384 3.44748943,18 3.99850233,18 L15.0014977,18 C15.5529553,18 16,17.5536886 16,17.0024554 L16,9.99754465 C16,9.44661595 15.5525106,9 15.0014977,9 L3.99850233,9 Z M3.99850233,9",translate:[10,8]},mobile:{path:"M12,0 C15.8581267,0 19,3.1329459 19,6.99763052 L19,10 L21.0089096,10 C22.6582294,10 24,11.3398057 24,12.9925398 L24,25.0074602 C24,26.6470745 22.6608432,28 21.0089096,28 L2.99109042,28 C1.34177063,28 0,26.6601943 0,25.0074602 L0,12.9925398 C0,11.3529255 1.33915679,10 2.99109042,10 L5,10 L5,6.99763052 C5,3.13743749 8.13400675,0 12,0 Z M12,2 C9.23857625,2 7,4.23908381 7,6.99833453 L7,10 L17,10 L17,6.99833453 C17,4.23783059 14.7558048,2 12,2 Z M2.99180311,12 C2.44404538,12 2,12.4499488 2,13.0068455 L2,24.9931545 C2,25.5492199 2.45530558,26 2.99180311,26 L21.0081969,26 C21.5559546,26 22,25.5500512 22,24.9931545 L22,13.0068455 C22,12.4507801 21.5446944,12 21.0081969,12 Z M2.99180311,12",translate:[20,20]}},calendar:{desktop:{path:"M2.0085302,1 C0.899249601,1 0,1.90017617 0,2.99201702 L0,10.007983 C0,11.1081436 0.901950359,12 2.0085302,12 L9.9914698,12 C11.1007504,12 12,11.0998238 12,10.007983 L12,2.99201702 C12,1.8918564 11.0980496,1 9.9914698,1 L2.0085302,1 Z M1.99539757,4 C1.44565467,4 1,4.43788135 1,5.00292933 L1,9.99707067 C1,10.5509732 1.4556644,11 1.99539757,11 L10.0046024,11 C10.5543453,11 11,10.5621186 11,9.99707067 L11,5.00292933 C11,4.44902676 10.5443356,4 10.0046024,4 L1.99539757,4 Z M3,1 L3,2 L4,2 L4,1 L3,1 Z M8,1 L8,2 L9,2 L9,1 L8,1 Z M3,0 L3,1 L4,1 L4,0 L3,0 Z M8,0 L8,1 L9,1 L9,0 L8,0 Z M8,0",translate:[8,9]},tablet:{path:"M3.00012207,2 C1.3432004,2 0,3.33396149 0,5.00012623 L0,15.9998738 C0,17.6567977 1.3360431,19 3.00012207,19 L15.9998779,19 C17.6567996,19 19,17.6660385 19,15.9998738 L19,5.00012623 C19,3.34320226 17.6639569,2 15.9998779,2 L3.00012207,2 Z M3.00748397,7 C2.45106594,7 2,7.4556644 2,7.99539757 L2,16.0046024 C2,16.5543453 2.44892021,17 3.00748397,17 L15.992516,17 C16.5489341,17 17,16.5443356 17,16.0046024 L17,7.99539757 C17,7.44565467 16.5510798,7 15.992516,7 L3.00748397,7 Z M5,0 L5,2 L7,2 L7,0 L5,0 Z M12,0 L12,2 L14,2 L14,0 L12,0 Z M5,2 L5,4 L7,4 L7,2 L5,2 Z M12,2 L12,4 L14,4 L14,2 L12,2 Z M12,2",translate:[9,9]},mobile:{path:"M7,0 L9,0 L9,2 L7,2 Z M2.99649048,2 L7,2 L7,4 L9,4 L9,2 L19,2 L19,4 L21,4 L21,2 L25.0035095,2 C26.6495018,2 28,3.33915679 28,4.99109042 L28,23.0089096 C28,24.6582294 26.6584255,26 25.0035095,26 L2.99649048,26 C1.3504982,26 0,24.6608432 0,23.0089096 L0,4.99109042 C0,3.34177063 1.34157448,2 2.99649048,2 Z M19,0 L21,0 L21,2 L19,2 Z M2,7 L2,23.0000398 C2,23.5523026 2.44746922,24 3.00069463,24 L24.9993054,24 C25.5519738,24 26,23.5452911 26,23.0000398 L26,7 Z M2,7",translate:[18,22]}},phone:{desktop:{path:"M2.50700176,0 C1.12242292,0 0,1.12201312 0,2.50291944 L0,11.4970806 C0,12.8794048 1.12165891,14 2.50700176,14 L6.49299824,14 C7.87757708,14 9,12.8779869 9,11.4970806 L9,2.50291944 C9,1.1205952 7.87834109,0 6.49299824,0 L2.50700176,0 Z M2.00292933,3 C1.44902676,3 1,3.45303631 1,3.99703014 L1,10.0029699 C1,10.5536144 1.43788135,11 2.00292933,11 L6.99707067,11 C7.55097324,11 8,10.5469637 8,10.0029699 L8,3.99703014 C8,3.4463856 7.56211865,3 6.99707067,3 L2.00292933,3 Z M4,12 L4,13 L5,13 L5,12 L4,12 Z M3.5,1 L3.5,2 L5.5,2 L5.5,1 L3.5,1 Z M3.5,1",translate:[10,9]},tablet:{path:"M2.99878564,0 C1.34260206,0 0,1.3360431 0,3.00012207 L0,15.9998779 C0,17.6567996 1.34226429,19 2.99878564,19 L10.0012144,19 C11.6573979,19 13,17.6639569 13,15.9998779 L13,3.00012207 C13,1.3432004 11.6577357,0 10.0012144,0 L2.99878564,0 Z M2.99754465,3 C2.44661595,3 2,3.44748943 2,3.99850233 L2,15.0014977 C2,15.5529553 2.4463114,16 2.99754465,16 L10.0024554,16 C10.553384,16 11,15.5525106 11,15.0014977 L11,3.99850233 C11,3.44704472 10.5536886,3 10.0024554,3 L2.99754465,3 Z M6,17 L6,18 L7,18 L7,17 L6,17 Z M5.5,1 L5.5,2 L7.5,2 L7.5,1 L5.5,1 Z M5.5,1",translate:[12,10]},mobile:{path:"M19.0057979,0 C21.7627957,0 24,2.24012336 24,5.00001915 L24,28.9999809 C24,31.7573932 21.7638856,34 19.0057979,34 L4.99420208,34 C2.23720434,34 0,31.7598766 0,28.9999809 L0,5.00001915 C0,2.24260681 2.23611437,0 4.99420208,0 Z M2,5.00001915 L2,28.9999809 C2,30.6568457 3.34331197,32 4.99420208,32 L19.0057979,32 C20.6594501,32 22,30.6526814 22,28.9999809 L22,5.00001915 C22,3.34315432 20.656688,2 19.0057979,2 L4.99420208,2 C3.34054993,2 2,3.34731857 2,5.00001915 Z M16.9975267,8 C18.651018,8 20,9.34841892 20,11.0068455 L20,22.9931545 C20,24.6526442 18.6577295,26 16.9975267,26 L7.00247329,26 C5.34898202,26 4,24.6515811 4,22.9931545 L4,11.0068455 C4,9.34735582 5.34227052,8 7.00247329,8 Z M6,11.0068455 L6,22.9931545 C6,23.5492199 6.45576096,24 7.00247329,24 L16.9975267,24 C17.5511774,24 18,23.5500512 18,22.9931545 L18,11.0068455 C18,10.4507801 17.544239,10 16.9975267,10 L7.00247329,10 C6.44882258,10 6,10.4499488 6,11.0068455 Z M10,4 L14,4 L14,6 L10,6 Z M12,30.5 C11.1715728,30.5 10.5,29.8284272 10.5,29 C10.5,28.1715728 11.1715728,27.5 12,27.5 C12.8284272,27.5 13.5,28.1715728 13.5,29 C13.5,29.8284272 12.8284272,30.5 12,30.5 Z M12,30.5",translate:[20,18]}},user:{desktop:{path:"M11.996684,14 C13.0947221,14 14,13.1101744 13.9999999,12.009095 L14,11.1491834 C14.0000003,9.91850391 13.3623813,9.53591084 10.9228899,8.52151991 C9.65809648,7.99559263 9.07889982,7.67070275 9.05789428,7.60696539 C9.0285739,7.51799818 8.87779879,7.81924073 9.56596152,6.74789493 C10.1158583,5.89180439 10.4051134,4.98207687 10.4051136,3.71797921 C10.4051139,1.68118868 9.60051814,0.485608698 8.21363982,0.121696257 C7.80812531,0.0152905441 7.55676223,9.41263804e-05 6.96135352,9.42910654e-05 C5.00856522,9.483119e-05 3.52263311,1.0188016 3.5226329,3.56578315 C3.52263286,4.68755112 3.79796986,5.52392778 4.34876041,6.49138191 C4.94128002,7.53213241 4.94703121,7.54559374 4.90298986,7.76729822 C4.89714459,7.79672334 4.33356436,8.13608721 3.04999838,8.70234264 C0.704440887,9.73710414 0.00773538487,10.1871597 0.0115913123,11.4408697 C0.0122174355,11.6444427 0.0113716658,11.7911179 0.00963390836,11.8891851 C0.00814961188,11.953822 0.00814961188,11.953822 0.00838740291,11.946099 C-0.0102850819,13.0932349 0.880033796,13.9999998 1.99322919,13.9999998 L11.996684,14 Z M1.00716107,11.9956084 C1.00716107,11.9956084 1.01294346,11.8789576 1.01158658,11.4377941 C1.00719768,10.0107946 5.61918235,9.29435064 5.88382455,7.96213996 C6.14846675,6.62992931 4.52263281,5.90956861 4.5226329,3.56578323 C4.52263309,1.22199787 6.15002134,1.00009452 6.96135379,1.00009429 C7.77268624,1.00009407 9.40511407,0.941891089 9.40511362,3.71797904 C9.40511313,6.49406696 7.69616924,6.66991367 8.10814245,7.9199693 C8.52011565,9.17002493 13.0000003,9.84816832 13,11.1491833 L12.9999999,12.0090951 C13,12.5563568 12.5438559,13 11.9966841,13 L1.99322921,12.9999998 C1.43911312,12.9999998 0.998392539,12.5512468 1.00716107,11.9956084 Z M1.00716107,11.9956084",translate:[7,8]},tablet:{path:"M16.9941067,14.9905759 C16.9941069,16.6481342 15.6552951,17.99989 13.9947652,17.99989 L2.98252113,17.9998898 C1.31267569,17.9998898 -0.025938261,16.6433122 0.00038157291,14.9438472 C0.000972019909,14.9233682 0.00222274724,14.8654436 0.00344599418,14.7837654 C0.00600758959,14.6127234 0.00731859792,14.411141 0.00666711306,14.1830283 C0.00319874717,12.9685834 0.65945686,12.1047242 1.68986742,11.3879013 C2.22919324,11.0127099 2.71879505,10.7576764 3.79394891,10.2468781 C4.6681554,9.83154846 4.99716605,9.66401886 5.29580026,9.47036146 C5.42103263,9.38915115 5.4959014,9.32920063 5.51598456,9.30729373 C5.44186075,9.38814866 5.35934127,9.53599681 5.31809775,9.75958777 C5.31996773,9.74945015 5.33127908,9.77796223 4.7952518,8.76401471 C4.14393854,7.53199259 3.81029241,6.44053189 3.81029247,4.99330361 C3.81029273,1.52158852 5.8712173,7.68803261e-07 8.4522395,0 C9.1906812,-2.19957883e-07 9.52012906,0.0214489814 10.0777931,0.179034345 C12.0131891,0.725940814 13.099647,2.46453592 13.0996466,5.17086586 C13.0996463,6.78644514 12.7465653,7.98232997 12.0800726,9.09975553 C12.0080805,9.22045581 11.6027644,9.84851634 11.5779492,9.90190992 C11.6237333,9.80339853 11.6422643,9.6030111 11.6070473,9.48793179 C11.5486331,9.29705034 11.4729294,9.18533738 11.4160111,9.13027581 C11.4496284,9.16279642 11.5363956,9.22643284 11.6711173,9.30781561 C11.9754496,9.4916568 12.3206875,9.65761186 13.1453577,10.0269049 C14.2508943,10.5219718 14.7108764,10.7461078 15.2464098,11.0921644 C16.3112433,11.7802496 16.9941071,12.609496 16.9941068,13.8406041 L16.9941067,14.8626827 L16.9941067,15.0095218 C16.9941067,15.0237065 14.9941067,15.0273897 14.9941067,15.0273897 C14.9941067,15.0039179 14.9941067,14.795171 14.9941068,13.8406038 C14.9941071,12.322753 10.1408988,11.5315858 9.69459448,10.0731875 C9.24829017,8.61478928 11.099646,8.40963478 11.0996466,5.17086554 C11.0996471,1.93209626 9.33118359,1.99999974 8.4522401,2 C7.57329661,2.00000026 5.81029267,2.2588875 5.81029247,4.99330376 C5.81029237,7.72772004 7.57161247,8.56814085 7.28491675,10.1223866 C6.99822104,11.6766324 2.00190432,12.5124837 2.00665896,14.1773165 C2.0081289,14.6920072 1.99961396,14.9992534 1.99961396,14.9992534 C1.99099616,15.5589256 2.43060003,15.9998898 2.98252117,15.9998898 L13.9947652,15.99989 C14.5340472,15.99989 14.9742501,15.5677677 14.9934535,15.0273945 C14.9941067,15.0412289 16.9941067,14.9905759 16.9941067,14.9905759 Z M16.9941067,14.9905759",translate:[10,10]},mobile:{path:"M8.60479481,14.2460337 C8.63100144,13.9716264 8.50166773,13.7307325 7.62385974,12.1154563 C6.65145935,10.3261181 6.1646075,8.77681093 6.16460758,6.70393577 C6.16460794,1.95228513 8.88261733,0.000173895538 12.4323686,0.000172866953 C12.9863587,0.000172706428 13.0746856,0.00121645204 13.3721078,0.0200536625 C13.8376796,0.0495406082 14.275281,0.115159959 14.7098305,0.234614095 C17.2567653,0.934745813 18.7089494,3.19535735 18.7089488,6.9829619 C18.7089484,9.31742334 18.1971697,11.00365 17.2230449,12.5924034 C16.0433219,14.5164782 16.3080473,13.9623814 16.347074,14.0864398 C16.3156906,13.9866781 16.3028557,13.9682535 16.3443249,14.0072782 C16.472358,14.1277644 16.684019,14.2787757 16.9748685,14.4496913 C17.52657,14.7738948 18.1097826,15.0466152 19.4918914,15.6486918 C21.2138576,16.3988176 21.9275616,16.7371219 22.7184944,17.2343078 C24.1336253,18.1238691 25.0000003,19.1473368 25,20.6068363 L24.9999998,22.9568019 C25.0000001,24.662878 23.6625118,26 22.0004144,26 L2.98193379,25.9999997 C1.3112921,25.9999996 -0.0279988788,24.6259787 0.000594809943,22.9566592 C0.00305099876,22.8415964 0.00678384081,22.6425749 0.0105233871,22.3948041 C0.0175228758,21.9310395 0.0213265108,21.4965345 0.0202851386,21.1418275 C0.0160019265,19.6828748 0.855059643,18.6084432 2.23261885,17.6761971 C3.02711172,17.1385339 3.78358669,16.7552086 5.45478802,15.9828369 C6.92218565,15.3046563 7.47768407,15.0294976 8.02425126,14.6847059 C8.29813063,14.5119343 8.49283572,14.3615093 8.60479481,14.2460337 Z M22.0004144,24 C22.5610165,24 22.9999999,23.5552352 22.9999998,23.0065899 L23,20.606836 C23.0000005,18.2216419 15.1602024,16.978379 14.4392493,14.6866104 C13.7182962,12.3948417 16.708948,12.0724561 16.7089488,6.98296157 C16.7089496,1.893467 13.8522009,2.00017246 12.4323691,2.00017287 C11.0125373,2.00017328 8.16460791,2.40699609 8.16460758,6.70393593 C8.16460741,11.0008758 11.0098168,12.3215371 10.546693,14.7639233 C10.0835691,17.2063095 2.01259595,18.5197901 2.02027652,21.1359559 C2.02265105,21.9447556 2.00013929,22.9993425 2.00013929,22.9993425 C1.99083329,23.542973 2.42987795,23.9999997 2.98193383,23.9999997 Z M22.0004144,24",translate:[20,21]}},home:{mobile:{path:"M5.00441747,18 L3.0077171,18 C0.678070761,18 -0.355648147,15.5316385 1.29837242,13.8776179 L13.5902039,1.58578644 L15.0044175,0.171572875 L16.418631,1.58578644 L28.7104625,13.8776179 C30.3561305,15.5232859 29.3385825,18 27.0011178,18 L25.0044175,18 L25.0044175,24.0024554 C25.0044175,25.6597412 23.659405,27 22.0035458,27 L18.0044175,27 L16.0044175,27 L16.0044175,25 L16.0044175,22 L14.0044175,22 L14.0044175,25 L14.0044175,27 L12.0044175,27 L8.00528913,27 C6.34609449,27 5.00441747,25.6595685 5.00441747,24.0024554 Z M27.0011178,16 C27.5552249,16 27.6830674,15.6786499 27.296249,15.2918315 L15.0044175,3 L2.71258598,15.2918315 C2.32147531,15.6829422 2.45569615,16 3.0077171,16 L7.00441747,16 L7.00441747,24.0024554 C7.00441747,24.553384 7.44904833,25 8.00528913,25 L12.0044175,25 L12.0044175,20.9998075 C12.0044175,20.4437166 12.4480039,20 12.9951954,20 L17.0136395,20 C17.5534423,20 18.0044175,20.4476291 18.0044175,20.9998075 L18.0044175,25 L22.0035458,25 C22.556312,25 23.0044175,24.5536886 23.0044175,24.0024554 L23.0044175,16 Z M27.0011178,16",translate:[17,21]}},location:{desktop:{path:"M6.96835335,14.4141594 C7.14378184,14.2130951 7.33880908,13.9850182 7.54859821,13.7339676 C8.14789969,13.0167952 8.74728299,12.2571079 9.30845088,11.4862878 C10.9985122,9.16482011 12,7.25762947 12,5.80510753 C12,2.58994421 9.3050091,0 6,0 C2.6949909,0 0,2.58994421 0,5.80510753 C0,7.25762947 1.00148783,9.16482011 2.69154912,11.4862878 C3.25271701,12.2571079 3.85210031,13.0167952 4.45140179,13.7339676 C4.66119092,13.9850182 4.85621816,14.2130951 5.03164665,14.4141594 C5.13795558,14.5360035 5.2148819,14.6226158 5.25757295,14.6699269 L6,15.4927001 L6.74242705,14.6699269 C6.7851181,14.6226158 6.86204442,14.5360035 6.96835335,14.4141594 Z M5.25757295,13.3300731 C5.27604949,13.309597 5.30380421,13.278504 5.34014057,13.2373842 C3.98193439,11.6258984 1,7.854524 1,5.80510753 C1,3.15131979 3.23857611,1 6,1 C8.76142389,1 11,3.15131979 11,5.80510753 C11,7.854524 8.01806561,11.6258984 6.65985943,13.2373842 C6.69619579,13.278504 6.72395051,13.309597 6.74242705,13.3300731 L6.58151981,13.3300731 C6.22583758,13.7497221 6,14 6,14 C6,14 5.77416242,13.7497221 5.41848019,13.3300731 L5.25757295,13.3300731 Z M6,8 C7.10456955,8 8,7.10456955 8,6 C8,4.89543045 7.10456955,4 6,4 C4.89543045,4 4,4.89543045 4,6 C4,7.10456955 4.89543045,8 6,8 Z M6,7 C6.55228478,7 7,6.55228478 7,6 C7,5.44771522 6.55228478,5 6,5 C5.44771522,5 5,5.44771522 5,6 C5,6.55228478 5.44771522,7 6,7 Z M6,7",translate:[8,7]},tablet:{path:"M10.290151,19.9923334 C10.5213404,19.7257918 10.7780542,19.4237983 11.0540359,19.0915822 C11.8423527,18.1426368 12.6308281,17.1373717 13.3701969,16.1157656 C15.6542077,12.9598849 17,10.3818506 17,8.28360215 C17,3.69325822 13.1795515,0 8.5,0 C3.8204485,0 0,3.69325822 0,8.28360215 C0,10.3818506 1.3457923,12.9598849 3.62980315,16.1157656 C4.36917189,17.1373717 5.15764731,18.1426368 5.9459641,19.0915822 C6.22194578,19.4237983 6.47865958,19.7257918 6.70984902,19.9923334 C6.85065867,20.1546748 6.95321222,20.2708244 7.0112219,20.3354923 L8.5,21.9951501 L9.9887781,20.3354923 C10.0467878,20.2708244 10.1493413,20.1546748 10.290151,19.9923334 Z M7.0112219,17.6645077 C7.04535269,17.6264594 7.10670374,17.5571061 7.19219129,17.4590822 C5.29404476,15.1379907 2,10.7540735 2,8.28360215 C2,4.81326434 4.91014895,2 8.5,2 C12.0898511,2 15,4.81326434 15,8.28360215 C15,10.7540735 11.7059552,15.1379907 9.80780869,17.4590822 C9.89329626,17.5571061 9.95464731,17.6264594 9.9887781,17.6645077 L9.63905214,17.6645077 C8.96172409,18.4852799 8.5,19 8.5,19 C8.5,19 8.03827591,18.4852799 7.36094786,17.6645077 L7.0112219,17.6645077 Z M7.0112219,17.6645077 M8.5,12 C10.4329967,12 12,10.4329967 12,8.5 C12,6.56700328 10.4329967,5 8.5,5 C6.56700328,5 5,6.56700328 5,8.5 C5,10.4329967 6.56700328,12 8.5,12 Z M8.5,10 C9.32842717,10 10,9.32842717 10,8.5 C10,7.67157283 9.32842717,7 8.5,7 C7.67157283,7 7,7.67157283 7,8.5 C7,9.32842717 7.67157283,10 8.5,10 Z M8.5,10",translate:[10,8]},mobile:{path:"M12.5,0 C19.3971465,0 25,5.5225259 25,12.3494624 C25,15.4203173 22.9072725,19.5078052 19.3809093,24.475817 C18.2045527,26.133092 16.9477758,27.7668352 15.6911413,29.309184 C15.251237,29.849107 14.8423128,30.3395905 14.4745338,30.7719221 C14.2517963,31.0337546 14.0907481,31.2197302 14.0015846,31.3210768 L12.5,33.0278331 L10.9984154,31.3210768 C10.9092519,31.2197302 10.7482037,31.0337546 10.5254662,30.7719221 C10.1576872,30.3395905 9.74876299,29.849107 9.30885869,29.309184 C8.05222419,27.7668352 6.79544728,26.133092 5.61909067,24.475817 C2.09272745,19.5078052 0,15.4203173 0,12.3494624 C0,5.5225259 5.60285355,0 12.5,0 Z M12.5,17 C10.0147185,17 8,14.9852815 8,12.5 C8,10.0147185 10.0147185,8 12.5,8 C14.9852815,8 17,10.0147185 17,12.5 C17,14.9852815 14.9852815,17 12.5,17 Z M12.5,30 C12.5,30 23,18.0653129 23,12.3494624 C23,6.63361185 18.2989902,2 12.5,2 C6.70100984,2 2,6.63361185 2,12.3494624 C2,18.0653129 12.5,30 12.5,30 Z M12.5,15 C13.8807119,15 15,13.8807119 15,12.5 C15,11.1192881 13.8807119,10 12.5,10 C11.1192881,10 10,11.1192881 10,12.5 C10,13.8807119 11.1192881,15 12.5,15 Z M12.5,15",translate:[19,17]}},idCard:{desktop:{path:"M2.00585866,0 C0.898053512,0 0,0.900176167 0,1.99201702 L0,9.00798298 C0,10.1081436 0.897060126,11 2.00585866,11 L11.9941413,11 C13.1019465,11 14,10.0998238 14,9.00798298 L14,1.99201702 C14,0.891856397 13.1029399,0 11.9941413,0 L2.00585866,0 Z M2.00247329,1 C1.44882258,1 1,1.4463114 1,1.99754465 L1,9.00245535 C1,9.55338405 1.45576096,10 2.00247329,10 L11.9975267,10 C12.5511774,10 13,9.5536886 13,9.00245535 L13,1.99754465 C13,1.44661595 12.544239,1 11.9975267,1 L2.00247329,1 Z M2,4 L2,5 L6,5 L6,4 L2,4 Z M2,6 L2,7 L5,7 L5,6 L2,6 Z M8.99753986,9.0017755 C7.88934366,9.00177547 6.9979092,8.11554698 7.00000368,7.72067262 C7.00000368,7.72067262 7.00000368,7.94125538 7.00000368,7.72067262 C7.00000368,6.09558654 8.10585559,6.64895088 8.21612317,5.98284554 C8.32639076,5.31674022 8.06792976,5.45655982 8.0679298,4.28466713 C8.06792988,3.11277445 9.14101817,3.00182281 9.47907335,3.0018227 C9.81712854,3.00182259 10.9849222,2.89662321 10.984922,4.28466718 C10.9849218,5.67271115 10.6774024,5.35781773 10.8490579,5.98284554 C11.0207134,6.60787336 11.9951758,6.20581603 11.9951759,7.57636718 C11.9951758,8.71687682 11.9951759,7.57636718 11.9951759,7.57636718 C11.9951759,8.36359849 11.1005248,9.00177554 9.98860922,9.00177552 L8.99753986,9.0017755 L8.99753986,9.0017755 Z M8.9924505,8.00177551 C8.44027828,8.0017755 7.99793716,7.54563633 7.99807259,7.48104027 C7.99807259,7.48104027 7.9984118,7.62809474 7.99807259,7.48104027 C7.99697536,7.00537374 9.14997153,6.7665591 9.21613208,6.32248887 C9.28229263,5.87841865 8.87583414,5.63829842 8.87583417,4.85703663 C8.87583421,4.07577484 9.28268128,4.00180706 9.48551439,4.00180698 C9.6883475,4.00180691 10.0964545,3.98240591 10.0964543,4.90776856 C10.0964542,5.83313121 9.66921825,5.89174678 9.77221155,6.30843199 C9.87520485,6.7251172 10.995176,6.95116499 10.9951759,7.38483664 C10.9951759,7.81850829 10.9951759,7.38483664 10.9951759,7.38483664 C10.9951759,7.72556259 10.5521435,8.00177555 9.9953797,8.00177553 L8.9924505,8.00177551 L8.9924505,8.00177551 Z",translate:[8,10]},tablet:{path:"M2.00585866,0 C0.898053512,0 0,0.900176167 0,1.99201702 L0,9.00798298 C0,10.1081436 0.897060126,11 2.00585866,11 L11.9941413,11 C13.1019465,11 14,10.0998238 14,9.00798298 L14,1.99201702 C14,0.891856397 13.1029399,0 11.9941413,0 L2.00585866,0 Z M2.00247329,1 C1.44882258,1 1,1.4463114 1,1.99754465 L1,9.00245535 C1,9.55338405 1.45576096,10 2.00247329,10 L11.9975267,10 C12.5511774,10 13,9.5536886 13,9.00245535 L13,1.99754465 C13,1.44661595 12.544239,1 11.9975267,1 L2.00247329,1 Z M2,4 L2,5 L6,5 L6,4 L2,4 Z M2,6 L2,7 L5,7 L5,6 L2,6 Z M8.99753986,9.0017755 C7.88934366,9.00177547 6.9979092,8.11554698 7.00000368,7.72067262 C7.00000368,7.72067262 7.00000368,7.94125538 7.00000368,7.72067262 C7.00000368,6.09558654 8.10585559,6.64895088 8.21612317,5.98284554 C8.32639076,5.31674022 8.06792976,5.45655982 8.0679298,4.28466713 C8.06792988,3.11277445 9.14101817,3.00182281 9.47907335,3.0018227 C9.81712854,3.00182259 10.9849222,2.89662321 10.984922,4.28466718 C10.9849218,5.67271115 10.6774024,5.35781773 10.8490579,5.98284554 C11.0207134,6.60787336 11.9951758,6.20581603 11.9951759,7.57636718 C11.9951758,8.71687682 11.9951759,7.57636718 11.9951759,7.57636718 C11.9951759,8.36359849 11.1005248,9.00177554 9.98860922,9.00177552 L8.99753986,9.0017755 L8.99753986,9.0017755 Z M8.9924505,8.00177551 C8.44027828,8.0017755 7.99793716,7.54563633 7.99807259,7.48104027 C7.99807259,7.48104027 7.9984118,7.62809474 7.99807259,7.48104027 C7.99697536,7.00537374 9.14997153,6.7665591 9.21613208,6.32248887 C9.28229263,5.87841865 8.87583414,5.63829842 8.87583417,4.85703663 C8.87583421,4.07577484 9.28268128,4.00180706 9.48551439,4.00180698 C9.6883475,4.00180691 10.0964545,3.98240591 10.0964543,4.90776856 C10.0964542,5.83313121 9.66921825,5.89174678 9.77221155,6.30843199 C9.87520485,6.7251172 10.995176,6.95116499 10.9951759,7.38483664 C10.9951759,7.81850829 10.9951759,7.38483664 10.9951759,7.38483664 C10.9951759,7.72556259 10.5521435,8.00177555 9.9953797,8.00177553 L8.9924505,8.00177551 L8.9924505,8.00177551 Z",translate:[6,7],ratio:1/1.5},mobile:{path:"M2.00585866,0 C0.898053512,0 0,0.900176167 0,1.99201702 L0,9.00798298 C0,10.1081436 0.897060126,11 2.00585866,11 L11.9941413,11 C13.1019465,11 14,10.0998238 14,9.00798298 L14,1.99201702 C14,0.891856397 13.1029399,0 11.9941413,0 L2.00585866,0 Z M2.00247329,1 C1.44882258,1 1,1.4463114 1,1.99754465 L1,9.00245535 C1,9.55338405 1.45576096,10 2.00247329,10 L11.9975267,10 C12.5511774,10 13,9.5536886 13,9.00245535 L13,1.99754465 C13,1.44661595 12.544239,1 11.9975267,1 L2.00247329,1 Z M2,4 L2,5 L6,5 L6,4 L2,4 Z M2,6 L2,7 L5,7 L5,6 L2,6 Z M8.99753986,9.0017755 C7.88934366,9.00177547 6.9979092,8.11554698 7.00000368,7.72067262 C7.00000368,7.72067262 7.00000368,7.94125538 7.00000368,7.72067262 C7.00000368,6.09558654 8.10585559,6.64895088 8.21612317,5.98284554 C8.32639076,5.31674022 8.06792976,5.45655982 8.0679298,4.28466713 C8.06792988,3.11277445 9.14101817,3.00182281 9.47907335,3.0018227 C9.81712854,3.00182259 10.9849222,2.89662321 10.984922,4.28466718 C10.9849218,5.67271115 10.6774024,5.35781773 10.8490579,5.98284554 C11.0207134,6.60787336 11.9951758,6.20581603 11.9951759,7.57636718 C11.9951758,8.71687682 11.9951759,7.57636718 11.9951759,7.57636718 C11.9951759,8.36359849 11.1005248,9.00177554 9.98860922,9.00177552 L8.99753986,9.0017755 L8.99753986,9.0017755 Z M8.9924505,8.00177551 C8.44027828,8.0017755 7.99793716,7.54563633 7.99807259,7.48104027 C7.99807259,7.48104027 7.9984118,7.62809474 7.99807259,7.48104027 C7.99697536,7.00537374 9.14997153,6.7665591 9.21613208,6.32248887 C9.28229263,5.87841865 8.87583414,5.63829842 8.87583417,4.85703663 C8.87583421,4.07577484 9.28268128,4.00180706 9.48551439,4.00180698 C9.6883475,4.00180691 10.0964545,3.98240591 10.0964543,4.90776856 C10.0964542,5.83313121 9.66921825,5.89174678 9.77221155,6.30843199 C9.87520485,6.7251172 10.995176,6.95116499 10.9951759,7.38483664 C10.9951759,7.81850829 10.9951759,7.38483664 10.9951759,7.38483664 C10.9951759,7.72556259 10.5521435,8.00177555 9.9953797,8.00177553 L8.9924505,8.00177551 L8.9924505,8.00177551 Z",ratio:1,translate:[9,11.5]}},error:{mobile:{path:"M29.9966488,8.00663657 C31.6576211,8.00663657 33,9.35128272 33,11.0099878 L33,19.0032853 C33,20.6642577 31.6553538,22.0066366 29.9966488,22.0066366 L19,22.0066366 L19,28.5052791 C19,30.1721257 18.000909,30.6155554 16.7684677,29.5163511 L0.5,15.0066366 L16.7684677,0.496922087 C17.9922217,-0.594534171 19,-0.149609915 19,1.50799406 L19,8.00663657 Z M3.50474067,15.0066366 L17,27.042949 L17,22.0066366 L17,20.0066366 L19,20.0066366 L29.9966488,20.0066366 C30.5518013,20.0066366 31,19.5586716 31,19.0032853 L31,11.0099878 C31,10.4548353 30.552035,10.0066366 29.9966488,10.0066366 L19,10.0066366 L17,10.0066366 L17,8.00663657 L17,2.97032419 Z M3.50474067,15.0066366"}},amount:{desktop:{path:"M14,6.5 C14,7.06036901 13.7879869,7.56452861 13.407881,8.00419096 C13.7857989,8.44328046 14,8.94958796 14,9.5 C14,11.6723786 10.8137087,13 7,13 C3.18629134,13 0,11.6723786 0,9.5 C0,8.94958796 0.2142011,8.44328046 0.592119028,8.00419096 C0.212013089,7.56452861 0,7.06036901 0,6.5 C0,5.94958796 0.2142011,5.44328046 0.592119028,5.00419096 C0.212013089,4.56452861 0,4.06036901 0,3.5 C0,1.32762139 3.18629134,0 7,0 C10.8137087,0 14,1.32762139 14,3.5 C14,4.06036901 13.7879869,4.56452861 13.407881,5.00419096 C13.7857989,5.44328046 14,5.94958796 14,6.5 Z M1.00499829,6.39701527 C1.0016768,6.43117141 1,6.46550411 1,6.5 C1,7.88071194 3.68629134,9 7,9 C10.3137087,9 13,7.88071194 13,6.5 C13,6.46550411 12.9983232,6.43117141 12.9950017,6.39701527 C13.0636131,6.34052724 13.1289545,6.28273828 13.1908836,6.22367976 L12.6490831,5.65554531 C12.6037093,5.60285536 12.55421,5.5509844 12.5007476,5.50000004 C11.5748797,6.38295243 9.46038296,7 7,7 C4.53961704,7 2.42512032,6.38295243 1.49925241,5.50000004 C1.44578996,5.5509844 1.39629071,5.60285536 1.35091691,5.65554531 L0.809116438,6.22367976 C0.871045465,6.28273828 0.936386906,6.34052724 1.00499829,6.39701527 Z M7,1 C3.68629134,1 1,2.11928806 1,3.5 C1,4.88071194 3.68629134,6 7,6 C10.3137087,6 13,4.88071194 13,3.5 C13,2.11928806 10.3137087,1 7,1 Z M1.00499829,9.39701527 C1.0016768,9.43117141 1,9.46550411 1,9.5 C1,10.8807119 3.68629134,12 7,12 C10.3137087,12 13,10.8807119 13,9.5 C13,9.46550411 12.9983232,9.43117141 12.9950017,9.39701527 C13.0636131,9.34052724 13.1289545,9.28273828 13.1908836,9.22367976 L12.6490831,8.65554531 C12.6037093,8.60285536 12.55421,8.5509844 12.5007476,8.50000004 C11.5748797,9.38295243 9.46038296,10 7,10 C4.53961704,10 2.42512032,9.38295243 1.49925241,8.50000004 C1.44578996,8.5509844 1.39629071,8.60285536 1.35091691,8.65554531 L0.809116438,9.22367976 C0.871045465,9.28273828 0.936386906,9.34052724 1.00499829,9.39701527 Z",translate:[8,8]},tablet:{path:"M14,6.5 C14,7.06036901 13.7879869,7.56452861 13.407881,8.00419096 C13.7857989,8.44328046 14,8.94958796 14,9.5 C14,11.6723786 10.8137087,13 7,13 C3.18629134,13 0,11.6723786 0,9.5 C0,8.94958796 0.2142011,8.44328046 0.592119028,8.00419096 C0.212013089,7.56452861 0,7.06036901 0,6.5 C0,5.94958796 0.2142011,5.44328046 0.592119028,5.00419096 C0.212013089,4.56452861 0,4.06036901 0,3.5 C0,1.32762139 3.18629134,0 7,0 C10.8137087,0 14,1.32762139 14,3.5 C14,4.06036901 13.7879869,4.56452861 13.407881,5.00419096 C13.7857989,5.44328046 14,5.94958796 14,6.5 Z M1.00499829,6.39701527 C1.0016768,6.43117141 1,6.46550411 1,6.5 C1,7.88071194 3.68629134,9 7,9 C10.3137087,9 13,7.88071194 13,6.5 C13,6.46550411 12.9983232,6.43117141 12.9950017,6.39701527 C13.0636131,6.34052724 13.1289545,6.28273828 13.1908836,6.22367976 L12.6490831,5.65554531 C12.6037093,5.60285536 12.55421,5.5509844 12.5007476,5.50000004 C11.5748797,6.38295243 9.46038296,7 7,7 C4.53961704,7 2.42512032,6.38295243 1.49925241,5.50000004 C1.44578996,5.5509844 1.39629071,5.60285536 1.35091691,5.65554531 L0.809116438,6.22367976 C0.871045465,6.28273828 0.936386906,6.34052724 1.00499829,6.39701527 Z M7,1 C3.68629134,1 1,2.11928806 1,3.5 C1,4.88071194 3.68629134,6 7,6 C10.3137087,6 13,4.88071194 13,3.5 C13,2.11928806 10.3137087,1 7,1 Z M1.00499829,9.39701527 C1.0016768,9.43117141 1,9.46550411 1,9.5 C1,10.8807119 3.68629134,12 7,12 C10.3137087,12 13,10.8807119 13,9.5 C13,9.46550411 12.9983232,9.43117141 12.9950017,9.39701527 C13.0636131,9.34052724 13.1289545,9.28273828 13.1908836,9.22367976 L12.6490831,8.65554531 C12.6037093,8.60285536 12.55421,8.5509844 12.5007476,8.50000004 C11.5748797,9.38295243 9.46038296,10 7,10 C4.53961704,10 2.42512032,9.38295243 1.49925241,8.50000004 C1.44578996,8.5509844 1.39629071,8.60285536 1.35091691,8.65554531 L0.809116438,9.22367976 C0.871045465,9.28273828 0.936386906,9.34052724 1.00499829,9.39701527 Z",translate:[8,8],ratio:.8},mobile:{path:"M14,6.5 C14,7.06036901 13.7879869,7.56452861 13.407881,8.00419096 C13.7857989,8.44328046 14,8.94958796 14,9.5 C14,11.6723786 10.8137087,13 7,13 C3.18629134,13 0,11.6723786 0,9.5 C0,8.94958796 0.2142011,8.44328046 0.592119028,8.00419096 C0.212013089,7.56452861 0,7.06036901 0,6.5 C0,5.94958796 0.2142011,5.44328046 0.592119028,5.00419096 C0.212013089,4.56452861 0,4.06036901 0,3.5 C0,1.32762139 3.18629134,0 7,0 C10.8137087,0 14,1.32762139 14,3.5 C14,4.06036901 13.7879869,4.56452861 13.407881,5.00419096 C13.7857989,5.44328046 14,5.94958796 14,6.5 Z M1.00499829,6.39701527 C1.0016768,6.43117141 1,6.46550411 1,6.5 C1,7.88071194 3.68629134,9 7,9 C10.3137087,9 13,7.88071194 13,6.5 C13,6.46550411 12.9983232,6.43117141 12.9950017,6.39701527 C13.0636131,6.34052724 13.1289545,6.28273828 13.1908836,6.22367976 L12.6490831,5.65554531 C12.6037093,5.60285536 12.55421,5.5509844 12.5007476,5.50000004 C11.5748797,6.38295243 9.46038296,7 7,7 C4.53961704,7 2.42512032,6.38295243 1.49925241,5.50000004 C1.44578996,5.5509844 1.39629071,5.60285536 1.35091691,5.65554531 L0.809116438,6.22367976 C0.871045465,6.28273828 0.936386906,6.34052724 1.00499829,6.39701527 Z M7,1 C3.68629134,1 1,2.11928806 1,3.5 C1,4.88071194 3.68629134,6 7,6 C10.3137087,6 13,4.88071194 13,3.5 C13,2.11928806 10.3137087,1 7,1 Z M1.00499829,9.39701527 C1.0016768,9.43117141 1,9.46550411 1,9.5 C1,10.8807119 3.68629134,12 7,12 C10.3137087,12 13,10.8807119 13,9.5 C13,9.46550411 12.9983232,9.43117141 12.9950017,9.39701527 C13.0636131,9.34052724 13.1289545,9.28273828 13.1908836,9.22367976 L12.6490831,8.65554531 C12.6037093,8.60285536 12.55421,8.5509844 12.5007476,8.50000004 C11.5748797,9.38295243 9.46038296,10 7,10 C4.53961704,10 2.42512032,9.38295243 1.49925241,8.50000004 C1.44578996,8.5509844 1.39629071,8.60285536 1.35091691,8.65554531 L0.809116438,9.22367976 C0.871045465,9.28273828 0.936386906,9.34052724 1.00499829,9.39701527 Z",ratio:1,translate:[9.5,10.5]}}};
svgPaths={};svgPaths.TICK_ICON="M23.9907115,24.2639075 C23.9907115,24.2639075 41.4898281,3.21124413 43.969421,2.23993589 C46.4490138,1.26862748 48.5409816,3.38777367 46.7970599,6.05286814 C45.0531381,8.71796258 27.3270932,34.8593735 25.9000802,36.1721303 C24.4730672,37.4848872 22.9806144,36.5515765 22.019597,35.7446597 C21.0585797,34.9377429 13.8018705,23.0780722 13.2129109,21.8988341 C12.6239513,20.7195959 13.3635811,18.4249757 14.1340837,17.8864155 C14.9045863,17.3478553 16.7049762,17.4605618 17.8343431,18.4371138 C18.96371,19.4136658 23.9907115,24.2639075 23.9907115,24.2639075 Z M23.9907115,24.2639075";svgPaths.ERROR_CROSS_ICON="M1.42956697,0.417246329 C1.99154434,-0.144731046 2.89439774,-0.136239597 3.45649817,0.425860828 L8.5,5.46936266 L13.5435018,0.425860828 C14.1077699,-0.138407244 15.0130903,-0.140096439 15.570433,0.417246329 L16.5827537,1.42956697 C17.144731,1.99154434 17.1362396,2.89439774 16.5741392,3.45649817 L11.5306373,8.5 L16.5741392,13.5435018 C17.1384072,14.1077699 17.1400964,15.0130903 16.5827537,15.570433 L15.570433,16.5827537 C15.0084557,17.144731 14.1056023,17.1362396 13.5435018,16.5741392 L8.5,11.5306373 L3.45649817,16.5741392 C2.8922301,17.1384072 1.98690973,17.1400964 1.42956697,16.5827537 L0.417246329,15.570433 C-0.144731046,15.0084557 -0.136239597,14.1056023 0.425860828,13.5435018 L5.46936266,8.5 L0.425860828,3.45649817 C-0.138407244,2.8922301 -0.140096439,1.98690973 0.417246329,1.42956697 L1.42956697,0.417246329 Z M1.42956697,0.417246329";svgPaths.TEL_ICON="M2.50700176,0 C1.12242292,0 0,1.12201312 0,2.50291944 L0,11.4970806 C0,12.8794048 1.12165891,14 2.50700176,14 L6.49299824,14 C7.87757708,14 9,12.8779869 9,11.4970806 L9,2.50291944 C9,1.1205952 7.87834109,0 6.49299824,0 L2.50700176,0 Z M2.00292933,3 C1.44902676,3 1,3.45303631 1,3.99703014 L1,10.0029699 C1,10.5536144 1.43788135,11 2.00292933,11 L6.99707067,11 C7.55097324,11 8,10.5469637 8,10.0029699 L8,3.99703014 C8,3.4463856 7.56211865,3 6.99707067,3 L2.00292933,3 Z M4,12 L4,13 L5,13 L5,12 L4,12 Z M3.5,1 L3.5,2 L5.5,2 L5.5,1 L3.5,1 Z M3.5,1";svgPaths.getIcon=function(name,appType){var icon,type;icon=paths[name];if(icon==null){return null}if(appType.isDesktop()){type="desktop"}else if(appType.isTablet()){type="tablet"}else if(appType.isMobile()){type="mobile"}return $.extend({},defaults[type],icon[type])};module.exports=svgPaths}).call(this)}});StripeCheckout.require.define({"inner/lib/verificationHelper":function(exports,require,module){(function(){var AddressStepController,LabelView,PhoneVerificationStepController,i18n,tracker,verificationHelper;LabelView=require("inner/views/labelView");AddressStepController=require("inner/controllers/addressStepController");PhoneVerificationStepController=require("inner/controllers/phoneVerificationStepController");tracker=require("lib/tracker");i18n=require("lib/i18n");verificationHelper={};verificationHelper.shouldVerify=function(code){return code==="verification_required"};verificationHelper.getController=function(type,opts){var controller;opts.prefaceView=verificationHelper.buildPrefaceView(type);switch(type){case"phone_verification":controller=new PhoneVerificationStepController(opts);tracker.state.setPhoneVerificationShown(true);tracker.track.phoneVerificationShow();break;case"billing_verification":opts.billingAddress=true;opts.shouldHideEmailInput=true;opts.label="verifyAddress";opts.verifying=true;opts.forceAddressVerification=true;controller=new AddressStepController(opts);tracker.state.setAddressVerificationShown(true);tracker.track.addressVerificationShow()}return controller};verificationHelper.buildPrefaceView=function(type){var action,instructionAction,instructions,line1,msg;switch(type){case"phone_verification":action="phone";break;case"billing_verification":action="address"}instructionAction="<strong>"+i18n.loc("verification."+action+"Instructions.action")()+"</strong>";line1=i18n.loc("verification.instructions")({action:instructionAction});instructions=new LabelView({className:"verificationInstructions"});msg="<p>"+line1+"</p>";instructions.setText(msg);return instructions};module.exports=verificationHelper}).call(this)}});StripeCheckout.require.define({"inner/views/addressView":function(exports,require,module){(function(){var AddressAptInput,AddressAutocompleteView,AddressCityInput,AddressCountrySelectInput,AddressNameInput,AddressStreetInput,AddressView,SeparatorLineView,View,ZipCodeInput,helpers,i18n,popoverManager,support,zipCode,_,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");SeparatorLineView=require("inner/views/separatorLineView");AddressNameInput=require("inner/views/inputs/addressNameInput");AddressStreetInput=require("inner/views/inputs/addressStreetInput");AddressAptInput=require("inner/views/inputs/addressAptInput");AddressCityInput=require("inner/views/inputs/addressCityInput");AddressCountrySelectInput=require("inner/views/inputs/addressCountrySelectInput");ZipCodeInput=require("inner/views/inputs/zipCodeInput");popoverManager=require("inner/lib/popoverManager");AddressAutocompleteView=require("inner/views/inputs/addressAutocompleteView");zipCode=require("lib/zipCode");helpers=require("lib/helpers");i18n=require("lib/i18n");support=require("lib/support");_=require("vendor/lodash");AddressView=function(_super){__extends(AddressView,_super);AddressView.prototype.className="addressView";function AddressView(options){if(options==null){options={}}this.updateZipFromCountry=__bind(this.updateZipFromCountry,this);this.onAutocompleteViewVisibilityDidChange=__bind(this.onAutocompleteViewVisibilityDidChange,this);this.onAutocomplete=__bind(this.onAutocomplete,this);this.onZipDidChange=__bind(this.onZipDidChange,this);this.onCountryDidChange=__bind(this.onCountryDidChange,this);this.animatableViews=__bind(this.animatableViews,this);this.isEmpty=__bind(this.isEmpty,this);this.zipData=__bind(this.zipData,this);this.countryCode=__bind(this.countryCode,this);this.val=__bind(this.val,this);this.clear=__bind(this.clear,this);this.fill=__bind(this.fill,this);this.focus=__bind(this.focus,this);this.validate=__bind(this.validate,this);this.setInvalidField=__bind(this.setInvalidField,this);this.bindEvents=__bind(this.bindEvents,this);this.render=__bind(this.render,this);AddressView.__super__.constructor.apply(this,arguments);this.options=$.extend({},{type:"billing"},this.options);this.render();this.bindEvents();this.updateZipFromCountry()}AddressView.prototype.render=function(){var view,_i,_len,_ref;this.nameInput=new AddressNameInput($.extend({},this.options,{className:"top"}));this.streetInput=new AddressStreetInput($.extend({},this.options,{className:"middle"}));this.zipCodeInput=new ZipCodeInput($.extend({},this.options,{className:"left middle","short":true,icon:false,label:false}));this.cityInput=new AddressCityInput($.extend({},this.options,{className:"right middle"}));this.countrySelectInput=new AddressCountrySelectInput($.extend({},this.options,{className:"bottom"}));if(this.options.autocomplete){this.streetInput.setStyle("left middle");this.aptInput=new AddressAptInput($.extend({},this.options,{className:"right middle"}));this.addressAutocompleteView=new AddressAutocompleteView(this.options,this.streetInput.$input,this.onAutocomplete);this.addSubview(this.addressAutocompleteView)}this.views=[this.nameInput];if(this.options.appType.isMobile()){this.views.push(new SeparatorLineView({className:"line1"}))}this.views.push(this.streetInput);if(this.aptInput!=null){this.views.push(this.aptInput)}this.views.push(this.zipCodeInput,this.cityInput);this.views.push(this.countrySelectInput);_ref=this.views;for(_i=0,_len=_ref.length;_i<_len;_i++){view=_ref[_i];this.addSubview(view)}this.$overBorders=$("<span>").addClass("overBorders");return this.$el.append(this.$overBorders)};AddressView.prototype.bindEvents=function(){var _ref;this.zipCodeInput.on("valueDidChange",this.onZipDidChange);this.countrySelectInput.on("valueDidChange",this.onCountryDidChange);return(_ref=this.addressAutocompleteView)!=null?_ref.on("visibilityDidChange",this.onAutocompleteViewVisibilityDidChange):void 0};AddressView.prototype.setInvalidField=function(field,err){var text;if(field==="zip"){this.zipCodeInput.setInvalid(true);if(err==="incorrect_zip"){if(this.countryCode()==="US"){text=i18n.loc("error.cardAndZipDontMatch")()}else{text=i18n.loc("error.cardAndPostalDontMatch")()}popoverManager.closePopover(this.popover);return this.popover=popoverManager.openPopover(this,"<strong>"+text+"</strong>",{reversed:true})}}};AddressView.prototype.validate=function(){var input,invalid,res,_i,_j,_len,_len1,_ref;popoverManager.closePopover(this.popover);res=[];_ref=this.views;for(_i=0,_len=_ref.length;_i<_len;_i++){input=_ref[_i];if(input===this.aptInput||input.validate==null){continue}res=res.concat(input.validate())}for(_j=0,_len1=res.length;_j<_len1;_j++){invalid=res[_j];invalid.name=""+this.options.type+"Address."+invalid.name}return res};AddressView.prototype.focus=function(){var firstInvalid;firstInvalid=this.$el.find(".invalid:input:first");if(support.automaticallyGiveFocus()){if(firstInvalid.length>0){firstInvalid.focus()}else{this.nameInput.focus()}}return true};AddressView.prototype.fill=function(address){var _ref;this.nameInput.setVal(address.name);this.streetInput.setVal(address.line1);if((_ref=this.aptInput)!=null){_ref.setVal(address.apt)}this.zipCodeInput.setVal(address.zip);this.cityInput.setVal(address.city);this.stateValue=address.state;return this.countrySelectInput.setVal(address.country)};AddressView.prototype.clear=function(){var input,_i,_len,_ref,_results;_ref=this.views;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){input=_ref[_i];_results.push(typeof input.clear==="function"?input.clear():void 0)}return _results};AddressView.prototype.val=function(){var _ref,_ref1;if(this.stateValue==null){this.stateValue=(_ref=this.zipData())!=null?_ref.state:void 0}return{name:this.nameInput.val(),line1:this.streetInput.val(),zip:this.zipCodeInput.val(),state:this.stateValue,city:this.cityInput.val(),country:this.countrySelectInput.country(),country_code:this.countryCode(),apt:(_ref1=this.aptInput)!=null?_ref1.val():void 0}};AddressView.prototype.countryCode=function(){return this.countrySelectInput.countryCode()};AddressView.prototype.zipData=function(){return zipCode.getData(this.zipCodeInput.val(),this.countryCode())};AddressView.prototype.isEmpty=function(){return this.nameInput.isEmpty()&&this.streetInput.isEmpty()&&this.zipCodeInput.isEmpty()&&this.cityInput.isEmpty()};AddressView.prototype.animatableViews=function(){return _.flatten(_.map(this.views,function(view){return view.animatableViews.apply(view,arguments)}))};AddressView.prototype.onCountryDidChange=function(){this.updateZipFromCountry();return this.stateValue=null};AddressView.prototype.onZipDidChange=function(){var data;data=this.zipData();if((data!=null?data.city:void 0)&&(this.cityInput.isEmpty()||!this.cityInput.manuallyEdited)){return this.cityInput.setVal(data.city,false)}};AddressView.prototype.onAutocomplete=function(result){if(result.street){this.streetInput.setVal(result.street)}if(result.city){this.cityInput.setVal(result.city)}if(result.countryCode){this.countrySelectInput.setVal(result.countryCode)}if(result.postalCode){this.zipCodeInput.setVal(result.postalCode)}return this.updateZipFromCountry()};AddressView.prototype.onAutocompleteViewVisibilityDidChange=function(){return this.streetInput.setAutocompletingStyle(!this.addressAutocompleteView.hidden)};AddressView.prototype.updateZipFromCountry=function(){var countryCode,decal,size,width,_ref;countryCode=this.countryCode();zipCode.preloadCountry(countryCode);if((_ref=this.zipCodeInput)!=null){_ref.setCountry(countryCode)}size=Math.min(10,Math.max(7,zipCode.maximumLength(countryCode)));if(size){if(this.options.appType.isDesktop()){decal=0;width=41+size*9}else if(this.options.appType.isTablet()){decal=1;width=47+size*13}else if(this.options.appType.isMobile()){decal=0;width=101+size*15}this.zipCodeInput.$el.css("width",width+"px");return this.cityInput.$el.css("left",width-1-decal+"px")}};return AddressView}(View);module.exports=AddressView}).call(this)}});StripeCheckout.require.define({"inner/views/addressesView":function(exports,require,module){(function(){var Account,AddressView,AddressesView,ContentSwitcher,EmailInput,LabelView,LabelWithCheckbox,LayoutView,SegmentedControl,SeparatorLineView,View,delegateMethods,i18n,support,validation,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i}return-1};View=require("lib/view");LayoutView=require("inner/views/layoutView");SeparatorLineView=require("inner/views/separatorLineView");EmailInput=require("inner/views/inputs/emailInput");SegmentedControl=require("inner/views/controls/segmentedControl");ContentSwitcher=require("inner/views/contentSwitcher");AddressView=require("inner/views/addressView");LabelWithCheckbox=require("inner/views/inputs/labelWithCheckbox");LabelView=require("inner/views/labelView");Account=require("lib/account");i18n=require("lib/i18n");support=require("lib/support");delegateMethods=require("lib/delegateMethods");validation=require("lib/validation");AddressesView=function(_super){__extends(AddressesView,_super);AddressesView.prototype.className="addressesView";function AddressesView(options){if(options==null){options={}}this.setUsesAccount=__bind(this.setUsesAccount,this);this.validate=__bind(this.validate,this);this.setFormDisabled=__bind(this.setFormDisabled,this);this.handleError=__bind(this.handleError,this);this.isEmailEnabled=__bind(this.isEmailEnabled,this);this.emailVal=__bind(this.emailVal,this);this.val=__bind(this.val,this);this.isBillingAddressVisible=__bind(this.isBillingAddressVisible,this);this.isShippingAddressVisible=__bind(this.isShippingAddressVisible,this);this.segmentedControlSelectedIndexDidChange=__bind(this.segmentedControlSelectedIndexDidChange,this);this.labelWithCheckboxCheckChanged=__bind(this.labelWithCheckboxCheckChanged,this);this.bindEvents=__bind(this.bindEvents,this);this.setLabel=__bind(this.setLabel,this);this.renderAddressSelector=__bind(this.renderAddressSelector,this);this.renderBillingAddress=__bind(this.renderBillingAddress,this);this.renderShippingAddress=__bind(this.renderShippingAddress,this);this.render=__bind(this.render,this);AddressesView.__super__.constructor.call(this,options);this.setLabel(options.label);this.render();this.bindEvents()}AddressesView.prototype.render=function(){if(!this.options.shouldHideEmailInput){this.emailInput=new EmailInput({color:this.options.color,email:this.options.email,appType:this.options.appType});this.addSubview(this.emailInput);if(this.options.appType.isMobile()){this.addSubview(this.emailInputSeparatorLine=new SeparatorLineView)}}if(this.options.prefaceView!=null){this.addSubview(this.options.prefaceView)}this.address=new ContentSwitcher;if(this.isShippingAddressVisible()){this.renderShippingAddress()}if(this.isBillingAddressVisible()){this.renderBillingAddress()}if(this.isShippingAddressVisible()&&this.isBillingAddressVisible()){this.renderAddressSelector()}return this.addSubview(this.address)};AddressesView.prototype.renderShippingAddress=function(){this.shippingAddress=new AddressView({color:this.options.color,type:"shipping",appType:this.options.appType,autocomplete:this.options.autocomplete});return this.address.addSubview(this.shippingAddress)};AddressesView.prototype.renderBillingAddress=function(){this.billingAddressZIPError=new LabelView({className:"error"});this.billingAddress=new AddressView({color:this.options.color,type:"billing",appType:this.options.appType,autocomplete:this.options.autocomplete});this.address.addSubview(this.billingAddress);return this.addSubview(this.billingAddressZIPError,false)};AddressesView.prototype.renderAddressSelector=function(){this.addressSelector=new View({className:"addressSelector"});this.addressSelector.$inner=$("<div>").addClass("inner");this.addressSelector.$el.append(this.addressSelector.$inner);this.addressSegmentedControl=new SegmentedControl({items:[{label:i18n.loc("address.segmentedControl.shipping")()},{label:i18n.loc("address.segmentedControl.billing")()}]});this.addressSegmentedControl.$el.transform({opacity:0});this.addressSegmentedControl.hide();this.addressCheckbox=new LabelWithCheckbox({label:i18n.loc("checkbox.sameAddress")(),checked:true,color:this.options.color,appType:this.options.appType,className:"small",checkboxClassName:"same-address"});this.addressSelector.$inner.append(this.addressSegmentedControl.$el);this.addressSelector.$inner.append(this.addressCheckbox.$el);this.addSubview(this.addressSelector);if(this.options.appType.isMobile()){return this.addSubview(new SeparatorLineView)}};AddressesView.prototype.setLabel=function(submitLabel){if(submitLabel==null){submitLabel="paymentInfo"}switch(submitLabel){case"paymentInfo":return this.label=i18n.loc("button.paymentInfo")();case"verifyAddress":return this.label=i18n.loc("button.verifyAddress")()}};AddressesView.prototype.bindEvents=function(){if(this.addressSegmentedControl){this.addressSegmentedControl.on("selectedIndexDidChange",this.segmentedControlSelectedIndexDidChange)}if(this.addressCheckbox){return this.addressCheckbox.on("checkedDidChange",this.labelWithCheckboxCheckChanged)}};AddressesView.prototype.buttons=function(){return{submit:{label:this.label,className:"iconContinue"}}};AddressesView.prototype.labelWithCheckboxCheckChanged=function(){if(this.addressCheckbox.isChecked()){return}if(this.billingAddress.isEmpty()){this.billingAddress.fill(this.shippingAddress.val())}return setTimeout(function(_this){return function(){_this.addressCheckbox.$el.gfx({opacity:0},{duration:350,easing:"ease-in-out",complete:function(){return _this.addressCheckbox.hide()}});_this.addressSegmentedControl.show();_this.addressSegmentedControl.redraw();return _this.addressSegmentedControl.$el.gfx({opacity:1},{duration:350,easing:"ease-in-out"})}}(this),50)};AddressesView.prototype.segmentedControlSelectedIndexDidChange=function(){var addressView;addressView=[this.shippingAddress,this.billingAddress][this.addressSegmentedControl.selectedIndex];return this.address.setSelectedSubview(addressView,{complete:function(){return addressView.focus()}})};AddressesView.prototype.isShippingAddressVisible=function(){return this.options.shippingAddress};AddressesView.prototype.isBillingAddressVisible=function(){return this.options.billingAddress};AddressesView.prototype.val=function(){var res,_ref,_ref1,_ref2,_ref3;res={shippingAddress:(_ref=this.shippingAddress)!=null?_ref.val():void 0,email:this.emailVal()};if((_ref1=this.addressCheckbox)!=null?_ref1.isChecked():void 0){res.billingAddress=(_ref2=this.shippingAddress)!=null?_ref2.val():void 0}else{res.billingAddress=(_ref3=this.billingAddress)!=null?_ref3.val():void 0}return res};AddressesView.prototype.emailVal=function(){var _ref;if(this.isEmailEnabled()){return this.emailInput.val()}else{return this.options.email||((_ref=Account.sharedAccount())!=null?_ref.email:void 0)}};AddressesView.prototype.isEmailEnabled=function(){return this.emailInput!=null&&this.isSubviewVisible(this.emailInput)};AddressesView.prototype.handleError=function(err){var errorString;if(err.code!=="incorrect_zip"){return false}if(!this.billingAddressZIPError){return false}if(this.billingAddress.countryCode()==="US"){errorString=i18n.loc("error.cardAndZipDontMatch")()}else{errorString=i18n.loc("error.cardAndPostalDontMatch")()}this.billingAddress.setInvalidField("zip");if(this.options.appType.isDesktop()){this.billingAddressZIPError.setText(errorString);this.setSubviewAsVisible(this.billingAddressZIPError,true)}else{alert(errorString)}return true};AddressesView.prototype.setFormDisabled=function(disabled){var field,_i,_len,_ref,_results;_ref=[this.emailInput,this.billingAddress,this.shippingAddress];_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){field=_ref[_i];_results.push(field!=null?typeof field.setDisabled==="function"?field.setDisabled(disabled):void 0:void 0)}return _results};AddressesView.prototype.validate=function(){var invalidFields,invalidNames,selectedIndex,validateField,_ref,_ref1,_ref2;invalidFields=[];invalidNames=[];validateField=function(field){var invalid;if(field==null){return}invalid=field.validate();if(invalid.length){invalidFields.push(field);return invalidNames=invalidNames.concat(invalid)}};if(this.isEmailEnabled()){validateField(this.emailInput)}validateField(this.shippingAddress);if(!((_ref=this.addressCheckbox)!=null?_ref.isChecked():void 0)){validateField(this.billingAddress)}if(this.addressCheckbox&&!this.addressCheckbox.isChecked()){if(_ref1=this.shippingAddress,__indexOf.call(invalidFields,_ref1)>=0){selectedIndex=0}else if(_ref2=this.billingAddress,__indexOf.call(invalidFields,_ref2)>=0){selectedIndex=1}}if(selectedIndex!=null&&selectedIndex!==this.addressSegmentedControl.selectedIndex){this.addressSegmentedControl.setSelectedIndex(selectedIndex)}return invalidNames};AddressesView.prototype.setUsesAccount=function(account,options){var addr,visible,_ref,_ref1,_ref2,_ref3;if(options==null){options={}}if(options.animated==null){options.animated=true}visible=!account&&!this.options.shouldHideEmailInput;this.setSubviewAsVisible(this.emailInput,visible);this.setSubviewAsVisible(this.emailInputSeparatorLine,visible);this.layout(options);if(account!=null){addr={name:account.billing_name,line1:account.billing_address_line1,apt:account.billing_address_apt,zip:account.billing_address_zip,state:account.billing_address_state,city:account.billing_address_city,country:account.billing_address_country_code||account.billing_address_country};if((_ref=this.billingAddress)!=null){_ref.fill(addr)}return(_ref1=this.shippingAddress)!=null?_ref1.fill(addr):void 0}else{if((_ref2=this.billingAddress)!=null){_ref2.clear()}return(_ref3=this.shippingAddress)!=null?_ref3.clear():void 0}};return AddressesView}(LayoutView);module.exports=AddressesView}).call(this)}});StripeCheckout.require.define({"inner/views/appView":function(exports,require,module){(function(){var AppView,View,helpers,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");helpers=require("lib/helpers");AppView=function(_super){__extends(AppView,_super);AppView.prototype.className="appView";function AppView(){this.setAppType=__bind(this.setAppType,this);var iOSVersion,ieVersion;AppView.__super__.constructor.apply(this,arguments);ieVersion=helpers.ieVersion();iOSVersion=helpers.iOSVersion();if(ieVersion){this.$el.addClass("ie"+ieVersion)}else if(iOSVersion){this.$el.addClass("iOS"+iOSVersion)}if(helpers.isiOSChrome()){this.$el.addClass("chromeiOS")}if(helpers.isInsideFrame()){this.$el.addClass("iframe")}else{this.$el.addClass("tab")}}AppView.prototype.setAppType=function(appType){this.appType=appType;return this.$el.addClass(this.appType.types.join(" "))};return AppView}(View);module.exports=AppView}).call(this)}});StripeCheckout.require.define({"inner/views/backgroundView":function(exports,require,module){(function(){var BackgroundView,MAX_HEIGHT,View,easingCurves,fastdom,support,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");easingCurves=require("inner/lib/easingCurves");fastdom=require("vendor/fastdom");support=require("lib/support");MAX_HEIGHT=900;BackgroundView=function(_super){__extends(BackgroundView,_super);BackgroundView.prototype.className="backgroundView";function BackgroundView(options){this.options=options!=null?options:{};this.offset=__bind(this.offset,this);this.height=__bind(this.height,this);this.updateHeight=__bind(this.updateHeight,this);this.setHeight=__bind(this.setHeight,this);this.render=__bind(this.render,this);BackgroundView.__super__.constructor.apply(this,arguments);if(this.options.gradient){this.$el.addClass("gradient")}this.render()}BackgroundView.prototype.render=function(){this.$top=$("<div>");this.$top.addClass("backgroundTop");this.$innerTop=$("<div>");this.$top.append(this.$innerTop);this.$bottom=$("<div>");this.$bottom.addClass("backgroundBottom");this.$innerBottom=$("<div>");this.$bottom.append(this.$innerBottom);this.$bottom.css("height",MAX_HEIGHT);this.$innerBottom.css("height",MAX_HEIGHT+50);if(!support.transform()){this.$el.css("position","absolute")}this.$el.append(this.$top);return this.$el.append(this.$bottom)};BackgroundView.prototype.setHeight=function(height,animated,callback){var offset,oldHeight;if(animated==null){animated=false}if(callback==null){callback=null}oldHeight=this._height;this._height=height;offset=support.transform()?0:-this.offset();return fastdom.write(function(_this){return function(){_this.$innerBottom.gfx({translateY:_this._height-MAX_HEIGHT+offset+"px"},{duration:400,easing:easingCurves.BOUNCING,animated:animated,transformFallbackKeys:{translateY:"top"},complete:function(){_this.updateHeight();return typeof callback==="function"?callback():void 0}});if(!oldHeight||oldHeight<_this._height){_this.updateHeight();return typeof callback==="function"?callback():void 0}}}(this))};BackgroundView.prototype.updateHeight=function(){return this.$el.css("height",this._height+this.offset())};BackgroundView.prototype.height=function(){return this._height};BackgroundView.prototype.offset=function(){if(this.options.appType.isTablet()){return 10}else{return 230}};return BackgroundView}(View);module.exports=BackgroundView}).call(this)}});StripeCheckout.require.define({"inner/views/bitcoinAddressView":function(exports,require,module){(function(){var ActionButton,BitcoinAddressView,BitcoinLoadingView,Svg,Tick,View,formatting,i18n,svgPaths,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");Svg=require("inner/views/svg/svg");Tick=require("inner/views/svg/tick");BitcoinLoadingView=require("inner/views/bitcoinLoadingView");ActionButton=require("inner/views/controls/actionButton");i18n=require("lib/i18n");formatting=require("lib/formatting");svgPaths=require("inner/lib/svgPaths");BitcoinAddressView=function(_super){__extends(BitcoinAddressView,_super);BitcoinAddressView.prototype.className="bitcoinAddressView";function BitcoinAddressView(){this.onGenerateButtonDidClick=__bind(this.onGenerateButtonDidClick,this);this.onOpenWalletButtonDidClick=__bind(this.onOpenWalletButtonDidClick,this);this.onScanButtonDidClick=__bind(this.onScanButtonDidClick,this);this.setExpired=__bind(this.setExpired,this);this.setAddressVisible=__bind(this.setAddressVisible,this);this.qrCodePlaceholderEl=__bind(this.qrCodePlaceholderEl,this);this.showSuccess=__bind(this.showSuccess,this);this.showExpired=__bind(this.showExpired,this);this.start=__bind(this.start,this);this.setAddress=__bind(this.setAddress,this);this.setAmount=__bind(this.setAmount,this);this.bindEvents=__bind(this.bindEvents,this);this.render=__bind(this.render,this);BitcoinAddressView.__super__.constructor.apply(this,arguments);this.render();this.bindEvents()}BitcoinAddressView.prototype.render=function(){this.$amount=$("<div>").addClass("amount");this.$arrow=$("<span>").addClass("arrow");this.$arrowContainer=$("<span>").addClass("arrowContainer");this.$amount.append(this.$arrowContainer.append(this.$arrow));this.amountIcon=new Svg($.extend({},svgPaths.getIcon("amount",this.options.appType),{color:this.options.color.css(),className:"icon"}));this.$amount.append(this.amountIcon.$el);this.$amount.append($("<span>").addClass("btcPrice"));this.$amount.append($("<span>").addClass("originalPrice"));this.$addressContainer=$("<div>").addClass("addressContainer");this.$address=$("<div>").addClass("address");this.$addressContainer.append(this.$address);this.$stringAddress=$("<p>").addClass("stringAddress");this.$stringAddress.append($("<span>"));this.$address.append(this.$stringAddress);this.$buttons=$("<div>").addClass("buttons");this.$address.append(this.$buttons);this.$openWalletButton=$("<a>").addClass("openWalletButton");this.$openWalletButton.append($("<span>").text(i18n.loc("bitcoin.button.openWallet")()));this.$buttons.append(this.$openWalletButton);this.$scanButton=$("<a>").addClass("scanButton");this.$scanButton.append($("<span>").text(i18n.loc("bitcoin.button.scan")()));this.$scanButton.append($("<span>").addClass("qrCode"));this.$buttons.append(this.$scanButton);this.tick=new Tick({style:Tick.styles.CIRCLE,appType:this.options.appType,className:"bitcoinSuccessTick"});this.$amount.append(this.tick.$el);this.loadingView=new BitcoinLoadingView(this.options);this.$amount.append(this.loadingView.$el);this.generateButton=new ActionButton($.extend({},this.options,{label:i18n.loc("bitcoin.button.generate")()}));this.$el.append(this.$amount);return this.$el.append(this.$addressContainer)};BitcoinAddressView.prototype.bindEvents=function(){this.$scanButton.on("click",this.onScanButtonDidClick);this.$openWalletButton.on("click",this.onOpenWalletButtonDidClick);return this.generateButton.on("click",this.onGenerateButtonDidClick)};BitcoinAddressView.prototype.setAmount=function(amount){this.amount=amount};BitcoinAddressView.prototype.setAddress=function(address){this.address=address};BitcoinAddressView.prototype.start=function(expirationDate){this.setExpired(false);return this.loadingView.start(expirationDate)};BitcoinAddressView.prototype.showExpired=function(){return this.setExpired(true)};BitcoinAddressView.prototype.showSuccess=function(){this.setAddressVisible(false);this.loadingView.stop();this.tick.show();return this.trigger("success")};BitcoinAddressView.prototype.qrCodePlaceholderEl=function(){return this.$scanButton.find("span.qrCode")};BitcoinAddressView.prototype.setAddressVisible=function(visible,options){if(options==null){options={}}if(options.animated==null){options.animated=true}if(visible){this.$el.removeClass("withoutAddress");this.$address.show()}else{this.$el.addClass("withoutAddress");this.$addressContainer.addClass("hidden")}this.$arrow.gfx({translateY:visible?0:-this.$arrow.height()},{duration:300,easing:"ease-in-out",animated:options.animated});this.$address.gfx({translateY:visible?0:-(this.$address.height()+parseInt(this.$amount.css("borderBottomWidth"),10))},{duration:300,easing:"ease-in-out",animated:options.animated,complete:function(_this){return function(){if(!visible){_this.$address.hide()}if(visible){return _this.$addressContainer.removeClass("hidden")}}}(this)});return this.trigger("didResize")};BitcoinAddressView.prototype.setExpired=function(expired){var btcAmount,originalAmount;originalAmount=formatting.formatLabelSafe("{{amount}}",this.options.amount,this.options.currency);
this.setAddressVisible(!expired);if(expired){this.$amount.find("span.btcPrice").text("");this.$amount.find("span.originalPrice").text(originalAmount);this.addSubview(this.generateButton);return this.trigger("expired")}else{btcAmount=this.amount/1e8;this.$amount.find("span.btcPrice").text(""+btcAmount+" BTC");this.$amount.find("span.originalPrice").text(" ("+originalAmount+")");this.$stringAddress.find("span").text(this.address);this.generateButton.detach();return this.trigger("waitingBitcoins")}};BitcoinAddressView.prototype.onScanButtonDidClick=function(){return this.trigger("scanDidClick")};BitcoinAddressView.prototype.onOpenWalletButtonDidClick=function(){return this.trigger("openWalletDidClick")};BitcoinAddressView.prototype.onGenerateButtonDidClick=function(){this.generateButton.setLoading(true);return this.trigger("generateReceiver",{done:function(_this){return function(){return _this.generateButton.setLoading(false)}}(this),fail:function(_this){return function(){_this.generateButton.setLoading(false);return alert("error!")}}(this)})};return BitcoinAddressView}(View);module.exports=BitcoinAddressView}).call(this)}});StripeCheckout.require.define({"inner/views/bitcoinLoadingView":function(exports,require,module){(function(){var BitcoinLoadingView,LoadingView,View,i18n,popoverManager,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");LoadingView=require("inner/views/loadingView");popoverManager=require("inner/lib/popoverManager");i18n=require("lib/i18n");BitcoinLoadingView=function(_super){__extends(BitcoinLoadingView,_super);BitcoinLoadingView.prototype.className="bitcoinLoadingView";function BitcoinLoadingView(){this.onLoadingViewDidMouseOut=__bind(this.onLoadingViewDidMouseOut,this);this.onLoadingViewDidMouseOver=__bind(this.onLoadingViewDidMouseOver,this);this.minutesLeft=__bind(this.minutesLeft,this);this.countingTimeTick=__bind(this.countingTimeTick,this);this.stop=__bind(this.stop,this);this.start=__bind(this.start,this);this.bindEvents=__bind(this.bindEvents,this);this.render=__bind(this.render,this);BitcoinLoadingView.__super__.constructor.apply(this,arguments);this.render();this.bindEvents()}BitcoinLoadingView.prototype.render=function(){this.loadingView=new LoadingView;this.loadingView.hide();return this.addSubview(this.loadingView)};BitcoinLoadingView.prototype.bindEvents=function(){this.loadingView.on("didMouseOver",this.onLoadingViewDidMouseOver);return this.loadingView.on("didMouseOut",this.onLoadingViewDidMouseOut)};BitcoinLoadingView.prototype.start=function(expirationDate){this.loadingView.setValue(0);this.startTime=(new Date).getTime();this.endTime=expirationDate.getTime();this.showLoadingAtTime=(this.endTime-this.startTime)/2+this.startTime;clearInterval(this.countingTimeInterval);return this.countingTimeInterval=setInterval(this.countingTimeTick,1e3)};BitcoinLoadingView.prototype.stop=function(){clearInterval(this.countingTimeInterval);this.loadingView.setValue(0);return this.loadingView.hide()};BitcoinLoadingView.prototype.countingTimeTick=function(){var currentTime,progress;currentTime=(new Date).getTime();if(currentTime<this.showLoadingAtTime){return}this.loadingView.show();progress=(currentTime-this.startTime)/(this.endTime-this.startTime);this.loadingView.setValue(progress);if(this.minutesLeft()<=0){this.loadingView.hide();return this.stop()}};BitcoinLoadingView.prototype.minutesLeft=function(){var currentTime;currentTime=(new Date).getTime();return Math.ceil((this.endTime-currentTime)/1e3/60)};BitcoinLoadingView.prototype.onLoadingViewDidMouseOver=function(){var minutesLeft;minutesLeft=this.minutesLeft();return this.popover=popoverManager.openPopover(this,i18n.loc("bitcoin.timeout")({minutes:"<strong>"+i18n.loc("bitcoin.timeout.minutes")({minutes:minutesLeft})+"</strong>"}))};BitcoinLoadingView.prototype.onLoadingViewDidMouseOut=function(){popoverManager.closePopover(this.popover);return this.popover=null};return BitcoinLoadingView}(View);module.exports=BitcoinLoadingView}).call(this)}});StripeCheckout.require.define({"inner/views/brandingLogoView":function(exports,require,module){(function(){var BrandingLogoView,View,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");BrandingLogoView=function(_super){__extends(BrandingLogoView,_super);BrandingLogoView.prototype.className="brandingLogoView";function BrandingLogoView(){this.render=__bind(this.render,this);BrandingLogoView.__super__.constructor.apply(this,arguments);this.render()}BrandingLogoView.prototype.render=function(){this.$content=$('<a class="poweredStripe" href="/-/powered-by" target="_blank" tabindex="-1"></a>');return this.$el.append(this.$content)};return BrandingLogoView}(View);module.exports=BrandingLogoView}).call(this)}});StripeCheckout.require.define({"inner/views/buttonsView":function(exports,require,module){(function(){var ANIMATION_OPTIONS,Button,ButtonsView,View,easingCurves,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");Button=require("inner/views/controls/button");easingCurves=require("inner/lib/easingCurves");ANIMATION_OPTIONS={duration:550,easing:easingCurves.LAZY_BOUNCE};ButtonsView=function(_super){__extends(ButtonsView,_super);ButtonsView.prototype.className="buttonsView";function ButtonsView(){this.onCancelButtonDidClick=__bind(this.onCancelButtonDidClick,this);this.setSuccess=__bind(this.setSuccess,this);this.setPending=__bind(this.setPending,this);this.hide=__bind(this.hide,this);this.show=__bind(this.show,this);this.setButtons=__bind(this.setButtons,this);this.render=__bind(this.render,this);ButtonsView.__super__.constructor.apply(this,arguments);this.render()}ButtonsView.prototype.render=function(){this.button=new Button($.extend({},this.options,{buttonId:"submitButton"}));this.button.hide({initial:true,animated:false});this.button.$el.transform({transformOrigin:"100% 50%"});return this.addSubview(this.button)};ButtonsView.prototype.setButtons=function(buttons){var cancelButton,options;options=buttons.submit;if(buttons.cancel!=null){options.scaleX=2}this.button.setLabel(options.label,options);this.button.setEnabled(!(options.disabled||false));options=buttons.cancel;this.button.setTapEffectEnabled(options==null);if(options!=null){if(this.cancelButton==null){this.cancelButton=new Button($.extend({},this.options,{className:"cancelButton",style:"cancel"}));this.cancelButton.setTapEffectEnabled(false);this.cancelButton.on("didClick",this.onCancelButtonDidClick)}this.cancelButton.setLabel(options.label,options);this.cancelButton.setEnabled(!(options.disabled||false));this.cancelButton.$el.transform({scaleX:0,transformOrigin:"0 50%"});this.addSubview(this.cancelButton);this.cancelButton.$el.gfx({scaleX:1},ANIMATION_OPTIONS);return this.button.$el.gfx({left:"50%"},ANIMATION_OPTIONS)}else if(this.cancelButton!=null){cancelButton=this.cancelButton;cancelButton.$el.gfx({scaleX:0},$.extend({},ANIMATION_OPTIONS,{complete:function(){return cancelButton.detach()}}));this.button.$el.gfx({left:"0%"},ANIMATION_OPTIONS);return this.cancelButton=null}};ButtonsView.prototype.show=function(options){var initialMobileAnimation,oldComplete;if(options==null){options={}}initialMobileAnimation=this.options.appType.isMobile()&&options.initial;if(initialMobileAnimation){this.$el.css("overflow","visible")}oldComplete=arguments.complete;arguments.complete=function(_this){return function(){if(initialMobileAnimation){_this.$el.css("overflow","hidden")}return typeof oldComplete==="function"?oldComplete():void 0}}(this);return this.button.show.apply(this.button,arguments)};ButtonsView.prototype.hide=function(){return this.button.hide.apply(this.button,arguments)};ButtonsView.prototype.setPending=function(){return this.button.setPending.apply(this.button,arguments)};ButtonsView.prototype.setSuccess=function(){return this.button.setSuccess.apply(this.button,arguments)};ButtonsView.prototype.onCancelButtonDidClick=function(){return this.trigger("didClickCancel")};return ButtonsView}(View);module.exports=ButtonsView}).call(this)}});StripeCheckout.require.define({"inner/views/cardPaymentView":function(exports,require,module){(function(){var CardCVCInput,CardExpiresInput,CardNumberInput,CardPaymentView,SeparatorLineView,View,ZipCodeInput,binRanges,helpers,i18n,popoverManager,support,_,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");SeparatorLineView=require("inner/views/separatorLineView");CardNumberInput=require("inner/views/inputs/cardNumberInput");CardExpiresInput=require("inner/views/inputs/cardExpiresInput");CardCVCInput=require("inner/views/inputs/cardCVCInput");ZipCodeInput=require("inner/views/inputs/zipCodeInput");popoverManager=require("inner/lib/popoverManager");binRanges=require("lib/binRanges");helpers=require("lib/helpers");support=require("lib/support");i18n=require("lib/i18n");_=require("vendor/lodash");CardPaymentView=function(_super){__extends(CardPaymentView,_super);CardPaymentView.prototype.className="cardPaymentView";CardPaymentView.editionStates={NORMAL:"normal",DISABLED:"disabled",BEFORE_CHANGING:"before_changing",CHANGING:"changing"};function CardPaymentView(){this.onKeyUp=__bind(this.onKeyUp,this);this.checkAppropriateZipCodeVisibility=__bind(this.checkAppropriateZipCodeVisibility,this);this.hasChanged=__bind(this.hasChanged,this);this.valueFromCard=__bind(this.valueFromCard,this);this.animatableViews=__bind(this.animatableViews,this);this.setEditionState=__bind(this.setEditionState,this);this.handleError=__bind(this.handleError,this);this.clear=__bind(this.clear,this);this.setCard=__bind(this.setCard,this);this.val=__bind(this.val,this);this.validate=__bind(this.validate,this);this.focus=__bind(this.focus,this);this.bindEvents=__bind(this.bindEvents,this);this.render=__bind(this.render,this);CardPaymentView.__super__.constructor.apply(this,arguments);if(this.options.zipCode){binRanges.preload()}this.render();this.bindEvents()}CardPaymentView.prototype.render=function(){var view,zipCodePlaceholder,_i,_len,_ref;this.numberInput=new CardNumberInput($.extend({},this.options,{className:"top"}));this.expiresInput=new CardExpiresInput($.extend({},this.options,{className:"left bottom"}));this.cvcInput=new CardCVCInput($.extend({},this.options,{className:"right bottom"}));this.views=[this.numberInput];if(this.options.appType.isMobile()){this.views.push(new SeparatorLineView({className:"line1"}))}this.views.push(this.expiresInput);this.views.push(this.cvcInput);_ref=this.views;for(_i=0,_len=_ref.length;_i<_len;_i++){view=_ref[_i];this.addSubview(view)}if(this.options.zipCode){if(this.options.appType.isMobile()){zipCodePlaceholder="12345"}this.zipCodeInput=new ZipCodeInput($.extend({},this.options,{className:"bottom",placeholder:zipCodePlaceholder,"short":this.options.appType.isMobile()}));this.zipCodeInput.hide();this.addSubview(this.zipCodeInput);if(this.options.appType.isMobile()){this.zipCodeInputSeparatorLine=new SeparatorLineView({className:"line2"});this.zipCodeInputSeparatorLine.hide();return this.addSubview(this.zipCodeInputSeparatorLine)}}};CardPaymentView.prototype.bindEvents=function(){var input,_i,_len,_ref,_results;_ref=this.views;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){input=_ref[_i];_results.push(input.on("keyUp",this.onKeyUp))}return _results};CardPaymentView.prototype.focus=function(){var firstInvalid;firstInvalid=this.$el.find(".invalid:input:first");if(firstInvalid.length>0){firstInvalid.focus();return true}else if(this.editionState!==CardPaymentView.editionStates.BEFORE_CHANGING){this.numberInput.focus();return true}return false};CardPaymentView.prototype.validate=function(){var first,input,res,_i,_len,_ref;if(this.editionState===CardPaymentView.editionStates.BEFORE_CHANGING){return[]}res=[];first=true;_ref=this.views;for(_i=0,_len=_ref.length;_i<_len;_i++){input=_ref[_i];if(input===this.zipCodeInput&&!this.zipCodeVisible||input.validate==null){continue}res=res.concat(input.validate());if(res.length>0&&first){first=false}}return res};CardPaymentView.prototype.val=function(){var expiresVal,i,result,_ref;expiresVal=this.expiresInput.val();result={number:this.numberInput.val(),cvc:this.cvcInput.val(),exp_month:expiresVal.month,exp_year:expiresVal.year,pastedFields:function(){var _i,_len,_ref,_results;_ref=this.views;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){i=_ref[_i];if(i.pasted){_results.push(i.fieldName)}}return _results}.call(this)};if((_ref=this.zipCodeInput)!=null?_ref.isVisible():void 0){result.zip=this.zipCodeInput.val()}return result};CardPaymentView.prototype.setCard=function(card){this.card=card;this.numberInput.setVal(this.valueFromCard(this.numberInput,this.card),{prefill:true,type:this.card.type||this.card.brand});this.expiresInput.setVal(this.valueFromCard(this.expiresInput,this.card));return this.cvcInput.setVal(this.valueFromCard(this.cvcInput,this.card),{prefill:true,type:this.card.type||this.card.brand})};CardPaymentView.prototype.clear=function(){var input,_i,_len,_ref,_results;_ref=this.views;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){input=_ref[_i];_results.push(typeof input.clear==="function"?input.clear():void 0)}return _results};CardPaymentView.prototype.handleError=function(err){var handled,msg;popoverManager.closePopover(this.popover);this.popover=null;handled=true;switch(err.code){case"card_declined":if(!err.message||err.message==="Your card was declined."){msg=i18n.loc("error.cardDeclined")()}else{msg=err.message}this.popover=popoverManager.openPopover(this,"<strong>"+msg+"</strong>");this.numberInput.setInvalid(true);if(support.automaticallyGiveFocus()){this.numberInput.focus()}break;case"invalid_number":case"incorrect_number":this.numberInput.setInvalid(true);if(support.automaticallyGiveFocus()){this.numberInput.focus()}break;case"invalid_expiry_month":case"invalid_expiry_year":case"expired_card":this.expiresInput.setInvalid(true);if(support.automaticallyGiveFocus()){this.expiresInput.focus()}break;case"invalid_cvc":case"incorrect_cvc":this.cvcInput.setInvalid(true);if(support.automaticallyGiveFocus()){this.cvcInput.focus()}break;case"incorrect_zip":if(this.zipCodeInput!=null){this.zipCodeInput.setInvalid(true,{popover:true});if(support.automaticallyGiveFocus()){this.zipCodeInput.focus()}}else{handled=false}break;default:handled=false}switch(err.type){case"invalid_mode":handled=true;this.numberInput.setInvalid(true);this.expiresInput.setInvalid(true);this.cvcInput.setInvalid(true);this.setEditionState(CardPaymentView.editionStates.NORMAL,{animated:true});this.clear();if(support.automaticallyGiveFocus()){this.numberInput.focus()}}return handled};CardPaymentView.prototype.setEditionState=function(editionState){this.editionState=editionState};CardPaymentView.prototype.animatableViews=function(){return _.flatten(_.map(this.views,function(view){return view.animatableViews.apply(view,arguments)}))};CardPaymentView.prototype.valueFromCard=function(input,card){if(input===this.numberInput){return""+card.last4.replace(/\ /g,"")}else if(input===this.expiresInput){return""+helpers.pad(card.exp_month,2)+" / "+card.exp_year.toString().substring(2)}else if(input===this.cvcInput){return"    "}};CardPaymentView.prototype.hasChanged=function(){return!(this.numberInput.val()===this.valueFromCard(this.numberInput,this.card)&&this.expiresInput.val()===this.valueFromCard(this.expiresInput,this.card)&&this.cvcInput.val()===this.valueFromCard(this.cvcInput,this.card))};CardPaymentView.prototype.checkAppropriateZipCodeVisibility=function(){var country,digits,sixDigits,visible,_ref;if(!this.options.zipCode){return}digits=this.numberInput.val().replace(" ","");if(!(digits.length>=6)){return}sixDigits=digits.substring(0,6);if(this.lastSixDigitsChecked===sixDigits){return}this.lastSixDigitsChecked=sixDigits;country=binRanges.binCountry(digits);visible=!!country||!binRanges.isPreloaded();this.zipCodeVisible=visible;if(visible){if(this.zipCodeInputSeparatorLine!=null){this.views.push(this.zipCodeInputSeparatorLine)}this.views.push(this.zipCodeInput);this.zipCodeInput.show();if((_ref=this.zipCodeInputSeparatorLine)!=null){_ref.show()}this.zipCodeInput.setCountry(country);this.expiresInput.setStyle("left middle");this.cvcInput.setStyle("right middle")}else{this.views=_.without(this.views,[this.zipCodeInput,this.zipCodeInputSeparatorLine]);setTimeout(function(_this){return function(){var _ref1;if((_ref1=_this.zipCodeInputSeparatorLine)!=null){_ref1.hide()}return _this.zipCodeInput.hide()}}(this),500);this.zipCodeInput.setInvalid(false);this.expiresInput.setStyle("left bottom");this.cvcInput.setStyle("right bottom")}this.$el.toggleClass("withZipCode",visible);this.trigger("zipCodeVisibleChanged.checkout");return this.trigger("didResize")};CardPaymentView.prototype.onKeyUp=function(e){this.checkAppropriateZipCodeVisibility();if(this.editionState!==CardPaymentView.editionStates.BEFORE_CHANGING){return}if(!this.hasChanged()&&e.keyCode!==8){return}this.clear();return this.setEditionState(CardPaymentView.editionStates.CHANGING)};return CardPaymentView}(View);module.exports=CardPaymentView}).call(this)}});StripeCheckout.require.define({"inner/views/carouselView":function(exports,require,module){(function(){var ANIMATION_OPTIONS,CarouselView,View,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");ANIMATION_OPTIONS={duration:550,easing:"cubic-bezier(.8,0,.2,1)"};CarouselView=function(_super){__extends(CarouselView,_super);CarouselView.prototype.className="carouselView";function CarouselView(){this.tick=__bind(this.tick,this);this.animate=__bind(this.animate,this);this.reset=__bind(this.reset,this);this.height=__bind(this.height,this);CarouselView.__super__.constructor.apply(this,arguments);this.currentSubview=null;this.animationId=0}CarouselView.prototype.height=function(){var _ref;return(_ref=this.currentSubview)!=null?_ref.height():void 0};CarouselView.prototype.reset=function(){var _ref;this.animationId+=1;if((_ref=this.currentSubview)!=null){_ref.detach()}return this.currentSubview=null};CarouselView.prototype.animate=function(subviews,options){if(options==null){options={}}if(!(subviews instanceof Array)){subviews=[subviews]}if(subviews.length===0){return}if(options.interval==null){options.interval=2e3}this.animationId+=1;options.id=this.animationId;if(this.currentSubview==null){this.addSubview(subviews[0]);this.currentSubview=subviews[0];return setTimeout(function(_this){return function(){return _this.tick(subviews,options)}}(this),options.interval)}else{return this.tick([this.currentSubview].concat(subviews),options)}};CarouselView.prototype.tick=function(subviews,options){var newView,oldView;if(options==null){options={}}if(this.animationId!==options.id){return}newView=subviews[1];oldView=subviews[0];if(newView==null){return}this.currentSubview=newView;if(newView!==oldView){newView.$el.transform({opacity:0,translateY:"20px"});newView.show();this.addSubview(newView);this.trigger("didResize");newView.redraw();newView.$el.gfx({opacity:1,translateY:0},ANIMATION_OPTIONS);oldView.$el.gfx({opacity:0,translateY:"-20px"},$.extend({},ANIMATION_OPTIONS,{complete:function(){return oldView.detach()}}))}subviews=subviews.splice(1,subviews.length-1);if(subviews.length>1){return setTimeout(function(_this){return function(){return _this.tick(subviews,options)}}(this),options.interval)}};return CarouselView}(View);module.exports=CarouselView}).call(this)}});StripeCheckout.require.define({"inner/views/checkoutView":function(exports,require,module){(function(){var BackgroundView,BrandingLogoView,CheckoutView,LegalLinksView,View,easingCurves,fastdom,helpers,i18n,support,variants,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");BackgroundView=require("inner/views/backgroundView");LegalLinksView=require("inner/views/legalLinksView");BrandingLogoView=require("inner/views/brandingLogoView");easingCurves=require("inner/lib/easingCurves");support=require("lib/support");helpers=require("lib/helpers");i18n=require("lib/i18n");fastdom=require("vendor/fastdom");variants=require("lib/variants");CheckoutView=function(_super){__extends(CheckoutView,_super);CheckoutView.prototype.tag="form";CheckoutView.prototype.className="checkoutView";function CheckoutView(){this.onResize=__bind(this.onResize,this);this.onKeyDown=__bind(this.onKeyDown,this);this.onSubmit=__bind(this.onSubmit,this);this.updatePosition=__bind(this.updatePosition,this);this.positionOffset=__bind(this.positionOffset,this);this.shown=__bind(this.shown,this);this.hide=__bind(this.hide,this);this.show=__bind(this.show,this);this.shake=__bind(this.shake,this);this.setLegalLinksVisible=__bind(this.setLegalLinksVisible,this);this.layout=__bind(this.layout,this);this.height=__bind(this.height,this);this.setContentView=__bind(this.setContentView,this);this.bindEvents=__bind(this.bindEvents,this);this.render=__bind(this.render,this);CheckoutView.__super__.constructor.apply(this,arguments);this.render();this.bindEvents();this.inDOM(function(_this){return function(){return _this.updatePosition()}}(this));this.hide({animated:false});this.shownDefer=$.Deferred();this.shownPromise=this.shownDefer.promise()}CheckoutView.prototype.render=function(){this.$el.attr("method","POST");this.$el.attr("novalidate",true);if(this.options.name==null&&this.options.description==null){this.$el.addClass("noName")}if(this.options.description==null){this.$el.addClass("noDescription")}if(this.options.image==null){this.$el.addClass("noImage")}if(!this.options.appType.isMobile()){this.backgroundView=new BackgroundView({appType:this.options.appType,gradient:this.options.image==null});this.addSubview(this.backgroundView)}this.bodyView=new View({className:"bodyView"});this.bodyView.subviewDidResize=this.layout;this.addSubview(this.bodyView);if(!this.options.appType.isMobile()){this.legalLinksView=new LegalLinksView;this.addSubview(this.legalLinksView)}return this.legalLinksOffset=0};CheckoutView.prototype.bindEvents=function(){$(window).on("keydown",this.onKeyDown);$(window).on("resize",this.onResize);return this.$el.on("submit",this.onSubmit)};CheckoutView.prototype.setContentView=function(contentView){var _ref;if((_ref=this.contentView)!=null){_ref.detach()}this.contentView=contentView;return this.bodyView.addSubview(this.contentView)};CheckoutView.prototype.height=function(){var _ref;return(((_ref=this.contentView)!=null?_ref.height():void 0)||0)+(parseInt(this.bodyView.$el.css("paddingBottom"),10)||0)+(parseInt(this.bodyView.$el.css("paddingTop"),10)||0)};CheckoutView.prototype.layout=function(options){if(options==null){options={}}if(this.backgroundView==null){return this.trigger("didResize")}if(options.delay==null){options.delay=true}if(options.animated==null){options.animated=true}options.animated&=this.visible;return fastdom.read(function(_this){return function(){var delay,height,timeout;height=_this.height();if(_this.backgroundView.height()<height||!options.animated||!options.delay){delay=0}else{delay=200}timeout=function(fn,delay){if(delay===0){fn();return null}return setTimeout(fn,delay)};clearTimeout(_this.layoutTimeout);return _this.layoutTimeout=timeout(function(){var animationOptions,_ref;_this.backgroundView.setHeight(height,options.animated);animationOptions={duration:400,easing:easingCurves.BOUNCING,animated:options.animated};if((_ref=_this.brandingLogoView)!=null){_ref.setTopOffset(height,animationOptions)}_this.legalLinksView.setTopOffset(height+_this.legalLinksOffset,animationOptions);return _this.trigger("didResize")},delay)}}(this))};CheckoutView.prototype.setLegalLinksVisible=function(visible){var _ref;return(_ref=this.legalLinksView)!=null?_ref.setVisible(visible):void 0};CheckoutView.prototype.shake=function(){this.$el.removeClass("shake");return setTimeout(function(_this){return function(){return _this.$el.addClass("shake")}}(this),1)};CheckoutView.prototype.show=function(options){if(options==null){options={}}if(options.complete){this.shownPromise.done(options.complete)}this.visible=true;if(this.options.appType.isMobile()){return this.shownDefer.resolve()}if(!support.transform()){this.$el.redraw();this.shownDefer.resolve();return}this.$el.css("position","fixed");return this.$el.gfx({opacity:1,translateY:0,scale:1},{duration:400,easing:this.options.appType?easingCurves.LAZY_BOUNCE:easingCurves.BOUNCING,complete:function(_this){return function(){_this.$el.css("position","absolute");return _this.shownDefer.resolve()}}(this)})};CheckoutView.prototype.hide=function(options){var props;if(options==null){options={}}if(this.options.appType.isMobile()||this.options.appType.isiOSNative()||!support.transform()){this.visible=false;return typeof options.complete==="function"?options.complete():void 0}if(options.animated==null){options.animated=true}if(options.success){setTimeout(function(_this){return function(){return _this.$el.gfx({translateY:10},{duration:50,easing:"ease-in-out",animated:options.animated,complete:function(){_this.$el.gfx({translateY:-300,translateZ:-70,rotateX:"10deg",opacity:0},{duration:180,easing:"ease-in"});return setTimeout(function(){_this.visible=false;return typeof options.complete==="function"?options.complete():void 0},180)}})}}(this),2e3);return}if(this.options.appType.isTablet()){props={opacity:0,translateY:-350,scale:.5}}else{props={opacity:0,translateY:50,scale:.95}}return this.$el.gfx(props,{duration:200,easing:"ease-in-out",animated:options.animated,complete:function(_this){return function(){_this.visible=false;return typeof options.complete==="function"?options.complete():void 0}}(this)})};CheckoutView.prototype.shown=function(cb){return this.shownPromise.done(cb)};CheckoutView.prototype.positionOffset=function(){var offset,windowHeight;if(helpers.isInsideFrame()&&this.options.appType.isTablet()){return 0}offset=-this.height()*.67;windowHeight=$(window).height();return Math.round(Math.max(offset,-windowHeight/2+50))};CheckoutView.prototype.updatePosition=function(){if(this.options.appType.isMobile()){return}if(helpers.isiOSChrome()){return}return this.$el.css("marginTop",this.positionOffset())};CheckoutView.prototype.onSubmit=function(e){if(e!=null){e.preventDefault()}if(e!=null){e.stopPropagation()}return this.trigger("submit")};CheckoutView.prototype.onKeyDown=function(e){var $input;if(e.keyCode===27){$input=$(e.target);if($input[0].nodeName.toLowerCase()!=="input"&&$input[0].nodeName.toLowerCase()!=="textarea"){return this.trigger("escape")}else if($input.val()!==""){return $input.val("")}else{return $input.blur()}}};CheckoutView.prototype.onResize=function(){return this.updatePosition()};return CheckoutView}(View);module.exports=CheckoutView}).call(this)}});StripeCheckout.require.define({"inner/views/closeView":function(exports,require,module){(function(){var CloseView,LabelView,LayoutView,i18n,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};LayoutView=require("inner/views/layoutView");LabelView=require("inner/views/labelView");i18n=require("lib/i18n");CloseView=function(_super){__extends(CloseView,_super);CloseView.prototype.className="closeView";function CloseView(){this.render=__bind(this.render,this);CloseView.__super__.constructor.apply(this,arguments);this.render()}CloseView.prototype.render=function(){var label;label=new LabelView({className:"closeHeader"});label.setText(i18n.loc("navigation.close.header")());this.addSubview(label);label=new LabelView({className:"closeInstructions"});if(this.options.name){label.setText(i18n.loc("navigation.close.instructions")({name:this.options.name.replace(/\s/g,"&nbsp;")}))}else{label.setText(i18n.loc("navigation.close.instructions.noName")())}return this.addSubview(label)};return CloseView}(LayoutView);module.exports=CloseView}).call(this)}});StripeCheckout.require.define({"inner/views/contentSwitcher":function(exports,require,module){(function(){var ContentSwitcher,EASING_CURVE,View,delegateMethods,support,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");delegateMethods=require("lib/delegateMethods");support=require("lib/support");EASING_CURVE="cubic-bezier(.52,0,.27,1.01)";ContentSwitcher=function(_super){__extends(ContentSwitcher,_super);ContentSwitcher.prototype.className="contentSwitcher";function ContentSwitcher(options){if(options==null){options={}}this.animatableViews=__bind(this.animatableViews,this);this.setSelectedSubview=__bind(this.setSelectedSubview,this);this.addSubview=__bind(this.addSubview,this);this.render=__bind(this.render,this);ContentSwitcher.__super__.constructor.apply(this,arguments);this.$inner=$("<div>").addClass("inner");this.$content=$("<div>").addClass("content");this.items=[];this.selectedItem=null;delegateMethods(this,"selectedItem","height","focus");this.render()}ContentSwitcher.prototype.render=function(){this.$inner.append(this.$content);return this.$el.append(this.$inner)};ContentSwitcher.prototype.addSubview=function(subview){this.items.push(subview);subview.hide();this.$content.append(subview.$el);subview.on("didResize",this.forwardDidResize);this.subviews.push(subview);if(!this.selectedItem){return this.setSelectedSubview(subview,{animated:false})}};ContentSwitcher.prototype.setSelectedSubview=function(subview,options){var complete,direction,oldItem;if(options==null){options={}}if(options.animated==null){options.animated=true}complete=function(_this){return function(){if(typeof options.complete==="function"){options.complete()}return _this.$el.removeClass("animating")}}(this);if(this.selectedItem===subview){return complete()}this.$el.addClass("animating");if(this.selectedItem){oldItem=this.selectedItem;direction=this.items.indexOf(oldItem)>this.items.indexOf(subview);oldItem.$el.gfx({opacity:0,translateX:direction?250:-250},{animated:options.animated,easing:EASING_CURVE,duration:350,complete:function(){return oldItem.detach()
}})}this.selectedItem=subview;subview.$el.transform({opacity:0,translateX:!direction?250:-250});subview.show();subview.redraw();this.$content.append(subview.$el);subview.$el.gfx({opacity:1,translateX:0},{animated:options.animated,easing:EASING_CURVE,duration:350,complete:complete});return this.trigger("didResize")};ContentSwitcher.prototype.animatableViews=function(){var _ref,_ref1;return(_ref=(_ref1=this.selectedItem)!=null?_ref1.animatableViews.apply(this.selectedItem,arguments):void 0)!=null?_ref:ContentSwitcher.__super__.animatableViews.apply(this,arguments)};return ContentSwitcher}(View);module.exports=ContentSwitcher}).call(this)}});StripeCheckout.require.define({"inner/views/controls/actionButton":function(exports,require,module){(function(){var ActionButton,SvgSpinner,View,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");SvgSpinner=require("inner/views/svg/svgSpinner");ActionButton=function(_super){__extends(ActionButton,_super);ActionButton.prototype.className="actionButton";ActionButton.prototype.tagName="a";function ActionButton(){this.onClick=__bind(this.onClick,this);this.setLoading=__bind(this.setLoading,this);this.bindEvents=__bind(this.bindEvents,this);this.render=__bind(this.render,this);ActionButton.__super__.constructor.apply(this,arguments);this.render();this.bindEvents()}ActionButton.prototype.render=function(){this.$span=$("<span>");this.$span.text(this.options.label);return this.$el.append(this.$span)};ActionButton.prototype.bindEvents=function(){return this.$el.on("click",this.onClick)};ActionButton.prototype.setLoading=function(loading){var spinnerSize,_ref,_ref1;this.loading=loading;if(this.loading){if(this.options.appType.isDesktop()){spinnerSize=14}else if(this.options.appType.isTablet()){spinnerSize=18}else{spinnerSize=14}if(this.spinner==null){this.spinner=new SvgSpinner({size:spinnerSize,color:"#000",shadowColor:"transparent"})}this.spinner.startAnimating();this.addSubview(this.spinner);this.$span.css("width",""+this.$span.outerWidth()+"px");return this.$span.text("")}else{if((_ref=this.spinner)!=null){_ref.stopAnimating()}if((_ref1=this.spinner)!=null){_ref1.detach()}this.spinner=null;this.$span.css("width","auto");return this.$span.text(this.options.label)}};ActionButton.prototype.onClick=function(){if(!this.loading){return this.trigger("click")}};return ActionButton}(View);module.exports=ActionButton}).call(this)}});StripeCheckout.require.define({"inner/views/controls/button":function(exports,require,module){(function(){var Button,SvgSpinner,Tick,View,easingCurves,helpers,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");SvgSpinner=require("inner/views/svg/svgSpinner");Tick=require("inner/views/svg/tick");easingCurves=require("inner/lib/easingCurves");helpers=require("lib/helpers");Button=function(_super){__extends(Button,_super);Button.prototype.className="button";function Button(options){var _base;this.options=options!=null?options:{};this.onClick=__bind(this.onClick,this);this.onTouchEnd=__bind(this.onTouchEnd,this);this.onTouchMove=__bind(this.onTouchMove,this);this.onTouchStart=__bind(this.onTouchStart,this);this.resetTapPressure=__bind(this.resetTapPressure,this);this.setTapPressure=__bind(this.setTapPressure,this);this.setLabelOpacity=__bind(this.setLabelOpacity,this);this.setTapEffectEnabled=__bind(this.setTapEffectEnabled,this);this.show=__bind(this.show,this);this.hide=__bind(this.hide,this);this.setEnabled=__bind(this.setEnabled,this);this.setSuccess=__bind(this.setSuccess,this);this.setPending=__bind(this.setPending,this);this.setLabel=__bind(this.setLabel,this);this.bindEvents=__bind(this.bindEvents,this);this.render=__bind(this.render,this);Button.__super__.constructor.apply(this,arguments);if((_base=this.options).style==null){_base.style="submit"}this.tapEffectEnabled=true;this.enabled=true;this.$inner=$("<div>").addClass("inner");this.render();this.bindEvents()}Button.prototype.render=function(){var spinnerSize;this.$el.addClass(this.options.style);this.$button=$("<button>");if(this.options.style==="submit"){this.$button.attr("type","submit")}else{this.$button.attr("type","button")}if(this.options.buttonId!=null){this.$button.attr("id",this.options.buttonId)}this.$span=$("<span>");this.$button.append(this.$span);this.$spinnerContainer=$("<div>");this.$spinnerContainer.addClass("spinnerContainer");if(this.options.appType.isTablet()){spinnerSize=24}else if(this.options.appType.isMobile()){spinnerSize=22}else{spinnerSize=18}this.spinner=new SvgSpinner({size:spinnerSize,color:"#fff"});this.$spinnerContainer.css("opacity",0);this.$spinnerContainer.hide();this.$spinnerContainer.append(this.spinner.$el);this.$button.append(this.$spinnerContainer);this.tick=new Tick({appType:this.options.appType});this.$inner.append(this.$button);return this.$el.append(this.$inner)};Button.prototype.bindEvents=function(){if(this.options.appType.isMobile()||this.options.appType.isTablet()){this.$button.on("touchstart",this.onTouchStart);this.$button.on("touchmove",this.onTouchMove);this.$button.on("touchend",this.onTouchEnd);return this.$button.on("click",this.onClick)}};Button.prototype.setLabel=function(label,options){var direction,oldLabel,props;this.label=label;if(options==null){options={}}if(options.animated==null){options.animated=true}if(this.$label==null){options.animated=false}direction=0;if(this.options.appType.isMobile()){switch(options.direction){case"push":direction=1;break;case"pop":direction=-1}}oldLabel=this.$label;if(oldLabel){props={opacity:0};props.translateX=-25*direction;oldLabel.gfx(props,{duration:300,easing:"ease-in-out",animated:options.animated,complete:function(){return oldLabel.detach()}})}this.$label=$("<span />");if(options.className){this.$label.addClass(options.className)}if(this.options.appType.isMobile()){this.$label.append($("<span>").addClass("iconA"))}this.$label.append(this.label);if(this.options.appType.isMobile()){this.$label.append($("<span>").addClass("iconB"))}props={opacity:0};props.translateX=25*direction;this.$label.transform(props);if(options.scaleX!=null){this.$label.transform({scaleX:options.scaleX})}this.$span.append(this.$label);this.$label.redraw();return this.$label.gfx({opacity:1,translateX:0},{duration:300,easing:"ease-in-out",animated:options.animated})};Button.prototype.setPending=function(pending,options){if(pending==null){pending=true}if(options==null){options={}}if(options.labelOpacity==null){options.labelOpacity=true}this.isPending=pending;if(this.pendingTimeout!=null){clearTimeout(this.pendingTimeout)}this.$button.prop("disabled",pending);return this.pendingTimeout=setTimeout(function(_this){return function(){_this.pendingTimeout=null;_this.$el.toggleClass("animated pending",pending);if(pending){_this.$spinnerContainer.show();_this.$spinnerContainer.redraw();_this.$spinnerContainer.gfx({opacity:1},{duration:150,easing:"ease-in-out"});_this.spinner.startAnimating();if(options.labelOpacity){return _this.setLabelOpacity(0)}}else{_this.$spinnerContainer.gfx({opacity:0},{duration:150,easing:"ease-in-out",complete:function(){return _this.$spinnerContainer.hide()}});_this.spinner.stopAnimating();if(options.labelOpacity){return _this.setLabelOpacity(1)}}}}(this),100)};Button.prototype.setSuccess=function(success){if(success==null){success=true}this.setPending(false,{labelOpacity:false});this.$button.prop("disabled",success);this.$el.toggleClass("animated success",success);if(success){this.setLabelOpacity(0);this.$inner.append(this.tick.$el);return this.tick.show()}else{this.setLabelOpacity(1);return this.tick.hide(function(_this){return function(){return _this.tick.$el.detach()}}(this))}};Button.prototype.setEnabled=function(enabled){if(enabled==null){enabled=true}if(this.enabled===enabled){return}this.enabled=enabled;this.$el.toggleClass("animated disabled",!enabled);return this.$button.prop("disabled",!enabled)};Button.prototype.hide=function(options){var args;if(options==null){options={}}args=arguments;_super=function(_this){return function(){return Button.__super__.hide.apply(_this,args)}}(this);if(this.options.appType.isMobile()){if(options.initial){return this.$button.gfx({translateY:70},options)}else{return this.$el.gfx({translateY:70},$.extend({},options,{complete:function(){return _super()}}))}}else{return Button.__super__.hide.apply(this,arguments)}};Button.prototype.show=function(options){var complete,_ref,_ref1;if(options==null){options={}}if(this.options.appType.isMobile()){complete=options.complete;delete options.complete;if(options.initial){if((_ref=this.$label)!=null){_ref.transform({scale:.5})}this.$el.css("overflow","visible");this.$inner.css("overflow","visible");options=$.extend({},{easing:easingCurves.LAZY_BOUNCE,duration:550},options);this.$button.gfx({translateY:0},$.extend({},options,{complete:function(_this){return function(){_this.$el.css("overflow","hidden");_this.$inner.css("overflow","hidden");return typeof complete==="function"?complete():void 0}}(this)}));return(_ref1=this.$label)!=null?_ref1.gfx({scale:1},options):void 0}else{Button.__super__.show.apply(this,arguments);return this.$el.gfx({translateY:0},$.extend({},options,{duration:300}))}}else{return Button.__super__.show.apply(this,arguments)}};Button.prototype.setTapEffectEnabled=function(enabled){return this.tapEffectEnabled=enabled};Button.prototype.setLabelOpacity=function(opacity){var _ref;return(_ref=this.$label)!=null?_ref.gfx({opacity:opacity},{duration:150,easing:"ease-in-out"}):void 0};Button.prototype.setTapPressure=function(e){var deg,height,offset,point,rotateX,rotateY,touch,touches,width;if(!this.tapEffectEnabled||!this.options.appType.isMobile()){return}if(this.$button.prop("disabled")){return}touches=e.originalEvent.targetTouches;if(touches.length!==1){return}touch=touches[0];point={x:touch.clientX,y:touch.clientY};offset=this.$button.offset();height=this.$button.height();width=this.$button.width();point.x-=offset.left+width/2;point.y-=offset.top+height/2;deg=10;rotateX=-deg*point.y/(height/2);rotateX=Math.max(-deg,Math.min(deg,rotateX));rotateY=deg*point.x/(width/2);rotateY=Math.max(-deg,Math.min(deg,rotateY));this.$button.gfx({scale:.97,rotateX:rotateX,rotateY:rotateY},{duration:100,easing:easingCurves.BOUNCING});return this.$el.css("overflowY","visible")};Button.prototype.resetTapPressure=function(){if(!this.tapEffectEnabled||!this.options.appType.isMobile()){return}this.$button.gfx({scale:1},{duration:400,easing:easingCurves.HARD_BOUNCING});return this.$el.css("overflowY","hidden")};Button.prototype.onTouchStart=function(e){this.setTapPressure(e);return e.originalEvent.preventDefault()};Button.prototype.onTouchMove=function(e){this.setTapPressure(e);return e.originalEvent.preventDefault()};Button.prototype.onTouchEnd=function(e){var $form;this.resetTapPressure();e.originalEvent.preventDefault();if(this.$button.prop("disabled")){return}if(this.options.style!=="submit"){this.trigger("didClick",this);return}$form=this.$el.parents().closest("form");if($form!=null){this.submitDate=(new Date).getTime();return $form.trigger("submit")}};Button.prototype.onClick=function(e){if(this.$button.prop("disabled")){return}if(this.options.style!=="submit"){this.trigger("didClick",this);return}if(this.options.appType.isMobile()){if(this.submitDate!=null&&this.submitDate>=(new Date).getTime()-1e3){return e.preventDefault()}}};return Button}(View);module.exports=Button}).call(this)}});StripeCheckout.require.define({"inner/views/controls/checkbox":function(exports,require,module){(function(){var Checkbox,View,easingCurves,fastdom,support,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");easingCurves=require("inner/lib/easingCurves");support=require("lib/support");fastdom=require("vendor/fastdom");Checkbox=function(_super){__extends(Checkbox,_super);Checkbox.prototype.className="checkbox";Checkbox.prototype.tag="a";function Checkbox(){this.keyUpAction=__bind(this.keyUpAction,this);this.clickAction=__bind(this.clickAction,this);this.toggle=__bind(this.toggle,this);this.setChecked=__bind(this.setChecked,this);this.render=__bind(this.render,this);Checkbox.__super__.constructor.apply(this,arguments);this.checked=false;this.$tick=$("<span>");this.$tick.addClass("tick");this.$focusRing=$("<span>");this.$focusRing.addClass("focusRing");this.$el.attr("href","#");this.$el.on(support.clickEvent(),this.clickAction);this.$el.on("keyup",this.keyUpAction);this.render()}Checkbox.prototype.render=function(){this.$el.append(this.$tick);return this.$el.append(this.$focusRing)};Checkbox.prototype.setChecked=function(bool,eventArgs){if(eventArgs==null){eventArgs={}}if(this.checked===bool){return}this.checked=bool;fastdom.write(function(_this){return function(){if(_this.checked){return _this.$el.addClass("checked")}else{return _this.$el.removeClass("checked")}}}(this));return this.trigger("didChange",eventArgs)};Checkbox.prototype.toggle=function(eventArgs){return this.setChecked(!this.checked,eventArgs)};Checkbox.prototype.clickAction=function(e){this.toggle({userAction:true});if(e){e.preventDefault();return e.stopPropagation()}};Checkbox.prototype.keyUpAction=function(e){if(e.keyCode===32){this.clickAction();return e.preventDefault()}};return Checkbox}(View);module.exports=Checkbox}).call(this)}});StripeCheckout.require.define({"inner/views/controls/segmentedControl":function(exports,require,module){(function(){var SegmentedControl,SvgSpinner,View,support,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");support=require("lib/support");SvgSpinner=require("inner/views/svg/svgSpinner");SegmentedControl=function(_super){__extends(SegmentedControl,_super);SegmentedControl.prototype.className="segmentedControl";SegmentedControl.styles={NORMAL:"normal",SMALL:"small"};function SegmentedControl(options){var $innerSpan,$item,$span,index,item,_i,_len,_ref;if(options==null){options={}}this.showLoadingForIndex=__bind(this.showLoadingForIndex,this);this.clearLoading=__bind(this.clearLoading,this);this.selectIndex=__bind(this.selectIndex,this);this.itemClickAction=__bind(this.itemClickAction,this);this.setSelectedIndex=__bind(this.setSelectedIndex,this);this.layout=__bind(this.layout,this);this.onResize=__bind(this.onResize,this);this.render=__bind(this.render,this);SegmentedControl.__super__.constructor.apply(this,arguments);$(window).on("resize",this.onResize);this.options=$.extend({},{items:[],style:SegmentedControl.styles.NORMAL},options);this.$el.addClass(this.options.style);this.$inner=this.$content=$("<div>").addClass("content");this.$items=[];index=0;_ref=this.options.items;for(_i=0,_len=_ref.length;_i<_len;_i++){item=_ref[_i];$item=$("<a>");$item.addClass(this.className+"Item"+index);$item.attr("data-index",index);if(item.type!=null){$item.addClass(item.type)}$span=$("<span>");$innerSpan=$("<span>").text(item.label);$span.append($innerSpan);$item.append($span);this.$items.push($item);this.$content.append($item);$item.on(support.clickEvent(),this.itemClickAction);index+=1}this.setSelectedIndex(0);this.render()}SegmentedControl.prototype.render=function(){return this.$el.append(this.$content)};SegmentedControl.prototype.onResize=function(){this.layout();return this.trigger("didResize")};SegmentedControl.prototype.layout=function(){var $item,i,itemWidth,leftWidth,width,_i,_j,_len,_len1,_ref,_ref1,_results;width=this.$el.width();_ref=this.$items;for(_i=0,_len=_ref.length;_i<_len;_i++){$item=_ref[_i];width-=parseInt($item.css("marginLeft"),10)||0}leftWidth=width;itemWidth=Math.round(width/this.$items.length);i=0;_ref1=this.$items;_results=[];for(_j=0,_len1=_ref1.length;_j<_len1;_j++){$item=_ref1[_j];if(i===this.$items.length-1){$item.css({width:""+leftWidth+"px"})}else{$item.css({width:""+itemWidth+"px"})}leftWidth-=itemWidth;_results.push(i+=1)}return _results};SegmentedControl.prototype.setSelectedIndex=function(index){var evtCb,shouldSelect,_ref;if(index===this.selectedIndex){return}if(this.loadingIndex!=null&&index===this.loadingIndex){return}shouldSelect=true;if((_ref=this._evtCb)!=null){_ref.cancelled=true}this._evtCb=evtCb=function(fn){return function(){if(evtCb.cancelled){return}shouldSelect=false;return fn(index)}};this.trigger("willSelectIndex",{index:index,showLoading:evtCb(this.showLoadingForIndex),select:evtCb(this.selectIndex),fail:evtCb(function(_this){return function(){evtCb.cancelled=true;return _this.clearLoading()}}(this))});if(shouldSelect){return this.selectIndex(index)}};SegmentedControl.prototype.itemClickAction=function(e){this.setSelectedIndex(parseInt($(e.currentTarget).attr("data-index")));e.preventDefault();return e.stopPropagation()};SegmentedControl.prototype.selectIndex=function(index){this.clearLoading();if(this.selectedIndex!==void 0){this.$items[this.selectedIndex].removeClass("selected")}this.selectedIndex=index;this.$items[this.selectedIndex].addClass("selected");return this.trigger("selectedIndexDidChange",index)};SegmentedControl.prototype.clearLoading=function(){var _ref,_ref1;if(this.loadingTimeout){clearTimeout(this.loadingTimeout)}if((_ref=this.spinner)!=null){_ref.stopAnimating()}if((_ref1=this.spinner)!=null){_ref1.detach()}this.spinner=null;return this.loadingIndex=null};SegmentedControl.prototype.showLoadingForIndex=function(index){this.clearLoading();this.loadingTimeout=setTimeout(function(_this){return function(){_this.spinner=new SvgSpinner({size:14,color:"#000",shadowColor:"transparent"});_this.spinner.startAnimating();return _this.$items[index].append(_this.spinner.$el)}}(this),300);return this.loadingIndex=index};return SegmentedControl}(View);module.exports=SegmentedControl}).call(this)}});StripeCheckout.require.define({"inner/views/controls/switchControl":function(exports,require,module){(function(){var SwitchControl,View,helpers,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");helpers=require("lib/helpers");SwitchControl=function(_super){__extends(SwitchControl,_super);SwitchControl.prototype.className="switchControl";function SwitchControl(){this.switchTouchEnd=__bind(this.switchTouchEnd,this);this.switchTouchMove=__bind(this.switchTouchMove,this);this.switchTouchStart=__bind(this.switchTouchStart,this);this.setValue=__bind(this.setValue,this);this.setChecked=__bind(this.setChecked,this);this.setEnabled=__bind(this.setEnabled,this);this.invert=__bind(this.invert,this);this.render=__bind(this.render,this);SwitchControl.__super__.constructor.apply(this,arguments);this.checked=this.enabled=false;this.$trackingArea=$("<div>");this.$trackingArea.addClass("trackingArea");this.$inner=$("<div>").addClass("inner");this.$trackSpan=$("<span>");this.$trackSpan.addClass("track");this.$blueTrackSpan=$("<span>");this.$blueTrackSpan.addClass("blueTrack");this.$blueTrackSpan.append($('<span class="left">'));this.$blueRightTrack=$("<span>");this.$blueTrackSpan.append($('<span class="right">').append(this.$blueRightTrack));this.$switch=$("<span>");this.$switch.addClass("switch");this.$switch.append($("<span>").addClass("trackingArea"));this.render();if(helpers.isWindowsPhone()){this.$switch.on("MSPointerDown",this.switchTouchStart);this.$switch.on("MSPointerMove",this.switchTouchMove);this.$switch.on("MSPointerUp",this.switchTouchEnd)}this.$switch.on("touchstart",this.switchTouchStart);this.$switch.on("touchmove",this.switchTouchMove);this.$switch.on("touchend",this.switchTouchEnd);this.switchTouchStartEvent=null;this.originalSwitchTranslateX=0;this.moved=false}SwitchControl.prototype.render=function(){this.$inner.append(this.$trackSpan);this.$inner.append(this.$blueTrackSpan);this.$inner.append(this.$switch);this.$trackingArea.append(this.$inner);return this.$el.append(this.$trackingArea)};SwitchControl.prototype.height=function(){return 25};SwitchControl.prototype.invert=function(){return this.setEnabled(!this.enabled)};SwitchControl.prototype.setEnabled=function(enabled,eventArgs){if(eventArgs==null){eventArgs={}}if(enabled===this.enabled){return}this.checked=enabled;this.enabled=enabled;if(this.enabled){this.setValue(1,true);this.originalSwitchTranslateX=25}else{this.setValue(0,true);this.originalSwitchTranslateX=0}return this.trigger("didChange",eventArgs)};SwitchControl.prototype.setChecked=function(checked){return this.setEnabled(checked)};SwitchControl.prototype.setValue=function(value,animated){var alphaOptions,options,switchTranslateX,trackTranslateX;if(animated==null){animated=true}options={animated:animated,duration:200,easing:"ease-in-out"};alphaOptions={animated:animated,duration:50,easing:"ease-in-out"};switchTranslateX=value*25;trackTranslateX=(1-value)*-25;if(helpers.isWindowsPhone()){this.$switch.css({left:1+switchTranslateX});this.$blueRightTrack.css({left:trackTranslateX});if(value===0){this.$blueTrackSpan.gfx({opacity:0},alphaOptions)}}else{this.$switch.gfx({translateX:switchTranslateX},options);this.$blueRightTrack.gfx({translateX:trackTranslateX},$.extend({},options,{complete:function(_this){return function(){if(value===0){return _this.$blueTrackSpan.gfx({opacity:0},alphaOptions)}}}(this)}))}if(value!==0){return this.$blueTrackSpan.gfx({opacity:1},alphaOptions)}};SwitchControl.prototype.switchTouchStart=function(e){var touchStart;e.preventDefault();this.switchTouchStartEvent=e;if(this.switchTouchStartEvent.originalEvent.touches&&this.switchTouchStartEvent.originalEvent.touches.length>0){touchStart=this.switchTouchStartEvent.originalEvent.touches[0]}else{touchStart=this.switchTouchStartEvent.originalEvent}return this.switchTouchStartX=touchStart.pageX};SwitchControl.prototype.switchTouchMove=function(e){var decalX,touch,value;e.preventDefault();if(!this.switchTouchStartEvent){return}if(e.originalEvent.touches&&e.originalEvent.touches.length>0){touch=e.originalEvent.touches[0]}else{touch=e.originalEvent}decalX=touch.pageX-this.switchTouchStartX;this.moved=this.moved||Math.abs(decalX)>0;this.currentSwitchTranslateX=this.originalSwitchTranslateX+decalX;value=this.currentSwitchTranslateX/25;value=Math.max(0,Math.min(1,value));return this.setValue(value,false)};SwitchControl.prototype.switchTouchEnd=function(e){var newEnabled,val;if(!this.switchTouchStartEvent){return}e.preventDefault();if(this.currentSwitchTranslateX&&this.moved){newEnabled=this.currentSwitchTranslateX+14>25}else{newEnabled=!this.enabled}if(newEnabled!==this.enabled){this.setEnabled(newEnabled,{userAction:true})}else{if(this.enabled){val=1}else{val=0}this.setValue(val,true)}this.switchTouchStartEvent=null;return this.moved=false};return SwitchControl}(View);module.exports=SwitchControl}).call(this)}});StripeCheckout.require.define({"inner/views/form/codeInput":function(exports,require,module){(function(){var CodeInput,DIGIT_COUNT,View,helpers,support,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");helpers=require("lib/helpers");support=require("lib/support");DIGIT_COUNT=6;CodeInput=function(_super){__extends(CodeInput,_super);CodeInput.prototype.className="codeInput";function CodeInput(options){var $input,$inputContainer,i,j,k,_i,_j,_k,_ref,_ref1;this.options=options!=null?options:{};this.setInvalid=__bind(this.setInvalid,this);this.validate=__bind(this.validate,this);this.disable=__bind(this.disable,this);this.inputDidFocus=__bind(this.inputDidFocus,this);this.controlInputDidKeyUpBackspace=__bind(this.controlInputDidKeyUpBackspace,this);this.controlInputDidKeyUp=__bind(this.controlInputDidKeyUp,this);this.controlInputDidKeyPress=__bind(this.controlInputDidKeyPress,this);this.controlInputDidBlur=__bind(this.controlInputDidBlur,this);this.controlInputDidFocus=__bind(this.controlInputDidFocus,this);this.codeDidChange=__bind(this.codeDidChange,this);this.frameForIndex=__bind(this.frameForIndex,this);this.setEditable=__bind(this.setEditable,this);this.shake=__bind(this.shake,this);this.val=__bind(this.val,this);this.focus=__bind(this.focus,this);this.clear=__bind(this.clear,this);this.layout=__bind(this.layout,this);this.render=__bind(this.render,this);CodeInput.__super__.constructor.apply(this,arguments);this.focusId=null;this.code="";this.$controlInput=$("<input>").addClass("controlInput");this.$controlInput.attr({type:"tel","data-numeric":true,name:"code-control-input"});this.$controlInput.payment("restrictNumeric");this.$controlInput.on("focus",this.controlInputDidFocus);this.$controlInput.on("blur",this.controlInputDidBlur);this.$controlInput.on("keypress",this.controlInputDidKeyPress);this.$controlInput.on("keyup",this.controlInputDidKeyUp);this.$controlInput.on("keyup",this.controlInputDidKeyUpBackspace);this.$inputContainers=[];this.$inputs=[];for(i=_i=0,_ref=DIGIT_COUNT-1;0<=_ref?_i<=_ref:_i>=_ref;i=0<=_ref?++_i:--_i){$input=$("<input>");$input.attr({type:"tel","data-numeric":true,maxlength:"1",readonly:true});$input.addClass("digit digit"+(i+1));$input.on("focus",this.inputDidFocus);this.$inputs.push($input)}j=0;for(i=_j=0,_ref1=Math.round(DIGIT_COUNT/3)-1;0<=_ref1?_j<=_ref1:_j>=_ref1;i=0<=_ref1?++_j:--_j){$inputContainer=$("<div>").addClass("container index"+i);for(k=_k=0;_k<=2;k=++_k){$input=this.$inputs[j];$inputContainer.append($input);j+=1}this.$inputContainers.push($inputContainer)}this.$dash=$("<span>").addClass("dash");this.editable=true;this.render()}CodeInput.prototype.render=function(){var $inputContainer,_i,_len,_ref;_ref=this.$inputContainers;for(_i=0,_len=_ref.length;_i<_len;_i++){$inputContainer=_ref[_i];this.$el.append($inputContainer)}this.$el.append(this.$controlInput);return this.$el.append(this.$dash)};CodeInput.prototype.layout=function(){var $input,digit,frame,i,width,_i,_len,_ref;i=0;_ref=this.$inputs;for(_i=0,_len=_ref.length;_i<_len;_i++){$input=_ref[_i];digit=this.code.length>i?this.code[i]:"";$input.val(digit);if(i===this.focusId){$input.addClass("focus")}else{$input.removeClass("focus")}i++}if(!this.editable){return this.$controlInput.hide()}else if(this.focusId===null){this.$controlInput.show();this.$controlInput.css("left","0px");width=parseInt(this.$inputContainers[1].css("marginLeft"),10)+DIGIT_COUNT*parseInt(this.$inputs[0].css("width"),10);return this.$controlInput.css("width",width+"px")}else{this.$controlInput.show();if(this.code.length>=DIGIT_COUNT){this.$controlInput.css("opacity",0)}else{this.$controlInput.css("opacity",1)}frame=this.frameForIndex(this.focusId);if(helpers.isChrome()){this.$controlInput.transform({translateX:frame.x})}else{this.$controlInput.css("left",frame.x+"px")}return this.$controlInput.css("width",frame.width+"px")}};CodeInput.prototype.clear=function(){this.code="";this.focusId=null;return this.layout()};CodeInput.prototype.focus=function(){return this.$controlInput.focus()};CodeInput.prototype.val=function(){return this.code};CodeInput.prototype.shake=function(){this.$el.addClass("shake");return setTimeout(function(_this){return function(){return _this.$el.removeClass("shake")}}(this),450)};CodeInput.prototype.setEditable=function(editable){var _base;this.editable=editable;if(!this.editable){if(typeof(_base=document.activeElement).blur==="function"){_base.blur()}this.$controlInput.blur();this.focusId=null}return this.layout()};CodeInput.prototype.frameForIndex=function(index){var height,width,x;width=parseInt(this.$inputs[0].css("width"),10)+parseInt(this.$inputs[0].css("marginRight"),10);height=parseInt(this.$inputs[0].css("height"),10);x=index*(width+parseInt(this.$inputs[1].css("marginLeft"),10));if(index>=3){x+=1+parseInt(this.$inputContainers[1].css("marginLeft"),10)+parseInt(this.$inputContainers[1].css("paddingLeft"),10)}return{x:x,y:0,width:width,height:height}};CodeInput.prototype.codeDidChange=function(){if(this.code.length>=DIGIT_COUNT){this.layout();return this.trigger("valueDidChange.checkout")}else{return this.layout()}};CodeInput.prototype.controlInputDidFocus=function(e){this.focusId=Math.min(this.code.length,DIGIT_COUNT-1);return this.layout()};CodeInput.prototype.controlInputDidBlur=function(e){this.focusId=null;return this.layout()};CodeInput.prototype.controlInputDidKeyPress=function(e){var char;if(this.code.length>=DIGIT_COUNT){return}char=String.fromCharCode(e.which);if(!/[\d]/.test(char)){return}this.code+=char;this.focusId=Math.min(this.code.length,DIGIT_COUNT-1);e.preventDefault();return this.codeDidChange()};CodeInput.prototype.controlInputDidKeyUp=function(e){var char;if(this.code.length>=DIGIT_COUNT){return this.$controlInput.val("")}char=this.$controlInput.val();if(!/[\d]/.test(char)){return}this.code+=char;this.focusId=Math.min(this.code.length,DIGIT_COUNT-1);this.$controlInput.val("");e.preventDefault();return this.codeDidChange()};CodeInput.prototype.controlInputDidKeyUpBackspace=function(e){if(e.which!==8){return}if(this.code.length>0){this.code=this.code.substring(0,this.code.length-1);this.focusId=Math.min(this.code.length,DIGIT_COUNT-1);return this.layout()}};CodeInput.prototype.inputDidFocus=function(e){this.$controlInput.focus();return $(e.currentTarget).blur()};CodeInput.prototype.disable=function(){var input,_i,_len,_ref,_results;_ref=this.$inputs;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){input=_ref[_i];_results.push(input.gfx({background:"transparent","-webkit-box-shadow":"none","-moz-box-shadow":"none","box-shadow":"none"},{duration:250,easing:"ease-in-out"}))}return _results};CodeInput.prototype.validate=function(){this.$el.removeClass("invalid");if(this.val().length!==DIGIT_COUNT){this.$el.addClass("invalid");return[{input:this,name:"code-input",reason:"invalid"}]}return[]};CodeInput.prototype.setInvalid=function(invalid){if(invalid){return this.$el.addClass("invalid")}else{return this.$el.removeClass("invalid")}};return CodeInput}(View);module.exports=CodeInput}).call(this)}});StripeCheckout.require.define({"inner/views/form/codeVerificationView":function(exports,require,module){(function(){var AuthorizingView,CarouselView,CodeInput,CodeVerificationView,ErrorView,INFO_ANIMATION_OPTIONS,SendingView,SentInfoView,SentView,VerifiedView,View,i18n,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;
return child};View=require("lib/view");CodeInput=require("inner/views/form/codeInput");i18n=require("lib/i18n");SendingView=require("inner/views/form/codeverification/sendingView");SentView=require("inner/views/form/codeverification/sentView");SentInfoView=require("inner/views/form/codeverification/sentInfoView");AuthorizingView=require("inner/views/form/codeverification/authorizingView");VerifiedView=require("inner/views/form/codeverification/verifiedView");ErrorView=require("inner/views/form/codeverification/errorView");CarouselView=require("inner/views/carouselView");INFO_ANIMATION_OPTIONS={duration:550,easing:"cubic-bezier(.8,0,.2,1)"};CodeVerificationView=function(_super){__extends(CodeVerificationView,_super);CodeVerificationView.prototype.className="codeVerificationView";function CodeVerificationView(options){var _base,_base1,_base2,_base3;if(options==null){options={}}this.setCodeVerifiedSuccess=__bind(this.setCodeVerifiedSuccess,this);this.validate=__bind(this.validate,this);this.codeInputValueDidChange=__bind(this.codeInputValueDidChange,this);this.showCodeNotReceived=__bind(this.showCodeNotReceived,this);this.startCodeNotReceivedTimeout=__bind(this.startCodeNotReceivedTimeout,this);this.hideCodeNotReceived=__bind(this.hideCodeNotReceived,this);this.onDeliveryFailed=__bind(this.onDeliveryFailed,this);this.onDelivered=__bind(this.onDelivered,this);this.willEnter=__bind(this.willEnter,this);this.focus=__bind(this.focus,this);this.height=__bind(this.height,this);this.val=__bind(this.val,this);this.setPhoneNumber=__bind(this.setPhoneNumber,this);this.bindEvents=__bind(this.bindEvents,this);this.render=__bind(this.render,this);CodeVerificationView.__super__.constructor.call(this,options);(_base=this.options).phoneSvgRatio||(_base.phoneSvgRatio=1);if((_base1=this.options).useSms==null){_base1.useSms=true}if((_base2=this.options).notReceivedMessage==null){_base2.notReceivedMessage=i18n.loc("codeVerification.fillManually")()}if((_base3=this.options).reason==null){_base3.reason=i18n.loc("codeVerification.enterYourCodePaymentReason")()}this.render();this.bindEvents()}CodeVerificationView.prototype.render=function(){var $mainDescription;$mainDescription=$("<p>").addClass("mainDescription");$mainDescription.append($("<em>").html(i18n.loc("codeVerification.enterYourCode")({reason:"<span>"+this.options.reason+"</span>"})));this.codeInput=new CodeInput({appType:this.options.appType});this.carouselView=new CarouselView;this.$codeNotReceived=$('<a href="#" class="codeNotReceived"></a>');this.$codeNotReceived.css("opacity",0);this.$codeNotReceived.hide();this.$el.append($mainDescription);this.addSubview(this.codeInput);this.addSubview(this.carouselView);return this.$el.append(this.$codeNotReceived)};CodeVerificationView.prototype.bindEvents=function(){this.codeInput.on("valueDidChange.checkout",this.codeInputValueDidChange);return this.$codeNotReceived.on("click",function(_this){return function(){return _this.trigger("cancel.checkout")}}(this))};CodeVerificationView.prototype.setPhoneNumber=function(phone){return this.options.phoneNumber=phone};CodeVerificationView.prototype.val=function(){return this.codeInput.val()};CodeVerificationView.prototype.height=function(){return this.$el.outerHeight(true)+(parseInt(this.$el.css("top"),10)||0)};CodeVerificationView.prototype.focus=function(){return this.codeInput.focus()};CodeVerificationView.prototype.willEnter=function(){var carouselViews;this.codeInput.clear();carouselViews=[new SendingView(this.options)];this.carouselView.animate(carouselViews);return this.startCodeNotReceivedTimeout()};CodeVerificationView.prototype.onDelivered=function(){var carouselViews;carouselViews=[];if(this.options.useSms){carouselViews.push(new SentView(this.options))}carouselViews.push(new SentInfoView(this.options));this.carouselView.animate(carouselViews);return this.startCodeNotReceivedTimeout()};CodeVerificationView.prototype.onDeliveryFailed=function(){var notReceivedQuestion;if(this.options.useSms){notReceivedQuestion=i18n.loc("codeVerification.smsDeliveryFailed")()}else{notReceivedQuestion=i18n.loc("codeVerification.callFailed")()}return this.showCodeNotReceived(notReceivedQuestion,this.options.notReceivedMessage)};CodeVerificationView.prototype.hideCodeNotReceived=function(animate){var complete;if(animate==null){animate=true}if(this.codeNotReceivedTimeout){clearTimeout(this.codeNotReceivedTimeout)}complete=function(_this){return function(){return _this.$codeNotReceived.hide()}}(this);if(animate){return this.$codeNotReceived.gfx({opacity:0},{duration:250,easing:"ease-in-out",complete:complete})}else{this.$codeNotReceived.css({opacity:0});return complete()}};CodeVerificationView.prototype.startCodeNotReceivedTimeout=function(){var duration,notReceivedQuestion;if(this.options.useSms){notReceivedQuestion=i18n.loc("codeVerification.smsTimeout")();duration=1e4}else{notReceivedQuestion=i18n.loc("codeVerification.callTimeout")();duration=15e3}if(this.codeNotReceivedTimeout){clearTimeout(this.codeNotReceivedTimeout)}return this.codeNotReceivedTimeout=setTimeout(function(_this){return function(){return _this.showCodeNotReceived(notReceivedQuestion,_this.options.notReceivedMessage)}}(this),duration)};CodeVerificationView.prototype.showCodeNotReceived=function(line1,line2){if(this.codeNotReceivedTimeout){clearTimeout(this.codeNotReceivedTimeout)}return this.$codeNotReceived.empty().append($("<span class='verificationStatusIndicator'>").text(line1)).append($("<span>").text(line2)).show().gfx({opacity:1},{duration:250,easing:"ease-in-out"})};CodeVerificationView.prototype.setInfoState=function(newState){};CodeVerificationView.prototype.codeInputValueDidChange=function(){var code,_base;this.codeInput.setEditable(false);this.hideCodeNotReceived();this.carouselView.animate(new AuthorizingView(this.options));if(typeof(_base=document.activeElement).blur==="function"){_base.blur()}code=this.val();return this.trigger("valueDidChange.checkout",code)};CodeVerificationView.prototype.validate=function(){if(this.currentState==="verified"){return[]}else{return[{input:this,name:"codeVerification",reason:"invalid"}]}};CodeVerificationView.prototype.setCodeVerifiedSuccess=function(success){if(!success){this.codeInput.setEditable(true);this.codeInput.clear();this.codeInput.shake();this.focus();return this.carouselView.animate([new ErrorView(this.options),new SentInfoView(this.options)])}else if(this.options.showSuccess){this.carouselView.animate(new VerifiedView(this.options));return this.codeInput.disable()}};return CodeVerificationView}(View);module.exports=CodeVerificationView}).call(this)}});StripeCheckout.require.define({"inner/views/form/codeverification/abstractInformationView":function(exports,require,module){(function(){var AbstractInformationView,View,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");AbstractInformationView=function(_super){__extends(AbstractInformationView,_super);AbstractInformationView.prototype.tag="span";function AbstractInformationView(options){if(options==null){options={}}AbstractInformationView.__super__.constructor.call(this,options);this.render()}return AbstractInformationView}(View);module.exports=AbstractInformationView}).call(this)}});StripeCheckout.require.define({"inner/views/form/codeverification/approvalView":function(exports,require,module){(function(){var AbstractInformationView,ApprovalView,Svg,i18n,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};AbstractInformationView=require("inner/views/form/codeverification/abstractInformationView");Svg=require("inner/views/svg/svg");i18n=require("lib/i18n");ApprovalView=function(_super){__extends(ApprovalView,_super);function ApprovalView(){return ApprovalView.__super__.constructor.apply(this,arguments)}ApprovalView.prototype.render=function(){var $paragraph,tickSvg;$paragraph=$("<p>");tickSvg=new Svg({size:{width:25,height:26},cssSize:{width:23,height:23},color:this.options.color.css(),path:this.options.svgPaths.TICK_ICON,ratio:2});tickSvg.$el.addClass("tickIcon");$paragraph.append(tickSvg.$el);$paragraph.append($("<span>").text(i18n.loc(this.textKey)));return this.$el.append($paragraph)};return ApprovalView}(AbstractInformationView);module.exports=ApprovalView}).call(this)}});StripeCheckout.require.define({"inner/views/form/codeverification/authorizingView":function(exports,require,module){(function(){var AbstractInformationView,AuthorizingView,SvgSpinner,i18n,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};AbstractInformationView=require("inner/views/form/codeverification/abstractInformationView");SvgSpinner=require("inner/views/svg/svgSpinner");i18n=require("lib/i18n");AuthorizingView=function(_super){__extends(AuthorizingView,_super);function AuthorizingView(){return AuthorizingView.__super__.constructor.apply(this,arguments)}AuthorizingView.prototype.className="stateAuthorizing";AuthorizingView.prototype.render=function(){var $paragraph;$paragraph=$("<p>");this.spinner=new SvgSpinner({size:18,color:"#000",shadowColor:"#fff"});$paragraph.append(this.spinner.$el);$paragraph.append($("<span>").text(i18n.loc("codeVerification.authorizing")()));this.$el.append($paragraph);return this.spinner.startAnimating()};return AuthorizingView}(AbstractInformationView);module.exports=AuthorizingView}).call(this)}});StripeCheckout.require.define({"inner/views/form/codeverification/errorView":function(exports,require,module){(function(){var AbstractInformationView,ErrorView,Svg,i18n,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};AbstractInformationView=require("inner/views/form/codeverification/abstractInformationView");Svg=require("inner/views/svg/svg");i18n=require("lib/i18n");ErrorView=function(_super){__extends(ErrorView,_super);function ErrorView(){return ErrorView.__super__.constructor.apply(this,arguments)}ErrorView.prototype.className="stateError";ErrorView.prototype.render=function(){var $paragraph,errorSvg;$paragraph=$("<p>");errorSvg=new Svg({size:{width:17,height:17},color:"#FF0000",path:this.options.svgPaths.ERROR_CROSS_ICON,ratio:2});errorSvg.$el.addClass("errorIcon");$paragraph.append(errorSvg.$el);$paragraph.append($("<span>").text(i18n.loc("codeVerification.invalid")()));return this.$el.append($paragraph)};return ErrorView}(AbstractInformationView);module.exports=ErrorView}).call(this)}});StripeCheckout.require.define({"inner/views/form/codeverification/sendingView":function(exports,require,module){(function(){var AbstractInformationView,SendingView,SvgSpinner,i18n,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};AbstractInformationView=require("inner/views/form/codeverification/abstractInformationView");SvgSpinner=require("inner/views/svg/svgSpinner");i18n=require("lib/i18n");SendingView=function(_super){__extends(SendingView,_super);function SendingView(){return SendingView.__super__.constructor.apply(this,arguments)}SendingView.prototype.className="stateSending";SendingView.prototype.render=function(){var $paragraph,sendingText;if(this.options.useSms){sendingText=i18n.loc("codeVerification.sending")()}else{sendingText=i18n.loc("codeVerification.calling")()}$paragraph=$("<p>");this.spinner=new SvgSpinner({size:18,color:"#000",shadowColor:"#fff"});$paragraph.append(this.spinner.$el);$paragraph.append($("<span>").text(sendingText));this.$el.append($paragraph);return this.spinner.startAnimating()};return SendingView}(AbstractInformationView);module.exports=SendingView}).call(this)}});StripeCheckout.require.define({"inner/views/form/codeverification/sentInfoView":function(exports,require,module){(function(){var AbstractInformationView,SentInfoView,Svg,i18n,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};AbstractInformationView=require("inner/views/form/codeverification/abstractInformationView");Svg=require("inner/views/svg/svg");i18n=require("lib/i18n");SentInfoView=function(_super){__extends(SentInfoView,_super);function SentInfoView(){return SentInfoView.__super__.constructor.apply(this,arguments)}SentInfoView.prototype.className="stateSentInfo verificationStatusIndicator";SentInfoView.prototype.render=function(){var $line1,$paragraph,$phoneNumber,phone,phoneSvg,sentText;if(this.options.useSms){sentText=i18n.loc("codeVerification.weSentTo")()}else{sentText=i18n.loc("codeVerification.weMadeACallTo")()}$line1=$("<p>").text(sentText).addClass("line1");$paragraph=$("<p>").addClass("line2");phoneSvg=new Svg({size:{width:24,height:34},color:this.options.color.css(),path:this.options.svgPaths.TEL_ICON,ratio:this.options.phoneSvgRatio,fillRule:"evenodd"});phoneSvg.$el.addClass("phoneIcon");$paragraph.append(phoneSvg.$el);phone=this.options.phoneNumber;phone=$.formatMobilePhoneNumber(phone);phone=phone.replace(/\*/g,"•");$phoneNumber=$("<span>").text(phone);$paragraph.append($phoneNumber);this.$el.append($line1);return this.$el.append($paragraph)};return SentInfoView}(AbstractInformationView);module.exports=SentInfoView}).call(this)}});StripeCheckout.require.define({"inner/views/form/codeverification/sentView":function(exports,require,module){(function(){var ApprovalView,SentView,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};ApprovalView=require("inner/views/form/codeverification/approvalView");SentView=function(_super){__extends(SentView,_super);function SentView(){return SentView.__super__.constructor.apply(this,arguments)}SentView.prototype.className="stateSent";SentView.prototype.textKey="codeVerification.sent";return SentView}(ApprovalView);module.exports=SentView}).call(this)}});StripeCheckout.require.define({"inner/views/form/codeverification/verifiedView":function(exports,require,module){(function(){var ApprovalView,VerifiedView,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};ApprovalView=require("inner/views/form/codeverification/approvalView");VerifiedView=function(_super){__extends(VerifiedView,_super);function VerifiedView(){return VerifiedView.__super__.constructor.apply(this,arguments)}VerifiedView.prototype.className="stateVerified";VerifiedView.prototype.textKey="codeVerification.valid";return VerifiedView}(ApprovalView);module.exports=VerifiedView}).call(this)}});StripeCheckout.require.define({"inner/views/headerView":function(exports,require,module){(function(){var HeaderView,View,easingCurves,helpers,support,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");support=require("lib/support");helpers=require("lib/helpers");easingCurves=require("inner/lib/easingCurves");HeaderView=function(_super){__extends(HeaderView,_super);HeaderView.prototype.tag="header";function HeaderView(){this.show=__bind(this.show,this);this.hide=__bind(this.hide,this);this.setBackButtonVisible=__bind(this.setBackButtonVisible,this);this.height=__bind(this.height,this);this.bindEvents=__bind(this.bindEvents,this);this.render=__bind(this.render,this);HeaderView.__super__.constructor.apply(this,arguments);this.render();this.bindEvents();this.hide()}HeaderView.prototype.render=function(){this.$content=$("<div>").addClass("content");this.$headerBackground=$("<div>").addClass("background");this.$headerRealBackground=$("<div>").addClass("realBackground");this.$headerBackground.append(this.$headerRealBackground);this.$closeButton=$("<a>").addClass("close");if(this.options.appType.isTablet()){this.$closeButton.append($("<div>").addClass("trackingArea"))}if(this.isCloseButtonOnRight()){this.$closeButton.addClass("right")}this.$backButton=$("<a>").addClass("back");if(this.options.appType.isTablet()){this.$backButton.append($("<div>").addClass("trackingArea"))}this.$backButton.hide();if(this.options.image!=null){this.$imageContainer=$("<div>").addClass("image");this.$img=$("<img>");this.$img.attr("src",this.options.image);this.$imageContainer.append(this.$img)}else{this.$el.addClass("noImage")}this.$title=$("<div>").addClass("title");if(!!this.options.name||!!this.options.description){this.$h1=$("<h1>");this.$h1.text(this.options.name||this.options.description);this.$title.append(this.$h1);if(!!this.options.name&&!!this.options.description){this.$h2=$("<h2>");this.$h2.text(this.options.description);this.$title.append(this.$h2)}else{this.$el.addClass("noDescription")}}else{this.$el.addClass("noName noDescription")}if(this.options.color!=null&&this.options.appType.isMobile()){this.$headerRealBackground.css("background",this.options.color.css())}this.$content.append(this.$headerBackground);this.$content.append(this.$closeButton);this.$content.append(this.$backButton);if(this.$imageContainer!=null){this.$content.append(this.$imageContainer)}this.$content.append(this.$title);return this.$el.append(this.$content)};HeaderView.prototype.bindEvents=function(){this.$backButton.on(support.clickEvent(),function(_this){return function(){return _this.trigger("back")}}(this));return this.$closeButton.on(support.clickEvent(),function(_this){return function(){return _this.trigger("close")}}(this))};HeaderView.prototype.height=function(){return this.$el.outerHeight(true)};HeaderView.prototype.setBackButtonVisible=function(visible,options){var animationOptions;if(options==null){options={}}if(options.animated==null){options.animated=true}animationOptions={duration:300,easing:"ease-in-out"};clearTimeout(this.buttonAnimationTimeout);if(!this.isCloseButtonOnRight()&&(!this.options.appType.isMobile()||this.options.appType.isiOSNative())){if(visible){this.$closeButton.gfx({opacity:0},$.extend({},animationOptions,{complete:function(_this){return function(){return _this.$closeButton.hide()}}(this)}))}else{this.buttonAnimationTimeout=setTimeout(function(_this){return function(){_this.$closeButton.show().redraw();return _this.$closeButton.gfx({opacity:1},animationOptions)}}(this),250)}}if(!visible){return this.$backButton.gfx({opacity:0},$.extend({},animationOptions,{complete:function(_this){return function(){return _this.$backButton.hide()}}(this)}))}else{return this.buttonAnimationTimeout=setTimeout(function(_this){return function(){_this.$backButton.show().redraw();return _this.$backButton.gfx({opacity:1},animationOptions)}}(this),250)}};HeaderView.prototype.hide=function(){var _ref;if(this.options.appType.isMobile()){this.$el.transform({translateY:-137});return(_ref=this.$imageContainer)!=null?_ref.transform({scale:.2,opacity:0}):void 0}else{return HeaderView.__super__.hide.apply(this,arguments)}};HeaderView.prototype.show=function(){var options,_ref;if(this.options.appType.isMobile()){options={duration:550,easing:easingCurves.LAZY_BOUNCE};this.$el.gfx({translateY:0},options);return(_ref=this.$imageContainer)!=null?_ref.gfx({scale:1,opacity:1},options):void 0}else{return HeaderView.__super__.show.apply(this,arguments)}};HeaderView.prototype.isCloseButtonOnRight=function(){return!helpers.isMac()};return HeaderView}(View);module.exports=HeaderView}).call(this)}});StripeCheckout.require.define({"inner/views/inputs/addressAptInput":function(exports,require,module){(function(){var AddressAptInput,Input,i18n,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Input=require("inner/views/inputs/input");i18n=require("lib/i18n");AddressAptInput=function(_super){__extends(AddressAptInput,_super);AddressAptInput.prototype.className="addressAptInput";AddressAptInput.prototype.fieldName="apt";function AddressAptInput(){AddressAptInput.__super__.constructor.apply(this,arguments);this.setInputId(""+this.options.type+"-apt");this.setPlaceholder(i18n.loc("input.address.apt")());this.$input.attr("autocomplete","off");this.$input.attr("autocorrect","off");this.$input.attr("autocapitalize","off");this.$input.attr("spellcheck","false")}return AddressAptInput}(Input);module.exports=AddressAptInput}).call(this)}});StripeCheckout.require.define({"inner/views/inputs/addressAutocompleteView":function(exports,require,module){(function(){var AddressAutocompleteView,PlaceAutocomplete,View,tracker,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");PlaceAutocomplete=require("lib/placeAutocomplete");tracker=require("lib/tracker");AddressAutocompleteView=function(_super){__extends(AddressAutocompleteView,_super);AddressAutocompleteView.prototype.className="addressAutocompleteView";function AddressAutocompleteView(options,input,callback){this.rowClicked=__bind(this.rowClicked,this);this.blur=__bind(this.blur,this);this.inputKeydown=__bind(this.inputKeydown,this);this.setSelectedIndex=__bind(this.setSelectedIndex,this);this.submit=__bind(this.submit,this);this.predictionsChanged=__bind(this.predictionsChanged,this);this.render=__bind(this.render,this);this.hide=__bind(this.hide,this);this.show=__bind(this.show,this);AddressAutocompleteView.__super__.constructor.apply(this,arguments);this.selectedIndex=0;this.maximumResults=this.options.appType.isMobile()?1:3;this.$inner=$("<div>").addClass("inner");this.$container=$("<div>").addClass("container");this.$inner.append(this.$container);this.$el.append(this.$inner);this.$inner.transform({opacity:0,rotateX:-60});this.$el.hide();this.$rows=[];this.hidden=true;this.$input=input;this.callback=callback;this.placeAutocomplete=new PlaceAutocomplete(this.$input[0],this.predictionsChanged);this.$input.on("keydown",this.inputKeydown);this.$input.on("blur",this.blur)}AddressAutocompleteView.prototype.show=function(){if(!this.hidden){return}tracker.track.addressAutocompleteShow();this.setSelectedIndex(0);this.hidden=false;this.trigger("visibilityDidChange");this.$el.show();return this.$inner.gfx({opacity:1,rotateX:0},{duration:300,easing:"cubic-bezier(.41,1.34,.51,1.01)",complete:function(_this){return function(){return _this.$inner.css({"-webkit-transform":""})}}(this)})};AddressAutocompleteView.prototype.hide=function(){if(this.hidden){return}this.hidden=true;this.trigger("visibilityDidChange");return this.$inner.gfx({opacity:0,rotateX:-60},{duration:150,easing:"ease-in-out",complete:function(_this){return function(){return _this.$el.hide()}}(this)})};AddressAutocompleteView.prototype.render=function(){var $row,result,_i,_len,_ref;this.$container.html("");this.$rows=[];_ref=this.results;for(_i=0,_len=_ref.length;_i<_len;_i++){result=_ref[_i];$row=$("<div>").addClass("row");$row.attr("data-index",this.$rows.length);$row.text(result.description);$row.on("click",this.rowClicked);this.$rows.push($row);this.$container.append($row)}return this.setSelectedIndex(this.selectedIndex)};AddressAutocompleteView.prototype.predictionsChanged=function(results){if(results.length>0){this.results=results.splice(0,this.maximumResults);this.render();return this.show()}else{return this.hide()}};AddressAutocompleteView.prototype.submit=function(){var selectedResult;tracker.track.addressAutocompleteResultSelected();this.hide();if(!(this.results&&this.results.length>this.selectedIndex)){return}selectedResult=this.results[this.selectedIndex];return PlaceAutocomplete.componentsFromPrediction(selectedResult,function(_this){return function(address){_this.placeAutocomplete.disable();_this.callback(address);return setTimeout(function(){return _this.placeAutocomplete.enable()},1e3)}}(this))};AddressAutocompleteView.prototype.setSelectedIndex=function(index){var $oldRow;if(index<0){return}if(index>=this.$rows.length){return}$oldRow=this.$rows[this.selectedIndex];if($oldRow!=null){$oldRow.removeClass("selected")}this.selectedIndex=index;return this.$rows[this.selectedIndex].addClass("selected")};AddressAutocompleteView.prototype.inputKeydown=function(e){if(this.hidden){return}if(e.keyCode===40){this.setSelectedIndex(this.selectedIndex+1);return e.preventDefault()}else if(e.keyCode===38){this.setSelectedIndex(this.selectedIndex-1);return e.preventDefault()}else if(e.keyCode===13){this.submit();return e.preventDefault()}else if(e.keyCode===27){this.hide();e.preventDefault();return false}};AddressAutocompleteView.prototype.blur=function(){return setTimeout(function(_this){return function(){return _this.hide()}}(this),100)};AddressAutocompleteView.prototype.rowClicked=function(e){var index;index=parseInt($(e.currentTarget).attr("data-index"));this.setSelectedIndex(index);this.submit();this.$input.focus();e.preventDefault();return false};return AddressAutocompleteView}(View);module.exports=AddressAutocompleteView}).call(this)}});StripeCheckout.require.define({"inner/views/inputs/addressCityInput":function(exports,require,module){(function(){var AddressCityInput,Input,i18n,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Input=require("inner/views/inputs/input");i18n=require("lib/i18n");AddressCityInput=function(_super){__extends(AddressCityInput,_super);AddressCityInput.prototype.className="addressCityInput";AddressCityInput.prototype.inputAutocomplete="locality";AddressCityInput.prototype.fieldName="city";function AddressCityInput(){AddressCityInput.__super__.constructor.apply(this,arguments);this.setInputId(""+this.options.type+"-city");this.setPlaceholder(i18n.loc("input.address.city")())}return AddressCityInput}(Input);module.exports=AddressCityInput}).call(this)}});StripeCheckout.require.define({"inner/views/inputs/addressCountrySelectInput":function(exports,require,module){(function(){var AddressCountrySelectInput,SelectInput,countries,geolocation,i18n,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};SelectInput=require("inner/views/inputs/selectInput");geolocation=require("lib/geolocation");countries=require("lib/countries");i18n=require("lib/i18n");AddressCountrySelectInput=function(_super){__extends(AddressCountrySelectInput,_super);AddressCountrySelectInput.prototype.className="addressCountrySelectInput";AddressCountrySelectInput.prototype.fieldName="country";function AddressCountrySelectInput(){this.countryCode=__bind(this.countryCode,this);this.country=__bind(this.country,this);this.clear=__bind(this.clear,this);AddressCountrySelectInput.__super__.constructor.apply(this,arguments);this.setSelectOptions(countries);this.setInputId(""+this.options.type+"-country");this.clear()}AddressCountrySelectInput.prototype.clear=function(){return this.setVal(geolocation.countryCode||"US")};AddressCountrySelectInput.prototype.country=function(){return this.selectedOption().value};AddressCountrySelectInput.prototype.countryCode=function(){return this.selectedOption().key};return AddressCountrySelectInput}(SelectInput);module.exports=AddressCountrySelectInput}).call(this)}});StripeCheckout.require.define({"inner/views/inputs/addressNameInput":function(exports,require,module){(function(){var AddressNameInput,Input,i18n,svgPaths,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Input=require("inner/views/inputs/input");svgPaths=require("inner/lib/svgPaths");i18n=require("lib/i18n");AddressNameInput=function(_super){__extends(AddressNameInput,_super);AddressNameInput.prototype.className="addressNameInput";AddressNameInput.prototype.inputAutocomplete="name-full";AddressNameInput.prototype.fieldName="name";function AddressNameInput(){AddressNameInput.__super__.constructor.apply(this,arguments);this.setIcon(svgPaths.getIcon("user",this.options.appType));this.setInputId(""+this.options.type+"-name");this.setLabel(i18n.loc("input.address.name")());this.setPlaceholder(i18n.loc("input.address.name.placeholder")())}return AddressNameInput}(Input);module.exports=AddressNameInput}).call(this)}});StripeCheckout.require.define({"inner/views/inputs/addressStreetInput":function(exports,require,module){(function(){var AddressStreetInput,Input,i18n,svgPaths,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Input=require("inner/views/inputs/input");svgPaths=require("inner/lib/svgPaths");i18n=require("lib/i18n");AddressStreetInput=function(_super){__extends(AddressStreetInput,_super);AddressStreetInput.prototype.className="addressStreetInput";AddressStreetInput.prototype.fieldName="street";function AddressStreetInput(){AddressStreetInput.__super__.constructor.apply(this,arguments);this.setIcon(svgPaths.getIcon("location",this.options.appType));this.setInputId(""+this.options.type+"-street");this.setLabel(i18n.loc("input.address")());this.setPlaceholder(i18n.loc("input.address.street")());this.$input.attr("autocomplete","off");this.$input.attr("autocorrect","off");this.$input.attr("autocapitalize","off");this.$input.attr("spellcheck","false")}return AddressStreetInput}(Input);module.exports=AddressStreetInput}).call(this)}});StripeCheckout.require.define({"inner/views/inputs/alipayIdCardInput":function(exports,require,module){(function(){var AlipayIdCardInput,Input,formatting,i18n,svgPaths,__bind=function(fn,me){return function(){return fn.apply(me,arguments)
}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Input=require("inner/views/inputs/input");svgPaths=require("inner/lib/svgPaths");i18n=require("lib/i18n");formatting=require("lib/formatting");AlipayIdCardInput=function(_super){__extends(AlipayIdCardInput,_super);AlipayIdCardInput.prototype.className="alipayIdCardInput";AlipayIdCardInput.prototype.inputId="alipayIdCard";AlipayIdCardInput.prototype.inputType="tel";AlipayIdCardInput.prototype.inputMaxLength=5;AlipayIdCardInput.prototype.fieldName="alipayIdCard";function AlipayIdCardInput(){this.validate=__bind(this.validate,this);AlipayIdCardInput.__super__.constructor.apply(this,arguments);this.setIcon(svgPaths.getIcon("idCard",this.options.appType));if(this.options.appType.isMobile()){this.setLabel(i18n.loc("input.idLast5Digits")())}this.setPlaceholder(i18n.loc("input.idLast5Digits.placeholder")());formatting.restrictInput(this.$input,/[0-9Xx]/)}AlipayIdCardInput.prototype.validate=function(){if(this.val().length!==5){this.setInvalid(true);return[{input:this,name:this.fieldName,reason:"required"}]}else{this.setInvalid(false);return[]}};return AlipayIdCardInput}(Input);module.exports=AlipayIdCardInput}).call(this)}});StripeCheckout.require.define({"inner/views/inputs/alipayUserIdInput":function(exports,require,module){(function(){var AlipayUserIdInput,Input,i18n,svgPaths,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Input=require("inner/views/inputs/input");svgPaths=require("inner/lib/svgPaths");i18n=require("lib/i18n");AlipayUserIdInput=function(_super){__extends(AlipayUserIdInput,_super);AlipayUserIdInput.prototype.className="alipayUserIdInput";AlipayUserIdInput.prototype.inputId="alipayUserIdInput";AlipayUserIdInput.prototype.fieldName="alipayUserId";function AlipayUserIdInput(){AlipayUserIdInput.__super__.constructor.apply(this,arguments);this.setIcon(svgPaths.getIcon("user",this.options.appType));this.setLabel(i18n.loc("input.alipayUserID")());if(this.options.placeholder==null){this.setPlaceholder(i18n.loc("input.alipayUserID.placeholder")())}}return AlipayUserIdInput}(Input);module.exports=AlipayUserIdInput}).call(this)}});StripeCheckout.require.define({"inner/views/inputs/cardCVCInput":function(exports,require,module){(function(){var CardCVCInput,Input,cardUtils,helpers,i18n,svgPaths,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Input=require("inner/views/inputs/input");svgPaths=require("inner/lib/svgPaths");helpers=require("lib/helpers");cardUtils=require("lib/cardUtils");i18n=require("lib/i18n");CardCVCInput=function(_super){__extends(CardCVCInput,_super);CardCVCInput.prototype.className="cardCVCInput";CardCVCInput.prototype.inputId="cc-csc";CardCVCInput.prototype.inputAutocomplete="cc-csc";CardCVCInput.prototype.inputType="tel";CardCVCInput.prototype.fieldName="cvc";function CardCVCInput(){this.validateFormat=__bind(this.validateFormat,this);this.clear=__bind(this.clear,this);this.setVal=__bind(this.setVal,this);CardCVCInput.__super__.constructor.apply(this,arguments);this.setIcon(svgPaths.getIcon("lock",this.options.appType));this.setLabel(i18n.loc("input.payment.cardCVC")());this.setPlaceholder("123");this.$input.attr("maxlength","4");this.$input.payment("restrictNumeric")}CardCVCInput.prototype.setVal=function(val,options){var toggleClass;if(options==null){options={}}CardCVCInput.__super__.setVal.apply(this,arguments);toggleClass="three-dots";if(cardUtils.getCvcLength(options.type)===4){toggleClass="four-dots"}toggleClass+=" prefill";return this.$el.toggleClass(toggleClass,options.prefill)};CardCVCInput.prototype.clear=function(){CardCVCInput.__super__.clear.apply(this,arguments);return this.$el.removeClass("prefill")};CardCVCInput.prototype.validateFormat=function(){return $.payment.validateCardCVC(this.val())};return CardCVCInput}(Input);module.exports=CardCVCInput}).call(this)}});StripeCheckout.require.define({"inner/views/inputs/cardExpiresInput":function(exports,require,module){(function(){var CardExpiresInput,Input,helpers,i18n,svgPaths,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Input=require("inner/views/inputs/input");svgPaths=require("inner/lib/svgPaths");helpers=require("lib/helpers");i18n=require("lib/i18n");CardExpiresInput=function(_super){__extends(CardExpiresInput,_super);CardExpiresInput.prototype.className="cardExpiresInput";CardExpiresInput.prototype.inputId="cc-exp";CardExpiresInput.prototype.inputAutocomplete="cc-exp";CardExpiresInput.prototype.fieldName="exp";function CardExpiresInput(){this.patchAutofill=__bind(this.patchAutofill,this);this.validateFormat=__bind(this.validateFormat,this);this.val=__bind(this.val,this);if(helpers.isiOS()){this.inputType="tel"}CardExpiresInput.__super__.constructor.apply(this,arguments);this.setIcon(svgPaths.getIcon("calendar",this.options.appType));if(this.options.appType.isMobile()){this.setLabel(i18n.loc("input.payment.cardExpiry.short")())}this.setPlaceholder(i18n.loc("input.payment.cardExpiry.placeholder")());this.$input.payment("formatCardExpiry");this.patchAutofill()}CardExpiresInput.prototype.val=function(){return this.$input.payment("cardExpiryVal")};CardExpiresInput.prototype.validateFormat=function(){return $.payment.validateCardExpiry(this.val().month,this.val().year)};CardExpiresInput.prototype.patchAutofill=function(){var $option,month,months,year,years,_i,_j,_len,_len1;months=[{name:"January",value:"01"},{name:"February",value:"02"},{name:"March",value:"03"},{name:"April",value:"04"},{name:"May",value:"05"},{name:"June",value:"06"},{name:"July",value:"07"},{name:"August",value:"08"},{name:"September",value:"09"},{name:"October",value:"10"},{name:"November",value:"11"},{name:"December",value:"12"}];years=[2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024];this.$expMonth=$("<select>");this.$expMonth.attr("id","cc-exp-month");helpers.setAutocomplete(this.$input.get(0),"off");helpers.setAutocomplete(this.$expMonth.get(0),"cc-exp-month");this.$expMonth.attr("tabindex","-1");this.$expMonth.css({position:"absolute",left:-1e4});$option=$("<option>");$option.text("Month");this.$expMonth.append($option);for(_i=0,_len=months.length;_i<_len;_i++){month=months[_i];$option=$("<option>");$option.val(month.value);$option.text(month.name);this.$expMonth.append($option)}this.$expYear=$("<select>");this.$expYear.attr("id","cc-exp-year");helpers.setAutocomplete(this.$expYear.get(0),"cc-exp-year");this.$expYear.attr("tabindex","-1");this.$expYear.css({position:"absolute",left:-1e4});$option=$("<option>");$option.text("Year");this.$expYear.append($option);for(_j=0,_len1=years.length;_j<_len1;_j++){year=years[_j];$option=$("<option>");$option.val(year);$option.text(year);this.$expYear.append($option)}this.$el.append(this.$expYear);this.$el.append(this.$expMonth);return function(_this){return function(){var check,lastValue;lastValue="Month / Year";check=function(){var value;year=_this.$expYear.val();month=_this.$expMonth.val();if(year==="Year"||month==="Month"){return}if(year.length===4){year=year.slice(2)}value=month+" / "+year;if(value!==lastValue){lastValue=value;return setTimeout(function(){return _this.$input.val(value)},1e3)}};setInterval(check,1e3);_this.$expYear.on("change",check);return _this.$expMonth.on("change",check)}}(this)()};return CardExpiresInput}(Input);module.exports=CardExpiresInput}).call(this)}});StripeCheckout.require.define({"inner/views/inputs/cardNumberInput":function(exports,require,module){(function(){var CardNumberInput,Input,cardUtils,easingCurves,helpers,i18n,svgPaths,variants,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Input=require("inner/views/inputs/input");svgPaths=require("inner/lib/svgPaths");easingCurves=require("inner/lib/easingCurves");cardUtils=require("lib/cardUtils");i18n=require("lib/i18n");variants=require("lib/variants");helpers=require("lib/helpers");CardNumberInput=function(_super){__extends(CardNumberInput,_super);CardNumberInput.prototype.className="cardNumberInput";CardNumberInput.prototype.inputId="card_number";CardNumberInput.prototype.inputType="tel";CardNumberInput.prototype.inputAutocomplete="cc-number";CardNumberInput.prototype.fieldName="number";function CardNumberInput(){this.validateFormat=__bind(this.validateFormat,this);this.onCardTypeChanged=__bind(this.onCardTypeChanged,this);this.setCardType=__bind(this.setCardType,this);this.clear=__bind(this.clear,this);this.setVal=__bind(this.setVal,this);this.bindEvents=__bind(this.bindEvents,this);CardNumberInput.__super__.constructor.apply(this,arguments);this.setIcon(svgPaths.getIcon("card",this.options.appType));if(this.options.appType.isMobile()){this.setLabel(i18n.loc("input.card")());this.setPlaceholder("•••• •••• •••• ••••")}else{this.setLabel(i18n.loc("input.payment.cardNumber")())}this.$input.payment("formatCardNumber")}CardNumberInput.prototype.bindEvents=function(){CardNumberInput.__super__.bindEvents.apply(this,arguments);return this.$input.on("payment.cardType",this.onCardTypeChanged)};CardNumberInput.prototype.setVal=function(val,options){var type;if(options==null){options={}}CardNumberInput.__super__.setVal.apply(this,arguments);if(options.type!=null){type=cardUtils.extractCardType(options.type);this.setCardType(type)}return this.$el.toggleClass("prefill",options.prefill)};CardNumberInput.prototype.clear=function(){CardNumberInput.__super__.clear.apply(this,arguments);this.setCardType("unknown");return this.$el.removeClass("prefill")};CardNumberInput.prototype.setCardType=function(type,animated){var $oldCard;if(animated==null){animated=true}if(type===this.currentCardType){return}this.currentCardType=type;if(this.$card){$oldCard=this.$card;$oldCard.gfx({opacity:0},{duration:250,easing:"ease-in-out",animated:animated,complete:function(){return $oldCard.detach()}})}if(!cardUtils.extractCardType(type)){this.$card=null;return}this.$card=$("<span>").addClass("card").addClass(type);this.$card.transform({opacity:0,translateX:-35});this.$el.append(this.$card);this.$card.redraw();return this.$card.gfx({opacity:1,translateX:0},{duration:300,easing:easingCurves.LAZY_BOUNCE,animated:animated})};CardNumberInput.prototype.onCardTypeChanged=function(e,type){return this.setCardType(type)};CardNumberInput.prototype.validateFormat=function(){return $.payment.validateCardNumber(this.val())};return CardNumberInput}(Input);module.exports=CardNumberInput}).call(this)}});StripeCheckout.require.define({"inner/views/inputs/emailInput":function(exports,require,module){(function(){var EmailInput,Input,SvgSpinner,emailDomains,i18n,support,svgPaths,validation,variants,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Input=require("inner/views/inputs/input");svgPaths=require("inner/lib/svgPaths");SvgSpinner=require("inner/views/svg/svgSpinner");validation=require("lib/validation");i18n=require("lib/i18n");support=require("lib/support");emailDomains=require("inner/lib/emailDomains");variants=require("lib/variants");EmailInput=function(_super){__extends(EmailInput,_super);EmailInput.prototype.className="emailInput";EmailInput.prototype.inputId="email";EmailInput.prototype.inputType="email";EmailInput.prototype.inputAutocomplete="email";EmailInput.prototype.fieldName="email";function EmailInput(){this.onPredictionSuffixTouchEnd=__bind(this.onPredictionSuffixTouchEnd,this);this.onBlurPredict=__bind(this.onBlurPredict,this);this.onKeyInputPredict=__bind(this.onKeyInputPredict,this);this.onKeyDownPredict=__bind(this.onKeyDownPredict,this);this.acceptPrediction=__bind(this.acceptPrediction,this);this.hasPrediction=__bind(this.hasPrediction,this);this.clearPrediction=__bind(this.clearPrediction,this);this.setPrediction=__bind(this.setPrediction,this);this.setSpinnerVisibility=__bind(this.setSpinnerVisibility,this);this.validateFormat=__bind(this.validateFormat,this);this.bindEvents=__bind(this.bindEvents,this);this.render=__bind(this.render,this);EmailInput.__super__.constructor.apply(this,arguments);this.setIcon(svgPaths.getIcon("email",this.options.appType));this.setLabel(i18n.loc("input.email")(),i18n.loc("input.email.abbr")());this.setPlaceholder(i18n.loc("input.email.placeholder")());if(this.options.email){this.val(this.options.email)}}EmailInput.prototype.render=function(){EmailInput.__super__.render.apply(this,arguments);if(this.predictionEnabled()){this.$prediction=$("<span>").addClass("prediction");this.$predictionPrefix=$("<span>").addClass("prefix");this.$predictionSuffix=$("<span>").addClass("suffix");this.$prediction.append(this.$predictionPrefix);this.$prediction.append(this.$predictionSuffix);this.$el.append(this.$prediction)}this.$spinnerContainer=$("<span>").addClass("spinnerContainer");this.spinner=new SvgSpinner({size:!this.options.appType.isTablet()?14:18,color:"#000",shadowColor:"#fff"});this.$spinnerContainer.hide();this.$spinnerContainer.append(this.spinner.$el);return this.$el.append(this.$spinnerContainer)};EmailInput.prototype.bindEvents=function(){EmailInput.__super__.bindEvents.apply(this,arguments);if(this.predictionEnabled()){this.on("keyDown",this.onKeyDownPredict);this.on("keyInput",this.onKeyInputPredict);this.on("blur",this.onBlurPredict);return this.$predictionSuffix.on("touchend",this.onPredictionSuffixTouchEnd)}};EmailInput.prototype.validateFormat=function(){return validation.validateEmail(this.val())};EmailInput.prototype.setSpinnerVisibility=function(visible){if(this.spinnerVisible===visible){return}this.spinnerVisible=visible;if(this.spinnerVisible){this.$spinnerContainer.show();return this.spinner.startAnimating()}else{this.$spinnerContainer.hide();return this.spinner.stopAnimating()}};EmailInput.prototype.predictionEnabled=function(){return support.pointerEvents()&&variants.isActiveVariant("emailPrediction","enable")};EmailInput.prototype.setPrediction=function(prefix,suffix){this.currentPrediction=prefix+suffix;this.$predictionPrefix.text(prefix);this.$predictionSuffix.text(suffix);if(this.$prediction.width()>this.$input.width()){return this.clearPrediction()}};EmailInput.prototype.clearPrediction=function(){this.setPrediction("","");return this.arrowKeyMovement=false};EmailInput.prototype.hasPrediction=function(){return this.currentPrediction!=null&&this.currentPrediction.length>0};EmailInput.prototype.acceptPrediction=function(){if(this.hasPrediction()){this.setVal(this.currentPrediction);return this.clearPrediction()}};EmailInput.prototype.onKeyDownPredict=function(e){if(this.hasPrediction()){if(e.which===13||e.which===9||e.which===39&&!this.arrowKeyMovement){this.acceptPrediction();e.preventDefault()}if(e.which>=37&&e.which<=40){return this.arrowKeyMovement=true}}};EmailInput.prototype.onKeyInputPredict=function(e){var domain,fullEmail,prediction,predictionDomain,prefix,suffix,val,_i,_len;val=this.val();if(val.indexOf("@")<0){return this.clearPrediction()}prefix=val.substring(0,val.indexOf("@"));suffix=val.substring(val.indexOf("@")+1,val.length);predictionDomain=null;for(_i=0,_len=emailDomains.length;_i<_len;_i++){domain=emailDomains[_i];if(domain.indexOf(suffix)===0){predictionDomain=domain;break}}if(predictionDomain){fullEmail=prefix+"@"+predictionDomain;prediction=fullEmail.substring(val.length,fullEmail.length);return this.setPrediction(val,prediction)}else{return this.clearPrediction()}};EmailInput.prototype.onBlurPredict=function(){if(this.options.appType.isDesktop()){return this.clearPrediction()}else{return this.acceptPrediction()}};EmailInput.prototype.onPredictionSuffixTouchEnd=function(){this.acceptPrediction();return setTimeout(function(_this){return function(){return _this.setVal(_this.val())}}(this),1)};return EmailInput}(Input);module.exports=EmailInput}).call(this)}});StripeCheckout.require.define({"inner/views/inputs/input":function(exports,require,module){(function(){var Input,Svg,View,helpers,popoverManager,svgPaths,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");Svg=require("inner/views/svg/svg");helpers=require("lib/helpers");svgPaths=require("inner/lib/svgPaths");popoverManager=require("inner/lib/popoverManager");Input=function(_super){__extends(Input,_super);Input.prototype.className="input";Input.prototype.inputTagName="input";Input.prototype.inputType="text";function Input(){this.onInputValueDidChange=__bind(this.onInputValueDidChange,this);this.onKeyInput=__bind(this.onKeyInput,this);this.onKeyPress=__bind(this.onKeyPress,this);this.onKeyDown=__bind(this.onKeyDown,this);this.onKeyUp=__bind(this.onKeyUp,this);this.onBlur=__bind(this.onBlur,this);this.onFocus=__bind(this.onFocus,this);this.onCheckForChange=__bind(this.onCheckForChange,this);this.setErrorIconVisible=__bind(this.setErrorIconVisible,this);this.openPopover=__bind(this.openPopover,this);this.setAutocompletingStyle=__bind(this.setAutocompletingStyle,this);this.setStyle=__bind(this.setStyle,this);this.setIcon=__bind(this.setIcon,this);this.setLabel=__bind(this.setLabel,this);this.setPlaceholder=__bind(this.setPlaceholder,this);this.setInvalid=__bind(this.setInvalid,this);this.setDisabled=__bind(this.setDisabled,this);this.validate=__bind(this.validate,this);this.isEmpty=__bind(this.isEmpty,this);this.val=__bind(this.val,this);this.setVal=__bind(this.setVal,this);this.clear=__bind(this.clear,this);this.blur=__bind(this.blur,this);this.isFocused=__bind(this.isFocused,this);this.focus=__bind(this.focus,this);this.setInputId=__bind(this.setInputId,this);this.onPaste=__bind(this.onPaste,this);this.bindEvents=__bind(this.bindEvents,this);this.render=__bind(this.render,this);var _base;Input.__super__.constructor.apply(this,arguments);if((_base=this.options).icon==null){_base.icon=true}this.manuallyEdited=false;this.pasted=false;this.render();this.bindEvents()}Input.prototype.render=function(){this.$input=$("<"+this.inputTagName+">");this.$input.addClass("control");if(this.inputId!=null){this.$input.attr("id",this.inputId)}if(this.inputTagName==="input"){this.$input.attr("type",this.inputType)}if(this.inputMaxLength!=null){this.$input.attr("maxlength",this.inputMaxLength)}if(this.options.placeholder!=null){this.$input.attr("placeholder",this.options.placeholder)}if(this.inputAutocomplete!=null){helpers.setAutocomplete(this.$input.get(0),this.inputAutocomplete)}this.$el.append(this.$input);if(this.options.label){this.setLabel(this.options.label)}if(this.options.appType.isMobile()){this.$errorIconContainer=$("<div>").addClass("errorIconContainer");this.errorIcon=new Svg($.extend({},svgPaths.getIcon("error",this.options.appType),{color:"red",className:"errorIcon"}));this.errorIcon.$el.transform({opacity:0,translateX:20});return this.$errorIconContainer.append(this.errorIcon.$el)}};Input.prototype.bindEvents=function(){this.$input.on("focus",this.onFocus);this.$input.on("blur",this.onBlur);this.$input.on("change",function(_this){return function(){return _this.onCheckForChange("change")}}(this));this.$input.on("keyup",function(_this){return function(){return _this.onCheckForChange("keyup")}}(this));this.$input.on("keydown",function(_this){return function(){return _this.onCheckForChange("keydown")}}(this));this.$input.on("keyup",this.onKeyUp);this.$input.on("keydown",this.onKeyDown);this.$input.on("keypress",this.onKeyPress);this.$input.on("input",this.onKeyInput);this.$input.on("paste",this.onPaste);this.$input.on("blur",function(_this){return function(){return setTimeout(_this.onCheckForChange,20)}}(this));return this.on("valueDidChange",this.onInputValueDidChange)};Input.prototype.onPaste=function(e){return this.pasted=true};Input.prototype.setInputId=function(id){return this.$input.attr("id",id)};Input.prototype.focus=function(){this.$input.focus();return true};Input.prototype.isFocused=function(){return this.$input.is(":focus")};Input.prototype.blur=function(){return this.$input.blur()};Input.prototype.clear=function(){return this.$input.val("")};Input.prototype.setVal=function(val,valid){if(valid==null){valid=true}if(valid){this.$input.removeClass("invalid")}return this.$input.val(val)};Input.prototype.val=function(){return this.$input.val()};Input.prototype.isEmpty=function(){return this.val().length===0};Input.prototype.validate=function(){if(!this.$input.val().length){this.setInvalid(true);return[{input:this,name:this.fieldName,reason:"required"}]}else if(this.validateFormat!=null&&!this.validateFormat()){this.setInvalid(true);return[{input:this,name:this.fieldName,reason:"format"}]}else{this.setInvalid(false);return[]}};Input.prototype.setDisabled=function(disabled){return this.$input.attr("disabled",disabled)};Input.prototype.setInvalid=function(invalid){this.$el.toggleClass("invalid",invalid);this.$input.toggleClass("invalid",invalid);return this.setErrorIconVisible(invalid)};Input.prototype.setPlaceholder=function(placeholder){if(this.label&&(this.options.appType.isDesktop()||this.options.appType.isTablet())){return}return this.$input.setPlaceholder(placeholder)};Input.prototype.setLabel=function(label,abbreviatedLabel){this.label=label;if(this.options.appType.isDesktop()||this.options.appType.isTablet()){this.$input.setPlaceholder(label);return}if(this.options.label!=null&&!this.options.label){return}if(!this.$label){this.$label=$("<label>");this.$el.append(this.$label)}return this.$label.text(abbreviatedLabel!=null?abbreviatedLabel:label)};Input.prototype.setIcon=function(icon){var _ref;if(!this.options.icon){return}if((_ref=this.icon)!=null){_ref.remove()}if(icon!=null){this.icon=new Svg($.extend({},icon,{color:this.options.color.css(),fillRule:"evenodd",className:"icon"}));return this.addSubview(this.icon)}};Input.prototype.setStyle=function(style){this.$el.removeClass("left right top middle bottom");return this.$el.addClass(style)};Input.prototype.setAutocompletingStyle=function(autocompleting){return this.$el.toggleClass("autocompleting",autocompleting)};Input.prototype.openPopover=function(text){return this.popover=popoverManager.openPopover(this,text)};Input.prototype.setErrorIconVisible=function(visible){if(this.errorIcon==null){return}if(visible){this.$el.append(this.$errorIconContainer);this.errorIcon.redraw();return this.errorIcon.$el.gfx({opacity:1,translateX:-7},{duration:250,easing:"ease-in-out",complete:function(_this){return function(){return _this.errorIcon.$el.addClass("animated")}}(this)})}else{this.errorIcon.$el.removeClass("animated");return this.errorIcon.$el.gfx({opacity:0,translateX:20},{duration:250,easing:"ease-in-out",complete:function(_this){return function(){return _this.$errorIconContainer.detach()}}(this)})}};Input.prototype.onCheckForChange=function(eventName){var currentVal;currentVal=this.val();if(this.lastVal!==currentVal){this.trigger("valueDidChange",currentVal);if(eventName==="keyup"||eventName==="keydown"){this.manuallyEdited=true}}return this.lastVal=currentVal};Input.prototype.onFocus=function(e){if(!this.isInDOM()){return}this.$el.addClass("focus");return this.$input.addClass("focus")};Input.prototype.onBlur=function(e){this.trigger("blur",e);this.$el.removeClass("focus");return this.$input.removeClass("focus")};Input.prototype.onKeyUp=function(e){return this.trigger("keyUp",e)};Input.prototype.onKeyDown=function(e){return this.trigger("keyDown",e)};Input.prototype.onKeyPress=function(e){return this.trigger("keyPress",e)};Input.prototype.onKeyInput=function(e){return this.trigger("keyInput",e)};Input.prototype.onInputValueDidChange=function(){this.setErrorIconVisible(false);if(this.popover){popoverManager.closePopover(this.popover);return this.popover=null}};return Input}(View);module.exports=Input}).call(this)}});StripeCheckout.require.define({"inner/views/inputs/labelWithCheckbox":function(exports,require,module){(function(){var Checkbox,LabelWithCheckbox,Svg,SwitchControl,View,svgPaths,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");Checkbox=require("inner/views/controls/checkbox");SwitchControl=require("inner/views/controls/switchControl");svgPaths=require("inner/lib/svgPaths");Svg=require("inner/views/svg/svg");LabelWithCheckbox=function(_super){__extends(LabelWithCheckbox,_super);LabelWithCheckbox.prototype.className="labelWithCheckbox";function LabelWithCheckbox(){this.setStyle=__bind(this.setStyle,this);this.setChecked=__bind(this.setChecked,this);this.isChecked=__bind(this.isChecked,this);this.render=__bind(this.render,this);LabelWithCheckbox.__super__.constructor.apply(this,arguments);this.options=$.extend({},{label:"",checked:false,iconName:"home"},this.options);this.$inner=$("<div>").addClass("inner");if(this.options.appType.isMobile()){this.icon=new Svg($.extend({},svgPaths.getIcon(this.options.iconName,this.options.appType),{color:this.options.color.css(),fillRule:"evenodd",className:"icon"}));this.$inner.append(this.icon.$el)}if(this.options.appType.isTablet()||this.options.appType.isMobile()){this.checkbox=new SwitchControl}else{this.checkbox=new Checkbox;this.$el.on("click",function(_this){return function(){return _this.checkbox.toggle({userAction:true})}}(this))}this.checkbox.setChecked(this.options.checked);this.checkbox.on("didChange",function(_this){return function(args){if(args==null){args={}}return _this.trigger("checkedDidChange",args)}}(this));if(this.options.checkboxClassName!=null){if(this.options.appType.isTablet()){this.checkbox.$switch.addClass(this.options.checkboxClassName)}else{this.checkbox.$el.addClass(this.options.checkboxClassName)}}this.$label=$("<label>");this.$label.text(this.options.label);if(this.options.label.length>20){this.$label.addClass("smallFont")}this.render()}LabelWithCheckbox.prototype.render=function(){this.$inner.append(this.checkbox.$el);this.$inner.append(this.$label);return this.$el.append(this.$inner)};LabelWithCheckbox.prototype.isChecked=function(){return this.checkbox.checked};LabelWithCheckbox.prototype.setChecked=function(checked){return this.checkbox.setChecked(checked)};LabelWithCheckbox.prototype.setStyle=function(style){return this.$el.removeClass("small top").addClass(style)};return LabelWithCheckbox}(View);module.exports=LabelWithCheckbox}).call(this)}});StripeCheckout.require.define({"inner/views/inputs/rememberMe":function(exports,require,module){(function(){var LabelWithCheckbox,PopoverView,RememberMe,SeparatorLineView,Svg,TelInput,View,easingCurves,fastdom,i18n,popoverManager,support,svgPaths,tracker,variants,_,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");SeparatorLineView=require("inner/views/separatorLineView");LabelWithCheckbox=require("inner/views/inputs/labelWithCheckbox");TelInput=require("inner/views/inputs/telInput");PopoverView=require("inner/views/popoverView");easingCurves=require("inner/lib/easingCurves");popoverManager=require("inner/lib/popoverManager");svgPaths=require("inner/lib/svgPaths");Svg=require("inner/views/svg/svg");tracker=require("lib/tracker");variants=require("lib/variants");i18n=require("lib/i18n");support=require("lib/support");_=require("vendor/lodash");fastdom=require("vendor/fastdom");RememberMe=function(_super){__extends(RememberMe,_super);RememberMe.prototype.className="rememberMe";function RememberMe(){this.setExpandedVisible=__bind(this.setExpandedVisible,this);this.onStripeLinkClicked=__bind(this.onStripeLinkClicked,this);this.onPhoneValueDidChange=__bind(this.onPhoneValueDidChange,this);this.onCheckedDidChange=__bind(this.onCheckedDidChange,this);this.animatableViews=__bind(this.animatableViews,this);this.isPhoneVisible=__bind(this.isPhoneVisible,this);this.setPhoneVisible=__bind(this.setPhoneVisible,this);this.isChecked=__bind(this.isChecked,this);this.setChecked=__bind(this.setChecked,this);this.validate=__bind(this.validate,this);this.val=__bind(this.val,this);this.bindEvents=__bind(this.bindEvents,this);this.render=__bind(this.render,this);RememberMe.__super__.constructor.apply(this,arguments);this.phoneVisible=true;this.render();this.bindEvents()}RememberMe.prototype.name=function(){return"phone"};RememberMe.prototype.render=function(){var text,view,_i,_len,_ref;this.labelWithCheckbox=new LabelWithCheckbox({color:this.options.color,appType:this.options.appType,iconName:"user",label:this.options.label,checkboxClassName:"checkbox-remember-me"});this.$expandedContainer=$("<div>").addClass("expandedContainer");this.$expanded=$("<div>").addClass("expanded");this.$expandedContainer.append(this.$expanded);this.infoParagraph=new View({tag:"p"});if(!this.options.appType.isMobile()){text=i18n.loc("rememberMe.description")({phoneNumber:"<strong>"+i18n.loc("rememberMe.description.mobilePhoneNumber")()+"</strong>"});this.$stripeLink=$("<a>").addClass("stripeLink");if(this.options.appType.isTablet()){this.$expanded.append(this.$stripeLink)}else{this.$el.append(this.$stripeLink)}}else{text=i18n.loc("rememberMe.description.mobileVariant")({stripe:"<strong>Stripe</strong>"});text+=' <a href="/-/remember-me" target="_blank" tabIndex="-1">'+i18n.loc("rememberMe.description.moreInfo")()+"</a>"}this.infoParagraph.$el.html(text);this.$expanded.append(this.infoParagraph.$el);this.phone=new TelInput({color:this.options.color,appType:this.options.appType});this.$expanded.append(this.phone.$el);if(!this.options.appType.isMobile()){this.$expanded.transform({opacity:0,rotateX:-60});this.$expanded.hide()}else{this.line1=new SeparatorLineView({className:"line1"});this.line2=new SeparatorLineView({className:"line2"});_ref=[this.line1,this.phone,this.line2,this.infoParagraph];for(_i=0,_len=_ref.length;_i<_len;_i++){view=_ref[_i];view.hide();view.$el.transform({opacity:0})}}this.addSubview(this.labelWithCheckbox);if(this.options.appType.isMobile()){this.addSubview(this.line1);this.addSubview(this.line2)
}return this.$el.append(this.$expandedContainer)};RememberMe.prototype.bindEvents=function(){var _ref;this.labelWithCheckbox.on("checkedDidChange",this.onCheckedDidChange);this.phone.on("valueDidChange",this.onPhoneValueDidChange);return(_ref=this.$stripeLink)!=null?_ref.on("click",this.onStripeLinkClicked):void 0};RememberMe.prototype.val=function(){if(!this.isChecked()){return}return this.phone.val()};RememberMe.prototype.validate=function(){var valid;valid=[];if(!this.isPhoneVisible()){return valid}return this.phone.validate()};RememberMe.prototype.setChecked=function(checked){return this.labelWithCheckbox.setChecked(checked)};RememberMe.prototype.isChecked=function(){return this.labelWithCheckbox.isChecked()};RememberMe.prototype.setPhoneVisible=function(phoneVisible){this.phoneVisible=phoneVisible;return this.trigger("phoneVisibleDidChange",this.isPhoneVisible())};RememberMe.prototype.isPhoneVisible=function(){return this.isChecked()&&this.phoneVisible};RememberMe.prototype.animatableViews=function(options){var views;if(options==null){options={}}views=[this.labelWithCheckbox];if(this.isPhoneVisible()||options.allViews){if(this.line1!=null){views.push(this.line1)}views.push(this.phone);if(this.line2!=null){views.push(this.line2)}views.push(this.infoParagraph)}return _.flatten(_.map(views,function(view){return view.animatableViews.apply(view,arguments)}))};RememberMe.prototype.onCheckedDidChange=function(args){if(args==null){args={}}this.phoneVisible=true;this.setExpandedVisible(this.isPhoneVisible());return this.trigger("phoneVisibleDidChange",this.isPhoneVisible(),args)};RememberMe.prototype.onPhoneValueDidChange=function(){if(!this.popover){return}if(this.phone.valLengthWithoutPrefix()<2){return}return popoverManager.closePopover(this.popover)};RememberMe.prototype.onStripeLinkClicked=function(e){var _ref;e.stopImmediatePropagation();e.preventDefault();if((_ref=this.popover)!=null){_ref.toggle()}return tracker.track.moreInfo()};RememberMe.prototype.setExpandedVisible=function(visible,animated){var str;if(animated==null){animated=true}fastdom.write(function(_this){return function(){_this.$el.toggleClass("withExpand",visible);return _this.trigger("didResize")}}(this));if(this.options.appType.isMobile()){return}if(visible){if(popoverManager.supportPopovers()){str=i18n.loc("rememberMe.description.popover")({stripe:"<strong>Stripe</strong>"});str+=' <a href="/-/remember-me" target="_blank" tabIndex="-1">'+i18n.loc("rememberMe.description.moreInfo")()+"</a>";this.popover=popoverManager.openPopover(this,str)}return fastdom.write(function(_this){return function(){_this.labelWithCheckbox.setStyle("top");_this.$expanded.show().redraw();return _this.$expanded.gfx({opacity:1,rotateX:0},{duration:400,easing:"cubic-bezier(.41,1.34,.51,1.01)",animated:animated,complete:function(){if(support.automaticallyGiveFocus()){return _this.phone.focus()}}})}}(this))}else{popoverManager.closePopover(this.popover);this.popover=null;this.phone.blur();return fastdom.write(function(_this){return function(){_this.labelWithCheckbox.setStyle("");return _this.$expanded.gfx({opacity:0,rotateX:-60},{duration:200,easing:"ease-in-out",animated:animated,complete:function(){return _this.$expanded.hide()}})}}(this))}};return RememberMe}(View);module.exports=RememberMe}).call(this)}});StripeCheckout.require.define({"inner/views/inputs/selectInput":function(exports,require,module){(function(){var Input,SelectInput,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Input=require("inner/views/inputs/input");SelectInput=function(_super){__extends(SelectInput,_super);function SelectInput(){this.onBlur=__bind(this.onBlur,this);this.onFocus=__bind(this.onFocus,this);this.onClick=__bind(this.onClick,this);this.setInvalid=__bind(this.setInvalid,this);this.selectedOption=__bind(this.selectedOption,this);this.setVal=__bind(this.setVal,this);this.setSelectOptions=__bind(this.setSelectOptions,this);this.bindEvents=__bind(this.bindEvents,this);this.render=__bind(this.render,this);return SelectInput.__super__.constructor.apply(this,arguments)}SelectInput.prototype.className="selectInput";SelectInput.prototype.inputTagName="select";SelectInput.prototype.render=function(){SelectInput.__super__.render.apply(this,arguments);this.$input.removeClass("control");this.$container=$("<div>").addClass("control");this.$container.append(this.$input);return this.$el.append(this.$container)};SelectInput.prototype.bindEvents=function(){SelectInput.__super__.bindEvents.apply(this,arguments);return this.$el.on("click",this.onClick)};SelectInput.prototype.setSelectOptions=function(selectOptions){var $option,key,value,_ref,_results;this.selectOptions=selectOptions;this.$input.empty();_ref=this.selectOptions;_results=[];for(key in _ref){value=_ref[key];$option=$("<option>");$option.val(key);$option.text(value);_results.push(this.$input.append($option))}return _results};SelectInput.prototype.setVal=function(val){var k,v,_ref,_results;if(this.selectOptions[val]){return SelectInput.__super__.setVal.call(this,val)}else{_ref=this.selectOptions;_results=[];for(k in _ref){v=_ref[k];if(v===val){SelectInput.__super__.setVal.call(this,k);break}else{_results.push(void 0)}}return _results}};SelectInput.prototype.selectedOption=function(){var key;key=this.val();return{key:key,value:this.selectOptions[key]}};SelectInput.prototype.setInvalid=function(invalid){SelectInput.__super__.setInvalid.apply(this,arguments);return this.$container.toggleClass("invalid",invalid)};SelectInput.prototype.onClick=function(e){var element;if(e.originalEvent.srcElement!==this.$el.get(0)){return}element=this.$input.get(0);if(document.createEvent){e=document.createEvent("MouseEvents");e.initMouseEvent("mousedown",true,true,window,0,0,0,0,0,false,false,false,false,0,null);return element.dispatchEvent(e)}else if(element.fireEvent){return element.fireEvent("onmousedown")}};SelectInput.prototype.onFocus=function(){SelectInput.__super__.onFocus.apply(this,arguments);return this.$container.addClass("focus")};SelectInput.prototype.onBlur=function(){SelectInput.__super__.onBlur.apply(this,arguments);return this.$container.removeClass("focus")};return SelectInput}(Input);module.exports=SelectInput}).call(this)}});StripeCheckout.require.define({"inner/views/inputs/telInput":function(exports,require,module){(function(){var AVAILABLE_FLAGS,Input,Svg,TelInput,easingCurves,geolocation,helpers,i18n,support,svgPaths,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Input=require("inner/views/inputs/input");svgPaths=require("inner/lib/svgPaths");Svg=require("inner/views/svg/svg");geolocation=require("lib/geolocation");easingCurves=require("inner/lib/easingCurves");helpers=require("lib/helpers");support=require("lib/support");i18n=require("lib/i18n");AVAILABLE_FLAGS=["AD","AE","AG","AM","AR","AT","AU","BE","BF","BG","BO","BR","CA","CD","CG","CH","CL","CM","CN","CO","CZ","DE","DJ","DK","DZ","EE","EG","ES","FI","FR","GA","GB","GM","GT","HN","HT","HU","ID","IE","IL","IN","IQ","IR","IT","JM","JO","JP","KG","KN","KP","KR","KW","KZ","LA","LB","LC","LS","LU","LV","MG","MK","ML","MM","MT","MX","NA","NE","NG","NI","NL","NO","OM","PA","PE","PG","PK","PL","PT","PY","QA","RO","RU","RW","SA","SE","SG","SL","SN","SO","SV","TD","TJ","TL","TR","TZ","UA","US","VE","VN","YE"];TelInput=function(_super){__extends(TelInput,_super);TelInput.prototype.className="telInput";TelInput.prototype.inputType="tel";TelInput.prototype.inputAutocomplete="phone-full";TelInput.prototype.fieldName="phone";function TelInput(){this.updateCountryFlag=__bind(this.updateCountryFlag,this);this.validateFormat=__bind(this.validateFormat,this);this.onCountryChanged=__bind(this.onCountryChanged,this);this.focus=__bind(this.focus,this);this.valLengthWithoutPrefix=__bind(this.valLengthWithoutPrefix,this);this.val=__bind(this.val,this);this.bindEvents=__bind(this.bindEvents,this);this.render=__bind(this.render,this);var countries,country,countryPrefix,navLanguage,prefix,_ref,_ref1,_ref2;TelInput.__super__.constructor.apply(this,arguments);this.setIcon(svgPaths.getIcon("phone",this.options.appType));this.$input.attr("name","phone");this.$input.mobilePhoneNumber();if(this.options.appType.isMobile()){this.setLabel(i18n.loc("input.phone")())}this.setPlaceholder("(555) 123-1234");this.updateCountryFlag(this.$input.mobilePhoneNumber("country"));if(geolocation.countryCode){prefix=$.mobilePhoneNumberPrefixFromCountryCode(geolocation.countryCode);if(prefix){countries={US:"+1",JP:"+81"};country=(_ref=geolocation.countryCode)!=null?_ref.toUpperCase():void 0;navLanguage=(_ref1=(_ref2=navigator.language)!=null?_ref2:navigator.userLanguage)!=null?_ref1.toUpperCase():void 0;countryPrefix=countries[country];if(countryPrefix&&navLanguage.indexOf(country)>=0){this.$input.mobilePhoneNumber({defaultPrefix:countryPrefix})}else{this.setVal(prefix)}this.updateCountryFlag(this.$input.mobilePhoneNumber("country"))}}}TelInput.prototype.render=function(){TelInput.__super__.render.apply(this,arguments);this.$flag=$("<span>").addClass("flag");return this.$el.append(this.$flag)};TelInput.prototype.bindEvents=function(){TelInput.__super__.bindEvents.apply(this,arguments);return this.$input.on("country.mobilePhoneNumber",this.onCountryChanged)};TelInput.prototype.val=function(){return this.$input.mobilePhoneNumber("val")};TelInput.prototype.valLengthWithoutPrefix=function(){var _ref;return this.val().length-((_ref=this.$input.mobilePhoneNumber("prefix"))!=null?_ref.length:void 0)};TelInput.prototype.focus=function(){TelInput.__super__.focus.apply(this,arguments);return this.$input.val(this.$input.val())};TelInput.prototype.onCountryChanged=function(e,country){return this.updateCountryFlag(country)};TelInput.prototype.validateFormat=function(){return this.$input.mobilePhoneNumber("validate")};TelInput.prototype.hideFlag=function(flag){return flag.gfx({opacity:0,scale:1.4},{duration:300,easing:easingCurves.FLAG_EASING,complete:function(){return flag.detach()}})};TelInput.prototype.updateCountryFlag=function(country){var flag,retinaSuffix;if(country==null){country="unknown"}if(country===this.country){return}if(country==null||AVAILABLE_FLAGS.indexOf(country.toUpperCase())===-1){if(this.$currentFlag!=null){this.hideFlag(this.$currentFlag)}this.$currentFlag=null;this.country=null;return}this.country=country;this.$previousFlag=this.$currentFlag;this.$currentFlag=flag=$(document.createElement("img"));if(country==="unknown"){this.$currentFlag.addClass("unknown")}retinaSuffix=support.isRetina()?"@2x":"";this.$currentFlag.attr("src","/v3/images/flags/"+country+retinaSuffix+".png");this.$currentFlag.transform({opacity:0,scale:.8});this.$currentFlag.on("load",function(_this){return function(e){if(_this.$currentFlag===flag){flag.gfx({opacity:1,scale:1},{duration:300,easing:easingCurves.FLAG_EASING});if(_this.$previousFlag!=null){_this.hideFlag(_this.$previousFlag)}return _this.$previousFlag=null}else{return flag.detach()}}}(this));return this.$flag.append(this.$currentFlag)};return TelInput}(Input);module.exports=TelInput}).call(this)}});StripeCheckout.require.define({"inner/views/inputs/zipCodeInput":function(exports,require,module){(function(){var Input,ZipCodeInput,helpers,i18n,popoverManager,svgPaths,zipCode,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Input=require("inner/views/inputs/input");svgPaths=require("inner/lib/svgPaths");popoverManager=require("inner/lib/popoverManager");zipCode=require("lib/zipCode");helpers=require("lib/helpers");i18n=require("lib/i18n");ZipCodeInput=function(_super){__extends(ZipCodeInput,_super);ZipCodeInput.prototype.className="zipCodeInput";ZipCodeInput.prototype.inputAutocomplete="postal-code";ZipCodeInput.prototype.fieldName="zip";function ZipCodeInput(){this.setInvalid=__bind(this.setInvalid,this);this.setCountry=__bind(this.setCountry,this);this.bindEvents=__bind(this.bindEvents,this);var _base;ZipCodeInput.__super__.constructor.apply(this,arguments);this.setIcon(svgPaths.getIcon("location",this.options.appType));if((_base=this.options).type==null){_base.type="billing"}this.setInputId(""+this.options.type+"-zip");this.$input.attr("name","zip");this.setCountry("US")}ZipCodeInput.prototype.bindEvents=function(){ZipCodeInput.__super__.bindEvents.apply(this,arguments);return this.$input.on("blur",this.onInputBlur)};ZipCodeInput.prototype.setCountry=function(countryCode){var label,placeholder;this.country=countryCode;if(!helpers.isIE()){if(zipCode.isNumeric(countryCode)){this.$input.get(0).setAttribute("type","tel")}else{this.$input.get(0).setAttribute("type","text")}}placeholder=this.options.placeholder;if(countryCode==="US"){label=i18n.loc("input.address.zip")();if(!this.options.short){label=""+label+" "+i18n.loc("input.address.codeSuffix")()}}else{label=i18n.loc("input.address.postal")()}this.setLabel(label);return this.setPlaceholder(placeholder!=null?placeholder:label)};ZipCodeInput.prototype.setInvalid=function(invalid,options){var text;if(options==null){options={}}ZipCodeInput.__super__.setInvalid.apply(this,arguments);if(invalid&&options.popover&&!this.popover){if(this.country==="US"){text=i18n.loc("error.cardAndZipDontMatch")()}else{text=i18n.loc("error.cardAndPostalDontMatch")()}return this.popover=popoverManager.openPopover(this,"<strong>"+text+"</strong>")}else if(!invalid){popoverManager.closePopover(this.popover);return this.popover=null}};return ZipCodeInput}(Input);module.exports=ZipCodeInput}).call(this)}});StripeCheckout.require.define({"inner/views/labelView":function(exports,require,module){(function(){var LabelView,View,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");LabelView=function(_super){__extends(LabelView,_super);LabelView.prototype.className="labelView";function LabelView(){this.setText=__bind(this.setText,this);LabelView.__super__.constructor.apply(this,arguments);this.bindEvents()}LabelView.prototype.setText=function(text){this.$el.html(text);return this.trigger("didResize.checkout")};LabelView.prototype.bindEvents=function(){return this.$el.click(function(_this){return function(){return _this.trigger("click")}}(this))};return LabelView}(View);module.exports=LabelView}).call(this)}});StripeCheckout.require.define({"inner/views/layoutView":function(exports,require,module){(function(){var LayoutSubview,LayoutView,View,delegateMethods,fastdom,helpers,rowsAnimationHelper,support,_,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");support=require("lib/support");delegateMethods=require("lib/delegateMethods");_=require("vendor/lodash");rowsAnimationHelper=require("inner/lib/animation/rowsAnimationHelper");fastdom=require("vendor/fastdom");helpers=require("lib/helpers");LayoutSubview=function(_super){__extends(LayoutSubview,_super);LayoutSubview.prototype.className="layoutSubview";function LayoutSubview(view,options){if(options==null){options={}}this.onDidResize=__bind(this.onDidResize,this);this.layout=__bind(this.layout,this);this.focus=__bind(this.focus,this);this.setVisible=__bind(this.setVisible,this);LayoutSubview.__super__.constructor.call(this,options);this.visible=true;this.view=view;this.addSubview(this.view);this.state={y:0,visible:true};delegateMethods(this,"view","height");this.view.on("didResize",this.onDidResize)}LayoutSubview.prototype.setVisible=function(visible){this.visible=visible};LayoutSubview.prototype.focus=function(){var _base;return typeof(_base=this.view).focus==="function"?_base.focus():void 0};LayoutSubview.prototype.layout=function(){return this.$el.css("height",this.view.height())};LayoutSubview.prototype.onDidResize=function(){return this.layout()};return LayoutSubview}(View);LayoutView=function(_super){__extends(LayoutView,_super);LayoutView.prototype.className="layoutView";function LayoutView(){this.subviewDidResize=__bind(this.subviewDidResize,this);this.animatableViews=__bind(this.animatableViews,this);this.layoutSubviewFromSubview=__bind(this.layoutSubviewFromSubview,this);this.layoutSubview=__bind(this.layoutSubview,this);this.layout=__bind(this.layout,this);this.setZIndexForSubview=__bind(this.setZIndexForSubview,this);this.focus=__bind(this.focus,this);this.height=__bind(this.height,this);this.scrollTo=__bind(this.scrollTo,this);this.topOffset=__bind(this.topOffset,this);this.setMarginBottom=__bind(this.setMarginBottom,this);this.setMarginTop=__bind(this.setMarginTop,this);this.isSubviewVisible=__bind(this.isSubviewVisible,this);this.removeSubview=__bind(this.removeSubview,this);this.setSubviewAsVisible=__bind(this.setSubviewAsVisible,this);this.insertSubviewBefore=__bind(this.insertSubviewBefore,this);this.addSubviewOnTop=__bind(this.addSubviewOnTop,this);this.addSubview=__bind(this.addSubview,this);LayoutView.__super__.constructor.apply(this,arguments);this.marginTop=0;this.marginBottom=0;this.layoutedSubviews=[]}LayoutView.prototype.addSubview=function(subview,visible){if(visible==null){visible=true}return this.insertSubviewBefore(subview,null,visible)};LayoutView.prototype.addSubviewOnTop=function(subview,view){var layoutSubview;layoutSubview=this.layoutSubviewFromSubview(view);if(layoutSubview==null){return}return layoutSubview.addSubview(subview)};LayoutView.prototype.insertSubviewBefore=function(subview,beforeSubview,visible){var layoutSubview;if(visible==null){visible=true}layoutSubview=this.layoutSubviewFromSubview(subview);if(layoutSubview==null){layoutSubview=new LayoutSubview(subview);layoutSubview.setVisible(visible);layoutSubview.hide();if(!layoutSubview.visible){layoutSubview.$el.transform({opacity:0})}}if(this.isInDOM()){this.layout()}return LayoutView.__super__.insertSubviewBefore.call(this,layoutSubview,this.layoutSubviewFromSubview(beforeSubview))};LayoutView.prototype.setSubviewAsVisible=function(subview,visible){var layoutSubview;layoutSubview=this.layoutSubviewFromSubview(subview);if(layoutSubview==null){return}layoutSubview.setVisible(visible);if(this.isInDOM()){return this.layout()}};LayoutView.prototype.removeSubview=function(subview,options){var layoutSubview;if(options==null){options={}}layoutSubview=this.layoutSubviewFromSubview(subview);LayoutView.__super__.removeSubview.call(this,layoutSubview,options);if(this.layoutedSubviews.indexOf(layoutSubview)!==-1){this.layoutedSubviews.splice(this.layoutedSubviews.indexOf(layoutSubview),1)}if(this.isInDOM()){return this.layout()}};LayoutView.prototype.isSubviewVisible=function(subview){var _ref;return(_ref=this.layoutSubviewFromSubview(subview))!=null?_ref.visible:void 0};LayoutView.prototype.setMarginTop=function(marginTop){this.marginTop=marginTop};LayoutView.prototype.setMarginBottom=function(marginBottom){this.marginBottom=marginBottom};LayoutView.prototype.topOffset=function(){return LayoutView.__super__.topOffset.apply(this,arguments)+this.marginTop+parseInt(this.$el.css("paddingTop"),10)||0};LayoutView.prototype.scrollTo=function(toView,viewsToHide){var animatableViews,animatableViewsBeforeView,offset,_ref;if(viewsToHide==null){viewsToHide=[]}if((_ref=this.scrollAnimation)!=null){_ref.cancel()}animatableViews=this.animatableViews({allViews:true});if(toView!=null){animatableViewsBeforeView=animatableViews.slice(0,animatableViews.indexOf(toView));viewsToHide=viewsToHide.concat(animatableViewsBeforeView);offset=this.topOffset()-toView.superview.topOffset()}else{offset=0}this.offset=offset;return this.scrollAnimation=rowsAnimationHelper.scrollTo(animatableViews,offset,{reverse:toView==null,viewsToHide:viewsToHide})};LayoutView.prototype.height=function(){var subview,y,_i,_len,_ref,_ref1;y=this.marginTop;y+=parseInt(this.$el.css("top"),10)||0;y+=parseInt(this.$el.css("paddingBottom"),10)||0;y+=parseInt(this.$el.css("paddingTop"),10)||0;_ref=this.subviews;for(_i=0,_len=_ref.length;_i<_len;_i++){subview=_ref[_i];if(subview.visible){y+=subview.height()}y+=parseInt(subview.$el.css("marginTop"),10)||0}y+=this.marginBottom;y+=(_ref1=this.offset)!=null?_ref1:0;return y};LayoutView.prototype.focus=function(){var subview,_i,_len,_ref,_results;if(!support.automaticallyGiveFocus()){return}_ref=this.subviews;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){subview=_ref[_i];if(subview.visible&&subview.focus()===true){break}else{_results.push(void 0)}}return _results};LayoutView.prototype.setZIndexForSubview=function(subview,zIndex){var view;view=this.layoutSubviewFromSubview(subview);return view!=null?view.$el.css("zIndex",zIndex):void 0};LayoutView.prototype.layout=function(options){var animationOptions,delay,i,ignoringInvisibleY,visibleSubviews,y;if(options==null){options={}}options=$.extend({},{animated:true,reverse:false,hidingTranslateY:0,easing:"ease-in-out",delay:0,duration:300},options);animationOptions={duration:options.duration,easing:options.easing,animated:options.animated,forceFallback:helpers.isAndroidBrowser(),transformFallbackKeys:{translateY:"top"}};ignoringInvisibleY=y=this.marginTop;delay=options.animated?options.delay:0;i=0;if(options.reverse){i=(this.subviews.length-1)/2}visibleSubviews=[];return fastdom.read(function(_this){return function(){var layoutSubview,newHeight,toY,_i,_len,_ref;_ref=_this.subviews;for(_i=0,_len=_ref.length;_i<_len;_i++){layoutSubview=_ref[_i];if(layoutSubview.visible){toY=y;visibleSubviews.push(layoutSubview)}else{toY=ignoringInvisibleY+options.hidingTranslateY}_this.layoutSubview(layoutSubview,toY,animationOptions,i*delay);if(layoutSubview.visible){y+=layoutSubview.height();y+=parseInt(layoutSubview.$el.css("marginTop"),10)||0}ignoringInvisibleY+=layoutSubview.height();if(_this.layoutedVisibleViews==null||_this.layoutedVisibleViews.indexOf(layoutSubview)!==-1!==layoutSubview.visible||layoutSubview.visible){if(options.reverse){i-=.5}else{i+=.5}}}_this.layoutedVisibleViews=visibleSubviews;newHeight=_this.height();fastdom.write(function(){return _this.$el.css("height",""+newHeight+"px")});if(_this.cachedHeight!==newHeight&&!isNaN(newHeight)){_this.cachedHeight=newHeight;return _this.trigger("didResize")}}}(this))};LayoutView.prototype.layoutSubview=function(subview,y,animationOptions,delay){var to;if(delay==null){delay=0}if(subview.state.visible===subview.visible&&subview.state.y===y&&this.layoutedSubviews.indexOf(subview)!==-1){if(subview.visible){subview.show()}return}if(subview.layoutTimeout){clearTimeout(subview.layoutTimeout)}to={y:y,visible:subview.visible};if(this.options.animationOptionsDelegate!=null){animationOptions=this.options.animationOptionsDelegate(subview.view,subview.state,to,$.extend({},animationOptions))}if(animationOptions.delay==null){animationOptions.delay=0}if(this.layoutedSubviews.indexOf(subview)===-1){fastdom.write(function(){return subview.$el.transform({translateY:y},animationOptions)});this.layoutedSubviews.push(subview)}if(subview.visible){subview.show().redraw();return subview.layoutTimeout=this.timeout(function(){return fastdom.write(function(){subview.state=to;return subview.$el.gfx({translateY:y,opacity:1},$.extend({},animationOptions,{complete:subview.redraw}))})},delay+animationOptions.delay)}else{return subview.layoutTimeout=this.timeout(function(){return fastdom.write(function(){subview.state=to;return subview.$el.gfx({translateY:y,opacity:0},$.extend({},animationOptions,{complete:subview.hide}))})},delay+animationOptions.delay)}};LayoutView.prototype.layoutSubviewFromSubview=function(subview){var view,_i,_len,_ref;_ref=this.subviews;for(_i=0,_len=_ref.length;_i<_len;_i++){view=_ref[_i];if(view.view===subview){return view}}return null};LayoutView.prototype.animatableViews=function(){var layoutSubview,results,_i,_len,_ref;results=[];_ref=this.subviews;for(_i=0,_len=_ref.length;_i<_len;_i++){layoutSubview=_ref[_i];if(layoutSubview.visible){results.push(layoutSubview.view.animatableViews.apply(layoutSubview.view,arguments))}}return _.flatten(results)};LayoutView.prototype.timeout=function(fn,delay){if(delay<=0){fn();return null}return setTimeout(fn,delay)};LayoutView.prototype.subviewDidResize=function(){if(this.isInDOM()){return this.layout()}};return LayoutView}(View);module.exports=LayoutView}).call(this)}});StripeCheckout.require.define({"inner/views/legalLinksView":function(exports,require,module){(function(){var LegalLinksView,View,i18n,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");i18n=require("lib/i18n");LegalLinksView=function(_super){__extends(LegalLinksView,_super);LegalLinksView.prototype.className="legalLinksView";function LegalLinksView(){this.setVisible=__bind(this.setVisible,this);this.render=__bind(this.render,this);LegalLinksView.__super__.constructor.apply(this,arguments);this.render()}LegalLinksView.prototype.render=function(){this.$content=$('<span class="hidden"></span>');this.$el.append(this.$content);this.$content.append($('<a href="/-/terms" target="_blank">'+i18n.loc("footer.legal.terms")()+"</a>"));return this.$content.append($('<a href="/-/privacy" target="_blank">'+i18n.loc("footer.legal.privacy")()+"</a>"))};LegalLinksView.prototype.setVisible=function(visible){if(visible){return this.$content.removeClass("hidden")}else{return this.$content.addClass("hidden")}};return LegalLinksView}(View);module.exports=LegalLinksView}).call(this)}});StripeCheckout.require.define({"inner/views/loadingScreenView":function(exports,require,module){(function(){var LabelView,LoadingScreenView,SvgSpinner,View,i18n,timeout,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");SvgSpinner=require("inner/views/svg/svgSpinner");LabelView=require("inner/views/labelView");i18n=require("lib/i18n");timeout=function(fn,delay){if(delay===0){fn();return null}return setTimeout(fn,delay)};LoadingScreenView=function(_super){__extends(LoadingScreenView,_super);LoadingScreenView.prototype.className="loadingScreenView";function LoadingScreenView(){this.onCloseButtonClick=__bind(this.onCloseButtonClick,this);this.hide=__bind(this.hide,this);this.show=__bind(this.show,this);this.bindEvents=__bind(this.bindEvents,this);this.render=__bind(this.render,this);LoadingScreenView.__super__.constructor.apply(this,arguments);this.render();this.bindEvents()}LoadingScreenView.prototype.render=function(){var spinnerColor,spinnerSize,_ref;this.backgroundView=new View({className:"loadingBackgroundView"});this.addSubview(this.backgroundView);if(this.options.appType.isMobile()){spinnerSize=45;spinnerColor="#FFF"}else{spinnerSize=20;spinnerColor="#31313A"}this.spinner=new SvgSpinner({size:spinnerSize,color:spinnerColor,shadowColor:"transparent"});this.addSubview(this.spinner);this.titleLabelView=new LabelView({className:"titleView"});this.titleLabelView.setText(this.options.title);this.addSubview(this.titleLabelView);this.subtitleLabelView=new LabelView({className:"subtitleView"});this.subtitleLabelView.setText(this.options.subtitle);this.addSubview(this.subtitleLabelView);this.linkView=new LabelView({tag:"a",className:"linkView"});this.linkView.$el.attr("href",this.options.linkUrl);this.linkView.$el.attr("target","_blank");this.linkView.setText(this.options.linkLabel);if(this.subtitleLabelView){if((_ref=this.subtitleLabelView)!=null){_ref.addSubview(this.linkView)}}else{this.addSubview(this.linkView)}this.closeButton=new View({className:"closeButton"});this.closeButton.$el.text(i18n.loc("loadingScreen.close")());return this.addSubview(this.closeButton)};LoadingScreenView.prototype.bindEvents=function(){return this.closeButton.$el.on("click",this.onCloseButtonClick)};LoadingScreenView.prototype.show=function(options){if(options==null){options={}}this.spinner.startAnimating();return this.animateViews(this.subviews,{opacity:1},options)};LoadingScreenView.prototype.hide=function(options){if(options==null){options={}}return this.animateViews(this.subviews.slice().reverse(),{opacity:0},options)};LoadingScreenView.prototype.animateViews=function(views,to,options){var delay,view,_fn,_i,_len,_results;if(to==null){to={}}if(options==null){options={}}if(options.animated==null){options.animated=true}delay=0;_fn=function(view){return timeout(function(){var opts;opts={duration:options.duration,animated:options.animated};if(view===views[views.length-1]){opts.complete=options.complete}return view.$el.gfx(to,opts)},delay)};_results=[];for(_i=0,_len=views.length;_i<_len;_i++){view=views[_i];_fn(view);if(options.animated){_results.push(delay+=50)}else{_results.push(void 0)}}return _results};LoadingScreenView.prototype.onCloseButtonClick=function(){return this.trigger("closeButtonClick")};return LoadingScreenView}(View);module.exports=LoadingScreenView}).call(this)}});StripeCheckout.require.define({"inner/views/loadingView":function(exports,require,module){(function(){var LoadingView,PADDING,PIXELRATIO,View,support,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");support=require("lib/support");PIXELRATIO=window.devicePixelRatio||1;PADDING=1*PIXELRATIO;LoadingView=function(_super){__extends(LoadingView,_super);LoadingView.prototype.className="loadingView";LoadingView.prototype.tag="canvas";function LoadingView(){this.setValue=__bind(this.setValue,this);this.draw=__bind(this.draw,this);this.bindEvents=__bind(this.bindEvents,this);this.render=__bind(this.render,this);LoadingView.__super__.constructor.apply(this,arguments);this.value=this.options.value;if(this.value==null){this.value=0}if(support.canvas()){this.ctx=this.el.getContext("2d")}this.on("DOMElementVisibleChanged",function(_this){return function(visible){if(!visible){return}_this.size=(parseInt(_this.$el.css("width"),10)||0)*PIXELRATIO;_this.innerSize=_this.size-PADDING*2;_this.render();return _this.draw()}}(this));this.bindEvents()}LoadingView.prototype.render=function(){this.$el.attr("width",this.size);return this.$el.attr("height",this.size)};
LoadingView.prototype.bindEvents=function(){this.$el.on("mouseover",function(_this){return function(){return _this.trigger("didMouseOver")}}(this));this.$el.on("mouseout",function(_this){return function(){return _this.trigger("didMouseOut")}}(this));return this.$el.on("click",function(_this){return function(){return _this.trigger("click")}}(this))};LoadingView.prototype.draw=function(){if(!support.canvas()){return}if(this.size==null){return}this.ctx.clearRect(0,0,this.size,this.size);this.ctx.beginPath();this.ctx.fillStyle="#C0C0C3";this.ctx.arc(this.size/2,this.size/2,this.size/2,0,2*Math.PI);this.ctx.fill();this.ctx.beginPath();this.ctx.fillStyle="#FFF";this.ctx.arc(this.size/2,this.size/2,this.innerSize/2,-Math.PI/2+this.value*Math.PI*2,Math.PI/2*3);this.ctx.lineTo(this.size/2,this.size/2);return this.ctx.fill()};LoadingView.prototype.setValue=function(value){this.value=Math.min(1,Math.max(0,value));return this.draw()};return LoadingView}(View);module.exports=LoadingView}).call(this)}});StripeCheckout.require.define({"inner/views/loggedBarView":function(exports,require,module){(function(){var LoggedBarView,Svg,View,easingCurves,i18n,support,svgPaths,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");support=require("lib/support");Svg=require("inner/views/svg/svg");i18n=require("lib/i18n");svgPaths=require("inner/lib/svgPaths");easingCurves=require("inner/lib/easingCurves");LoggedBarView=function(_super){__extends(LoggedBarView,_super);LoggedBarView.prototype.className="loggedBarView";function LoggedBarView(){this.clickLogout=__bind(this.clickLogout,this);this.show=__bind(this.show,this);this.hide=__bind(this.hide,this);this.setLinkVisible=__bind(this.setLinkVisible,this);this.setEmail=__bind(this.setEmail,this);this.render=__bind(this.render,this);this.height=__bind(this.height,this);LoggedBarView.__super__.constructor.apply(this,arguments);if(this.options.alternate==="simple"){this.$el.addClass("alternateSimple")}this.$inner=$("<div>").addClass("inner");this.$content=$("<div>");this.$content.addClass("loggedBarContent");if(this.options.appType.isMobile()){this.icon=new Svg($.extend({},svgPaths.getIcon("user",this.options.appType),{color:this.options.color.css(),fillRule:"evenodd",className:"icon"}));this.icon.$el.addClass("icon");this.$content.append(this.icon.$el)}this.$email=$("<span>");this.$logoutLink=$("<a>");this.$logoutLink.text(i18n.loc("loggedBar.logout")());this.$logoutLink.addClass("logout");this.$logoutLink.on(support.clickEvent(),this.clickLogout);this.$content.append(this.$email);this.$content.append(this.$logoutLink);this.render();this.hide()}LoggedBarView.prototype.height=function(){return this.$el.height()};LoggedBarView.prototype.render=function(account){this.account=account!=null?account:this.account;this.$inner.append(this.$content);return this.$el.append(this.$inner)};LoggedBarView.prototype.setEmail=function(email){return this.$email.text(email)};LoggedBarView.prototype.setLinkVisible=function(visible){if(visible){return this.$logoutLink.show()}else{return this.$logoutLink.hide()}};LoggedBarView.prototype.hide=function(){if(this.options.appType.isMobile()){return this.$content.transform({translateY:-45,opacity:0})}else{return LoggedBarView.__super__.hide.apply(this,arguments)}};LoggedBarView.prototype.show=function(){if(this.options.appType.isMobile()){return this.$content.gfx({translateY:0,opacity:1},{duration:550,easing:easingCurves.BOUNCING})}else{return LoggedBarView.__super__.show.apply(this,arguments)}};LoggedBarView.prototype.clickLogout=function(e){e.preventDefault();return this.trigger("logout")};return LoggedBarView}(View);module.exports=LoggedBarView}).call(this)}});StripeCheckout.require.define({"inner/views/overlayView":function(exports,require,module){(function(){var BrandingLogoView,OverlayView,View,helpers,support,variants,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");helpers=require("lib/helpers");support=require("lib/support");variants=require("lib/variants");BrandingLogoView=require("inner/views/brandingLogoView");OverlayView=function(_super){__extends(OverlayView,_super);OverlayView.prototype.className="overlayView";function OverlayView(){this.onScroll=__bind(this.onScroll,this);this.hide=__bind(this.hide,this);this.show=__bind(this.show,this);this.bindEvents=__bind(this.bindEvents,this);this.render=__bind(this.render,this);OverlayView.__super__.constructor.apply(this,arguments);this.render();this.bindEvents()}OverlayView.prototype.render=function(){if(this.options.appType.isMobile()){return}if(this.options.appType.isTablet()&&!helpers.isInsideFrame()){this.$el.css("backgroundColor",this.options.color.css())}if(helpers.ieVersion()===8){this.$el.append($("<div />").addClass("overlayView-ie8"))}this.addSubview(new BrandingLogoView);if(!this.options.livemode){if(this.$testModeLink==null){this.$testModeLink=$('<a class="testMode" href="/-/test-mode" target="_blank" tabindex="-1">TEST MODE</a>')}return this.$el.append(this.$testModeLink)}};OverlayView.prototype.bindEvents=function(){this.$el.scroll(this.onScroll);if(helpers.isiOS()){return this.$el.on("touchstart",function(){})}};OverlayView.prototype.show=function(){var $tmpInput;if(support.automaticallyGiveFocus()){$tmpInput=$("<input>");this.$el.append($tmpInput);$tmpInput.focus();$tmpInput.detach()}this.$el.redraw();return this.$el.removeClass("unactive").addClass("active")};OverlayView.prototype.hide=function(options){if(options==null){options={}}if(this.options.appType.isMobile()){setTimeout(options.complete,options.success?1500:0);return}this.$el.removeClass("active").addClass("unactive");return setTimeout(function(){return typeof options.complete==="function"?options.complete():void 0},support.transitions()?400:0)};OverlayView.prototype.onScroll=function(){var bottom;if(this.$poweredStripeLink==null){return}bottom=14-this.$el.scrollTop()+"px";return this.$poweredStripeLink.css("bottom",bottom)};return OverlayView}(View);module.exports=OverlayView}).call(this)}});StripeCheckout.require.define({"inner/views/phoneCodeVerificationView":function(exports,require,module){(function(){var CodeVerificationView,PhoneCodeVerificationView,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};CodeVerificationView=require("inner/views/form/codeVerificationView");PhoneCodeVerificationView=function(_super){__extends(PhoneCodeVerificationView,_super);function PhoneCodeVerificationView(){this.setButtonVisible=__bind(this.setButtonVisible,this);return PhoneCodeVerificationView.__super__.constructor.apply(this,arguments)}PhoneCodeVerificationView.prototype.className="phoneCodeVerificationView codeVerificationView";PhoneCodeVerificationView.prototype.setButtonVisible=function(){return this.$el.addClass("withButton")};return PhoneCodeVerificationView}(CodeVerificationView);module.exports=PhoneCodeVerificationView}).call(this)}});StripeCheckout.require.define({"inner/views/phoneVerificationView":function(exports,require,module){(function(){var LabelView,LayoutView,PhoneVerificationView,TelInput,delegateMethods,i18n,support,variants,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};TelInput=require("inner/views/inputs/telInput");LayoutView=require("inner/views/layoutView");LabelView=require("inner/views/labelView");delegateMethods=require("lib/delegateMethods");support=require("lib/support");variants=require("lib/variants");i18n=require("lib/i18n");PhoneVerificationView=function(_super){__extends(PhoneVerificationView,_super);PhoneVerificationView.prototype.className="phoneVerificationView";function PhoneVerificationView(options){this.options=options!=null?options:{};this.val=__bind(this.val,this);this.validate=__bind(this.validate,this);this.focus=__bind(this.focus,this);this.render=__bind(this.render,this);PhoneVerificationView.__super__.constructor.call(this,this.options);this.setMarginBottom(36);this.render(this.options);this.bindEvents()}PhoneVerificationView.prototype.render=function(opts){if(opts.prefaceView!=null){this.addSubview(opts.prefaceView)}this.phone=new TelInput({color:this.options.color,appType:this.options.appType});return this.addSubview(this.phone)};PhoneVerificationView.prototype.bindEvents=function(){};PhoneVerificationView.prototype.focus=function(){if(support.automaticallyGiveFocus()){return this.phone.focus()}};PhoneVerificationView.prototype.validate=function(){return this.phone.validate()};PhoneVerificationView.prototype.val=function(){return{phone:this.phone.val()}};return PhoneVerificationView}(LayoutView);module.exports=PhoneVerificationView}).call(this)}});StripeCheckout.require.define({"inner/views/popoverView":function(exports,require,module){(function(){var PopoverView,View,fastdom,_,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");_=require("vendor/lodash");fastdom=require("vendor/fastdom");PopoverView=function(_super){__extends(PopoverView,_super);PopoverView.prototype.className="popoverView";function PopoverView(options){if(options==null){options={}}this.close=__bind(this.close,this);this.open=__bind(this.open,this);this.toggle=__bind(this.toggle,this);this.setContent=__bind(this.setContent,this);this.bindEvents=__bind(this.bindEvents,this);this.render=__bind(this.render,this);PopoverView.__super__.constructor.call(this,options);_.defaults(options,{reversed:false,animated:true,complete:function(){}});this.render();this.bindEvents();this.visible=true;this.close({animated:false})}PopoverView.prototype.render=function(){if(this.options.reversed){this.$el.addClass("reversed")}this.$content=$("<div>").addClass("content");return this.$el.append(this.$content)};PopoverView.prototype.bindEvents=function(){return this.$content.on("click",function(_this){return function(e){if($(e.target).prop("tagName").toLowerCase()==="a"){return _this.trigger("linkDidClick")}else{e.preventDefault();return _this.trigger("didClick")}}}(this))};PopoverView.prototype.setContent=function(content){return this.$content.html(content)};PopoverView.prototype.toggle=function(options){if(options==null){options={}}if(this.visible){return this.close(options)}else{return this.open(options)}};PopoverView.prototype.open=function(options){if(options==null){options={}}if(this.visible){return}this.visible=true;if(options.animated==null){options.animated=true}this.show();return fastdom.write(function(_this){return function(){return _this.$content.gfx({perspective:"600px",opacity:1,rotateY:0},{animated:options.animated,duration:250,easing:"cubic-bezier(.41,1.44,.47,1)",complete:function(){return _this.$content.transform({perspective:0})}})}}(this))};PopoverView.prototype.close=function(options){if(options==null){options={}}if(!this.visible){return}this.visible=false;if(options.animated==null){options.animated=true}return fastdom.write(function(_this){return function(){return _this.$content.gfx({perspective:"600px",opacity:0,rotateY:50,scale:.8},{animated:options.animated,duration:250,easing:"ease-in-out",complete:function(){_this.hide();return typeof options.complete==="function"?options.complete():void 0}})}}(this))};return PopoverView}(View);module.exports=PopoverView}).call(this)}});StripeCheckout.require.define({"inner/views/qrCodeView":function(exports,require,module){(function(){var DURATION,QRCode,QRCodeView,View,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");QRCode=require("vendor/qrcode");DURATION=300;QRCodeView=function(_super){__extends(QRCodeView,_super);QRCodeView.prototype.className="QRCodeView";function QRCodeView(){this.padding=__bind(this.padding,this);this.edgeSize=__bind(this.edgeSize,this);this.scaleRatio=__bind(this.scaleRatio,this);this.offsetFromEl=__bind(this.offsetFromEl,this);this.hideTo=__bind(this.hideTo,this);this.showFrom=__bind(this.showFrom,this);this.layout=__bind(this.layout,this);this.text=__bind(this.text,this);this.bindEvents=__bind(this.bindEvents,this);this.render=__bind(this.render,this);QRCodeView.__super__.constructor.apply(this,arguments);this.render();this.bindEvents()}QRCodeView.prototype.render=function(){var pixelRatio;pixelRatio=window.devicePixelRatio||1;this.$content=$("<div>").addClass("content");this.$inner=$("<div>").addClass("inner");this.$real=$("<div>").addClass("real");this.$real.css({opacity:0});this.$inner.append(this.$real);this.qrCode=new QRCode(this.$real[0],{text:this.options.text||"abc",width:220*pixelRatio,height:220*pixelRatio,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H});this.$placeholder=$("<div>").addClass("placeholder");this.$inner.append(this.$placeholder);this.$content.append(this.$inner);return this.$el.append(this.$content)};QRCodeView.prototype.bindEvents=function(){return this.$content.on("click",function(_this){return function(){return _this.trigger("click")}}(this))};QRCodeView.prototype.text=function(text){return this.qrCode.makeCode(text)};QRCodeView.prototype.layout=function(){return this.inDOM(function(_this){return function(){var edgeSize;edgeSize=_this.edgeSize();_this.$real.css("width",""+edgeSize+"px");_this.$real.css("height",""+edgeSize+"px");_this.$content.css("marginTop",""+(_this.$el.height()-(edgeSize+_this.padding()))/2+"px");return setTimeout(function(){return _this.$real.css({opacity:1})},1)}}(this))};QRCodeView.prototype.showFrom=function($el,options){var offset;if(options==null){options={}}this.trigger("willShow.checkout");if(options.animated==null){options.animated=true}this.show();this.$el.redraw();this.$inner.transform({scale:1});offset=this.offsetFromEl($el);this.$inner.transform({translateX:offset.left,translateY:offset.top,scale:this.scaleRatio($el)});this.$placeholder.gfx({opacity:0},{duration:DURATION,animated:options.animated});return this.$inner.gfx({scale:1,translateX:0,translateY:0},{duration:DURATION,animated:options.animated,complete:function(_this){return function(){return _this.trigger("didShow.checkout")}}(this)})};QRCodeView.prototype.hideTo=function($el,options){var offset;if(options==null){options={}}this.trigger("willHide.checkout");if(options.animated==null){options.animated=true}this.$placeholder.gfx({opacity:1},{duration:DURATION,animated:options.animated,complete:function(_this){return function(){_this.hide();_this.trigger("didHide.checkout");return typeof options.complete==="function"?options.complete():void 0}}(this)});if($el){this.$inner.transform({scale:1});offset=this.offsetFromEl($el);return this.$inner.gfx({translateX:offset.left,translateY:offset.top,scale:this.scaleRatio($el)},{duration:DURATION,animated:options.animated})}};QRCodeView.prototype.offsetFromEl=function($el){var elOffset,offset;elOffset=$el.offset();elOffset.top+=$el.outerHeight(true)/2;elOffset.left+=$el.outerWidth(true)/2;offset=this.$inner.offset();offset.top+=this.$inner.outerHeight(true)/2;offset.left+=this.$inner.outerWidth(true)/2;return{top:Math.floor(Math.abs(elOffset.top-offset.top)),left:Math.floor(Math.abs(elOffset.left-offset.left))}};QRCodeView.prototype.scaleRatio=function($el){return $el.width()/this.edgeSize()};QRCodeView.prototype.edgeSize=function(){return Math.min(200,this.$el.height()-this.padding())};QRCodeView.prototype.padding=function(){return 2*parseInt(this.$inner.css("paddingTop"),10)||0};return QRCodeView}(View);module.exports=QRCodeView}).call(this)}});StripeCheckout.require.define({"inner/views/separatorLineView":function(exports,require,module){(function(){var SeparatorLineView,View,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");SeparatorLineView=function(_super){__extends(SeparatorLineView,_super);SeparatorLineView.prototype.className="separatorLineView";function SeparatorLineView(){this.render=__bind(this.render,this);SeparatorLineView.__super__.constructor.apply(this,arguments);this.render()}SeparatorLineView.prototype.render=function(){return this.$el.append($("<span>").addClass("line"))};return SeparatorLineView}(View);module.exports=SeparatorLineView}).call(this)}});StripeCheckout.require.define({"inner/views/svg/svg":function(exports,require,module){(function(){var Svg,View,support,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");support=require("lib/support");Svg=function(_super){__extends(Svg,_super);Svg.prototype.className="svg";Svg.prototype.xmlns="http://www.w3.org/2000/svg";function Svg(options){var cssSize,ratio,svg;if(options==null){options={}}this.addClipPath=__bind(this.addClipPath,this);this.addPath=__bind(this.addPath,this);this.setTranslate=__bind(this.setTranslate,this);this.setColor=__bind(this.setColor,this);this.setPath=__bind(this.setPath,this);Svg.__super__.constructor.apply(this,arguments);this.options=$.extend({},{size:{width:10,height:10},ratio:1},options);if(this.options.size instanceof Array){this.options.size={width:this.options.size[0],height:this.options.size[1]}}if(!support.svg()){return}cssSize=this.options.cssSize||this.options.size;ratio=this.options.ratio;svg=document.createElementNS(this.xmlns,"svg");svg.setAttributeNS(null,"version","1.1");svg.setAttributeNS(null,"viewBox","0 0 "+this.options.size.width*ratio+" "+this.options.size.height*ratio);svg.setAttributeNS(null,"width",cssSize.width);svg.setAttributeNS(null,"height",cssSize.height);svg.setAttributeNS(null,"focusable","false");this.$svg=$(svg);this.$el.css({width:cssSize.width,height:cssSize.height});this.group=document.createElementNS(this.xmlns,"g");if(this.options.fillRule){this.group.setAttributeNS(null,"fill-rule",this.options.fillRule)}svg.appendChild(this.group);this.path=document.createElementNS(this.xmlns,"path");if(this.options.clipped){this.path.setAttributeNS(null,"clip-path","url(#"+this.options.clipped+")")}this.group.appendChild(this.path);this.$el.append(this.$svg);if(this.options.path){this.setPath(this.options.path)}if(this.options.color){this.setColor(this.options.color)}if(this.options.translate){this.setTranslate(this.options.translate)}}Svg.prototype.setPath=function(path){if(!support.svg()){return}return this.path.setAttributeNS(null,"d",path)};Svg.prototype.setColor=function(color){if(!support.svg()){return}return this.path.setAttributeNS(null,"style","fill:"+color)};Svg.prototype.setTranslate=function(translate){if(!support.svg()){return}return this.path.setAttributeNS(null,"transform","translate("+translate.join(",")+")")};Svg.prototype.addPath=function(path,color,clipped){var p;if(clipped==null){clipped=null}if(!support.svg()){return}p=document.createElementNS(this.xmlns,"path");p.setAttributeNS(null,"d",path);p.setAttributeNS(null,"style","fill:"+color);if(clipped){p.setAttributeNS(null,"clip-path","url(#"+clipped+")")}this.group.appendChild(p);return $(p)};Svg.prototype.addClipPath=function(path,name){var c,p;if(!support.svg()){return}c=document.createElementNS(this.xmlns,"clipPath");c.setAttributeNS(null,"id",name);p=document.createElementNS(this.xmlns,"path");p.setAttributeNS(null,"d",path);c.appendChild(p);this.group.appendChild(c);return $(p)};return Svg}(View);module.exports=Svg}).call(this)}});StripeCheckout.require.define({"inner/views/svg/svgSpinner":function(exports,require,module){(function(){var SvgSpinner,View,support,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");support=require("lib/support");SvgSpinner=function(_super){__extends(SvgSpinner,_super);SvgSpinner.prototype.className="svgSpinner";SvgSpinner.prototype.tickDuration=70;SvgSpinner.prototype.shadows=["M22,15 C20.3465171,15 19,13.6573979 19,12.0012144 L19,10.0012144 C19,11.6573979 20.3465171,13 22,13 C23.6568542,13 25,11.6577357 25,10.0012144 L25,12.0012144 C25,13.6577357 23.6568542,15 22,15 Z M22,15","M22,47 C20.3465171,47 19,45.6573979 19,44.0012144 L19,42.0012144 C19,43.6573979 20.3465171,45 22,45 C23.6568542,45 25,43.6577357 25,42.0012144 L25,44.0012144 C25,45.6577357 23.6568542,47 22,47 Z M22,47","M38.8236277,37.0772292 C39.202479,38.119598 38.9691689,39.3158923 38.1413349,40.1443237 C36.9897639,41.2967258 35.1349124,41.2800552 33.9806001,40.1249099 L29.8780649,36.0194139 C29.0262287,35.1669629 28.7982817,33.958707 29.1763723,32.9227708 C29.320879,33.3203657 29.5544503,33.6955657 29.8780649,34.0194139 L33.9806001,38.1249099 C35.1349124,39.2800552 36.9897639,39.2967258 38.1413349,38.1443237 C38.4537615,37.8316717 38.6815084,37.4666241 38.8236277,37.0772292 Z M38.8236277,37.0772292","M0,24 C0,23.6498487 0.0602087038,23.3134633 0.170853921,23.0007162 C0.582648744,24.1655344 1.69309685,25 2.99878564,25 L10.0012144,25 C11.3066748,25 12.4173029,24.1633914 12.8291461,22.9992841 C12.9397934,23.3122651 13,23.6490969 13,24 C13,25.6534829 11.6573979,27 10.0012144,27 L2.99878564,27 C1.34226429,27 0,25.6568542 0,24 Z M0,24","M32,24 C32,23.6498487 32.0602087,23.3134633 32.1708539,23.0007162 C32.5826487,24.1655344 33.6930969,25 34.9987856,25 L42.0012144,25 C43.3066748,25 44.4173029,24.1633914 44.8291461,22.9992841 C44.9397934,23.3122651 45,23.6490969 45,24 C45,25.6534829 43.6573979,27 42.0012144,27 L34.9987856,27 C33.3422643,27 32,25.6568542 32,24 Z M32,24","M38.8244343,9.92237447 C39.2040079,10.9644844 38.9668835,12.1780334 38.1249099,13.0193999 L34.0194139,17.1219351 C32.8465377,18.2939654 31.0000997,18.284933 29.8556763,17.1413349 C29.0241955,16.3104538 28.801323,15.1134515 29.1755657,14.0776255 C29.316748,14.4652379 29.5432483,14.8291322 29.8556763,15.1413349 C31.0000997,16.284933 32.8465377,16.2939654 34.0194139,15.1219351 L38.1249099,11.0193999 C38.4465951,10.6979466 38.6799902,10.3221656 38.8244343,9.92237447 Z M38.8244343,9.92237447","M15.8244343,32.9223745 C16.2040079,33.9644844 15.9668835,35.1780334 15.1249099,36.0193999 L11.0194139,40.1219351 C9.84653768,41.2939654 8.00009967,41.284933 6.85567627,40.1413349 C6.02419549,39.3104538 5.801323,38.1134515 6.17556572,37.0776255 C6.31674798,37.4652379 6.54324826,37.8291322 6.85567627,38.1413349 C8.00009967,39.284933 9.84653768,39.2939654 11.0194139,38.1219351 L15.1249099,34.0193999 C15.4465951,33.6979466 15.6799902,33.3221656 15.8244343,32.9223745 Z M15.8244343,32.9223745","M15.8236277,14.0772292 C16.202479,15.119598 15.9691689,16.3158923 15.1413349,17.1443237 C13.9897639,18.2967258 12.1349124,18.2800552 10.9806001,17.1249099 L6.87806494,13.0194139 C6.02622871,12.1669629 5.79828169,10.958707 6.17637227,9.92277079 C6.32087904,10.3203657 6.55445033,10.6955657 6.87806494,11.0194139 L10.9806001,15.1249099 C12.1349124,16.2800552 13.9897639,16.2967258 15.1413349,15.1443237 C15.4537615,14.8316717 15.6815084,14.4666241 15.8236277,14.0772292 Z M15.8236277,14.0772292"];SvgSpinner.prototype.fills=["M22,0 C20.3431458,0 19,1.34226429 19,2.99878564 L19,10.0012144 C19,11.6573979 20.3465171,13 22,13 L22,13 C23.6568542,13 25,11.6577357 25,10.0012144 L25,2.99878564 C25,1.34260206 23.6534829,0 22,0 L22,0 Z M22,0","M6.85866507,6.85567627 C5.715067,8.00009967 5.7060346,9.84653768 6.87806494,11.0194139 L10.9806001,15.1249099 C12.1349124,16.2800552 13.9897639,16.2967258 15.1413349,15.1443237 C16.284933,13.9999003 16.2939654,12.1534623 15.1219351,10.9805861 L11.0193999,6.87509014 C9.86508755,5.71994476 8.01023609,5.70327417 6.85866507,6.85567627 Z M6.85866507,6.85567627","M2.99878564,19 C1.34260206,19 0,20.3465171 0,22 L0,22 C0,23.6568542 1.34226429,25 2.99878564,25 L10.0012144,25 C11.6573979,25 13,23.6534829 13,22 L13,22 C13,20.3431458 11.6577357,19 10.0012144,19 L2.99878564,19 Z M2.99878564,19","M10.9805861,29.8780649 L6.87509014,33.9806001 C5.71994476,35.1349124 5.70327417,36.9897639 6.85567627,38.1413349 C8.00009967,39.284933 9.84653768,39.2939654 11.0194139,38.1219351 L15.1249099,34.0193999 C16.2800552,32.8650876 16.2967258,31.0102361 15.1443237,29.8586651 C13.9999003,28.715067 12.1534623,28.7060346 10.9805861,29.8780649 Z M10.9805861,29.8780649","M22,32 C20.3431458,32 19,33.3422643 19,34.9987856 L19,42.0012144 C19,43.6573979 20.3465171,45 22,45 L22,45 C23.6568542,45 25,43.6577357 25,42.0012144 L25,34.9987856 C25,33.3426021 23.6534829,32 22,32 L22,32 Z M22,32","M29.8586651,29.8556763 C28.715067,31.0000997 28.7060346,32.8465377 29.8780649,34.0194139 L33.9806001,38.1249099 C35.1349124,39.2800552 36.9897639,39.2967258 38.1413349,38.1443237 C39.284933,36.9999003 39.2939654,35.1534623 38.1219351,33.9805861 L34.0193999,29.8750901 C32.8650876,28.7199448 31.0102361,28.7032742 29.8586651,29.8556763 Z M29.8586651,29.8556763","M34.9987856,19 C33.3426021,19 32,20.3465171 32,22 L32,22 C32,23.6568542 33.3422643,25 34.9987856,25 L42.0012144,25 C43.6573979,25 45,23.6534829 45,22 L45,22 C45,20.3431458 43.6577357,19 42.0012144,19 L34.9987856,19 Z M34.9987856,19","M33.9805861,6.87806494 L29.8750901,10.9806001 C28.7199448,12.1349124 28.7032742,13.9897639 29.8556763,15.1413349 C31.0000997,16.284933 32.8465377,16.2939654 34.0194139,15.1219351 L38.1249099,11.0193999 C39.2800552,9.86508755 39.2967258,8.01023609 38.1443237,6.85866507 C36.9999003,5.715067 35.1534623,5.7060346 33.9805861,6.87806494 Z M33.9805861,6.87806494"];function SvgSpinner(options){var $path,height,path,pathData,svg,width,xmlns,_i,_j,_k,_len,_len1,_len2,_ref,_ref1,_ref2;if(options==null){options={}}this.opacityForPath=__bind(this.opacityForPath,this);this.coeffForPath=__bind(this.coeffForPath,this);this.stopAnimating=__bind(this.stopAnimating,this);this.startAnimating=__bind(this.startAnimating,this);this.toggleAnimating=__bind(this.toggleAnimating,this);this.tick=__bind(this.tick,this);SvgSpinner.__super__.constructor.apply(this,arguments);this.options=$.extend({},{size:22,color:"#ffffff",shadowColor:"rgba(46, 85, 153, 0.2)"},options);width=this.options.size;height=this.options.size+1;if(!support.svg()){return}xmlns="http://www.w3.org/2000/svg";svg=document.createElementNS(xmlns,"svg");svg.setAttributeNS(null,"version","1.1");svg.setAttributeNS(null,"viewBox","0 0 44 46");svg.setAttributeNS(null,"width",width);svg.setAttributeNS(null,"height",height);this.$svg=$(svg);this.$el.css({width:width,height:height});this.shadowEls=[];this.fillEls=[];_ref=this.shadows;for(_i=0,_len=_ref.length;_i<_len;_i++){pathData=_ref[_i];path=document.createElementNS(xmlns,"path");path.setAttributeNS(null,"d",pathData);path.setAttributeNS(null,"style","fill:"+this.options.shadowColor);svg.appendChild(path);$path=$(path);this.shadowEls.push(path)}_ref1=this.fills;for(_j=0,_len1=_ref1.length;_j<_len1;_j++){pathData=_ref1[_j];path=document.createElementNS(xmlns,"path");path.setAttributeNS(null,"d",pathData);path.setAttributeNS(null,"style","fill:"+this.options.color);svg.appendChild(path);$path=$(path);this.fillEls.push($path)}this.current=0;this.animating=false;this.interval=null;_ref2=this.fillEls;for(_k=0,_len2=_ref2.length;_k<_len2;_k++){$path=_ref2[_k];$path.css("opacity",this.opacityForPath($path))}this.$el.append(this.$svg)}SvgSpinner.prototype.tick=function(){var $path;if(!jQuery.contains(document.body,this.$el[0])){return this.stopAnimating()}this.current--;if(this.current<0){this.current=7}$path=this.fillEls[this.current];$path.clearTransition();return $path.gfx({opacity:1},{duration:70,complete:function(_this){return function(){if(!_this.animating){return}$path.redraw();return $path.gfx({opacity:.2},{duration:_this.tickDuration*8})}}(this)})};SvgSpinner.prototype.toggleAnimating=function(){if(this.animating){return this.stopAnimating()}else{return this.startAnimating()}};SvgSpinner.prototype.startAnimating=function(){var $path,_fn,_i,_len,_ref;if(!support.svg()){return}if(this.animating){return}this.animating=true;_ref=this.fillEls;_fn=function(_this){return function(p,k){return setTimeout(function(){return p.gfx({opacity:.2},{duration:_this.tickDuration*k})},1)}}(this);for(_i=0,_len=_ref.length;_i<_len;_i++){$path=_ref[_i];$path.css("opacity",this.opacityForPath($path));$path.redraw();_fn($path,this.coeffForPath($path))}return this.interval=setInterval(this.tick,this.tickDuration)};SvgSpinner.prototype.stopAnimating=function(){var $path,_i,_len,_ref,_results;if(!support.svg()){return}if(!this.animating){return}this.animating=false;if(this.interval){clearInterval(this.interval)}this.interval=null;_ref=this.fillEls;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){$path=_ref[_i];$path.clearTransition();$path.redraw();_results.push($path.css("opacity",this.opacityForPath($path)))}return _results};SvgSpinner.prototype.coeffForPath=function($path){var i,j;i=this.fillEls.indexOf($path);if(i<this.current){j=this.current-i-1}else{j=7-(i-this.current)}return j};SvgSpinner.prototype.opacityForPath=function($path){return.2+this.coeffForPath($path)/7*.8};return SvgSpinner}(View);module.exports=SvgSpinner}).call(this)}});StripeCheckout.require.define({"inner/views/svg/tick":function(exports,require,module){(function(){var Svg,Tick,View,easingCurves,support,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};View=require("lib/view");Svg=require("inner/views/svg/svg");easingCurves=require("inner/lib/easingCurves");support=require("lib/support");Tick=function(_super){__extends(Tick,_super);Tick.prototype.className="tick";Tick.styles={DEFAULT:"default",CIRCLE:"circle"};function Tick(options){var allPaths,paths,_base;this.options=options!=null?options:{};this.show=__bind(this.show,this);
Tick.__super__.constructor.apply(this,arguments);if(!support.svg()){return}if((_base=this.options).style==null){_base.style=Tick.styles.DEFAULT}this.$el.addClass(this.options.style);allPaths={desktop:{ratio:2,size:{width:20,height:21},tick:"M19.5737665,20.1779617 C19.5737665,20.1779617 34.8168611,2.04335654 36.9767799,1.20667896 C39.1366985,0.370001237 40.9589655,2.19541775 39.4398738,4.49110998 C37.920782,6.7868022 22.480015,29.304816 21.2369754,30.4356148 C19.9939359,31.5664137 18.6938931,30.7624669 17.8567721,30.0673949 C17.0196511,29.3723228 10.6984917,19.1564921 10.185462,18.1407053 C9.67243229,17.1249184 10.3167075,15.14835 10.9878753,14.6844383 C11.6590432,14.2205266 13.2273231,14.3176111 14.2110897,15.1588056 C15.1948563,16.0000001 19.5737665,20.1779617 19.5737665,20.1779617 Z M19.5737665,20.1779617",tickShadow:"M39.4398738,6.49110998 C37.920782,8.7868022 22.480015,31.304816 21.2369754,32.4356148 C19.9939359,33.5664137 18.6938931,32.7624669 17.8567721,32.0673949 C17.0196511,31.3723228 10.6984917,21.1564921 10.185462,20.1407053 C9.91663196,19.6084281 9.96557592,18.8123384 10.1696481,18.1083191 C10.6984917,19.1564921 17.0196511,29.3723228 17.8567721,30.0673949 C18.6938931,30.7624669 19.9939359,31.5664137 21.2369754,30.4356148 C22.480015,29.304816 37.920782,6.7868022 39.4398738,4.49110998 C39.5693703,4.29541141 39.6745855,4.10313027 39.7573802,3.91562434 C40.1298954,4.55714918 40.1100187,5.47836894 39.4398738,6.49110998 Z M39.4398738,6.49110998",circle:"M40,20.7105938 C40,31.7562893 31.0456955,40.7105938 20,40.7105938 C8.95430446,40.7105938 0,31.7562893 0,20.7105938 C0,9.66489825 8.95430446,0.710593794 20,0.710593794 C22.9866476,0.710593794 25.8203918,1.3652506 28.3655635,2.53889501 L25.5702131,5.70686918 C23.8355704,5.06262269 21.9588956,4.71059379 20,4.71059379 C11.1634436,4.71059379 4,11.8740374 4,20.7105938 C4,29.5471502 11.1634436,36.7105938 20,36.7105938 C28.8365564,36.7105938 36,29.5471502 36,20.7105938 C36,19.9757511 35.9504613,19.2524789 35.8545414,18.5439344 L38.4901013,13.0734603 C39.4631141,15.4266023 40,18.0058998 40,20.7105938 Z M40,20.7105938",circleShadow:"M0.0245650027,21.7105938 C0.00825233792,22.0418717 0,22.375269 0,22.7105938 C0,33.7562893 8.95430446,42.7105938 20,42.7105938 C31.0456955,42.7105938 40,33.7562893 40,22.7105938 C40,22.375269 39.9917477,22.0418717 39.975435,21.7105938 C39.4544037,32.2917058 30.7103708,40.7105938 20,40.7105938 C9.28962923,40.7105938 0.545596257,32.2917058 0.0245650027,21.7105938 Z M27.0773052,3.99887976 C27.5142352,4.16422602 27.9438603,4.3444368 28.3655635,4.53889501 L25.5702131,7.70686918 C23.8355704,7.06262269 21.9588956,6.71059379 20,6.71059379 C11.4992942,6.71059379 4.54693833,13.3398637 4.03074198,21.7105938 C4.0103478,21.3798783 4,21.0464445 4,20.7105938 C4,11.8740374 11.1634436,4.71059379 20,4.71059379 C21.9588956,4.71059379 23.8355704,5.06262269 25.5702131,5.70686918 L27.0773052,3.99887976 Z M35.969258,21.7105938 C35.9450297,21.3177024 35.9066223,20.9286475 35.8545414,20.5439344 L35.9936442,20.255207 C35.997872,20.4064869 36,20.5582918 36,20.7105938 C36,21.0464445 35.9896522,21.3798783 35.969258,21.7105938 Z M35.969258,21.7105938"},tablet:{ratio:1,size:{width:28,height:31},tick:"M13.7016365,13.4245732 C13.7016365,13.4245732 24.3718028,0.730349576 25.8837459,0.144675271 C27.395689,-0.440999134 28.6712759,0.836792427 27.6079116,2.44377699 C26.5445474,4.05076154 15.7360105,19.8133712 14.8658828,20.6049304 C13.9957551,21.3964896 13.0857252,20.8337268 12.4997405,20.3471764 C11.9137558,19.860626 7.48894422,12.7095445 7.12982342,11.9984937 C6.7707026,11.2874429 7.22169523,9.90384497 7.69151272,9.57910679 C8.16133022,9.25436862 9.25912616,9.32232775 9.94776282,9.9111639 C10.6363994,10.5000001 13.7016365,13.4245732 13.7016365,13.4245732 Z M13.7016365,13.4245732",tickShadow:"M27.6401653,2.39401033 C28.0779966,2.83227761 28.1717048,3.59175766 27.6079116,4.44377699 C26.5445474,6.05076154 15.7360105,21.8133712 14.8658828,22.6049304 C13.9957551,23.3964896 13.0857252,22.8337268 12.4997405,22.3471764 C11.9137558,21.860626 7.48894422,14.7095445 7.12982342,13.9984937 C6.89336245,13.5303065 7.00812501,12.7705375 7.24822395,12.213447 C8.0447195,13.6058285 11.9516181,19.8920635 12.4997405,20.3471764 C13.0857252,20.8337268 13.9957551,21.3964896 14.8658828,20.6049304 C15.7360105,19.8133712 26.5445474,4.05076154 27.6079116,2.44377699 C27.6189124,2.42715231 27.6296629,2.41056285 27.6401653,2.39401033 Z M27.6401653,2.39401033",circle:"M28,14.4430509 C28,22.1750378 21.7319869,28.4430509 14,28.4430509 C6.26801312,28.4430509 0,22.1750378 0,14.4430509 C0,6.71106399 6.26801312,0.44305087 14,0.44305087 C16.1156079,0.44305087 18.121613,0.912315725 19.9196055,1.75243554 L18.4283421,3.28658971 C17.0581959,2.74227105 15.5640413,2.44305087 14,2.44305087 C7.37258267,2.44305087 2,7.81563354 2,14.4430509 C2,21.0704682 7.37258267,26.4430509 14,26.4430509 C20.6274173,26.4430509 26,21.0704682 26,14.4430509 C26,13.4952128 25.8901088,12.5730412 25.6823721,11.6885817 L27.1689213,9.68004053 C27.7067705,11.1668167 28,12.7706901 28,14.4430509 Z M28,14.4430509",circleShadow:"M0,16.4430509 C0,24.1750378 6.26801312,30.4430509 14,30.4430509 C21.7319869,30.4430509 28,24.1750378 28,16.4430509 C28,16.1068174 27.988147,15.7733524 27.964836,15.4430509 C27.4520895,22.7083268 21.3957534,28.4430509 14,28.4430509 C6.60424656,28.4430509 0.547910488,22.7083268 0.0351640458,15.4430509 C0.0118530331,15.7733524 0,16.1068174 0,16.4430509 Z M2.09284062,14.9430509 C2.05219595,14.6171066 2.02462333,14.2871027 2.01066393,13.9535805 C2.14300623,10.9639819 3.49841936,9.05800518 5.58836455,7.88475312 C3.70930417,9.73181153 2.43577562,12.1929313 2.09284062,14.9430509 Z M2.09284062,14.9430509"},mobile:{ratio:2,size:{width:25,height:26},tick:"M23.9907115,24.2639075 C23.9907115,24.2639075 41.4898281,3.21124413 43.969421,2.23993589 C46.4490138,1.26862748 48.5409816,3.38777367 46.7970599,6.05286814 C45.0531381,8.71796258 27.3270932,34.8593735 25.9000802,36.1721303 C24.4730672,37.4848872 22.9806144,36.5515765 22.019597,35.7446597 C21.0585797,34.9377429 13.8018705,23.0780722 13.2129109,21.8988341 C12.6239513,20.7195959 13.3635811,18.4249757 14.1340837,17.8864155 C14.9045863,17.3478553 16.7049762,17.4605618 17.8343431,18.4371138 C18.96371,19.4136658 23.9907115,24.2639075 23.9907115,24.2639075 Z M23.9907115,24.2639075",tickShadow:"M46.7970599,8.05286814 C45.0531381,10.7179626 27.3270932,36.8593735 25.9000802,38.1721303 C24.4730672,39.4848872 22.9806144,38.5515765 22.019597,37.7446597 C21.0585797,36.9377429 13.8018705,25.0780722 13.2129109,23.8988341 C12.9288022,23.3299804 12.9538575,22.5015762 13.1424041,21.7359485 C13.1633788,21.7922627 13.1868435,21.8466409 13.2129109,21.8988341 C13.8018705,23.0780722 21.0585797,34.9377429 22.019597,35.7446597 C22.9806144,36.5515765 24.4730672,37.4848872 25.9000802,36.1721303 C27.3270932,34.8593735 45.0531381,8.71796258 46.7970599,6.05286814 C46.9872232,5.76225696 47.1317759,5.47813737 47.235189,5.20380852 C47.5835876,5.9394822 47.5191368,6.9493764 46.7970599,8.05286814 Z M46.7970599,8.05286814",circle:"M46,25 C46,22.6826957 45.624662,20.4530564 44.931457,18.3685396 L47.7330746,14.5831524 C49.1885491,17.7543141 50,21.2823947 50,25 C50,38.8071194 38.8071194,50 25,50 C11.1928806,50 0,38.8071194 0,25 C0,11.1928806 11.1928806,0 25,0 C29.5471574,0 33.8107718,1.21399163 37.4844836,3.33558626 L34.6160714,6.32606807 C31.7349256,4.83943385 28.465493,4 25,4 C13.4020197,4 4,13.4020197 4,25 C4,36.5979803 13.4020197,46 25,46 C36.5979803,46 46,36.5979803 46,25 Z M46,25",circleShadow:"M50,27 C50,40.8071194 38.8071194,52 25,52 C11.1928806,52 0,40.8071194 0,27 C0,26.6650867 0.00658567765,26.3317116 0.0196345977,26.0000029 C0.544539838,39.3435354 11.5277939,50 25,50 C38.472207,50 49.4554616,39.343534 49.9803655,26.0000002 C49.9934144,26.3317137 50,26.6650878 50,27 Z M37.4844836,5.33558626 L34.6160714,8.32606807 C31.7349256,6.83943385 28.465493,6 25,6 C13.7372467,6 4.54534486,14.8663642 4.02339035,26.0000032 C4.00785479,25.6686194 4,25.335227 4,25 C4,13.4020197 13.4020197,4 25,4 C28.465493,4 31.7349256,4.83943385 34.6160714,6.32606807 L36.2204965,4.65336423 C36.6490115,4.86894706 37.0704932,5.09650382 37.4844836,5.33558626 Z M37.4844836,5.33558626"}};paths=allPaths.desktop;if(this.options.appType.isTablet()){paths=allPaths.tablet}else if(this.options.appType.isMobile()){paths=allPaths.mobile}if(this.options.style===Tick.styles.DEFAULT){this.circleSvg=new Svg({size:paths.size,color:"white",path:paths.circle,clipped:"circleClip",ratio:paths.ratio});this.$circleClipPath=this.circleSvg.addClipPath("M43.5,60 C71.3903812,60 94,37.3903812 94,9.5 C94,-18.3903812 71.3903812,-41 43.5,-41 C15.6096188,-41 -7,-18.3903812 -7,9.5 C-7,37.3903812 15.6096188,60 43.5,60 Z M43.5,60","circleClip");this.circleSvg.addPath(paths.circleShadow,"rgba(55, 153, 15, 0.5000)","circleClip");this.circleSvg.$el.transform({scale:1.8,opacity:0});this.$circleClipPath.transform({scale:.1},{origin:"50% 50%"});this.$el.append(this.circleSvg.$el)}else if(this.options.style===Tick.styles.CIRCLE){this.$el.hide();this.$el.transform({scale:.01})}this.tickSvg=new Svg({size:paths.size,color:"white",path:paths.tick,clipped:"clip1",ratio:paths.ratio});this.$tickClipPath=this.tickSvg.addClipPath("M0,0 L0,52 L50,52 L50,0 L0,0 Z M0,0","clip1");this.tickSvg.addPath(paths.tickShadow,"rgba(55, 153, 15, 0.5000)","clip1");this.tickSvg.$el.transform({scale:1.8});this.$tickClipPath.transform({rotateZ:90},{origin:"0% 0%"});this.$el.append(this.tickSvg.$el)}Tick.prototype.show=function(){if(!support.svg()){return}if(this.options.style===Tick.styles.DEFAULT){this.$circleClipPath.gfx({scale:1},{duration:300,easing:"ease-in-out"});this.circleSvg.$el.gfx({scale:1,opacity:1},{duration:300,easing:easingCurves.BOUNCING})}else if(this.options.style===Tick.styles.CIRCLE){this.$el.show();this.$el.gfx({scale:1},{duration:300,easing:easingCurves.BOUNCING})}return setTimeout(function(_this){return function(){_this.tickSvg.$el.gfx({scale:1},{duration:300,easing:easingCurves.BOUNCING});return _this.$tickClipPath.gfx({rotateZ:0},{duration:300,easing:"ease-in-out"})}}(this),190)};Tick.prototype.hide=function(callback){return callback()};return Tick}(View);module.exports=Tick}).call(this)}});(function(){StripeCheckout.require("lib/gfx");window.StripeCheckoutInner=true}).call(this);
//# sourceMappingURL=https://sourcemaps.stripe.com/checkout/v3/checkout/inner-uuTZYR2J6i7G24R0SApxZw.js.map